{"version":3,"sources":["../../src/classes/ObsTermsMap.ts","../../src/enums/LocationType.ts","../../src/enums/UserCallFunction.ts","../../src/classes/Location.ts","../../src/classes/EmrContent.ts","../../src/classes/PatientContact.ts","../../src/classes/Problem.ts","../../src/classes/Immunization.ts","../../src/classes/ObservationType.ts","../../src/classes/User.ts","../../src/classes/AllergyList.ts","../../node_modules/tslib/tslib.es6.js","../../src/classes/AllergyListRemoved.ts","../../src/factories/DocumentVariable.ts","../../src/factories/StringInternal.ts","../../src/factories/GetActiveXErrorMessage.ts","../../src/classes/Allergies.ts","../../src/classes/Observation.ts","../../src/classes/Protocol.ts","../../src/classes/Measurement.ts","../../src/classes/Measurements.ts","../../src/classes/Insurance.ts","../../src/classes/CarePlan.ts","../../src/classes/Address.ts","../../src/classes/Phone.ts","../../src/classes/ReferringProviderPhone.ts","../../src/classes/ReferringProvider.ts","../../src/bases/EmrBase.ts","../../src/factories/IsActiveXSupported.ts","../../src/classes/system.ts","../../src/classes/EmrMel.ts","../../src/classes/EmrApp.ts","../../src/classes/EmrWindow.ts","../../src/classes/exports/DemographicsExport.ts","../../src/classes/Emr.ts","../../src/classes/FlowsheetObservation.ts","../../src/classes/Patient.ts","../../src/classes/ClinicalDocument.ts","../../src/classes/Users.ts","../../src/factories/GetCurrentUser.ts","../../src/classes/MdObject.ts","../../src/consts/version.ts","../../src/consts/productType.ts","../../src/public.ts"],"names":["LocationType","UserCallFunction","ObsTermsMap","this","weight","height","Location","id","name","locationType","None","EmrContent","_value","_mel","_window","_this","data","split","isNew","contentId","length","key","value","_unk0","_unk1","_unk2","_unk3","_unk4","_unk5","toAddString","encodeValue","recordValue","btoa","save","melFunc","remove","PatientContact","type","phone","phoneType","address1","address2","city","state","zip","country","address","concat","toMelString","Problem","description","codeIcd9","comment","onsetDate","stopDate","stopReason","codeIcd10","lastModifiedDate","Object","defineProperty","prototype","_problemId","index","indexOf","substr","Immunization","immunizationId","immunizationGroupId","vaccineGroupName","vaccineName","medicalDisplayName","series","wasGiven","reasonNotGiven","historical","historicalSource","vfcElegibility","ddid","dnid","gpi","kdc","ndc","cvxCode","doseAmount","dosageUnitOfMeasure","route","routeCode","site","siteCode","manufacturer","manufacturerCode","lotNumber","expirationDate","visPublishedDate","administeredByName","administeredDate","administeredDateType","administeredComments","advReactionDateTime","advReactionDateTimeType","advReactionComments","advReactionCmtByName","signed","signedByName","signedDate","reasonRemoved","reasonNotGivenMedical","reasonNotGivenMedicalDetail","isError","validateAdd","response","toStringAdd","alert","match","ObservationType","Signed","DocumentUnsigned","User","callFunction","UserInfo","loginName","searchName","phoneNumber","homeLocation","group","jobTitle","specialty","roles","npi","prescriberId","deaId","stateLicenceId","memberLogin","data2000","uniquePhysicianId","activationDate","currentLocation","firstName","middleName","lastName","UserList","AllergyList","onDate","classification","gpiCode","severity","offDate","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","create","AllergyListRemoved","_super","call","DocumentVariable","saveCallback","result","StringInternal","tag","String","toList","seporator","dataArray","filter","item","startsWith","str","slice","endsWith","toDate","Date","toString","GetActiveXErrorMessage","objectName","e","Message","Allergies","_addedArray","_currentArray","_removedArray","_added","push","_current","_removed","Observation","_name","_observationType","observationType","date","time","signingUser","enteringUser","flags","locationOfCare","documentType","documentId","saveObservation","_unitOfMeasure","_tag","Protocol","Measurement","isCurrent","_weight","_height","getObs","Measurements","_previous","Insurance","insuranceType","_address","_insuranceId","_planName","_groupNumber","_phone","CarePlan","carePlanId","goal","snomedCTCode","target","instructions","goalSetDate","goalMetDate","recordCreatedDateTime","sign","signedBy","recordChangedDateTime","recordChangedBy","patientConditionDescription","patientConditionCode","carePlanAddError","code","Address","_address1","_address2","_city","_country","_postCode","_state","Phone","_home","_business","_mobile","_fax","ReferringProviderPhone","_office","_alternative","_pager","ReferringProvider","_referringProviderId","_firstName","_lastName","_email","_fullAddress","EmrBase","isActiveXSupported","IsActiveXSupported","noData","System","parseInt","toImage","arrayBuffer","fromCharCode","apply","Uint8Array","isSimulator","EmrMel","melObjectName","melObjectNameSimulator","initialization","mel","ActiveXObject","errorMessage","eval","obs","OBSNOW","OBSPREV","showUrlDialog","url","EmrApp","appObjectName","appObjectNameSimulator","app","SetPasscode","external","ShowURLDialog","EnterpriseID","DatabaseVersion","EmrWindow","_app","_document","openDialog","toLowerCase","open","verb","features","form","createElement","action","method","input","JSON","stringify","appendChild","style","display","body","submit","DemographicsExport","json","obj","parse","confidentialityCode","contactList","electronicAddressList","excludedUserAccess","excludedUserAccessSpecified","guarantorList","guardianList","hasPatientAccess","hasPatientAccessSpecified","healthIssueList","identifierList","lastOfficeVisitDate","lastOfficeVisitDateSpecified","mailingAddressList","medicareAdvantagePatient","medicareAdvantagePatientSpecified","mqicEPatientId","mqicEPatientIdSpecified","organization","patientKey","patientKeySpecified","patientPicture","person","personAge","preferredLanguage","primaryProviderRelationshipList","registrationNote","statusCode","vipCode","Emr","_melContent","_emrWindow","emrMel","emrApp","melContent","data_1","melContentArray","enterpriseId","_external","opener","databaseVersion","_version","_emrMel","undefined","_emrApp","_baseServicesUrl","BaseServicesUrl","_demographics","Demographics","FlowsheetObservation","Patient","_contactsArray","_problemsArray","_observations","_observatiosArray","_protocolsArray","_insurances","_immunizationsArray","_carePlansArray","_locationsArray","_measurements","_allergies","_referringProvider","_emr","observations","observationsArray","dataArrayU","_patientId","_pid","_medicalRecordId","_externalId","_printId","_ssn","_middleName","_labelName","_namePrefix","_nameSuffix","_sex","_race","_ethnicity","_dateOfBirth","_dateOfDeath","_maritalStatus","_language","_contactBy","_registrationNote","_contacts","_employmentStatus","_clinicStatus","_primaryCarePhysicianName","_problems","flowsheetObservations","flowsheet","flowsheetValue","_observationList","_protocols","_immunizations","_carePlans","_locations","_locationsId","locationProperty","Home","findByType","ClinicalDocument","_locationPropertyArray","rawValue","replace","val","_letiables","_did","_xid","_documentId","_status","_location","_locationProperty","Current","i","_dateOfUpdate","_provider","_userLoginName","Users","_usersArray","getUser","_user","_currentUser","GetCurrentUser","getUsers","_users","MdObject","_obsTermsMap","_clinicalDocument","emr","_patient","obsTermsMap","Error","window","mdObject","document","console","error"],"mappings":"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","sourcesContent":["export class ObsTermsMap {\r\n    weight: string = 'Weight';\r\n    height: string = 'Height';\r\n\r\n    constructor() { }\r\n}","export enum LocationType {\r\n    None = 0,\r\n    Home = 1,\r\n    Current = 2\r\n}\r\n","export enum UserCallFunction {\r\n    None = 0,\r\n    UserList = 1,\r\n    UserInfo = 2\r\n}\r\n","import { LocationType } from '../enums/enums';\r\n\r\nexport class Location {\r\n\r\n    constructor(\r\n        public id: string,\r\n        public name: string,\r\n        public locationType: LocationType\r\n    ) {\r\n        this.id = (this.id != null) ? this.id : '';\r\n        this.name = (this.name != null) ? this.name : '';\r\n        this.locationType = (this.locationType != null) ? this.locationType : LocationType.None\r\n    }\r\n}","import { EmrMel } from './classes';\r\n\r\nexport class EmrContent {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n    private isNew: boolean = (this._value == null) ? true : false;\r\n\r\n    contentId: string = (this.data.length > 0) ? this.data[0] : '';\r\n    key: string = (this.data.length > 1) ? this.data[1] : '';\r\n    name: string = (this.data.length > 2) ? this.data[2] : '';\r\n    value: string = (this.data.length > 3) ? this.data[3] : '';\r\n    _unk0: string = (this.data.length > 4) ? this.data[4] : '';\r\n    _unk1: string = (this.data.length > 5) ? this.data[5] : '';\r\n    _unk2: string = (this.data.length > 6) ? this.data[6] : '';\r\n    _unk3: string = (this.data.length > 7) ? this.data[7] : '';\r\n    _unk4: string = (this.data.length > 8) ? this.data[8] : '';\r\n    _unk5: string = (this.data.length > 9) ? this.data[9] : '';\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public _mel: EmrMel,\r\n        public _window: any\r\n    ) { }\r\n\r\n    toAddString = (encodeValue: string): string => {\r\n        let recordValue = (encodeValue == null) ? this.value : this._window.btoa(this.value);\r\n        return this.key + '^' +\r\n            this.name + '^' +\r\n            recordValue + '^' +\r\n            this._unk0 + '^' +\r\n            this._unk1 + '^' +\r\n            this._unk2 + '^' +\r\n            this._unk3 + '^' +\r\n            this._unk4 + '^' +\r\n            this._unk5;\r\n    }\r\n\r\n    save = (encodeValue: string): void => {\r\n        if (this.isNew) {\r\n            this._mel.melFunc('{MEL_ADD_CONTENT(\"' + this.toAddString(encodeValue) + '\")}');\r\n            this.isNew = false;\r\n        } else {\r\n            this._mel.melFunc('{MEL_REMOVE_CONTENT(\"' + this.contentId + '\")}');\r\n            this._mel.melFunc('{MEL_ADD_CONTENT(\"' + this.toAddString(encodeValue) + '\")}');\r\n        }\r\n    }\r\n\r\n    remove = (): void => {\r\n        this._mel.melFunc('{MEL_REMOVE_CONTENT(\"' + this.contentId + '\")}');\r\n    }\r\n}","export class PatientContact {\r\n\r\n    private data = (this._value == null) ? [] : this._value.split('^');\r\n    name: string = (this.data.length > 0) ? this.data[0] : '';\r\n    type: string = (this.data.length > 1) ? this.data[1] : '';\r\n    phone: string = (this.data.length > 2) ? this.data[2] : '';\r\n    phoneType: string = (this.data.length > 3) ? this.data[3] : '';\r\n    address1: string = (this.data.length > 4) ? this.data[4] : '';\r\n    address2: string = (this.data.length > 5) ? this.data[5] : '';\r\n    city: string = (this.data.length > 6) ? this.data[6] : '';\r\n    state: string = (this.data.length > 7) ? this.data[7] : '';\r\n    zip: string = (this.data.length > 8) ? this.data[8] : '';\r\n    country: string = (this.data.length > 9) ? this.data[9] : '';\r\n    address: string = this.address1.concat(' ' + this.address2);\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n\r\n    toMelString = (): string => {\r\n        return this._value;\r\n    }\r\n}","export class Problem {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n    private _problemId: string;\r\n\r\n    type: string = (this.data.length > 0) ? this.data[0] : '';\r\n    description: string = (this.data.length > 1) ? this.data[1] : '';\r\n    codeIcd9: string = (this.data.length > 2) ? this.data[2] : '';\r\n    comment: string = (this.data.length > 3) ? this.data[3] : '';\r\n    onsetDate: string = (this.data.length > 4) ? this.data[4] : '';\r\n    stopDate: string = (this.data.length > 5) ? this.data[5] : '';\r\n    stopReason: string = (this.data.length > 6) ? this.data[6] : '';\r\n    codeIcd10: string = (this.data.length > 7) ? this.data[7] : '';\r\n    lastModifiedDate: string = (this.data.length > 9) ? this.data[9] : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n\r\n    get problemId(): string {\r\n        this._problemId = (this.data.length > 8) ? this.data[8] : '';\r\n        let index = this._problemId.indexOf('.');\r\n        this._problemId = (index > -1) ? this._problemId.substr(0, index) : this._problemId;\r\n        return this._problemId;\r\n    }\r\n}","import { EmrMel } from './classes'\r\n\r\nexport class Immunization {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n    private isNew: boolean = this._value == null ? true : false;\r\n\r\n    immunizationId: string = (this.data.length > 0) ? this.data[0] : '';\r\n    immunizationGroupId: string = (this.data.length > 1) ? this.data[1] : '';\r\n    vaccineGroupName: string = (this.data.length > 2) ? this.data[2] : '';\r\n    vaccineName: string = (this.data.length > 3) ? this.data[3] : '';\r\n    medicalDisplayName: string = (this.data.length > 4) ? this.data[4] : '';\r\n    series: string = (this.data.length > 5) ? this.data[5] : '';\r\n    wasGiven: string = (this.data.length > 6) ? this.data[6] : '';\r\n    reasonNotGiven: string = (this.data.length > 7) ? this.data[7] : '';\r\n    historical: string = (this.data.length > 8) ? this.data[8] : '';\r\n    historicalSource: string = (this.data.length > 9) ? this.data[9] : '';\r\n    vfcElegibility: string = (this.data.length > 10) ? this.data[10] : '';\r\n    ddid: string = (this.data.length > 11) ? this.data[11] : '';\r\n    dnid: string = (this.data.length > 12) ? this.data[12] : '';\r\n    gpi: string = (this.data.length > 13) ? this.data[13] : '';\r\n    kdc: string = (this.data.length > 14) ? this.data[14] : '';\r\n    ndc: string = (this.data.length > 15) ? this.data[15] : '';\r\n    cvxCode: string = (this.data.length > 16) ? this.data[16] : '';\r\n    doseAmount: string = (this.data.length > 17) ? this.data[17] : '';\r\n    dosageUnitOfMeasure: string = (this.data.length > 18) ? this.data[18] : '';\r\n    route: string = (this.data.length > 19) ? this.data[19] : '';\r\n    routeCode: string = (this.data.length > 20) ? this.data[20] : '';\r\n    site: string = (this.data.length > 21) ? this.data[21] : '';\r\n    siteCode: string = (this.data.length > 22) ? this.data[22] : '';\r\n    manufacturer: string = (this.data.length > 23) ? this.data[23] : '';\r\n    manufacturerCode: string = (this.data.length > 24) ? this.data[24] : '';\r\n    lotNumber: string = (this.data.length > 25) ? this.data[25] : '';\r\n    expirationDate: string = (this.data.length > 26) ? this.data[26] : '';\r\n    visPublishedDate: string = (this.data.length > 27) ? this.data[27] : '';\r\n    administeredByName: string = (this.data.length > 28) ? this.data[28] : '';\r\n    administeredDate: string = (this.data.length > 29) ? this.data[29] : '';\r\n    administeredDateType: string = (this.data.length > 30) ? this.data[30] : '';\r\n    administeredComments: string = (this.data.length > 31) ? this.data[31] : '';\r\n    advReactionDateTime: string = (this.data.length > 32) ? this.data[32] : '';\r\n    advReactionDateTimeType: string = (this.data.length > 33) ? this.data[33] : '';\r\n    advReactionComments: string = (this.data.length > 34) ? this.data[34] : '';\r\n    advReactionCmtByName: string = (this.data.length > 35) ? this.data[35] : '';\r\n    signed: string = (this.data.length > 36) ? this.data[36] : '';\r\n    signedByName: string = (this.data.length > 37) ? this.data[37] : '';\r\n    signedDate: string = (this.data.length > 38) ? this.data[38] : '';\r\n    reasonRemoved: string = (this.data.length > 39) ? this.data[39] : '';\r\n    stopDate: string = (this.data.length > 40) ? this.data[40] : '';\r\n    reasonNotGivenMedical: string = (this.data.length > 41) ? this.data[41] : '';\r\n    reasonNotGivenMedicalDetail: string = (this.data.length > 42) ? this.data[42] : '';\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = (): void => {\r\n        if (this.isNew) {\r\n            let isError = this.validateAdd();\r\n            let response;\r\n            if (isError === '') {\r\n                response = this._mel.melFunc('{IMMUN_ADD(\"' + this.toStringAdd() + '\")}');\r\n                if (response < 0) {\r\n                    alert(response);\r\n                }\r\n            } else {\r\n                alert(isError);\r\n            }\r\n        } else {\r\n            // TODO: add updating of model\r\n        }\r\n    }\r\n\r\n    toMelString = (): string => {\r\n        return this._value;\r\n    }\r\n\r\n    validateAdd = (): string => {\r\n        let errorMessage = ' is required.';\r\n        // check required parameters\r\n        if (this.vaccineGroupName === '') {\r\n            return 'vaccineGroupName' + errorMessage;\r\n        }\r\n        if (this.wasGiven === '') {\r\n            return 'wasGiven' + errorMessage;\r\n        }\r\n        if (this.historical === '') {\r\n            return 'historical' + errorMessage;\r\n        }\r\n        if (this.vfcElegibility === '') {\r\n            return 'vfcElegibility' + errorMessage;\r\n        }\r\n        if (this.administeredDate === '') {\r\n            return 'administeredDate' + errorMessage;\r\n        }\r\n        if (this.doseAmount.match(/[0-9]{1,25}/g) == null) {\r\n            return 'doseAmount should be numeric.';\r\n        }\r\n        return '';\r\n    }\r\n\r\n    toStringAdd = (): string => {\r\n        return this.vaccineGroupName + '^' + \r\n            this.vaccineName + '^' +\r\n            this.medicalDisplayName + '^' +\r\n            this.series + '^' +\r\n            this.wasGiven + '^' +\r\n            this.reasonNotGiven + '^' +\r\n            this.historical + '^' +\r\n            this.historicalSource + '^' +\r\n            this.vfcElegibility + '^' +\r\n            this.ddid + '^' +\r\n            this.dnid + '^' +\r\n            this.gpi + '^' +\r\n            this.kdc + '^' +\r\n            this.ndc + '^' +\r\n            this.cvxCode + '^' +\r\n            this.doseAmount + '^' +\r\n            this.dosageUnitOfMeasure + '^' +\r\n            this.route + '^' +\r\n            this.routeCode + '^' +\r\n            this.site + '^' +\r\n            this.siteCode + '^' +\r\n            this.manufacturer + '^' +\r\n            this.manufacturerCode + '^' +\r\n            this.lotNumber + '^' +\r\n            this.expirationDate + '^' +\r\n            this.visPublishedDate + '^' +\r\n            this.administeredByName + '^' +\r\n            this.administeredDate + '^' +\r\n            this.administeredDateType + '^' +\r\n            this.administeredComments + '^' +\r\n            this.advReactionDateTime + '^' +\r\n            this.advReactionDateTimeType + '^' +\r\n            this.advReactionComments + '^' +\r\n            this.advReactionCmtByName + '^' +\r\n            this.signed + '^' +\r\n            this.signedByName + '^' +\r\n            this.signedDate + '^' +\r\n            this.reasonRemoved + '^' +\r\n            this.stopDate + '^' +\r\n            this.reasonNotGivenMedical + '^' +\r\n            this.reasonNotGivenMedicalDetail;\r\n    }\r\n}","export class ObservationType {\r\n\r\n    None: string = 'Undefined';\r\n    Signed: string = 'Signed';\r\n    DocumentUnsigned: string = 'Update';\r\n\r\n    constructor() { }\r\n}","import { UserCallFunction } from '../enums/enums';\r\n\r\nexport class User {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    loginName: string;\r\n    searchName: string;\r\n    phoneNumber: string;\r\n    homeLocation: string;\r\n    group: string;\r\n    jobTitle: string;\r\n    specialty: string;\r\n    roles: Array<string>;\r\n    npi: string;\r\n    prescriberId: string;\r\n    deaId: string;\r\n    stateLicenceId: string;\r\n    memberLogin: string;\r\n    data2000: string;\r\n    uniquePhysicianId: string;\r\n    activationDate: string;\r\n    expirationDate: string;\r\n    currentLocation: string;\r\n    firstName: string;\r\n    middleName: string;\r\n    lastName: string;\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public callFunction: UserCallFunction\r\n    ) {\r\n        if (callFunction === UserCallFunction.UserInfo) {\r\n            this.loginName = (this.data.length > 0) ? this.data[0] : '';\r\n            this.searchName = (this.data.length > 1) ? this.data[1] : '';\r\n            this.phoneNumber = (this.data.length > 2) ? this.data[2] : '';\r\n            this.homeLocation = (this.data.length > 3) ? this.data[3] : '';\r\n            this.group = (this.data.length > 4) ? this.data[4] : '';\r\n            this.jobTitle = (this.data.length > 5) ? this.data[5] : '';\r\n            this.specialty = (this.data.length > 6) ? this.data[6] : '';\r\n            this.roles = (this.data.length > 7) ? this.data[7].split(';') : [];\r\n            this.npi = (this.data.length > 8) ? this.data[8] : '';\r\n            this.prescriberId = (this.data.length > 9) ? this.data[9] : '';\r\n            this.deaId = (this.data.length > 10) ? this.data[10] : '';\r\n            this.stateLicenceId = (this.data.length > 11) ? this.data[11] : '';\r\n            this.memberLogin = (this.data.length > 12) ? this.data[12] : '';\r\n            this.data2000 = (this.data.length > 13) ? this.data[13] : '';\r\n            this.uniquePhysicianId = (this.data.length > 14) ? this.data[14] : '';\r\n            this.activationDate = (this.data.length > 15) ? this.data[15] : '';\r\n            this.expirationDate = (this.data.length > 16) ? this.data[16] : '';\r\n            this.currentLocation = (this.data.length > 17) ? this.data[17] : '';\r\n            this.firstName = (this.data.length > 18) ? this.data[18] : '';\r\n            this.middleName = (this.data.length > 19) ? this.data[19] : '';\r\n            this.lastName = (this.data.length > 20) ? this.data[20] : '';\r\n        }\r\n\r\n        if (callFunction === UserCallFunction.UserList) {\r\n            this.loginName = (this.data.length > 0) ? this.data[0] : '';\r\n            this.searchName = (this.data.length > 1) ? this.data[1] : '';\r\n            this.phoneNumber = (this.data.length > 2) ? this.data[2] : '';\r\n            this.homeLocation = (this.data.length > 3) ? this.data[3] : '';\r\n            this.group = (this.data.length > 4) ? this.data[4] : '';\r\n            this.jobTitle = (this.data.length > 5) ? this.data[5] : '';\r\n            this.specialty = (this.data.length > 6) ? this.data[6] : '';\r\n            this.npi = (this.data.length > 7) ? this.data[7] : '';\r\n            this.prescriberId = (this.data.length > 8) ? this.data[8] : '';\r\n            this.deaId = (this.data.length > 9) ? this.data[9] : '';\r\n            this.stateLicenceId = (this.data.length > 10) ? this.data[10] : '';\r\n            this.memberLogin = (this.data.length > 11) ? this.data[11] : '';\r\n            this.data2000 = (this.data.length > 12) ? this.data[12] : '';\r\n            this.uniquePhysicianId = (this.data.length > 13) ? this.data[13] : '';\r\n            this.activationDate = (this.data.length > 14) ? this.data[14] : '';\r\n            this.expirationDate = (this.data.length > 15) ? this.data[15] : '';\r\n            this.roles = [];\r\n        }\r\n    }\r\n\r\n    toMelString = () => {\r\n        return this._value;\r\n    }\r\n}","import { IAllergyData } from '../interfaces/interfaces';\r\n\r\nexport class AllergyList implements IAllergyData {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    name = (this.data.length > 0) ? this.data[0] : '';\r\n    onDate = (this.data.length > 1) ? this.data[1] : '';\r\n    classification = (this.data.length > 3) ? this.data[3] : '';\r\n    description = (this.data.length > 4) ? this.data[4] : '';\r\n    gpiCode = (this.data.length > 5) ? this.data[5] : '';\r\n    severity = (this.data.length > 6) ? this.data[6] : '';\r\n    offDate = null;\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { AllergyList } from './AllergyList';\r\n\r\nexport class AllergyListRemoved extends AllergyList {\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) {\r\n        super(_value);\r\n    }\r\n}","import { IItem } from '../interfaces/interfaces';\r\n\r\nexport function DocumentVariable(value, saveCallback): IItem {\r\n    let result: IItem = (value == null) ? new Object() : value;\r\n    result.save = () => {\r\n        if (saveCallback != null) {\r\n            saveCallback();\r\n        }\r\n    }\r\n    return result;\r\n}","import { IStringInternal } from '../interfaces/interfaces';\r\n\r\nexport function StringInternal(value: string, tag?: string): IStringInternal {\r\n    let result: IStringInternal = new String(value) as IStringInternal;\r\n\r\n    // Function parse string object to array of string \r\n    result.toList = (seporator?: string): Array<string> => {\r\n        if (seporator == null) {\r\n            seporator = '|';\r\n        }\r\n        let dataArray = value.split(seporator);\r\n        /*jslint plusplus: true */\r\n        dataArray = dataArray.filter((item) => {\r\n            return item.length !== 0;\r\n        });\r\n        return dataArray;\r\n    }\r\n\r\n    // String helper function to validate that string start with specified string\r\n    result.startsWith = (str: string) => {\r\n        return value.slice(0, str.length) === str;\r\n    }\r\n\r\n    // String helper function to validate that string end with specified string\r\n    result.endsWith = (str: string) => {\r\n        return value.slice(-str.length) === str;\r\n    }\r\n\r\n    result.tag = (tag != null) ? tag : '';\r\n\r\n    result.toDate = () => {\r\n        return new Date(value.toString());\r\n    }\r\n\r\n    return result;\r\n}","export function GetActiveXErrorMessage(objectName: string, e: { Message: string }) {\r\n    let result = \"Unable to load ActiveX interface \" + objectName;\r\n    result += ((e != null && e.hasOwnProperty(\"Message\")) ? \".\\nError message: \" + e.Message : \"\");\r\n    return result;\r\n}","import { AllergyList } from './AllergyList';\r\nimport { AllergyListRemoved } from './AllergyListRemoved';\r\nimport { EmrMel } from './EmrMel';\r\nimport { StringInternal } from '../factories/factories';\r\nimport { IArrayAdditionalMethods } from '../interfaces/interfaces';\r\n\r\nexport class Allergies {\r\n\r\n    private _added: string;\r\n    private _addedArray: IArrayAdditionalMethods<AllergyList> = [];\r\n    private _current: string;\r\n    private _currentArray: IArrayAdditionalMethods<AllergyList> = [];\r\n    private _removed: string;\r\n    private _removedArray: IArrayAdditionalMethods<AllergyListRemoved> = [];\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get added() {\r\n        if (this._addedArray.length === 0) {\r\n            this._added = (this._added != null) ? this._added : this._mel.melFunc('{ALL_NEW(\"delimited\")}');\r\n            let dataArray = StringInternal(this._added).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._addedArray.push(new AllergyList(dataArray[index]));\r\n            }\r\n        }\r\n        return this._addedArray;\r\n    }\r\n\r\n    get current() {\r\n        if (this._currentArray.length === 0) {\r\n            this._current = (this._current != null) ? this._current : this._mel.melFunc('{ALL_PRIOR(\"delimited\")}');\r\n            let dataArray = StringInternal(this._current).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._currentArray.push(new AllergyListRemoved(dataArray[index]));\r\n            }\r\n        }\r\n        return this._currentArray;\r\n    }\r\n    \r\n    get removed() {\r\n        if (this._removedArray.length === 0) {\r\n            this._removed = (this._removed != null) ? this._removed : this._mel.melFunc('{ALL_REMOVED(\"delimited\")}');\r\n            let dataArray = StringInternal(this._removed).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._removedArray.push(new AllergyListRemoved(dataArray[index]));\r\n            }\r\n        }\r\n        return this._removedArray;\r\n    }\r\n}","import { ObservationType } from './ObservationType';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class Observation {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n    private _unitOfMeasure;\r\n    private _tag;\r\n    private readonly observationType: ObservationType = new ObservationType();\r\n\r\n    name: string = (this._name != null) ? this._name : '';\r\n    value: string = (this.data.length > 0) ? this.data[0] : '';\r\n    date: string = (this.data.length > 1) ? this.data[1] : '';\r\n    time: string = (this.data.length > 2) ? this.data[2] : '';\r\n    signingUser: string = (this.data.length > 3) ? this.data[3] : '';\r\n    enteringUser: string = (this.data.length > 4) ? this.data[4] : '';\r\n    flags: string = (this.data.length > 5) ? this.data[5] : '';\r\n    comment: string = (this.data.length > 6) ? this.data[6] : '';\r\n    state: string = (this.data.length > 7) ? this.data[7] : '';\r\n    locationOfCare: string = (this.data.length > 8) ? this.data[8] : '';\r\n    documentType: string = (this.data.length > 9) ? this.data[9] : '';\r\n    documentId: string = (this.data.length > 10) ? this.data[10] : '';\r\n    type: string = this._observationType;\r\n\r\n    constructor(\r\n        public _name: string,\r\n        public _observationType: string,\r\n        public _value: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = (): string => {\r\n        let response = this._mel.saveObservation(this.name, this.value, this.date); //  this._mel.melFunc('{OBSNOW(\"' + this.name + '\",\"' + this.value + '\")}');\r\n        if (this.tag != null && this.tag != '') {\r\n            response = this._mel.melFunc('{OBSTAGNOW(\"' + this.name + '\",\"' + this.tag + '\")}');\r\n        }\r\n        if (this.comment != null && this.comment != '') {\r\n            response = this._mel.melFunc('{OBSMODIFIERNOW(\"' + this.name + '\",\"' + this.comment + '\")}');\r\n        }\r\n        return response;\r\n    }\r\n\r\n    remove = (): void => {\r\n\r\n    }\r\n\r\n    get unitOfMeasure() {\r\n        this._unitOfMeasure = (this._unitOfMeasure != null) ? this._unitOfMeasure : this._mel.melFunc('{OBSUNIT(\"' + this.name + '\")}');\r\n        return this._unitOfMeasure;\r\n    }\r\n\r\n    get tag() {\r\n        this._tag = (this._tag != null) ? this._tag\r\n            : (this._observationType === this.observationType.DocumentUnsigned) ? this._mel.melFunc('{OBSTAGNOW(\"' + this.name + '\")}')\r\n                : '';\r\n        return this._tag;\r\n    }\r\n}\r\n","export class Protocol {\r\n\r\n    name: string = (this._value != null) ? this._value : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n}","import { ObsTermsMap, EmrMel } from './classes';\r\n\r\nexport class Measurement implements ObsTermsMap {\r\n\r\n    constructor(\r\n        public isCurrent: boolean,\r\n        public _weight: string,\r\n        public _height: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    // mdObject.obsTermsMap.weight\r\n    get weight(): string {\r\n        return this._mel.getObs(this.isCurrent, this._weight);\r\n    }\r\n\r\n    // mdObject.obsTermsMap.height\r\n    get height(): string {\r\n        return this._mel.getObs(this.isCurrent, this._height);\r\n    }\r\n}","import { Measurement } from './Measurement';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class Measurements {\r\n\r\n    private _current: Measurement;\r\n    private _previous: Measurement;\r\n\r\n    constructor(\r\n        public _weight: string,\r\n        public _height: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get current() {\r\n        return (this._current != null) ? this._current : new Measurement(true, this._weight, this._height, this._mel);\r\n    }\r\n\r\n    get previous() {\r\n        return (this._previous != null) ? this._previous : new Measurement(false, this._weight, this._height, this._mel);\r\n    }\r\n}","import { EmrMel } from './classes';\r\n\r\nexport class Insurance {\r\n\r\n    private _name: string;\r\n    private _address: string;\r\n    private _insuranceId: string;\r\n    private _planName: string;\r\n    private _groupNumber: string;\r\n    private _phone: string;\r\n\r\n\r\n    constructor(\r\n        public insuranceType: string, // Type of insurance P = Primary S = Secondary O = Other,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    // The name of the patients insurance carrier.\r\n    get name() {\r\n        this._name = (this._name == null) ? this._mel.melFunc('{INS_NAME(\"' + this.insuranceType + '\")}') : this._name;\r\n        return this._name;\r\n    }\r\n\r\n    // The name and address of the patients insurance carrier.\r\n    get address() {\r\n        this._address = (this._address == null) ? this._mel.melFunc('{INS_ADDR(\"' + this.insuranceType + '\")}') : this._address;\r\n        return this._address;\r\n    }\r\n\r\n    // The patients insurance ID number for insurance carrier.\r\n    get insuranceId() {\r\n        this._insuranceId = (this._insuranceId == null) ? this._mel.melFunc('{INS_ID(\"' + this.insuranceType + '\")}') : this._insuranceId;\r\n        return this._insuranceId;\r\n    }\r\n\r\n    // The name of the patients plan for insurance\r\n    get planName() {\r\n        this._planName = (this._planName == null) ? this._mel.melFunc('{INS_PLAN(\"' + this.insuranceType + '\")}') : this._planName;\r\n        return this._planName;\r\n    }\r\n\r\n    // The group number of the patients insurance carrier.\r\n    get groupNumber() {\r\n        this._groupNumber = (this._groupNumber == null) ? this._mel.melFunc('{INS_GRP(\"' + this.insuranceType + '\")}') : this._groupNumber;\r\n        return this._groupNumber;\r\n    }\r\n\r\n    // The phone number of the patients insurance company\r\n    get phone() {\r\n        this._phone = (this._phone == null) ? this._mel.melFunc('{INS_PHONE(\"' + this.insuranceType + '\")}') : this._phone;\r\n        return this._phone;\r\n    }\r\n}","import { EmrMel } from './EmrMel';\r\n\r\nexport class CarePlan {\r\n\r\n    private data = this._value == null ? [] : this._value.split('^');\r\n    private isNew = this._value == null ? true : false;\r\n\r\n    carePlanId: string = (this.data.length > 0) ? this.data[0] : '';\r\n    goal: string = (this.data.length > 1) ? this.data[1] : '';\r\n    snomedCTCode: string = (this.data.length > 2) ? this.data[2] : '';\r\n    target: string = (this.data.length > 3) ? this.data[3] : '';\r\n    instructions: string = (this.data.length > 4) ? this.data[4] : '';\r\n    goalSetDate: string = (this.data.length > 5) ? this.data[5] : '';\r\n    goalMetDate: string = (this.data.length > 6) ? this.data[6] : '';\r\n    recordCreatedDateTime: string = (this.data.length > 7) ? this.data[7] : '';\r\n    sign: string = (this.data.length > 8) ? this.data[8] : '';\r\n    signedBy: string = (this.data.length > 9) ? this.data[9] : '';\r\n    signedDate: string = (this.data.length > 10) ? this.data[10] : '';\r\n    recordChangedDateTime: string = (this.data.length > 11) ? this.data[11] : '';\r\n    recordChangedBy: string = (this.data.length > 12) ? this.data[12] : '';\r\n    patientConditionDescription: string = (this.data.length > 13) ? this.data[13] : '';\r\n    patientConditionCode: string = (this.data.length > 14) ? this.data[14] : '';\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = (): void => {\r\n        if (this.isNew) {\r\n            let isError = this.validateAdd(); //TODO ADD VALIDATION\r\n            let response;\r\n            if (isError === '') {\r\n                response = this._mel.melFunc('{MEL_ADD_CARE_PLAN(' + this.toStringAdd() + ')}');\r\n                if (response < 0) {\r\n                    alert(this.carePlanAddError(response));\r\n                }\r\n            } else {\r\n                alert(isError);\r\n            }\r\n        }\r\n        else {\r\n            //update ;\r\n            //{MEL_UPDATE_CARE_PLAN(\"1691155657053120\",\"Goal-Exercise to lose weight\",\"\",\"\",\"\" ,\"\",\"2013/08/03\" ,\"\")}\r\n            //err_code = Mel.eval(\"{MEL_UPDATE_CARE_PLAN(\\\"\" +careplanID + \"\\\",\\\"\" +DB_TimeStamp + \"\\\",\\\"\" +goal_sel + \"\\\",\\\"\" +snomed_code + \"\\\",\\\"\" +target + \"\\\",\\\"\" +ins_sel + \"\\\",\\\"\" +sdate + \"\\\",\\\"\" +mdate + \"\\\",\\\"\" +problemID + \"\\\")}\");\r\n        }\r\n    }\r\n\r\n    toMelString = (): string => {\r\n        return this._value;\r\n    }\r\n\r\n    validateAdd = (): string => {\r\n        let errorMessage: string = ' is required.';\r\n        // check required parameters\r\n        if (this.goal === '') {\r\n            return 'goal' + errorMessage;\r\n        }\r\n        return '';\r\n    }\r\n\r\n    //MEL symbol for adding care this._value - format\r\n    //MEL_ADD_CARE_PLAN (Goal, SNOMEDCTCODE, Target, Instructions, GoalSetDate, GoalMetDate, PRID ( pipe separated Problem IDs selected from patients active problems) \r\n    toStringAdd = (): string => {\r\n        return '\\\"' + this.goal + '\\\",\\\"' +\r\n            this.snomedCTCode + '\\\",\\\"' +\r\n            this.target + '\\\",\\\"' +\r\n            this.instructions + '\\\",\\\"' +\r\n            this.goalSetDate + '\\\",\\\"' +\r\n            this.goalMetDate + '\\\",\\\"' +\r\n            this.patientConditionCode + '\\\"';\r\n    }\r\n\r\n    carePlanAddError = (code: string): string => {\r\n        let response: string = '';\r\n        switch (code) {\r\n            case \"-1\":\r\n                response = \"Error Code -1: Description or blank is too long.\";\r\n                break;\r\n            case \"-2\":\r\n                response = \"Error Code -2: Code is too long.\";\r\n                break;\r\n            case \"-3\":\r\n                response = \"Error Code -3: Target is too long.\";\r\n                break;\r\n            case \"-4\":\r\n                response = \"Error Code -4: Instruction is too long.\";\r\n                break;\r\n            case \"-5\":\r\n                response = \"Error Code -5: goalSetDate is invalid.\";\r\n                break;\r\n            case \"-6\":\r\n                response = \"Error Code -6: goalMetDate is invalid or less than goalSetDate.\";\r\n                break;\r\n            case \"-7\":\r\n                response = \"Error Code -7: Invalid patientConditionCode. Use $mdObject.patient.problems[index].problemId\";\r\n                break;\r\n            case \"-8\":\r\n                response = \"Error Code -8: Cannot add Care Plan for some other reason.\";\r\n                break;\r\n            case \"-21\":\r\n                response = \"Error Code -21: Service layer error.\";\r\n                break;\r\n            default:\r\n        }\r\n        return response;\r\n    }\r\n}","import { EmrMel } from './classes';\r\n\r\nexport class Address {\r\n\r\n    private _address1: string;\r\n    private _address2: string;\r\n    private _city: string;\r\n    private _state: string;\r\n    private _postCode: string;\r\n    private _country: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    // Returns the first line of the patients address\r\n    get address1() {\r\n        this._address1 = (this._address1 != null) ? this._address1 : this._mel.melFunc('{PATIENT.ADDRESS1}');\r\n        return this._address1;\r\n    }\r\n\r\n    // Returns the second line of the patients address\r\n    get address2() {\r\n        this._address2 = (this._address2 != null) ? this._address2 : this._mel.melFunc('{PATIENT.ADDRESS2}');\r\n        return this._address2;\r\n    }\r\n\r\n    // Returns the patients city of residence\r\n    get city() {\r\n        this._city = (this._city != null) ? this._city : this._mel.melFunc('{PATIENT.CITY}');\r\n        return this._city;\r\n    }\r\n\r\n    // Returns the patients country of residence\r\n    get country() {\r\n        this._country = (this._country != null) ? this._country : this._mel.melFunc('{PATIENT.COUNTRY}');\r\n        return this._country;\r\n    }\r\n\r\n    // Returns the patients ZIP/Postal code\r\n    get postCode() {\r\n        this._postCode = (this._postCode != null) ? this._postCode : this._mel.melFunc('{PATIENT.ZIP}');\r\n        return this._postCode;\r\n    }\r\n\r\n    // Returns the patients state or province\r\n    get state() {\r\n        this._state = (this._state != null) ? this._state : this._mel.melFunc('{PATIENT.STATE}');\r\n        return this._state;\r\n    }\r\n}","import { EmrMel } from './classes';\r\n\r\nexport class Phone {\r\n\r\n    private _home: string;\r\n    private _business: string;\r\n    private _mobile: string;\r\n    private _fax: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get home() {\r\n        this._home = (this._home != null) ? this._home : this._mel.melFunc('{PATIENT.ALTPHONE}');\r\n        return this._home;\r\n    }\r\n\r\n    // Returns the patients business/work telephone number\r\n    get business() {\r\n        this._business = (this._business != null) ? this._business : this._mel.melFunc('{PATIENT.WORKPHONE}');\r\n        return this._business;\r\n    }\r\n\r\n    // Returns the patients cell phone number\r\n    get mobile() {\r\n        this._mobile = (this._mobile != null) ? this._mobile : this._mel.melFunc('{PATIENT.CELLPHONE}');\r\n        return this._mobile;\r\n    }\r\n\r\n    // Returns the patients fax number\r\n    get fax() {\r\n        this._fax = (this._fax != null) ? this._fax : this._mel.melFunc('{PATIENT.FAXPHONE}');\r\n        return this._fax;\r\n    }\r\n}","import { EmrMel } from './classes';\r\n\r\nexport class ReferringProviderPhone {\r\n\r\n    private _office: string;\r\n    private _alternative: string;\r\n    private _fax: string;\r\n    private _pager: string;\r\n    private _mobile: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get office() {\r\n        this._office = (this._office != null) ? this._office : this._mel.melFunc('{PATIENT.REFMDOFFICEPHONE}');\r\n        return this._office;\r\n    }\r\n\r\n    get alternative() {\r\n        this._alternative = (this._alternative != null) ? this._alternative : this._mel.melFunc('{PATIENT.REFMDALTPHONE}');\r\n        return this._alternative;\r\n    }\r\n\r\n    get fax() {\r\n        this._fax = (this._fax != null) ? this._fax : this._mel.melFunc('{PATIENT.REFMDFAXPHONE}');\r\n        return this._fax;\r\n    }\r\n\r\n    get pager() {\r\n        this._pager = (this._pager != null) ? this._pager : this._mel.melFunc('{PATIENT.REFMDPAGERPHONE}');\r\n        return this._pager;\r\n    }\r\n\r\n    get mobile() {\r\n        this._mobile = (this._mobile != null) ? this._mobile : this._mel.melFunc('{PATIENT.REFMDCELLPHONE}');\r\n        return this._mobile;\r\n    }\r\n}","import { ReferringProviderPhone } from './ReferringProviderPhone';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class ReferringProvider {\r\n\r\n    private _referringProviderId: string;\r\n    private _firstName: string;\r\n    private _lastName: string;\r\n    private _email: string;\r\n    private _fullAddress: string;\r\n    private _phone = new ReferringProviderPhone(this._mel);\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n\r\n    get referringProviderId() {\r\n        this._referringProviderId = (this._referringProviderId != null) ? this._referringProviderId : this._mel.melFunc('{PATIENT.REFMDID}');\r\n        return this._referringProviderId;\r\n    }\r\n\r\n    get firstName() {\r\n        this._firstName = (this._firstName != null) ? this._firstName : this._mel.melFunc('{PATIENT.REFMDFIRSTNAME}');\r\n        return this._firstName;\r\n    }\r\n\r\n    get lastName() {\r\n        this._lastName = (this._lastName != null) ? this._lastName : this._mel.melFunc('{PATIENT.REFMDLASTNAME}');\r\n        return this._lastName;\r\n    }\r\n\r\n    get email() {\r\n        this._email = (this._email != null) ? this._email : this._mel.melFunc('{PATIENT.REFMDEMAILADDRESS}');\r\n        return this._email;\r\n    }\r\n\r\n    get fullAddress() {\r\n        this._fullAddress = (this._fullAddress != null) ? this._fullAddress : this._mel.melFunc('{PATIENT.REFMDADDRESS}');\r\n        return this._fullAddress;\r\n    }\r\n\r\n    get phone() {\r\n        return this._phone;\r\n    }\r\n}","import { IsActiveXSupported } from '../factories/factories';\r\n\r\nexport class EmrBase {\r\n\r\n    readonly isActiveXSupported = IsActiveXSupported(this._window);\r\n    readonly noData: string = 'Data Access Error';\r\n    errorMessage: string;\r\n\r\n    constructor(\r\n        public _window: any\r\n    ) { }\r\n}","export function IsActiveXSupported(_window: any) {\r\n    let result = 'ActiveXObject' in _window;\r\n    \r\n    // Verify ActiveX support in this browser\r\n    if (!result) {\r\n        alert(\"Your browser does not support ActiveX objects\");\r\n    }\r\n    return result;\r\n}","export class System {\r\n    static isSimulator: boolean = false;\r\n\r\n    static toDate(value: string): Date {\r\n        return new Date(parseInt(value.substr(6)));\r\n    }\r\n\r\n    static toImage(arrayBuffer:[]){\r\n        if (arrayBuffer) {\r\n            return \"data:image/jpg;base64,\" + btoa(String.fromCharCode.apply(null, new Uint8Array(arrayBuffer)));\r\n        }\r\n        else {\r\n            return \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII===\";\r\n        }\r\n    }\r\n}","import { EmrBase } from '../bases/bases'\r\nimport { System } from './system';\r\nimport { GetActiveXErrorMessage } from '../factories/factories';\r\n\r\nexport class EmrMel extends EmrBase {\r\n\r\n    private melObjectName = 'GE.CPO.EMR.80.MEL';\r\n    private melObjectNameSimulator = 'GE.CPO.EMR.80.MEL.SIMULATOR';\r\n    private mel;\r\n\r\n    constructor(\r\n        public _window: any\r\n    ) {\r\n        super(_window);\r\n\r\n        this.initialization();\r\n    }\r\n\r\n    private initialization = (): void => {\r\n        if (this.isActiveXSupported) {\r\n            try {\r\n                this.mel = new this._window.ActiveXObject(this.melObjectName);\r\n            } catch (e) {\r\n                this.errorMessage = GetActiveXErrorMessage(this.melObjectName, e);\r\n            }\r\n            // Try to activate simulator\r\n            if (this.errorMessage != null) {\r\n                try {\r\n                    this.mel = new this._window.ActiveXObject(this.melObjectNameSimulator);\r\n                    System.isSimulator = true;\r\n                } catch (e) {\r\n                    alert(this.errorMessage);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Implements MEL eval \r\n    melFunc = (data: string): string => {\r\n        return (this.mel == null) ? this.noData : this.mel.eval(data);\r\n    }\r\n\r\n    saveObservation = (obs: string, value: string, date: string): string => {\r\n        return (this.mel == null) ? this.noData : this.mel.OBSNOW(obs, value, date);\r\n    }\r\n\r\n    getObs = (isCurrent: boolean, data: string): string => {\r\n        return (this.mel == null) ? this.noData : ((isCurrent == true) ? this.mel.OBSNOW(data, '', '') : this.mel.OBSPREV(data));\r\n    }\r\n\r\n    showUrlDialog = (url: string): void => {\r\n        this.melFunc('{SHOWHTMLFORM(\"' + url + '\",\"test\")}');\r\n    }\r\n}","import { EmrBase } from '../bases/bases'\r\nimport { GetActiveXErrorMessage } from '../factories/factories';\r\nimport { System } from './system';\r\n\r\nexport class EmrApp extends EmrBase {\r\n\r\n    private appObjectName = 'GE.CPO.EMR.90.Application';\r\n    private appObjectNameSimulator = 'GE.CPO.EMR.90.Application.SIMULATOR';\r\n    private app;\r\n\r\n    constructor(\r\n        public _window: any\r\n    ) {\r\n        super(_window);\r\n\r\n        this.initialization();\r\n    }\r\n\r\n    private initialization = (): void => {\r\n        if (this.isActiveXSupported) {\r\n            try {\r\n                this.app = new this._window.ActiveXObject(this.appObjectName);\r\n                this.app.SetPasscode(this._window.external['Passcode']);\r\n            } catch (e) {\r\n                this.errorMessage = GetActiveXErrorMessage(this.appObjectName, e);\r\n            }\r\n            // Try to activate simulator\r\n            if (this.errorMessage != null) {\r\n                try {\r\n                    this.app = new this._window.ActiveXObject(this.appObjectNameSimulator);\r\n                    System.isSimulator = true;\r\n                } catch (e) {\r\n                    this.errorMessage = GetActiveXErrorMessage(this.appObjectName, e);\r\n                    alert(this.errorMessage);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    get enterpriseId(): string {\r\n        return (this.app == null) ? this.noData : this.app.EnterpriseID;\r\n    }\r\n\r\n    get databaseVersion(): string {\r\n        return (this.app == null) ? this.noData : this.app.DatabaseVersion;\r\n    }\r\n\r\n    showUrlDialog = (url: string): string => {\r\n        return (this.app == null) ? this.noData : this.app.ShowURLDialog(url);\r\n    }\r\n\r\n    get external(): any {\r\n        return (this.app == null) ? this.noData : this.app.external;\r\n    }\r\n}","import { StringInternal } from '../factories/factories';\r\nimport { EmrMel, EmrApp } from '../classes/classes';\r\n\r\nexport class EmrWindow {\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _app: EmrApp,\r\n        public _window: any,\r\n        public _document: any\r\n    ) { }\r\n\r\n    openDialog = (url: string) => {\r\n        ((StringInternal(url.toLowerCase())).startsWith('//localserver')) ? this._mel.showUrlDialog(url) : this._app.showUrlDialog(url);\r\n    }\r\n\r\n    /**\r\n     * Arguments :\r\n     * verb : 'GET'|'POST', defaults to \"GET\"\r\n     * target : an optional opening target (a name, or \"_blank\"), defaults to \"_self\"\r\n     */\r\n    open = (url: string, verb: string, target: string, features: string, data: Object) => {\r\n        let form: HTMLFormElement = this._document.createElement(\"form\");\r\n        form.action = url;\r\n        form.method = verb || 'GET';\r\n        form.target = target || \"_self\";\r\n        if (data) {\r\n            for (let key in data) {\r\n                let input: HTMLTextAreaElement = this._document.createElement(\"textarea\");\r\n                input.name = key;\r\n                input.value = (typeof data[key] === \"object\") ? JSON.stringify(data[key]) : data[key];\r\n                form.appendChild(input);\r\n            }\r\n        }\r\n        form.style.display = 'none';\r\n        this._document.body.appendChild(form);\r\n        let _window = this._window.open(\"about:blank\", target, features);\r\n        form.submit();\r\n        return _window;\r\n    }\r\n}","import { System } from \"../system\";\r\nimport { PersonExport } from './PersonExport';\r\n\r\nexport class DemographicsExport {\r\n    confidentialityCode: any;\r\n    contactList: any;\r\n    electronicAddressList: any;\r\n    excludedUserAccess: number;\r\n    excludedUserAccessSpecified: boolean;\r\n    guarantorList: any;\r\n    guardianList: any;\r\n    hasPatientAccess: boolean;\r\n    hasPatientAccessSpecified: boolean;\r\n    healthIssueList: any;\r\n    identifierList: [];\r\n    lastOfficeVisitDate: Date;\r\n    lastOfficeVisitDateSpecified: boolean;\r\n    mailingAddressList: any;\r\n    medicareAdvantagePatient: boolean;\r\n    medicareAdvantagePatientSpecified: boolean;\r\n    mqicEPatientId: number;\r\n    mqicEPatientIdSpecified: boolean;\r\n    organization: any;\r\n    patientKey: number;\r\n    patientKeySpecified: boolean;\r\n    patientPicture: string;\r\n    person: PersonExport;\r\n    personAge: {};\r\n    preferredLanguage: string;\r\n    primaryProviderRelationshipList: [];\r\n    registrationNote: string;\r\n    statusCode: string;\r\n    vipCode: string;\r\n\r\n    constructor(\r\n        public json: string\r\n    ) {\r\n\r\n        let obj = JSON.parse(json);\r\n        this.confidentialityCode = obj.confidentialityCode;\r\n        this.contactList = obj.contactList;\r\n        this.electronicAddressList = obj.electronicAddressList;\r\n        this.excludedUserAccess = obj.excludedUserAccess;\r\n        this.excludedUserAccessSpecified = obj.excludedUserAccessSpecified;\r\n        this.guarantorList = obj.guarantorList;\r\n        this.guardianList = obj.guardianList;\r\n        this.hasPatientAccess = obj.hasPatientAccess;\r\n        this.hasPatientAccessSpecified = obj.hasPatientAccessSpecified;\r\n        this.healthIssueList = obj.healthIssueList;\r\n        this.identifierList = obj.identifierList;\r\n        this.lastOfficeVisitDate = System.toDate(obj.lastOfficeVisitDate);\r\n        this.lastOfficeVisitDateSpecified = obj.lastOfficeVisitDateSpecified;\r\n        this.mailingAddressList = obj.mailingAddressList;\r\n        this.medicareAdvantagePatient = obj.medicareAdvantagePatient;\r\n        this.medicareAdvantagePatientSpecified = obj.medicareAdvantagePatientSpecified;\r\n        this.mqicEPatientId = obj.mqicEPatientId;\r\n        this.mqicEPatientIdSpecified = obj.mqicEPatientIdSpecified;\r\n        this.organization = obj.organization;\r\n        this.patientKey = obj.patientKey;\r\n        this.patientKeySpecified = obj.patientKeySpecified;\r\n        this.patientPicture = System.toImage(obj.patientPicture);\r\n        this.person = obj.person;\r\n        this.personAge = obj.personAge;\r\n        this.preferredLanguage = obj.preferredLanguage;\r\n        this.primaryProviderRelationshipList = obj.primaryProviderRelationshipList;\r\n        this.registrationNote = obj.registrationNote;\r\n        this.statusCode = obj.statusCode;\r\n        this.vipCode = obj.vipCode;\r\n\r\n    }\r\n}\r\n","import { EmrApp } from './EmrApp';\r\nimport { EmrMel } from './EmrMel';\r\nimport { EmrWindow } from './EmrWindow';\r\nimport { EmrContent } from './EmrContent';\r\nimport { System } from './system';\r\nimport { IArrayAdditionalMethods } from '../interfaces/interfaces';\r\nimport { StringInternal } from '../factories/factories';\r\nimport { DemographicsExport } from './exports';\r\n\r\nexport class Emr {\r\n\r\n    private _emrMel: EmrMel;\r\n    private _emrApp: EmrApp;\r\n    private _melContent: { [name: string]: IArrayAdditionalMethods<EmrContent> } = {}\r\n    private _emrWindow: EmrWindow = new EmrWindow(this.emrMel, this.emrApp, this._window, this._document);\r\n    private _version: string;\r\n    private _external: any;\r\n    private _baseServicesUrl: string;\r\n    private _demographics: string;\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _document: any\r\n    ) {\r\n        this._window['_melOpener'] = this.emrMel;\r\n        this._window['_appOpener'] = this.emrApp;\r\n    }\r\n\r\n    get enterpriseId() {\r\n        return this.emrApp.enterpriseId;\r\n    }\r\n\r\n    get external(): any {\r\n        this._external = this._external ? this._external\r\n            : System.isSimulator ? this.emrApp.external \r\n                : (this._window.opener && this._window.opener.external) ? this._window.opener.external\r\n                    : this._window.external;\r\n        return this._external;\r\n    }\r\n\r\n    get databaseVersion() {\r\n        return this.emrApp.databaseVersion;\r\n    }\r\n\r\n    get version() {\r\n        this._version = (this._version != null) ? this._version : this.emrMel.melFunc('{VER_EMR()}');\r\n        return this._version;\r\n    }\r\n\r\n    // this is emrWindow as modal's window\r\n    get emrWindow() {\r\n        return this._emrWindow;\r\n    }\r\n\r\n    melContent = (name: string) => {\r\n        if (this._melContent[name] == null) {\r\n            let data = this.emrMel.melFunc('{MEL_GET_CONTENT(\\\"' + name + '\\\",\\\"MATCH\\\")}');\r\n            let dataArray = StringInternal(data).toList();\r\n            let melContentArray: IArrayAdditionalMethods<EmrContent> = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                melContentArray.push(new EmrContent(dataArray[index], this.emrMel, this._window));\r\n            }\r\n            this._melContent[name] = melContentArray;\r\n\r\n            this._melContent[name].tag = function () {\r\n                return 'MEL_GET_CONTENT';\r\n            }();\r\n\r\n            this._melContent[name].toMelString = () => {\r\n                return data;\r\n            }\r\n        }\r\n        return this._melContent[name];\r\n    }\r\n\r\n    get emrMel(): EmrMel {\r\n        this._emrMel = (this._window.opener != null && this._window.opener['_melOpener'] != undefined) ? this._window.opener['_melOpener']\r\n            : (this._emrMel != null) ? this._emrMel\r\n                : new EmrMel(this._window);\r\n        return this._emrMel;\r\n    }\r\n\r\n    get emrApp(): EmrApp {\r\n        this._emrApp = (this._window.opener != null && this._window.opener['_appOpener'] != undefined) ? this._window.opener['_appOpener']\r\n            : (this._emrApp != null) ? this._emrApp\r\n                : new EmrApp(this._window);\r\n        return this._emrApp;\r\n    }\r\n\r\n\r\n    get baseServicesUrl(): string \r\n    {\r\n        this._baseServicesUrl = (this._baseServicesUrl) ? this._baseServicesUrl\r\n            : ((this.external) ? this.external.BaseServicesUrl : this._baseServicesUrl);\r\n\r\n        return this._baseServicesUrl;\r\n    }\r\n\r\n    get demographics(): DemographicsExport {\r\n        this._demographics = (this._demographics) ? this._demographics\r\n            : ((this.external) ? this.external.Demographics : this._demographics);\r\n\r\n        return new DemographicsExport(this._demographics);\r\n    }\r\n\r\n}","export class FlowsheetObservation {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    name: string = (this.data.length > 0) ? this.data[0] : '';\r\n    value: string = (this.data.length > 1) ? this.data[1] : '';\r\n    date: string = (this.data.length > 2) ? this.data[2] : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n\r\n}\r\n","import { StringInternal } from '../factories/factories';\r\nimport { Protocol } from './Protocol';\r\nimport { Observation } from './Observation';\r\nimport { ObservationType } from './ObservationType';\r\nimport { Address } from './Address';\r\nimport { Phone } from './Phone';\r\nimport { Immunization } from './Immunization';\r\nimport { Measurements } from './Measurements';\r\nimport { FlowsheetObservation } from './FlowsheetObservation';\r\nimport { PatientContact } from './PatientContact';\r\nimport { ReferringProvider } from './ReferringProvider';\r\nimport { Problem } from './Problem';\r\nimport { Insurance } from './Insurance';\r\nimport { CarePlan } from './CarePlan';\r\nimport { Location } from './Location';\r\nimport { Allergies } from './Allergies';\r\nimport { Emr } from './Emr';\r\nimport { EmrMel } from './EmrMel';\r\nimport { IArrayAdditionalMethods } from '../interfaces/interfaces';\r\nimport { LocationType } from '../enums/enums';\r\n\r\n// TODO: string = PATIENT.REGNOTE; REGGUARANTOR\r\nexport class Patient {\r\n\r\n    private readonly observationType: ObservationType = new ObservationType();\r\n    private _patientId: string;\r\n    private _pid: string;\r\n    private _medicalRecordId: string;\r\n    private _externalId: string;\r\n    private _printId: string;\r\n    private _ssn: string;\r\n    private _firstName: string;\r\n    private _lastName: string;\r\n    private _middleName: string;\r\n    private _labelName: string;\r\n    private _namePrefix: string;\r\n    private _nameSuffix: string;\r\n    private _sex: string;\r\n    private _race: string;\r\n    private _ethnicity: string;\r\n    private _dateOfBirth: string;\r\n    private _dateOfDeath: string;\r\n    private _maritalStatus: string;\r\n    private _language: string;\r\n    private _email: string;\r\n    private _contactBy: string;\r\n    private _contacts: string;\r\n    private _contactsArray: IArrayAdditionalMethods<PatientContact> = [];\r\n    private _employmentStatus: string;\r\n    private _clinicStatus: string;\r\n    private _primaryCarePhysicianName: string;\r\n    private _problems: string;\r\n    private _problemsArray: IArrayAdditionalMethods<Problem> = [];\r\n    private _observations: { [name: string]: IArrayAdditionalMethods<Observation> } = {}\r\n    private _observationList: string;\r\n    private _observatiosArray: IArrayAdditionalMethods<FlowsheetObservation> = [];\r\n    private _protocols: string;\r\n    private _protocolsArray: IArrayAdditionalMethods<Protocol> = [];\r\n    private _insurances: IArrayAdditionalMethods<Insurance> = [];\r\n    private _immunizations: string;\r\n    private _immunizationsArray: IArrayAdditionalMethods<Immunization> = [];\r\n    private _carePlans: string;\r\n    private _carePlansArray: IArrayAdditionalMethods<CarePlan> = [];\r\n    private _locations: string;\r\n    private _locationsId: string;\r\n    private _locationsArray: IArrayAdditionalMethods<Location> = [];\r\n    private _measurements = new Measurements(this._weight, this._height, this._mel);\r\n    private _allergies = new Allergies(this._mel);\r\n    private _referringProvider = new ReferringProvider(this._mel);\r\n    private _phone = new Phone(this._mel);\r\n    private _address = new Address(this._mel);\r\n    private _emr = new Emr(this._window, this._document);\r\n    private _registrationNote: string;\r\n\r\n    constructor(\r\n        public _weight: string,\r\n        public _height: string,\r\n        public _window: any,\r\n        public _document: any,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    // Returns the patients ID number\r\n    get patientId() {\r\n        this._patientId = (this._patientId != null) ? this._patientId : this._mel.melFunc('{PATIENT.PATIENTID}');\r\n        return this._patientId;\r\n    }\r\n\r\n    // Returns the internal PID number for patient record\r\n    get pid() {\r\n        this._pid = (this._pid != null) ? this._pid : this._mel.melFunc('{find(\"patient\", \"PID\")}');\r\n        return this._pid;\r\n    }\r\n\r\n    // Returns the patients medical record number.\r\n    get medicalRecordId() {\r\n        this._medicalRecordId = (this._medicalRecordId != null) ? this._medicalRecordId : this._mel.melFunc('{PATIENT.MEDRECNO}');\r\n        return this._medicalRecordId;\r\n    }\r\n\r\n    // Returns the patients ID from an external system; such as a billing or lab system\r\n    get externalId() {\r\n        this._externalId = (this._externalId != null) ? this._externalId : this._mel.melFunc('{PATIENT.EXTERNALID}');\r\n        return this._externalId;\r\n    }\r\n\r\n    // Returns the preferred patient ID number for printed materials.\r\n    get printId() {\r\n        this._printId = (this._printId != null) ? this._printId : this._mel.melFunc('{PATIENT.PRINTID}');\r\n        return this._printId;\r\n    }\r\n\r\n    // Returns the patients Social Security number.\r\n    get ssn() {\r\n        this._ssn = (this._ssn != null) ? this._ssn : this._mel.melFunc('{PATIENT.SOCSECNO}');\r\n        return this._ssn;\r\n    }\r\n\r\n    // Returns the patients first name.\r\n    get firstName() {\r\n        this._firstName = (this._firstName != null) ? this._firstName : this._mel.melFunc('{PATIENT.FIRSTNAME}');\r\n        return this._firstName;\r\n    }\r\n\r\n    // Returns the patients last name.\r\n    get lastName() {\r\n        this._lastName = (this._lastName != null) ? this._lastName : this._mel.melFunc('{PATIENT.LASTNAME}');\r\n        return this._lastName;\r\n    }\r\n\r\n    // Returns the patients middle name.\r\n    get middleName() {\r\n        this._middleName = (this._middleName != null) ? this._middleName : this._mel.melFunc('{PATIENT.MIDDLENAME}');\r\n        return this._middleName;\r\n    }\r\n\r\n    // Returns the patients full name formatted as follows: string = title first middle last; suffix\r\n    get labelName() {\r\n        this._labelName = (this._labelName != null) ? this._labelName : this._mel.melFunc('{PATIENT.LABELNAME}');\r\n        return this._labelName;\r\n    }\r\n\r\n    // Name Prefix\r\n    get namePrefix() {\r\n        this._namePrefix = (this._namePrefix != null) ? this._namePrefix : this._mel.melFunc('{PATIENT.TITLE}');\r\n        return this._namePrefix;\r\n    }\r\n\r\n    // Name Suffix\r\n    get nameSuffix() {\r\n        this._nameSuffix = (this._nameSuffix != null) ? this._nameSuffix : this._mel.melFunc('{PATIENT.ENTITLEMENTS}');\r\n        return this._nameSuffix;\r\n    }\r\n\r\n    // Patients sex.\r\n    get sex() {\r\n        this._sex = (this._sex != null) ? this._sex : this._mel.melFunc('{PATIENT.SEX}');\r\n        return this._sex;\r\n    }\r\n\r\n    // Patients race\r\n    get race() {\r\n        this._race = (this._race != null) ? this._race : this._mel.melFunc('{PATIENT.RACE}');\r\n        return this._race;\r\n    }\r\n\r\n    // Patients ethnicity\r\n    get ethnicity() {\r\n        this._ethnicity = (this._ethnicity != null) ? this._ethnicity : this._mel.melFunc('{PATIENT.ETHNICITY}');\r\n        return this._ethnicity;\r\n    }\r\n\r\n    // Returns the patients birth date/time\r\n    get dateOfBirth() {\r\n        this._dateOfBirth = (this._dateOfBirth != null) ? this._dateOfBirth : this._mel.melFunc('{PATIENT.DATEOFBIRTH}');\r\n        return this._dateOfBirth;\r\n    }\r\n\r\n    // Returns the patients date of death\r\n    get dateOfDeath() {\r\n        this._dateOfDeath = (this._dateOfDeath != null) ? this._dateOfDeath : this._mel.melFunc('{PATIENT.DATEOFDEATH}');\r\n        return this._dateOfDeath;\r\n    }\r\n\r\n    // Returns the patients marital status (Single; Married; Divorced; Widowed; Separated; Other or Undetermined)\r\n    get maritalStatus() {\r\n        this._maritalStatus = (this._maritalStatus != null) ? this._maritalStatus : this._mel.melFunc('{PATIENT.MARITALSTATUS}');\r\n        return this._maritalStatus;\r\n    }\r\n\r\n    // Returns the patients preferred language\r\n    get language() {\r\n        this._language = (this._language != null) ? this._language : this._mel.melFunc('{PATIENT.PREFLANG}');\r\n        return this._language;\r\n    }\r\n\r\n    // Returns the patients e-mail address\r\n    get email() {\r\n        this._email = (this._email != null) ? this._email : this._mel.melFunc('{PATIENT.EMAIL}');\r\n        return this._email;\r\n    }\r\n\r\n    // Returns the patients contact by information\r\n    get contactBy() {\r\n        this._contactBy = (this._contactBy != null) ? this._contactBy : this._mel.melFunc('{PATIENT.CONTACTBY}');\r\n        return this._contactBy;\r\n    }\r\n\r\n    get registrationNote() {\r\n        this._registrationNote = (this._registrationNote != null) ? this._registrationNote : this._mel.melFunc('{PATIENT.REGNOTE}');\r\n        return this._registrationNote;\r\n    }\r\n\r\n    // Returns a list of the contacts for the current patient\r\n    get contacts() {\r\n        if (this._contactsArray.length === 0) {\r\n            this._contacts = (this._contacts != null) ? this._contacts : this._mel.melFunc('{PATIENT.CONTACTS}');\r\n            let dataArray = StringInternal(this._contacts).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._contactsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._contactsArray.push(new PatientContact(dataArray[index]));\r\n            }\r\n\r\n            this._contactsArray.tag = 'PATIENT.CONTACTS';\r\n\r\n            this._contactsArray.toMelString = () => {\r\n                return this._contacts;\r\n            }\r\n        }\r\n        return this._contactsArray;\r\n    }\r\n\r\n    // Returns the patients employment status.\r\n    get employmentStatus() {\r\n        this._employmentStatus = (this._employmentStatus != null) ? this._employmentStatus : this._mel.melFunc('{PATIENT.EMPLSTATUS}');\r\n        return this._employmentStatus;\r\n    }\r\n\r\n    // Patients current status in the clinic\r\n    get clinicStatus() {\r\n        this._clinicStatus = (this._clinicStatus != null) ? this._clinicStatus : this._mel.melFunc('{PATIENT.PSTATUS}');\r\n        return this._clinicStatus;\r\n    }\r\n\r\n    // Name of the primary care physician\r\n    get primaryCarePhysicianName() {\r\n        this._primaryCarePhysicianName = (this._primaryCarePhysicianName != null) ? this._primaryCarePhysicianName : this._mel.melFunc('{PATIENT.PCP}');\r\n        return this._primaryCarePhysicianName;\r\n    }\r\n\r\n    // Lists all problems \r\n    get problems() {\r\n        if (this._problemsArray.length === 0) {\r\n            this._problems = (this._problems != null) ? this._problems : this._mel.melFunc('{PROB_AFTER(\"delimited\",\"dat\",\"com\")}');\r\n            let dataArray = StringInternal(this._problems).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._problemsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._problemsArray.push(new Problem(dataArray[index]));\r\n            }\r\n\r\n            this._problemsArray.tag = 'PROB_AFTER';\r\n\r\n            this._problemsArray.toMelString = () => {\r\n                return this._problems;\r\n            }\r\n        }\r\n        return this._problemsArray;\r\n    }\r\n\r\n    // Lists observations by name. \r\n    observations = (name: string) => {\r\n        if (this._observations[name] == null) {\r\n            let updateData = this._mel.melFunc('{LIST_OBS(\"' + name + '\",\"Update\",\"Delimited\",\"value\")}');\r\n            let dataArray = StringInternal(updateData).toList();\r\n            let observationsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                observationsArray.push(new Observation(name, this.observationType.DocumentUnsigned, dataArray[index], this._mel));\r\n            }\r\n            this._observations[name] = observationsArray;\r\n\r\n            let signedData = this._mel.melFunc('{LIST_OBS(\"' + name + '\",\"Signed\",\"Delimited\",\"value\")}');\r\n            let dataArrayU = StringInternal(signedData).toList();\r\n            for (let index = 0; index < dataArrayU.length; index++) {\r\n                this._observations[name].push(new Observation(name, this.observationType.Signed, dataArrayU[index], this._mel));\r\n            }\r\n\r\n            this._observations[name].tag = 'LIST_OBS.' + name;\r\n        }\r\n        return this._observations[name];\r\n    }\r\n\r\n    // Lists all FLOWSHEET observations. \r\n    flowsheetObservations(flowsheet?: string) {\r\n        let flowsheetValue = '';\r\n        if (flowsheet) {\r\n            flowsheetValue = flowsheet;\r\n        }\r\n        else {\r\n            flowsheetValue = this._mel.melFunc('{_EncodeViewNameBS}');\r\n        }\r\n        if (this._observatiosArray.length === 0 || this._observatiosArray.tag != 'GET_FLOWSHEET_VALUES:' + flowsheetValue) {\r\n            this._observationList = this._mel.melFunc('{GET_FLOWSHEET_VALUES(\"' + flowsheetValue + '\",\"DELIM\")}');\r\n            let dataArray = StringInternal(this._observationList).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._observatiosArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._observatiosArray.push(new FlowsheetObservation(dataArray[index]));\r\n            }\r\n\r\n            this._observatiosArray.tag = 'GET_FLOWSHEET_VALUES:' + flowsheetValue;\r\n\r\n            this._observatiosArray.toMelString = () => {\r\n                return this._observationList;\r\n            }\r\n        }\r\n        return this._observatiosArray;\r\n    }\r\n\r\n    // Protocols tell you when a patient is due for a particular action; based on factors that include sex; age; current problems; and current medications. \r\n    // The protocols contains array of observations required for this patient; as indicated by protocols set up in this clinic.\r\n    get protocols() {\r\n        if (this._protocolsArray.length === 0) {\r\n            this._protocols = (this._protocols != null) ? this._protocols : this._mel.melFunc('{LISTPROTOCOLSHORT(\"list\")}');\r\n            let dataArray = StringInternal(this._protocols).toList('\\r\\n');\r\n\r\n            /*jslint plusplus: true */\r\n            this._protocolsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._protocolsArray.push(new Protocol(dataArray[index]))\r\n            }\r\n\r\n            this._protocolsArray.tag = 'LISTPROTOCOLSHORT(\"list\")';\r\n\r\n            this._protocolsArray.toMelString = () => {\r\n                return this._protocols;\r\n            }\r\n        }\r\n        return this._protocolsArray;\r\n    }\r\n   \r\n    // List of patient insurances \r\n    get insurances() {\r\n        if (this._insurances.length === 0) {\r\n            this._insurances.push(new Insurance('P', this._mel));\r\n            this._insurances.push(new Insurance('S', this._mel));\r\n            this._insurances.push(new Insurance('T', this._mel));\r\n        }\r\n        return this._insurances;\r\n    }\r\n\r\n    // List of patient immunizations \r\n    get immunizations() {\r\n        if (this._immunizationsArray.length === 0) {\r\n            this._immunizations = (this._immunizations != null) ? this._immunizations : this._mel.melFunc('{IMMUN_GETLIST()}');\r\n            let dataArray = StringInternal(this._immunizations).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._immunizationsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._immunizationsArray.push(new Immunization(dataArray[index], this._mel));\r\n            }\r\n\r\n            this._immunizationsArray.tag = 'IMMUN_GETLIST';\r\n\r\n            this._immunizationsArray.toMelString = () => {\r\n                return this._immunizations;\r\n            }\r\n        }\r\n        return this._immunizationsArray;\r\n    }\r\n\r\n    get carePlans() {\r\n        if (this._carePlansArray.length === 0) {\r\n            this._carePlans = (this._carePlans != null) ? this._carePlans : this._mel.melFunc('{MEL_LIST_CARE_PLAN(\"delim\",\"all\",\"all\")}');\r\n            let dataArray = StringInternal(this._carePlans).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._carePlansArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._carePlansArray.push(new CarePlan(dataArray[index], this._mel));\r\n            }\r\n\r\n            this._carePlansArray.tag = 'MEL_LIST_CARE_PLAN';\r\n\r\n            this._carePlansArray.toMelString = () => {\r\n                return this._carePlans;\r\n            }\r\n        }\r\n        return this._carePlansArray;\r\n    }\r\n\r\n    get locations() {\r\n        if (this._locationsArray.length === 0) {\r\n            this._locations = (this._locations != null) ? this._locations : this._mel.melFunc('{PATIENT.HOMELOCATIONNAME}');\r\n            this._locationsId = (this._locationsId != null) ? this._locationsId : this._mel.melFunc('{PATIENT.HOMELOCATIONABBREVNAME}');\r\n            let locationProperty = new Location(this._locationsId, this._locations, LocationType.Home);\r\n            this._locationsArray.push(locationProperty);\r\n            this._locationsArray.findByType =\r\n                (function (value) {\r\n                    let index;\r\n                    if (typeof (value) === \"number\") {\r\n                        for (index = 0; index < this.length; index++) {\r\n                            if (this[index].locationType === value) {\r\n                                return this[index];\r\n                            }\r\n                        }\r\n                    }\r\n                    return undefined;\r\n                });\r\n        }\r\n        return this._locationsArray;\r\n    }\r\n\r\n    get measurements() {\r\n        return this._measurements;\r\n    }\r\n\r\n    get allergies() {\r\n        return this._allergies;\r\n    }\r\n\r\n    // referring provider\r\n    get referringProvider() {\r\n        return this._referringProvider;\r\n    }\r\n\r\n    get phone() {\r\n        return this._phone;\r\n    }\r\n\r\n    // Represent patient address object\r\n    get address() {\r\n        return this._address;\r\n    }\r\n\r\n    get emr() {\r\n        return this._emr;\r\n    }\r\n\r\n\r\n    // TODO: aren't exist:\r\n\r\n    // List of all orders\r\n    orders: Object;\r\n    // List of all directives\r\n    directives: Object;\r\n    // Lists appointments\r\n    appointments: Object;\r\n    // List all medications and refills\r\n    medications: Object;\r\n}","import { Location } from './Location';\r\nimport { EmrMel } from './EmrMel';\r\nimport { LocationType } from '../enums/enums';\r\nimport { DocumentVariable } from '../factories/factories';\r\nimport { IArrayAdditionalMethods, IItem } from '../interfaces/interfaces';\r\n\r\nexport class ClinicalDocument {\r\n\r\n    private _letiables: string;\r\n    private _did: string;\r\n    private _xid: string;\r\n    private _documentId: string;\r\n    private _status: string;\r\n    private _location: string;\r\n    private _locationPropertyArray: IArrayAdditionalMethods<Location> = [];\r\n    private _locationProperty: Location;\r\n    private _dateOfUpdate: string;\r\n    private _provider: string;\r\n    private _userLoginName: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    private save = (): void => {\r\n        this._mel.melFunc('{DOCUMENT.mdObject_letiables = \"' + JSON.stringify(this.rawValue).replace(/\"/g, '\\\\\"') + '\"}');\r\n    }\r\n\r\n    private rawValue: IItem = DocumentVariable({}, this.save);\r\n\r\n    // The letiables allows to save any JSON object with the clinicalDocument.\r\n    // Usage: $mdObject.clinicalDocument.letiables = {\"alex\":1} - creates object with letiable alex and assigned value 1.\r\n    //        $mdObject.clinicalDocument.letiables[\"alex\"]=4;  -changes value of alex to 4\r\n    //        $mdObject.clinicalDocument.letiables.save(); - saves the object with the document\r\n    get letiables() {\r\n        if (this._letiables == null) {\r\n            this._letiables = (this._letiables != null) ? this._letiables : this._mel.melFunc('{DOCUMENT.mdObject_letiables}');\r\n            this._letiables = (this._letiables !== '') ? this._letiables : JSON.stringify(this.rawValue);\r\n            try {\r\n                this.rawValue = DocumentVariable(JSON.parse(this._letiables), this.save);\r\n            } catch (e) {\r\n                this.rawValue = {}\r\n            }\r\n        }\r\n        return this.rawValue;\r\n    }\r\n\r\n    set letiables(val: IItem) {\r\n        for (let key in val) {\r\n            this.rawValue[key] = val[key];\r\n        }\r\n        this._mel.melFunc('{DOCUMENT.mdObject_letiables = \"' + JSON.stringify(this.rawValue).replace(/\"/g, '\\\\\"') + '\"}');\r\n    }\r\n\r\n    // The val allows to get or set DOCUMENT letiable\r\n    // Usage: $mdObject.clinicalDocument.val(\"MyVariable\") return value from {DOCUMENT.MyVariable}.\r\n    //        $mdObject.clinicalDocument.val(\"MyVariable\", \"High\") - assign value \"High\" to {DOCUMENT.MyVariable} and stores it with document (saves in database)\r\n    val = (key: string, value?: string): string => {\r\n        if (key == null || key.length === 0) {\r\n            return undefined;\r\n        }\r\n\r\n        if (value == null) {\r\n            return this._mel.melFunc('{DOCUMENT.' + key + '}');\r\n        } else {\r\n            return this._mel.melFunc('{DOCUMENT.' + key + '=\"' + value + '\"}');\r\n        }\r\n    }\r\n\r\n    get did() {\r\n        this._did = (this._did != null) ? this._did : this._mel.melFunc('{find(\"DOCUMENT\",\"DID\")}');\r\n        return this._did;\r\n    }\r\n\r\n    get xid() {\r\n        this._xid = (this._xid != null) ? this._xid : this._mel.melFunc('{DOCUMENT.XID}').split('.')[0];\r\n        return this._xid;\r\n    }\r\n\r\n    // The unique document identifier for a document within a patient chart. You can see the Doc ID on each \r\n    // document and on a chart update. Each document in the patients chart has a Doc ID.\r\n    get documentId() {\r\n        this._documentId = (this._documentId != null) ? this._documentId : this._mel.melFunc('{DOCUMENT.VISDOCID}');\r\n        return this._documentId;\r\n    }\r\n\r\n\r\n    // Status of the current document. TODO: Convert to enum\r\n    // Code for document status:\r\n    //        A = Active\r\n    //        H = Hold\r\n    //        S = Signed\r\n    get status() {\r\n        this._status = (this._status != null) ? this._status : this._mel.melFunc('{DOCUMENT.STATUS}');\r\n        return this._status;\r\n    }\r\n\r\n    // The location of care of the document for the current chart update.\r\n    get location() {\r\n        if (this._locationPropertyArray.length === 0) {\r\n            this._location = (this._location != null) ? this._location : this._mel.melFunc('{DOCUMENT.LOCOFCARENAME}');\r\n            this._locationProperty = (this._locationProperty != null) ? this._locationProperty : new Location(this._location, this._location, LocationType.Current);\r\n            this._locationPropertyArray.push(this._locationProperty);\r\n            this._locationPropertyArray.findByType =\r\n                (function (value) {\r\n                    let i;\r\n                    if (typeof (value) === \"number\") {\r\n                        for (i = 0; i < this.length; i++) {\r\n                            if (this[i].locationType === value) {\r\n                                return this[i];\r\n                            }\r\n                        }\r\n                    }\r\n                    return undefined;\r\n\r\n                });\r\n        }\r\n\r\n        return this._locationPropertyArray;\r\n    }\r\n\r\n    get dateOfUpdate() {\r\n        this._dateOfUpdate = (this._dateOfUpdate != null) ? this._dateOfUpdate : this._mel.melFunc('{DOCUMENT.CLINICALDATE}');\r\n        return this._dateOfUpdate;\r\n    }\r\n\r\n    get provider() {\r\n        this._provider = (this._provider != null) ? this._provider : this._mel.melFunc('{DOCUMENT.PROVIDER}');\r\n        return this._provider;\r\n    }\r\n\r\n    get userLoginName() {\r\n        this._userLoginName = (this._userLoginName != null) ? this._userLoginName : this._mel.melFunc('{DOCUMENT.USERLOGINNAME}');\r\n        return this._userLoginName;\r\n    }\r\n}","import { User } from './User';\r\nimport { EmrMel } from './EmrMel';\r\nimport { StringInternal, GetCurrentUser } from '../factories/factories';\r\nimport { UserCallFunction } from '../enums/enums';\r\nimport { IArrayAdditionalMethods } from '../interfaces/interfaces';\r\n\r\nexport class Users {\r\n\r\n    private _currentUser: User;\r\n    private _user: User;\r\n    private _users: string;\r\n    private _usersArray: IArrayAdditionalMethods<User> = [];\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    getUser = (value?: string) => {\r\n        if (value != null) {\r\n            this._user = (this._user != null) ? this._user : new User(this._mel.melFunc('{GETUSERINFO(\"' + value + '\")}'), UserCallFunction.UserInfo);\r\n            return this._user;\r\n        }\r\n        this._currentUser = (this._currentUser != null) ? this._currentUser : new User(GetCurrentUser(this._mel), UserCallFunction.UserInfo);\r\n        return this._currentUser;\r\n    }\r\n\r\n    getUsers = () => {\r\n        if (this._usersArray.length === 0) {\r\n            this._users = this._mel.melFunc('{GET_USER_LIST(USER.CURLOCATIONABBREVNAME, \"\", \"delimited\", true)}');\r\n            let dataArray = StringInternal(this._users).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._usersArray.push(new User(dataArray[index], UserCallFunction.UserList));\r\n            }\r\n\r\n            this._usersArray.tag = 'GET_USER_LIST';\r\n\r\n            this._usersArray.toMelString = () => {\r\n                return this._users;\r\n            }\r\n        }\r\n        return this._usersArray;\r\n    }\r\n}","import { EmrMel } from '../classes/classes';\r\n\r\nexport function GetCurrentUser(_mel: EmrMel) {\r\n    return _mel.melFunc('{GETUSERINFO(\"' + _mel.melFunc('{USER.LOGINNAME}') + '\")}') + '^' +\r\n        _mel.melFunc('{USER.CURLOCATIONNAME}') + '^' +\r\n        _mel.melFunc('{USER.FIRSTNAME}') + '^' +\r\n        _mel.melFunc('{USER.MIDDLENAME}') + '^' +\r\n        _mel.melFunc('{USER.LASTNAME}');\r\n}","import { version, productType } from '../consts/consts'\r\nimport { LocationType, UserCallFunction } from '../enums/enums'\r\nimport { ObsTermsMap } from './ObsTermsMap';\r\nimport { ClinicalDocument } from './ClinicalDocument';\r\nimport { Emr } from './Emr';\r\nimport { Users } from './Users';\r\nimport { Patient } from './Patient';\r\n\r\nexport class MdObject {\r\n\r\n    private _emr = new Emr(this._window, this._document);\r\n    private _obsTermsMap = new ObsTermsMap();\r\n    private _clinicalDocument = new ClinicalDocument(this.emr.emrMel);\r\n    private _users = new Users(this.emr.emrMel);\r\n    private _patient = new Patient(this.obsTermsMap.weight, this.obsTermsMap.height, this._window, this._document, this.emr.emrMel);\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _document: any\r\n    ) {\r\n        if (typeof this._window === 'undefined' && typeof this._document === 'undefined') {\r\n            throw new Error(\"MdObject requires a _window with a _document\");\r\n        }\r\n    }\r\n\r\n    get version(): string {\r\n        return version;\r\n    }\r\n\r\n    get productType(): string {\r\n        return productType;\r\n    }\r\n\r\n    get emr():Emr {\r\n        return this._emr;\r\n    }\r\n\r\n    get obsTermsMap():ObsTermsMap {\r\n        return this._obsTermsMap;\r\n    }\r\n\r\n    get clinicalDocument():ClinicalDocument {\r\n        return this._clinicalDocument;\r\n    }\r\n\r\n    get users():Users {\r\n        return this._users;\r\n    }\r\n\r\n    get patient():Patient {\r\n        return this._patient;\r\n    }\r\n\r\n    get LocationType() {\r\n        return LocationType;\r\n    }\r\n\r\n    get UserCallFunction() {\r\n        return UserCallFunction;\r\n    }\r\n}","export const version: string = '2.0.0';\r\n","export const productType: string = 'GE';","import { MdObject } from './classes/classes';\r\n\r\n(function (window) {\r\n    var mdObject: MdObject;\r\n    try {\r\n        mdObject = new MdObject(window, window.document);\r\n        window['mdObject'] = mdObject;\r\n    }\r\n    catch (e) {\r\n        console.error(e);\r\n    }\r\n    return mdObject;\r\n})(window);\r\n\r\nexport { MdObject } from './classes/classes';"]}