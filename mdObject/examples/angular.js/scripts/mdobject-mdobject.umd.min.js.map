{"version":3,"sources":["../../src/classes/ObsTermsMap.ts","../../src/enums/LocationType.ts","../../src/enums/UserCallFunction.ts","../../src/enums/AllergyClassification.ts","../../src/enums/AllergyCriticality.ts","../../src/enums/ObjectState.ts","../../src/classes/Location.ts","../../src/classes/EmrContent.ts","../../src/classes/PatientContact.ts","../../src/classes/Problem.ts","../../src/classes/Immunization.ts","../../src/classes/ObservationType.ts","../../src/classes/User.ts","../../src/classes/AllergyList.ts","../../node_modules/tslib/tslib.es6.js","../../src/classes/AllergyListRemoved.ts","../../src/factories/DocumentVariable.ts","../../src/factories/StringInternal.ts","../../src/factories/IsActiveXSupported.ts","../../src/factories/GetActiveXErrorMessage.ts","../../src/classes/Allergies.ts","../../src/classes/Observation.ts","../../src/classes/Protocol.ts","../../src/classes/Measurement.ts","../../src/classes/Insurance.ts","../../src/classes/Measurements.ts","../../src/classes/CarePlan.ts","../../src/classes/Address.ts","../../src/classes/Phone.ts","../../src/classes/ReferringProviderPhone.ts","../../src/classes/ReferringProvider.ts","../../src/consts/strings.ts","../../src/classes/system.ts","../../src/bases/EmrBase.ts","../../src/classes/EmrMel.ts","../../src/classes/EmrApp.ts","../../src/classes/EmrWindow.ts","../../src/classes/external/DemographicsExternal.ts","../../src/classes/external/UserDetailExternal.ts","../../src/classes/external/AllergyExternal.ts","../../src/classes/external/ProblemExternal.ts","../../src/classes/FlowsheetObservation.ts","../../src/classes/Patient.ts","../../src/classes/Users.ts","../../src/factories/GetCurrentUser.ts","../../src/simulator/ExtensionExternalSimulator.ts","../../src/simulator/simulator.ts","../../src/classes/ClinicalDocument.ts","../../src/classes/Emr.ts","../../src/fhir/fhir.ts","../../src/fhir/Person.ts","../../src/fhir/Patient.ts","../../src/classes/MdObject.ts","../../src/consts/version.ts","../../src/consts/productType.ts","../../src/public.ts"],"names":["LocationType","UserCallFunction","AllergyClassification","AllergyCriticality","ObjectState","ObsTermsMap","this","weight","height","Location","id","name","locationType","None","EmrContent","_value","_mel","_window","_this","data","split","isNew","contentId","length","key","value","_unk0","_unk1","_unk2","_unk3","_unk4","_unk5","toAddString","encodeValue","recordValue","btoa","save","melFunc","remove","PatientContact","type","phone","phoneType","address1","address2","city","state","zip","country","address","concat","toMelString","Problem","description","codeIcd9","comment","onsetDate","stopDate","stopReason","codeIcd10","lastModifiedDate","Object","defineProperty","prototype","_problemId","index","indexOf","substr","Immunization","immunizationId","immunizationGroupId","vaccineGroupName","vaccineName","medicalDisplayName","series","wasGiven","reasonNotGiven","historical","historicalSource","vfcElegibility","ddid","dnid","gpi","kdc","ndc","cvxCode","doseAmount","dosageUnitOfMeasure","route","routeCode","site","siteCode","manufacturer","manufacturerCode","lotNumber","expirationDate","visPublishedDate","administeredByName","administeredDate","administeredDateType","administeredComments","advReactionDateTime","advReactionDateTimeType","advReactionComments","advReactionCmtByName","signed","signedByName","signedDate","reasonRemoved","reasonNotGivenMedical","reasonNotGivenMedicalDetail","isError","validateAdd","response","toStringAdd","alert","match","ObservationType","Signed","DocumentUnsigned","User","callFunction","UserInfo","loginName","searchName","phoneNumber","homeLocation","group","jobTitle","specialty","roles","npi","prescriberId","deaId","stateLicenceId","memberLogin","data2000","uniquePhysicianId","activationDate","currentLocation","firstName","middleName","lastName","UserList","AllergyList","onSetDate","criticalIndicator","classification","gpiCode","severity","allergyId","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","create","__generator","thisArg","body","f","y","t","g","_","label","sent","trys","ops","next","verb","throw","return","Symbol","iterator","n","v","op","TypeError","call","done","pop","push","e","step","AllergyListRemoved","_super","DocumentVariable","saveCallback","result","StringInternal","tag","String","toList","seporator","dataArray","filter","item","startsWith","str","slice","endsWith","toDate","Date","toString","IsActiveXSupported","console","log","GetActiveXErrorMessage","objectName","Message","Allergies","_addedArray","_currentArray","_removedArray","_added","_current","_removed","Observation","_name","_observationType","observationType","date","time","signingUser","enteringUser","flags","locationOfCare","documentType","documentId","saveObservation","_unitOfMeasure","_tag","Protocol","Measurement","isCurrent","_weight","_height","getObs","Insurance","Measurements","_previous","insuranceType","_address","_insuranceId","_planName","_groupNumber","_phone","CarePlan","carePlanId","goal","snomedCTCode","target","instructions","goalSetDate","goalMetDate","recordCreatedDateTime","sign","signedBy","recordChangedDateTime","recordChangedBy","patientConditionDescription","patientConditionCode","carePlanAddError","code","Address","_mailingAddressExternal","_address1","line1Addr","_address2","line2Addr","_city","cityName","_country","countryCode","_postCode","postalCode","_state","stateCode","undefined","Phone","_home","_business","_mobile","_fax","ReferringProviderPhone","_office","_alternative","_pager","ReferringProvider","_referringProviderId","_firstName","_lastName","_email","_fullAddress","emptyImage","System","parseInt","toImage","arrayBuffer","fromCharCode","apply","Uint8Array","formatDate","isSimulator","EmrBase","isActiveXSupported","noData","isExternalSupported","_external","externalSimulator","opener","external","_isSimulator","EmrMel","melObjectName","melObjectNameSimulator","initialization","mel","ActiveXObject","errorMessage","eval","EvaluateMel","obs","OBSNOW","OBSPREV","showUrlDialog","url","EmrApp","appObjectName","appObjectNameSimulator","app","SetPasscode","ShowURLDialog","EnterpriseID","DatabaseVersion","EmrWindow","_app","_document","openDialog","toLowerCase","open","features","form","createElement","action","method","input","JSON","stringify","appendChild","style","display","submit","DemographicsExternal","json","toJson","_json","obj","parse","confidentialityCode","contactList","electronicAddressList","excludedUserAccess","excludedUserAccessSpecified","guarantorList","guardianList","hasPatientAccess","hasPatientAccessSpecified","healthIssueList","identifierList","lastOfficeVisitDate","lastOfficeVisitDateSpecified","mailingAddressList","medicareAdvantagePatient","medicareAdvantagePatientSpecified","mqicEPatientId","mqicEPatientIdSpecified","organization","patientKey","patientKeySpecified","patientPicture","person","personAge","preferredLanguage","primaryProviderRelationshipList","registrationNote","statusCode","vipCode","UserDetailExternal","fromExternal","_obj","userDetailExternal","activationDateSpecified","authorizations","authorizedLocationOfCares","currentLocationDetail","currentLocationSpecified","deaNumber","errorDetails","expirationDateSpecified","globalID","globalIDSpecified","groupList","homeLocationDetail","homeLocationSpecified","isrespprov","isrespprovSpecified","jobTitleDetail","jobTitleSpecified","lastLoginDate","lastLoginDateSpecified","lastPasswordChange","lastPasswordChangeSpecified","licenseNumber","loginAttempts","loginAttemptsSpecified","memberID","mqicUserName","orgName","pidList","pmpRoleID","pmpRoleIDSpecified","pmpRoleName","prescriberID","providerID","providerIDSpecified","resultSpecified","roleList","specialtyDetail","specialtySpecified","spi","stateName","status","subscriptionureg","tocElectronicAddress","updateType","upin","AllergyExternal","allergyExternal","allclass","allergyGroupID","allergyGroupIDSpecified","allergyID","annotate","aproxonsetdate","change","changeSpecified","dbCreateDate","dbCreateDateSpecified","dbUpdatedDate","dbUpdatedDateSpecified","documentDetail","drugDescID","drugDescIDSpecified","expirationID","extAllergyID","extAllergyIDSpecified","externalAllergyInfoDetail","genericProductIndex","gi","heme","iscritical","kind","knowledgeBaseDrugCode","knowledgeBaseDrugCodeSpecified","medicationInfo","ndclabprod","ndcpackage","onsetdate","onsetdateSpecified","other","pendUserIndent","pendUserIndentSpecified","pendUserSort","pendUserSortSpecified","personID","pubtime","pubtimeSpecified","pubUser","pubUserDetail","pubUserSpecified","rash","resp","searchCriteria","secondaryDocumentID","secondaryDocumentIDSpecified","shock","snomedID","snomedIDSpecified","stopdate","stopdateSpecified","stopreason","userDetail","userID","userIDSpecified","userIndent","userIndentSpecified","userSort","userSortSpecified","ProblemExternal","problemExternal","aproxstopdate","assessmentList","codechange","covered","expirationIDSpecified","externalProblemDetail","extSecondaryProblemID","extSecondaryProblemIDSpecified","icd9CodeDetail","icd9MasterDiagnosisID","icd9MasterDiagnosisIDSpecified","icd10CodeDetail","icd10MasterDiagnosisID","icd10MasterDiagnosisIDSpecified","lastClaimedDate","lastClaimedDateSpecified","medicareAdvantageAlert","medicareAdvantageAlertSpecified","medicareAdvantageRiskAdjustmentFactor","priority","prioritySpecified","problemID","problemIDSpecified","qualifier","secondaryProblemID","secondaryProblemIDSpecified","snoMedCodeDetail","snoMedMasterDiagnosisID","snoMedMasterDiagnosisIDSpecified","userDim","userDimSpecified","FlowsheetObservation","Patient","_demographics","_contactsArray","_problemsArray","_observations","_observatiosArray","_protocolsArray","_insurances","_immunizationsArray","_carePlansArray","_locationsArray","_allergies","_referringProvider","observations","observationsArray","dataArrayU","_patientPicture","_lastOfficeVisit","_registrationNote","_language","patientId","find","identifierDomain","domainId","_patientId","idValue","_printId","externalId","_externalId","medicalRecordId","_medicalRecordId","birthDate","_dateOfBirth","_sex","genderCode","personNameList","givenName","familyName","_middleName","_labelName","_namePrefix","prefixName","_nameSuffix","suffixName","_pid","ssn","_ssn","replace","_race","_ethnicity","_dateOfDeath","_maritalStatus","_contactBy","_contacts","_employmentStatus","_clinicStatus","_primaryCarePhysicianName","_problems","flowsheetObservations","flowsheet","flowsheetValue","_observationList","_protocols","_immunizations","_carePlans","_locations","_locationsId","locationProperty","Home","findByType","Users","_usersArray","getUser","_user","_currentUser","GetCurrentUser","getUsers","_users","ExtensionExternalSimulator","sendMessage","Demographics","editorExtensionId","Promise","resolve","reject","chrome","runtime","Simulator","_isExtensionEvaluated","_isActiveX","_ExtensionExternalSimulator","isSimulatorAsync","__awaiter$1","_a","_b","info","_reject","ClinicalDocument","_emr","_locationPropertyArray","rawValue","val","_letiables","_did","didAsync","melFuncAsync","_c","_xid","_documentId","_status","_location","_locationProperty","Current","i","_dateOfUpdate","_provider","_userLoginName","Emr","_melContent","_emrWindow","emrMel","emrApp","_allergyExternalList","_problemExternalList","externalAsync","__awaiter$3","_simulator","melContent","data_1","melContentArray","demographicsAsync","_d","then","allergiesJson","_allergiesJson","problemsJson","_problemsJson","Problems","patientAsync","_patient","bind","clinicalDocumentAsync","_clinicalDocument","_obsTermsMap","enterpriseId","databaseVersion","_version","_emrMel","_emrApp","_baseServicesUrl","BaseServicesUrl","demographics","Fhir","Person","MdObject","Error","version","_fhir","window","mdObject","document","error"],"mappings":"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","sourcesContent":["export class ObsTermsMap {\r\n    weight: string = 'Weight';\r\n    height: string = 'Height';\r\n\r\n    constructor() { }\r\n}","export enum LocationType {\r\n    None = 0,\r\n    Home = 1,\r\n    Current = 2\r\n}\r\n","export enum UserCallFunction {\r\n    None = 0,\r\n    UserList = 1,\r\n    UserInfo = 2\r\n}\r\n","export enum AllergyClassification {\r\n    none = \"\",\r\n    drug = \"Drug\",\r\n    food = \"Food\",\r\n    environmental = \"Environmental\"\r\n}","export enum AllergyCriticality {\r\n    undefined = \"\",\r\n    critical = \"C\",\r\n    severe = \"S\",\r\n    moderate = \"N\",\r\n    mild = \"I\"\r\n}","export enum ObjectState {\r\n    None = 0,\r\n    Add = 1,\r\n    Update = 2,\r\n    Remove=3\r\n}\r\n","import { LocationType } from '../enums/enums';\r\n\r\nexport class Location {\r\n\r\n    constructor(\r\n        public id: string,\r\n        public name: string,\r\n        public locationType: LocationType\r\n    ) {\r\n        this.id = (this.id != null) ? this.id : '';\r\n        this.name = (this.name != null) ? this.name : '';\r\n        this.locationType = (this.locationType != null) ? this.locationType : LocationType.None\r\n    }\r\n}","import { EmrMel } from './classes';\r\n\r\nexport class EmrContent {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n    private isNew: boolean = (this._value == null) ? true : false;\r\n\r\n    contentId: string = (this.data.length > 0) ? this.data[0] : '';\r\n    key: string = (this.data.length > 1) ? this.data[1] : '';\r\n    name: string = (this.data.length > 2) ? this.data[2] : '';\r\n    value: string = (this.data.length > 3) ? this.data[3] : '';\r\n    _unk0: string = (this.data.length > 4) ? this.data[4] : '';\r\n    _unk1: string = (this.data.length > 5) ? this.data[5] : '';\r\n    _unk2: string = (this.data.length > 6) ? this.data[6] : '';\r\n    _unk3: string = (this.data.length > 7) ? this.data[7] : '';\r\n    _unk4: string = (this.data.length > 8) ? this.data[8] : '';\r\n    _unk5: string = (this.data.length > 9) ? this.data[9] : '';\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public _mel: EmrMel,\r\n        public _window: any\r\n    ) { }\r\n\r\n    toAddString = (encodeValue: string): string => {\r\n        let recordValue = (encodeValue == null) ? this.value : this._window.btoa(this.value);\r\n        return this.key + '^' +\r\n            this.name + '^' +\r\n            recordValue + '^' +\r\n            this._unk0 + '^' +\r\n            this._unk1 + '^' +\r\n            this._unk2 + '^' +\r\n            this._unk3 + '^' +\r\n            this._unk4 + '^' +\r\n            this._unk5;\r\n    }\r\n\r\n    save = (encodeValue: string): void => {\r\n        if (this.isNew) {\r\n            this._mel.melFunc('{MEL_ADD_CONTENT(\"' + this.toAddString(encodeValue) + '\")}');\r\n            this.isNew = false;\r\n        } else {\r\n            this._mel.melFunc('{MEL_REMOVE_CONTENT(\"' + this.contentId + '\")}');\r\n            this._mel.melFunc('{MEL_ADD_CONTENT(\"' + this.toAddString(encodeValue) + '\")}');\r\n        }\r\n    }\r\n\r\n    remove = (): void => {\r\n        this._mel.melFunc('{MEL_REMOVE_CONTENT(\"' + this.contentId + '\")}');\r\n    }\r\n}","export class PatientContact {\r\n\r\n    private data = (this._value == null) ? [] : this._value.split('^');\r\n    name: string = (this.data.length > 0) ? this.data[0] : '';\r\n    type: string = (this.data.length > 1) ? this.data[1] : '';\r\n    phone: string = (this.data.length > 2) ? this.data[2] : '';\r\n    phoneType: string = (this.data.length > 3) ? this.data[3] : '';\r\n    address1: string = (this.data.length > 4) ? this.data[4] : '';\r\n    address2: string = (this.data.length > 5) ? this.data[5] : '';\r\n    city: string = (this.data.length > 6) ? this.data[6] : '';\r\n    state: string = (this.data.length > 7) ? this.data[7] : '';\r\n    zip: string = (this.data.length > 8) ? this.data[8] : '';\r\n    country: string = (this.data.length > 9) ? this.data[9] : '';\r\n    address: string = this.address1.concat(' ' + this.address2);\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n\r\n    toMelString = (): string => {\r\n        return this._value;\r\n    }\r\n}","export class Problem {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n    private _problemId: string;\r\n\r\n    type: string = (this.data.length > 0) ? this.data[0] : '';\r\n    description: string = (this.data.length > 1) ? this.data[1] : '';\r\n    codeIcd9: string = (this.data.length > 2) ? this.data[2] : '';\r\n    comment: string = (this.data.length > 3) ? this.data[3] : '';\r\n    onsetDate: string = (this.data.length > 4) ? this.data[4] : '';\r\n    stopDate: string = (this.data.length > 5) ? this.data[5] : '';\r\n    stopReason: string = (this.data.length > 6) ? this.data[6] : '';\r\n    codeIcd10: string = (this.data.length > 7) ? this.data[7] : '';\r\n    lastModifiedDate: string = (this.data.length > 9) ? this.data[9] : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n\r\n    get problemId(): string {\r\n        this._problemId = (this.data.length > 8) ? this.data[8] : '';\r\n        let index = this._problemId.indexOf('.');\r\n        this._problemId = (index > -1) ? this._problemId.substr(0, index) : this._problemId;\r\n        return this._problemId;\r\n    }\r\n}","import { EmrMel } from './classes'\r\n\r\nexport class Immunization {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n    private isNew: boolean = this._value == null ? true : false;\r\n\r\n    immunizationId: string = (this.data.length > 0) ? this.data[0] : '';\r\n    immunizationGroupId: string = (this.data.length > 1) ? this.data[1] : '';\r\n    vaccineGroupName: string = (this.data.length > 2) ? this.data[2] : '';\r\n    vaccineName: string = (this.data.length > 3) ? this.data[3] : '';\r\n    medicalDisplayName: string = (this.data.length > 4) ? this.data[4] : '';\r\n    series: string = (this.data.length > 5) ? this.data[5] : '';\r\n    wasGiven: string = (this.data.length > 6) ? this.data[6] : '';\r\n    reasonNotGiven: string = (this.data.length > 7) ? this.data[7] : '';\r\n    historical: string = (this.data.length > 8) ? this.data[8] : '';\r\n    historicalSource: string = (this.data.length > 9) ? this.data[9] : '';\r\n    vfcElegibility: string = (this.data.length > 10) ? this.data[10] : '';\r\n    ddid: string = (this.data.length > 11) ? this.data[11] : '';\r\n    dnid: string = (this.data.length > 12) ? this.data[12] : '';\r\n    gpi: string = (this.data.length > 13) ? this.data[13] : '';\r\n    kdc: string = (this.data.length > 14) ? this.data[14] : '';\r\n    ndc: string = (this.data.length > 15) ? this.data[15] : '';\r\n    cvxCode: string = (this.data.length > 16) ? this.data[16] : '';\r\n    doseAmount: string = (this.data.length > 17) ? this.data[17] : '';\r\n    dosageUnitOfMeasure: string = (this.data.length > 18) ? this.data[18] : '';\r\n    route: string = (this.data.length > 19) ? this.data[19] : '';\r\n    routeCode: string = (this.data.length > 20) ? this.data[20] : '';\r\n    site: string = (this.data.length > 21) ? this.data[21] : '';\r\n    siteCode: string = (this.data.length > 22) ? this.data[22] : '';\r\n    manufacturer: string = (this.data.length > 23) ? this.data[23] : '';\r\n    manufacturerCode: string = (this.data.length > 24) ? this.data[24] : '';\r\n    lotNumber: string = (this.data.length > 25) ? this.data[25] : '';\r\n    expirationDate: string = (this.data.length > 26) ? this.data[26] : '';\r\n    visPublishedDate: string = (this.data.length > 27) ? this.data[27] : '';\r\n    administeredByName: string = (this.data.length > 28) ? this.data[28] : '';\r\n    administeredDate: string = (this.data.length > 29) ? this.data[29] : '';\r\n    administeredDateType: string = (this.data.length > 30) ? this.data[30] : '';\r\n    administeredComments: string = (this.data.length > 31) ? this.data[31] : '';\r\n    advReactionDateTime: string = (this.data.length > 32) ? this.data[32] : '';\r\n    advReactionDateTimeType: string = (this.data.length > 33) ? this.data[33] : '';\r\n    advReactionComments: string = (this.data.length > 34) ? this.data[34] : '';\r\n    advReactionCmtByName: string = (this.data.length > 35) ? this.data[35] : '';\r\n    signed: string = (this.data.length > 36) ? this.data[36] : '';\r\n    signedByName: string = (this.data.length > 37) ? this.data[37] : '';\r\n    signedDate: string = (this.data.length > 38) ? this.data[38] : '';\r\n    reasonRemoved: string = (this.data.length > 39) ? this.data[39] : '';\r\n    stopDate: string = (this.data.length > 40) ? this.data[40] : '';\r\n    reasonNotGivenMedical: string = (this.data.length > 41) ? this.data[41] : '';\r\n    reasonNotGivenMedicalDetail: string = (this.data.length > 42) ? this.data[42] : '';\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = (): void => {\r\n        if (this.isNew) {\r\n            let isError = this.validateAdd();\r\n            let response;\r\n            if (isError === '') {\r\n                response = this._mel.melFunc('{IMMUN_ADD(\"' + this.toStringAdd() + '\")}');\r\n                if (response < 0) {\r\n                    alert(response);\r\n                }\r\n            } else {\r\n                alert(isError);\r\n            }\r\n        } else {\r\n            // TODO: add updating of model\r\n        }\r\n    }\r\n\r\n    toMelString = (): string => {\r\n        return this._value;\r\n    }\r\n\r\n    validateAdd = (): string => {\r\n        let errorMessage = ' is required.';\r\n        // check required parameters\r\n        if (this.vaccineGroupName === '') {\r\n            return 'vaccineGroupName' + errorMessage;\r\n        }\r\n        if (this.wasGiven === '') {\r\n            return 'wasGiven' + errorMessage;\r\n        }\r\n        if (this.historical === '') {\r\n            return 'historical' + errorMessage;\r\n        }\r\n        if (this.vfcElegibility === '') {\r\n            return 'vfcElegibility' + errorMessage;\r\n        }\r\n        if (this.administeredDate === '') {\r\n            return 'administeredDate' + errorMessage;\r\n        }\r\n        if (this.doseAmount.match(/[0-9]{1,25}/g) == null) {\r\n            return 'doseAmount should be numeric.';\r\n        }\r\n        return '';\r\n    }\r\n\r\n    toStringAdd = (): string => {\r\n        return this.vaccineGroupName + '^' + \r\n            this.vaccineName + '^' +\r\n            this.medicalDisplayName + '^' +\r\n            this.series + '^' +\r\n            this.wasGiven + '^' +\r\n            this.reasonNotGiven + '^' +\r\n            this.historical + '^' +\r\n            this.historicalSource + '^' +\r\n            this.vfcElegibility + '^' +\r\n            this.ddid + '^' +\r\n            this.dnid + '^' +\r\n            this.gpi + '^' +\r\n            this.kdc + '^' +\r\n            this.ndc + '^' +\r\n            this.cvxCode + '^' +\r\n            this.doseAmount + '^' +\r\n            this.dosageUnitOfMeasure + '^' +\r\n            this.route + '^' +\r\n            this.routeCode + '^' +\r\n            this.site + '^' +\r\n            this.siteCode + '^' +\r\n            this.manufacturer + '^' +\r\n            this.manufacturerCode + '^' +\r\n            this.lotNumber + '^' +\r\n            this.expirationDate + '^' +\r\n            this.visPublishedDate + '^' +\r\n            this.administeredByName + '^' +\r\n            this.administeredDate + '^' +\r\n            this.administeredDateType + '^' +\r\n            this.administeredComments + '^' +\r\n            this.advReactionDateTime + '^' +\r\n            this.advReactionDateTimeType + '^' +\r\n            this.advReactionComments + '^' +\r\n            this.advReactionCmtByName + '^' +\r\n            this.signed + '^' +\r\n            this.signedByName + '^' +\r\n            this.signedDate + '^' +\r\n            this.reasonRemoved + '^' +\r\n            this.stopDate + '^' +\r\n            this.reasonNotGivenMedical + '^' +\r\n            this.reasonNotGivenMedicalDetail;\r\n    }\r\n}","export class ObservationType {\r\n\r\n    None: string = 'Undefined';\r\n    Signed: string = 'Signed';\r\n    DocumentUnsigned: string = 'Update';\r\n\r\n    constructor() { }\r\n}","import { UserCallFunction } from '../enums/enums';\r\n\r\nexport class User {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    loginName: string;\r\n    searchName: string;\r\n    phoneNumber: string;\r\n    homeLocation: string;\r\n    group: string;\r\n    jobTitle: string;\r\n    specialty: string;\r\n    roles: Array<string>;\r\n    npi: string;\r\n    prescriberId: string;\r\n    deaId: string;\r\n    stateLicenceId: string;\r\n    memberLogin: string;\r\n    data2000: string;\r\n    uniquePhysicianId: string;\r\n    activationDate: string;\r\n    expirationDate: string;\r\n    currentLocation: string;\r\n    firstName: string;\r\n    middleName: string;\r\n    lastName: string;\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public callFunction: UserCallFunction\r\n    ) {\r\n        if (callFunction === UserCallFunction.UserInfo) {\r\n            this.loginName = (this.data.length > 0) ? this.data[0] : '';\r\n            this.searchName = (this.data.length > 1) ? this.data[1] : '';\r\n            this.phoneNumber = (this.data.length > 2) ? this.data[2] : '';\r\n            this.homeLocation = (this.data.length > 3) ? this.data[3] : '';\r\n            this.group = (this.data.length > 4) ? this.data[4] : '';\r\n            this.jobTitle = (this.data.length > 5) ? this.data[5] : '';\r\n            this.specialty = (this.data.length > 6) ? this.data[6] : '';\r\n            this.roles = (this.data.length > 7) ? this.data[7].split(';') : [];\r\n            this.npi = (this.data.length > 8) ? this.data[8] : '';\r\n            this.prescriberId = (this.data.length > 9) ? this.data[9] : '';\r\n            this.deaId = (this.data.length > 10) ? this.data[10] : '';\r\n            this.stateLicenceId = (this.data.length > 11) ? this.data[11] : '';\r\n            this.memberLogin = (this.data.length > 12) ? this.data[12] : '';\r\n            this.data2000 = (this.data.length > 13) ? this.data[13] : '';\r\n            this.uniquePhysicianId = (this.data.length > 14) ? this.data[14] : '';\r\n            this.activationDate = (this.data.length > 15) ? this.data[15] : '';\r\n            this.expirationDate = (this.data.length > 16) ? this.data[16] : '';\r\n            this.currentLocation = (this.data.length > 17) ? this.data[17] : '';\r\n            this.firstName = (this.data.length > 18) ? this.data[18] : '';\r\n            this.middleName = (this.data.length > 19) ? this.data[19] : '';\r\n            this.lastName = (this.data.length > 20) ? this.data[20] : '';\r\n        }\r\n\r\n        if (callFunction === UserCallFunction.UserList) {\r\n            this.loginName = (this.data.length > 0) ? this.data[0] : '';\r\n            this.searchName = (this.data.length > 1) ? this.data[1] : '';\r\n            this.phoneNumber = (this.data.length > 2) ? this.data[2] : '';\r\n            this.homeLocation = (this.data.length > 3) ? this.data[3] : '';\r\n            this.group = (this.data.length > 4) ? this.data[4] : '';\r\n            this.jobTitle = (this.data.length > 5) ? this.data[5] : '';\r\n            this.specialty = (this.data.length > 6) ? this.data[6] : '';\r\n            this.npi = (this.data.length > 7) ? this.data[7] : '';\r\n            this.prescriberId = (this.data.length > 8) ? this.data[8] : '';\r\n            this.deaId = (this.data.length > 9) ? this.data[9] : '';\r\n            this.stateLicenceId = (this.data.length > 10) ? this.data[10] : '';\r\n            this.memberLogin = (this.data.length > 11) ? this.data[11] : '';\r\n            this.data2000 = (this.data.length > 12) ? this.data[12] : '';\r\n            this.uniquePhysicianId = (this.data.length > 13) ? this.data[13] : '';\r\n            this.activationDate = (this.data.length > 14) ? this.data[14] : '';\r\n            this.expirationDate = (this.data.length > 15) ? this.data[15] : '';\r\n            this.roles = [];\r\n        }\r\n    }\r\n\r\n    toMelString = () => {\r\n        return this._value;\r\n    }\r\n}","import { IAllergyData } from '../interfaces/interfaces';\r\n\r\nexport class AllergyList implements IAllergyData {\r\n\r\n    protected data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    name = (this.data.length > 0) ? this.data[0] : '';\r\n    onSetDate = (this.data.length > 1) ? this.data[1] : '';\r\n        criticalIndicator = (this.data.length > 2) ? this.data[2] : '';\r\n    classification = (this.data.length > 3) ? this.data[3] : '';\r\n    description = (this.data.length > 4) ? this.data[4] : '';\r\n    gpiCode = (this.data.length > 5) ? this.data[5] : '';\r\n    severity = (this.data.length > 6) ? this.data[6] : '';\r\n    allergyId = (this.data.length > 7) ? this.data[7] : '';\r\n    stopDate = null;\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { AllergyList } from './AllergyList';\r\n\r\nexport class AllergyListRemoved extends AllergyList {\r\n\r\n    name = (this.data.length > 0) ? this.data[0] : '';\r\n    onSetDate = (this.data.length > 1) ? this.data[1] : '';\r\n    stopDate = (this.data.length > 2) ? this.data[2] : '';\r\n    criticalIndicator = (this.data.length > 3) ? this.data[3] : '';\r\n    classification = (this.data.length > 4) ? this.data[4] : '';\r\n    description = (this.data.length > 5) ? this.data[5] : '';\r\n    gpiCode = (this.data.length > 6) ? this.data[6] : '';\r\n    severity = (this.data.length > 7) ? this.data[7] : '';\r\n    allergyId = (this.data.length > 8) ? this.data[8] : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) {\r\n        super(_value);\r\n    }\r\n}","import { IItem } from '../interfaces/interfaces';\r\n\r\nexport function DocumentVariable(value, saveCallback): IItem {\r\n    let result: IItem = (value == null) ? new Object() : value;\r\n    result.save = () => {\r\n        if (saveCallback != null) {\r\n            saveCallback();\r\n        }\r\n    }\r\n    return result;\r\n}","import { IStringInternal } from '../interfaces/interfaces';\r\n\r\nexport function StringInternal(value: string, tag?: string): IStringInternal {\r\n    let result: IStringInternal = new String(value) as IStringInternal;\r\n\r\n    // Function parse string object to array of string \r\n    result.toList = (seporator?: string): Array<string> => {\r\n        if (seporator == null) {\r\n            seporator = '|';\r\n        }\r\n        let dataArray = value.split(seporator);\r\n        /*jslint plusplus: true */\r\n        dataArray = dataArray.filter((item) => {\r\n            return item.length !== 0;\r\n        });\r\n        return dataArray;\r\n    }\r\n\r\n    // String helper function to validate that string start with specified string\r\n    result.startsWith = (str: string) => {\r\n        return value.slice(0, str.length) === str;\r\n    }\r\n\r\n    // String helper function to validate that string end with specified string\r\n    result.endsWith = (str: string) => {\r\n        return value.slice(-str.length) === str;\r\n    }\r\n\r\n    result.tag = (tag != null) ? tag : '';\r\n\r\n    result.toDate = () => {\r\n        return new Date(value.toString());\r\n    }\r\n\r\n    return result;\r\n}","export function IsActiveXSupported(_window: any): boolean {\r\n    let result: boolean = 'ActiveXObject' in _window;\r\n\r\n    // Verify ActiveX support in this browser\r\n    if (!result) {\r\n        console.log(\"Your browser does not support ActiveX objects\");\r\n    }\r\n    return result;\r\n}","export function GetActiveXErrorMessage(objectName: string, e: { Message: string }) {\r\n    let result = \"Unable to load ActiveX interface \" + objectName;\r\n    result += ((e != null && e.hasOwnProperty(\"Message\")) ? \".\\nError message: \" + e.Message : \"\");\r\n    return result;\r\n}","import { AllergyList } from './AllergyList';\r\nimport { AllergyListRemoved } from './AllergyListRemoved';\r\nimport { EmrMel } from './EmrMel';\r\nimport { StringInternal } from '../factories/factories';\r\nimport { IArrayAdditionalMethods } from '../interfaces/interfaces';\r\n\r\nexport class Allergies {\r\n\r\n    private _added: string;\r\n    private _addedArray: IArrayAdditionalMethods<AllergyList> = [];\r\n    private _current: string;\r\n    private _currentArray: IArrayAdditionalMethods<AllergyList> = [];\r\n    private _removed: string;\r\n    private _removedArray: IArrayAdditionalMethods<AllergyList> = [];\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get added() {\r\n        if (this._addedArray.length === 0) {\r\n            this._added = (this._added != null) ? this._added : this._mel.melFunc('{ALL_NEW(\"delimited\")}');\r\n            let dataArray = StringInternal(this._added).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._addedArray.push(new AllergyList(dataArray[index]));\r\n            }\r\n        }\r\n        return this._addedArray;\r\n    }\r\n\r\n    get current() {\r\n        if (this._currentArray.length === 0) {\r\n            this._current = (this._current != null) ? this._current : this._mel.melFunc('{ALL_PRIOR(\"delimited\")}');\r\n            let dataArray = StringInternal(this._current).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._currentArray.push(new AllergyList(dataArray[index]));\r\n            }\r\n        }\r\n        return this._currentArray;\r\n    }\r\n    \r\n    get removed() {\r\n        if (this._removedArray.length === 0) {\r\n            this._removed = (this._removed != null) ? this._removed : this._mel.melFunc('{ALL_REMOVED(\"delimited\")}');\r\n            let dataArray = StringInternal(this._removed).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._removedArray.push(new AllergyListRemoved(dataArray[index]));\r\n            }\r\n        }\r\n        return this._removedArray;\r\n    }\r\n}","import { ObservationType } from './ObservationType';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class Observation {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n    private _unitOfMeasure;\r\n    private _tag;\r\n    private readonly observationType: ObservationType = new ObservationType();\r\n\r\n    name: string = (this._name != null) ? this._name : '';\r\n    value: string = (this.data.length > 0) ? this.data[0] : '';\r\n    date: string = (this.data.length > 1) ? this.data[1] : '';\r\n    time: string = (this.data.length > 2) ? this.data[2] : '';\r\n    signingUser: string = (this.data.length > 3) ? this.data[3] : '';\r\n    enteringUser: string = (this.data.length > 4) ? this.data[4] : '';\r\n    flags: string = (this.data.length > 5) ? this.data[5] : '';\r\n    comment: string = (this.data.length > 6) ? this.data[6] : '';\r\n    state: string = (this.data.length > 7) ? this.data[7] : '';\r\n    locationOfCare: string = (this.data.length > 8) ? this.data[8] : '';\r\n    documentType: string = (this.data.length > 9) ? this.data[9] : '';\r\n    documentId: string = (this.data.length > 10) ? this.data[10] : '';\r\n    type: string = this._observationType;\r\n\r\n    constructor(\r\n        public _name: string,\r\n        public _observationType: string,\r\n        public _value: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = (): string => {\r\n        let response = this._mel.saveObservation(this.name, this.value, this.date); //  this._mel.melFunc('{OBSNOW(\"' + this.name + '\",\"' + this.value + '\")}');\r\n        if (this.tag != null && this.tag != '') {\r\n            response = this._mel.melFunc('{OBSTAGNOW(\"' + this.name + '\",\"' + this.tag + '\")}');\r\n        }\r\n        if (this.comment != null && this.comment != '') {\r\n            response = this._mel.melFunc('{OBSMODIFIERNOW(\"' + this.name + '\",\"' + this.comment + '\")}');\r\n        }\r\n        return response;\r\n    }\r\n\r\n    remove = (): void => {\r\n\r\n    }\r\n\r\n    get unitOfMeasure() {\r\n        this._unitOfMeasure = (this._unitOfMeasure != null) ? this._unitOfMeasure : this._mel.melFunc('{OBSUNIT(\"' + this.name + '\")}');\r\n        return this._unitOfMeasure;\r\n    }\r\n\r\n    get tag() {\r\n        this._tag = (this._tag != null) ? this._tag\r\n            : (this._observationType === this.observationType.DocumentUnsigned) ? this._mel.melFunc('{OBSTAGNOW(\"' + this.name + '\")}')\r\n                : '';\r\n        return this._tag;\r\n    }\r\n}\r\n","export class Protocol {\r\n\r\n    name: string = (this._value != null) ? this._value : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n}","import { ObsTermsMap, EmrMel } from './classes';\r\n\r\nexport class Measurement implements ObsTermsMap {\r\n\r\n    constructor(\r\n        public isCurrent: boolean,\r\n        public _weight: string,\r\n        public _height: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    // mdObject.obsTermsMap.weight\r\n    get weight(): string {\r\n        return this._mel.getObs(this.isCurrent, this._weight);\r\n    }\r\n\r\n    // mdObject.obsTermsMap.height\r\n    get height(): string {\r\n        return this._mel.getObs(this.isCurrent, this._height);\r\n    }\r\n}","import { EmrMel } from './classes';\r\n\r\nexport class Insurance {\r\n\r\n    private _name: string;\r\n    private _address: string;\r\n    private _insuranceId: string;\r\n    private _planName: string;\r\n    private _groupNumber: string;\r\n    private _phone: string;\r\n\r\n\r\n    constructor(\r\n        public insuranceType: string, // Type of insurance P = Primary S = Secondary O = Other,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    // The name of the patients insurance carrier.\r\n    get name() {\r\n        this._name = (this._name == null) ? this._mel.melFunc('{INS_NAME(\"' + this.insuranceType + '\")}') : this._name;\r\n        return this._name;\r\n    }\r\n\r\n    // The name and address of the patients insurance carrier.\r\n    get address() {\r\n        this._address = (this._address == null) ? this._mel.melFunc('{INS_ADDR(\"' + this.insuranceType + '\")}') : this._address;\r\n        return this._address;\r\n    }\r\n\r\n    // The patients insurance ID number for insurance carrier.\r\n    get insuranceId() {\r\n        this._insuranceId = (this._insuranceId == null) ? this._mel.melFunc('{INS_ID(\"' + this.insuranceType + '\")}') : this._insuranceId;\r\n        return this._insuranceId;\r\n    }\r\n\r\n    // The name of the patients plan for insurance\r\n    get planName() {\r\n        this._planName = (this._planName == null) ? this._mel.melFunc('{INS_PLAN(\"' + this.insuranceType + '\")}') : this._planName;\r\n        return this._planName;\r\n    }\r\n\r\n    // The group number of the patients insurance carrier.\r\n    get groupNumber() {\r\n        this._groupNumber = (this._groupNumber == null) ? this._mel.melFunc('{INS_GRP(\"' + this.insuranceType + '\")}') : this._groupNumber;\r\n        return this._groupNumber;\r\n    }\r\n\r\n    // The phone number of the patients insurance company\r\n    get phone() {\r\n        this._phone = (this._phone == null) ? this._mel.melFunc('{INS_PHONE(\"' + this.insuranceType + '\")}') : this._phone;\r\n        return this._phone;\r\n    }\r\n}","import { Measurement } from './Measurement';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class Measurements {\r\n\r\n    private _current: Measurement;\r\n    private _previous: Measurement;\r\n\r\n    constructor(\r\n        public _weight: string,\r\n        public _height: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get current() {\r\n        return (this._current != null) ? this._current : new Measurement(true, this._weight, this._height, this._mel);\r\n    }\r\n\r\n    get previous() {\r\n        return (this._previous != null) ? this._previous : new Measurement(false, this._weight, this._height, this._mel);\r\n    }\r\n}","import { EmrMel } from './EmrMel';\r\n\r\nexport class CarePlan {\r\n\r\n    private data = this._value == null ? [] : this._value.split('^');\r\n    private isNew = this._value == null ? true : false;\r\n\r\n    carePlanId: string = (this.data.length > 0) ? this.data[0] : '';\r\n    goal: string = (this.data.length > 1) ? this.data[1] : '';\r\n    snomedCTCode: string = (this.data.length > 2) ? this.data[2] : '';\r\n    target: string = (this.data.length > 3) ? this.data[3] : '';\r\n    instructions: string = (this.data.length > 4) ? this.data[4] : '';\r\n    goalSetDate: string = (this.data.length > 5) ? this.data[5] : '';\r\n    goalMetDate: string = (this.data.length > 6) ? this.data[6] : '';\r\n    recordCreatedDateTime: string = (this.data.length > 7) ? this.data[7] : '';\r\n    sign: string = (this.data.length > 8) ? this.data[8] : '';\r\n    signedBy: string = (this.data.length > 9) ? this.data[9] : '';\r\n    signedDate: string = (this.data.length > 10) ? this.data[10] : '';\r\n    recordChangedDateTime: string = (this.data.length > 11) ? this.data[11] : '';\r\n    recordChangedBy: string = (this.data.length > 12) ? this.data[12] : '';\r\n    patientConditionDescription: string = (this.data.length > 13) ? this.data[13] : '';\r\n    patientConditionCode: string = (this.data.length > 14) ? this.data[14] : '';\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = (): void => {\r\n        if (this.isNew) {\r\n            let isError = this.validateAdd(); //TODO ADD VALIDATION\r\n            let response;\r\n            if (isError === '') {\r\n                response = this._mel.melFunc('{MEL_ADD_CARE_PLAN(' + this.toStringAdd() + ')}');\r\n                if (response < 0) {\r\n                    alert(this.carePlanAddError(response));\r\n                }\r\n            } else {\r\n                alert(isError);\r\n            }\r\n        }\r\n        else {\r\n            //update ;\r\n            //{MEL_UPDATE_CARE_PLAN(\"1691155657053120\",\"Goal-Exercise to lose weight\",\"\",\"\",\"\" ,\"\",\"2013/08/03\" ,\"\")}\r\n            //err_code = Mel.eval(\"{MEL_UPDATE_CARE_PLAN(\\\"\" +careplanID + \"\\\",\\\"\" +DB_TimeStamp + \"\\\",\\\"\" +goal_sel + \"\\\",\\\"\" +snomed_code + \"\\\",\\\"\" +target + \"\\\",\\\"\" +ins_sel + \"\\\",\\\"\" +sdate + \"\\\",\\\"\" +mdate + \"\\\",\\\"\" +problemID + \"\\\")}\");\r\n        }\r\n    }\r\n\r\n    toMelString = (): string => {\r\n        return this._value;\r\n    }\r\n\r\n    validateAdd = (): string => {\r\n        let errorMessage: string = ' is required.';\r\n        // check required parameters\r\n        if (this.goal === '') {\r\n            return 'goal' + errorMessage;\r\n        }\r\n        return '';\r\n    }\r\n\r\n    //MEL symbol for adding care this._value - format\r\n    //MEL_ADD_CARE_PLAN (Goal, SNOMEDCTCODE, Target, Instructions, GoalSetDate, GoalMetDate, PRID ( pipe separated Problem IDs selected from patients active problems) \r\n    toStringAdd = (): string => {\r\n        return '\\\"' + this.goal + '\\\",\\\"' +\r\n            this.snomedCTCode + '\\\",\\\"' +\r\n            this.target + '\\\",\\\"' +\r\n            this.instructions + '\\\",\\\"' +\r\n            this.goalSetDate + '\\\",\\\"' +\r\n            this.goalMetDate + '\\\",\\\"' +\r\n            this.patientConditionCode + '\\\"';\r\n    }\r\n\r\n    carePlanAddError = (code: string): string => {\r\n        let response: string = '';\r\n        switch (code) {\r\n            case \"-1\":\r\n                response = \"Error Code -1: Description or blank is too long.\";\r\n                break;\r\n            case \"-2\":\r\n                response = \"Error Code -2: Code is too long.\";\r\n                break;\r\n            case \"-3\":\r\n                response = \"Error Code -3: Target is too long.\";\r\n                break;\r\n            case \"-4\":\r\n                response = \"Error Code -4: Instruction is too long.\";\r\n                break;\r\n            case \"-5\":\r\n                response = \"Error Code -5: goalSetDate is invalid.\";\r\n                break;\r\n            case \"-6\":\r\n                response = \"Error Code -6: goalMetDate is invalid or less than goalSetDate.\";\r\n                break;\r\n            case \"-7\":\r\n                response = \"Error Code -7: Invalid patientConditionCode. Use $mdObject.patient.problems[index].problemId\";\r\n                break;\r\n            case \"-8\":\r\n                response = \"Error Code -8: Cannot add Care Plan for some other reason.\";\r\n                break;\r\n            case \"-21\":\r\n                response = \"Error Code -21: Service layer error.\";\r\n                break;\r\n            default:\r\n        }\r\n        return response;\r\n    }\r\n}","import { EmrMel } from './classes';\r\nimport { MailingAddressExternal } from './external/MailingAddressExternal';\r\n\r\nexport class Address {\r\n\r\n    private _address1: string;\r\n    private _address2: string;\r\n    private _city: string;\r\n    private _state: string;\r\n    private _postCode: string;\r\n    private _country: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _mailingAddressExternal?: MailingAddressExternal\r\n    ) {\r\n        if (this._mailingAddressExternal) {\r\n            this._address1 = this._mailingAddressExternal.line1Addr;\r\n            this._address2 = this._mailingAddressExternal.line2Addr;\r\n            this._city = this._mailingAddressExternal.cityName;\r\n            this._country = this._mailingAddressExternal.countryCode;\r\n            this._postCode = this._mailingAddressExternal.postalCode;\r\n            this._state = this._mailingAddressExternal.stateCode;\r\n        }\r\n    }\r\n\r\n    // Returns the first line of the patients address\r\n    get address1() {\r\n        this._address1 = (this._address1 !== undefined) ? this._address1 : this._mel.melFunc('{PATIENT.ADDRESS1}');\r\n        return this._address1;\r\n    }\r\n\r\n    // Returns the second line of the patients address\r\n    get address2() {\r\n        this._address2 = (this._address2 !== undefined) ? this._address2 : this._mel.melFunc('{PATIENT.ADDRESS2}');\r\n        return this._address2;\r\n    }\r\n\r\n    // Returns the patients city of residence\r\n    get city() {\r\n        this._city = (this._city !== undefined) ? this._city : this._mel.melFunc('{PATIENT.CITY}');\r\n        return this._city;\r\n    }\r\n\r\n    // Returns the patients country of residence\r\n    get country() {\r\n        this._country = (this._country !== undefined) ? this._country : this._mel.melFunc('{PATIENT.COUNTRY}');\r\n        return this._country;\r\n    }\r\n\r\n    // Returns the patients ZIP/Postal code\r\n    get postCode() {\r\n        this._postCode = (this._postCode !== undefined) ? this._postCode : this._mel.melFunc('{PATIENT.ZIP}');\r\n        return this._postCode;\r\n    }\r\n\r\n    // Returns the patients state or province\r\n    get state() {\r\n        this._state = (this._state !== undefined) ? this._state : this._mel.melFunc('{PATIENT.STATE}');\r\n        return this._state;\r\n    }\r\n}","import { EmrMel } from './classes';\r\n\r\nexport class Phone {\r\n\r\n    private _home: string;\r\n    private _business: string;\r\n    private _mobile: string;\r\n    private _fax: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get home() {\r\n        this._home = (this._home != null) ? this._home : this._mel.melFunc('{PATIENT.ALTPHONE}');\r\n        return this._home;\r\n    }\r\n\r\n    // Returns the patients business/work telephone number\r\n    get business() {\r\n        this._business = (this._business != null) ? this._business : this._mel.melFunc('{PATIENT.WORKPHONE}');\r\n        return this._business;\r\n    }\r\n\r\n    // Returns the patients cell phone number\r\n    get mobile() {\r\n        this._mobile = (this._mobile != null) ? this._mobile : this._mel.melFunc('{PATIENT.CELLPHONE}');\r\n        return this._mobile;\r\n    }\r\n\r\n    // Returns the patients fax number\r\n    get fax() {\r\n        this._fax = (this._fax != null) ? this._fax : this._mel.melFunc('{PATIENT.FAXPHONE}');\r\n        return this._fax;\r\n    }\r\n}","import { EmrMel } from './classes';\r\n\r\nexport class ReferringProviderPhone {\r\n\r\n    private _office: string;\r\n    private _alternative: string;\r\n    private _fax: string;\r\n    private _pager: string;\r\n    private _mobile: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get office() {\r\n        this._office = (this._office != null) ? this._office : this._mel.melFunc('{PATIENT.REFMDOFFICEPHONE}');\r\n        return this._office;\r\n    }\r\n\r\n    get alternative() {\r\n        this._alternative = (this._alternative != null) ? this._alternative : this._mel.melFunc('{PATIENT.REFMDALTPHONE}');\r\n        return this._alternative;\r\n    }\r\n\r\n    get fax() {\r\n        this._fax = (this._fax != null) ? this._fax : this._mel.melFunc('{PATIENT.REFMDFAXPHONE}');\r\n        return this._fax;\r\n    }\r\n\r\n    get pager() {\r\n        this._pager = (this._pager != null) ? this._pager : this._mel.melFunc('{PATIENT.REFMDPAGERPHONE}');\r\n        return this._pager;\r\n    }\r\n\r\n    get mobile() {\r\n        this._mobile = (this._mobile != null) ? this._mobile : this._mel.melFunc('{PATIENT.REFMDCELLPHONE}');\r\n        return this._mobile;\r\n    }\r\n}","import { ReferringProviderPhone } from './ReferringProviderPhone';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class ReferringProvider {\r\n\r\n    private _referringProviderId: string;\r\n    private _firstName: string;\r\n    private _lastName: string;\r\n    private _email: string;\r\n    private _fullAddress: string;\r\n    private _phone = new ReferringProviderPhone(this._mel);\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n\r\n    get referringProviderId() {\r\n        this._referringProviderId = (this._referringProviderId != null) ? this._referringProviderId : this._mel.melFunc('{PATIENT.REFMDID}');\r\n        return this._referringProviderId;\r\n    }\r\n\r\n    get firstName() {\r\n        this._firstName = (this._firstName != null) ? this._firstName : this._mel.melFunc('{PATIENT.REFMDFIRSTNAME}');\r\n        return this._firstName;\r\n    }\r\n\r\n    get lastName() {\r\n        this._lastName = (this._lastName != null) ? this._lastName : this._mel.melFunc('{PATIENT.REFMDLASTNAME}');\r\n        return this._lastName;\r\n    }\r\n\r\n    get email() {\r\n        this._email = (this._email != null) ? this._email : this._mel.melFunc('{PATIENT.REFMDEMAILADDRESS}');\r\n        return this._email;\r\n    }\r\n\r\n    get fullAddress() {\r\n        this._fullAddress = (this._fullAddress != null) ? this._fullAddress : this._mel.melFunc('{PATIENT.REFMDADDRESS}');\r\n        return this._fullAddress;\r\n    }\r\n\r\n    get phone() {\r\n        return this._phone;\r\n    }\r\n}","export const emptyImage: string = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII===';\r\nexport const simulatorChromeExtensionId = \"gcjidgolppaalnedpaadmcnmhmdohflp\";","import { emptyImage } from \"../consts/consts\";\r\n\r\nexport class System {\r\n    static isSimulator: boolean = false;\r\n\r\n    static toDate(value: string): Date {\r\n        if (value) {\r\n            return new Date(parseInt(value.substr(6)));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    static toImage(arrayBuffer:[]){\r\n        if (arrayBuffer) {\r\n            return \"data:image/jpg;base64,\" + btoa(String.fromCharCode.apply(null, new Uint8Array(arrayBuffer)));\r\n        }\r\n        else {\r\n            return emptyImage;\r\n        }\r\n    }\r\n\r\n    static formatDate(value: string): string {\r\n        if (value) {\r\n            if (value.length == 8) {\r\n                return value.substr(4, 2) + '/' + value.substr(6, 2) + '/' + value.substr(0, 4);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}","import { IsActiveXSupported } from '../factories/factories';\r\nimport { System } from '../classes/system';\r\n\r\nexport abstract class EmrBase {\r\n\r\n    readonly isActiveXSupported = IsActiveXSupported(this._window);\r\n    readonly noData: string = 'Data Access Error';\r\n    errorMessage: string;\r\n\r\n    readonly isExternalSupported: boolean = (this.external) ? true : false;\r\n    private _external: any;\r\n    private _isSimulator: boolean;\r\n\r\n    get external(): any {\r\n        let isSimulator = this.isSimulator;\r\n        this._external = this._external ? this._external    // if the _external set, use it\r\n            : isSimulator ? this.externalSimulator            // if the simulator set, use simulatot\r\n                // if window.opener.external exists, use it \r\n                : (this._window.opener && this._window.opener.external) ? this._window.opener.external\r\n                    : this._window.external;                // otherwise use the window.external\r\n        return this._external;\r\n    }\r\n\r\n    get isSimulator(): boolean {\r\n        this._isSimulator = (this._window.opener != null && this._window.opener['_isSimulator'] != undefined) ? this._window.opener['_isSimulator']\r\n            : (this._isSimulator) ? this._isSimulator\r\n                : System.isSimulator;\r\n        return this._isSimulator;\r\n    }\r\n\r\n    constructor(\r\n        public _window: any\r\n    ) {\r\n        this._window['_isSimulator'] = this.isSimulator;\r\n    }\r\n\r\n    abstract get externalSimulator(): any;\r\n}","import { EmrBase } from '../bases/bases'\r\nimport { System } from './system';\r\nimport { GetActiveXErrorMessage } from '../factories/factories';\r\n\r\nexport class EmrMel extends EmrBase {\r\n\r\n    private melObjectName = 'GE.CPO.EMR.80.MEL';\r\n    private melObjectNameSimulator = 'GE.CPO.EMR.80.MEL.SIMULATOR';\r\n    private mel;\r\n\r\n\r\n    constructor(\r\n        public _window: any\r\n    ) {\r\n        super(_window);\r\n\r\n        this.initialization();\r\n    }\r\n\r\n    private initialization = (): void => {\r\n        if (this.isActiveXSupported) {\r\n            try {\r\n                this.mel = new this._window.ActiveXObject(this.melObjectName);\r\n            } catch (e) {\r\n                this.errorMessage = GetActiveXErrorMessage(this.melObjectName, e);\r\n            }\r\n            // Try to activate simulator\r\n            if (this.errorMessage != null) {\r\n                try {\r\n                    this.mel = new this._window.ActiveXObject(this.melObjectNameSimulator);\r\n                    System.isSimulator = true;\r\n                } catch (e) {\r\n                    alert(this.errorMessage);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (this.isExternalSupported) {\r\n\r\n            }\r\n            else {\r\n                alert(this.errorMessage);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Implements MEL eval \r\n    melFunc = (data: string): string => {\r\n        return (this.mel) ? this.mel.eval(data) : this.isExternalSupported ? this.external.EvaluateMel(data) :  this.noData;\r\n    }\r\n\r\n    saveObservation = (obs: string, value: string, date: string): string => {\r\n        return (this.mel == null) ? this.noData : this.mel.OBSNOW(obs, value, date);\r\n    }\r\n\r\n    getObs = (isCurrent: boolean, data: string): string => {\r\n        return (this.mel == null) ? this.noData : ((isCurrent == true) ? this.mel.OBSNOW(data, '', '') : this.mel.OBSPREV(data));\r\n    }\r\n\r\n    showUrlDialog = (url: string): void => {\r\n        this.melFunc('{SHOWHTMLFORM(\"' + url + '\",\"test\")}');\r\n    }\r\n\r\n    get externalSimulator(): any {\r\n        return (this.mel == null) ? this.noData : this.mel.external;\r\n    }\r\n}","import { EmrBase } from '../bases/bases'\r\nimport { GetActiveXErrorMessage } from '../factories/factories';\r\nimport { System } from './system';\r\n\r\nexport class EmrApp extends EmrBase {\r\n\r\n    private appObjectName = 'GE.CPO.EMR.90.Application';\r\n    private appObjectNameSimulator = 'GE.CPO.EMR.90.Application.SIMULATOR';\r\n    private app;\r\n\r\n    constructor(\r\n        public _window: any\r\n    ) {\r\n        super(_window);\r\n\r\n        this.initialization();\r\n    }\r\n\r\n    private initialization = (): void => {\r\n        if (this.isActiveXSupported) {\r\n            try {\r\n                this.app = new this._window.ActiveXObject(this.appObjectName);\r\n                this.app.SetPasscode(this._window.external['Passcode']);\r\n            } catch (e) {\r\n                this.errorMessage = GetActiveXErrorMessage(this.appObjectName, e);\r\n            }\r\n            // Try to activate simulator\r\n            if (this.errorMessage != null) {\r\n                try {\r\n                    this.app = new this._window.ActiveXObject(this.appObjectNameSimulator);\r\n                    System.isSimulator = true;\r\n                } catch (e) {\r\n                    this.errorMessage = GetActiveXErrorMessage(this.appObjectName, e);\r\n                    alert(this.errorMessage);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    get enterpriseId(): string {\r\n        return (this.app == null) ? this.noData : this.app.EnterpriseID;\r\n    }\r\n\r\n    get databaseVersion(): string {\r\n        return (this.app == null) ? this.noData : this.app.DatabaseVersion;\r\n    }\r\n\r\n    showUrlDialog = (url: string): string => {\r\n        return (this.app == null) ? this.noData : this.app.ShowURLDialog(url);\r\n    }\r\n\r\n    get externalSimulator(): any {\r\n        return (this.app == null) ? this.noData : this.app.external;\r\n    }\r\n}","import { StringInternal } from '../factories/factories';\r\nimport { EmrMel, EmrApp } from '../classes/classes';\r\n\r\nexport class EmrWindow {\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _app: EmrApp,\r\n        public _window: any,\r\n        public _document: any\r\n    ) { }\r\n\r\n    openDialog = (url: string) => {\r\n        ((StringInternal(url.toLowerCase())).startsWith('//localserver')) ? this._mel.showUrlDialog(url) : this._app.showUrlDialog(url);\r\n    }\r\n\r\n    /**\r\n     * Arguments :\r\n     * verb : 'GET'|'POST', defaults to \"GET\"\r\n     * target : an optional opening target (a name, or \"_blank\"), defaults to \"_self\"\r\n     */\r\n    open = (url: string, verb: string, target: string, features: string, data: Object) => {\r\n        let form: HTMLFormElement = this._document.createElement(\"form\");\r\n        form.action = url;\r\n        form.method = verb || 'GET';\r\n        form.target = target || \"_self\";\r\n        if (data) {\r\n            for (let key in data) {\r\n                let input: HTMLTextAreaElement = this._document.createElement(\"textarea\");\r\n                input.name = key;\r\n                input.value = (typeof data[key] === \"object\") ? JSON.stringify(data[key]) : data[key];\r\n                form.appendChild(input);\r\n            }\r\n        }\r\n        form.style.display = 'none';\r\n        this._document.body.appendChild(form);\r\n        let _window = this._window.open(\"about:blank\", target, features);\r\n        form.submit();\r\n        return _window;\r\n    }\r\n}","import { System } from \"../system\";\r\nimport { PersonExternal } from './PersonExternal';\r\nimport { IdentifierExternal } from \"./IdentifierExternal\";\r\nimport { PersonAgeExternal } from \"./PersonAgeExternal\";\r\nimport { PrimaryProviderRelationshipExternal } from \"./PrimaryProviderRelationshipExternal\";\r\nimport { MailingAddressExternal } from \"./MailingAddressExternal\";\r\n\r\nexport class DemographicsExternal {\r\n    private _json: string;\r\n        confidentialityCode: any;\r\n        contactList: any;\r\n        electronicAddressList: any;\r\n    excludedUserAccess: number;\r\n    excludedUserAccessSpecified: boolean;\r\n        guarantorList: any;\r\n        guardianList: any;\r\n    hasPatientAccess: boolean;\r\n    hasPatientAccessSpecified: boolean;\r\n        healthIssueList: any;\r\n    identifierList: IdentifierExternal[];\r\n    lastOfficeVisitDate: Date;\r\n    lastOfficeVisitDateSpecified: boolean;\r\n    mailingAddressList: MailingAddressExternal[];\r\n    medicareAdvantagePatient: boolean;\r\n    medicareAdvantagePatientSpecified: boolean;\r\n    mqicEPatientId: number;\r\n    mqicEPatientIdSpecified: boolean;\r\n        organization: any;\r\n    patientKey: number;\r\n    patientKeySpecified: boolean;\r\n    patientPicture: string;\r\n    person: PersonExternal;\r\n    personAge: PersonAgeExternal;\r\n    preferredLanguage: string;\r\n    primaryProviderRelationshipList: PrimaryProviderRelationshipExternal[];\r\n    registrationNote: string;\r\n    statusCode: string;\r\n    vipCode: string;\r\n\r\n    constructor(\r\n        public json: string\r\n    ) {\r\n        if (json) {\r\n            this._json = json;\r\n            let obj = JSON.parse(json);\r\n            this.confidentialityCode = obj.confidentialityCode;\r\n            this.contactList = obj.contactList;\r\n            this.electronicAddressList = obj.electronicAddressList;\r\n            this.excludedUserAccess = obj.excludedUserAccess;\r\n            this.excludedUserAccessSpecified = obj.excludedUserAccessSpecified;\r\n            this.guarantorList = obj.guarantorList;\r\n            this.guardianList = obj.guardianList;\r\n            this.hasPatientAccess = obj.hasPatientAccess;\r\n            this.hasPatientAccessSpecified = obj.hasPatientAccessSpecified;\r\n            this.healthIssueList = obj.healthIssueList;\r\n            this.identifierList = obj.identifierList;\r\n            this.lastOfficeVisitDate = System.toDate(obj.lastOfficeVisitDate);\r\n            this.lastOfficeVisitDateSpecified = obj.lastOfficeVisitDateSpecified;\r\n            this.mailingAddressList = obj.mailingAddressList;\r\n            this.medicareAdvantagePatient = obj.medicareAdvantagePatient;\r\n            this.medicareAdvantagePatientSpecified = obj.medicareAdvantagePatientSpecified;\r\n            this.mqicEPatientId = obj.mqicEPatientId;\r\n            this.mqicEPatientIdSpecified = obj.mqicEPatientIdSpecified;\r\n            this.organization = obj.organization;\r\n            this.patientKey = obj.patientKey;\r\n            this.patientKeySpecified = obj.patientKeySpecified;\r\n            this.patientPicture = System.toImage(obj.patientPicture);\r\n            this.person = obj.person;\r\n            this.personAge = obj.personAge;\r\n            this.preferredLanguage = obj.preferredLanguage;\r\n            this.primaryProviderRelationshipList = obj.primaryProviderRelationshipList;\r\n            this.registrationNote = obj.registrationNote;\r\n            this.statusCode = obj.statusCode;\r\n            this.vipCode = obj.vipCode;\r\n        }\r\n    }\r\n\r\n    toJson = (): string => { return this._json;}\r\n}\r\n","import { System } from \"../system\";\r\n\r\nexport class UserDetailExternal {\r\n    activationDate: Date;\r\n    activationDateSpecified: boolean;\r\n    authorizations: any;\r\n    authorizedLocationOfCares: any;\r\n    currentLocation: number;\r\n    currentLocationDetail: any;\r\n    currentLocationSpecified: boolean;\r\n    data2000: any;\r\n    deaNumber: any;\r\n    errorDetails: any;\r\n    expirationDate: Date;\r\n    expirationDateSpecified: boolean;\r\n    firstName: string;\r\n    globalID: number;\r\n    globalIDSpecified: boolean;\r\n    groupList: any;\r\n    homeLocation: number;\r\n    homeLocationDetail: any;\r\n    homeLocationSpecified: boolean;\r\n    isrespprov: number;\r\n    isrespprovSpecified: boolean;\r\n    jobTitle: number;\r\n    jobTitleDetail: any;\r\n    jobTitleSpecified: boolean;\r\n    lastLoginDate: Date;\r\n    lastLoginDateSpecified: boolean;\r\n    lastName: string;\r\n    lastPasswordChange: Date;\r\n    lastPasswordChangeSpecified: boolean;\r\n    licenseNumber: any;\r\n    loginAttempts: number;\r\n    loginAttemptsSpecified: boolean;\r\n    loginName: any;\r\n    memberID: any;\r\n    middleName: string;\r\n    mqicUserName: any;\r\n    npi: any;\r\n    orgName: any;\r\n    phone: any;\r\n    pidList: any;\r\n    pmpRoleID: number;\r\n    pmpRoleIDSpecified: boolean;\r\n    pmpRoleName: any;\r\n    prescriberID: any;\r\n    providerID: number;\r\n    providerIDSpecified: boolean;\r\n    result: number;\r\n    resultSpecified: boolean;\r\n    roleList: any;\r\n    specialty: number;\r\n    specialtyDetail: any;\r\n    specialtySpecified: boolean;\r\n    spi: any;\r\n    stateName: any;\r\n    status: any;\r\n    subscriptionureg: any;\r\n    tocElectronicAddress: any;\r\n    updateType: any;\r\n    upin: any;\r\n\r\n    static fromExternal(\r\n        _obj: any\r\n    ): UserDetailExternal {\r\n        let userDetailExternal = new UserDetailExternal();\r\n\r\n        userDetailExternal.activationDate = System.toDate(_obj.activationDate);\r\n        userDetailExternal.activationDateSpecified = _obj.activationDateSpecified;\r\n        userDetailExternal.authorizations = _obj.authorizations;\r\n        userDetailExternal.authorizedLocationOfCares = _obj.authorizedLocationOfCares;\r\n        userDetailExternal.currentLocation = _obj.currentLocation;\r\n        userDetailExternal.currentLocationDetail = _obj.currentLocationDetail;\r\n        userDetailExternal.currentLocationSpecified = _obj.currentLocationSpecified;\r\n        userDetailExternal.data2000 = _obj.data2000;\r\n        userDetailExternal.deaNumber = _obj.deaNumber;\r\n        userDetailExternal.errorDetails = _obj.errorDetails;\r\n        userDetailExternal.expirationDate = System.toDate(_obj.expirationDate);\r\n        userDetailExternal.expirationDateSpecified = _obj.expirationDateSpecified;\r\n        userDetailExternal.firstName = _obj.firstName;\r\n        userDetailExternal.globalID = _obj.globalID;\r\n        userDetailExternal.globalIDSpecified = _obj.globalIDSpecified;\r\n        userDetailExternal.groupList = _obj.groupList;\r\n        userDetailExternal.homeLocation = _obj.homeLocation;\r\n        userDetailExternal.homeLocationDetail = _obj.homeLocationDetail;\r\n        userDetailExternal.homeLocationSpecified = _obj.homeLocationSpecified;\r\n        userDetailExternal.isrespprov = _obj.isrespprov;\r\n        userDetailExternal.isrespprovSpecified = _obj.isrespprovSpecified;\r\n        userDetailExternal.jobTitle = _obj.jobTitle;\r\n        userDetailExternal.jobTitleDetail = _obj.jobTitleDetail;\r\n        userDetailExternal.jobTitleSpecified = _obj.jobTitleSpecified;\r\n        userDetailExternal.lastLoginDate = System.toDate(_obj.lastLoginDate);\r\n        userDetailExternal.lastLoginDateSpecified = _obj.lastLoginDateSpecified;\r\n        userDetailExternal.lastName = _obj.lastName;\r\n        userDetailExternal.lastPasswordChange = System.toDate(_obj.lastPasswordChange);\r\n        userDetailExternal.lastPasswordChangeSpecified = _obj.lastPasswordChangeSpecified;\r\n        userDetailExternal.licenseNumber = _obj.licenseNumber;\r\n        userDetailExternal.loginAttempts = _obj.loginAttempts;\r\n        userDetailExternal.loginAttemptsSpecified = _obj.loginAttemptsSpecified;\r\n        userDetailExternal.loginName = _obj.loginName;\r\n        userDetailExternal.memberID = _obj.memberID;\r\n        userDetailExternal.middleName = _obj.middleName;\r\n        userDetailExternal.mqicUserName = _obj.mqicUserName;\r\n        userDetailExternal.npi = _obj.npi;\r\n        userDetailExternal.orgName = _obj.orgName;\r\n        userDetailExternal.phone = _obj.phone;\r\n        userDetailExternal.pidList = _obj.pidList;\r\n        userDetailExternal.pmpRoleID = _obj.pmpRoleID;\r\n        userDetailExternal.pmpRoleIDSpecified = _obj.pmpRoleIDSpecified;\r\n        userDetailExternal.pmpRoleName = _obj.pmpRoleName;\r\n        userDetailExternal.prescriberID = _obj.prescriberID;\r\n        userDetailExternal.providerID = _obj.providerID;\r\n        userDetailExternal.providerIDSpecified = _obj.providerIDSpecified;\r\n        userDetailExternal.result = _obj.result;\r\n        userDetailExternal.resultSpecified = _obj.resultSpecified;\r\n        userDetailExternal.roleList = _obj.roleList;\r\n        userDetailExternal.specialty = _obj.specialty;\r\n        userDetailExternal.specialtyDetail = _obj.specialtyDetail;\r\n        userDetailExternal.specialtySpecified = _obj.specialtySpecified;\r\n        userDetailExternal.spi = _obj.spi;\r\n        userDetailExternal.stateName = _obj.stateName;\r\n        userDetailExternal.status = _obj.status;\r\n        userDetailExternal.subscriptionureg = _obj.subscriptionureg;\r\n        userDetailExternal.tocElectronicAddress = _obj.tocElectronicAddress;\r\n        userDetailExternal.updateType = _obj.updateType;\r\n        userDetailExternal.upin = _obj.upin;\r\n\r\n        return userDetailExternal;\r\n    }\r\n\r\n}","import { UserDetailExternal } from \"./UserDetailExternal\";\r\nimport { System } from \"../system\";\r\n\r\nexport class AllergyExternal {\r\n    allclass: string; //IAllergyData.classification.substr(0,1) See: AllergyClassCode\r\n    allergyGroupID: number;\r\n    allergyGroupIDSpecified: boolean;\r\n    allergyID: number;\r\n    annotate: any;\r\n    aproxonsetdate: any;\r\n    change: number; //4 - deleted; 6 - added; 2 - current\r\n    changeSpecified: boolean;\r\n    dbCreateDate: Date;\r\n    dbCreateDateSpecified: boolean;\r\n    dbUpdatedDate: Date;\r\n    dbUpdatedDateSpecified: boolean;\r\n    description: string; //IAllergyData.description\r\n    documentDetail: any;\r\n    drugDescID: number;\r\n    drugDescIDSpecified: boolean;\r\n    errorDetails: any;\r\n    expirationID: number;\r\n    extAllergyID: number;\r\n    extAllergyIDSpecified: boolean;\r\n    externalAllergyInfoDetail: any;\r\n    genericProductIndex: any;\r\n    gi: any;\r\n    heme: any;\r\n    iscritical: string;\r\n    kind: any;\r\n    knowledgeBaseDrugCode: string;\r\n    knowledgeBaseDrugCodeSpecified: boolean;\r\n    medicationInfo: any;\r\n    name: string; //IAllergyData.name\r\n    ndclabprod: any;\r\n    ndcpackage: any;\r\n    onsetdate: Date; //IAllergyData.onSetDate\r\n    onsetdateSpecified: boolean;\r\n    other: any;\r\n    pendUserIndent: number;\r\n    pendUserIndentSpecified: boolean;\r\n    pendUserSort: number;\r\n    pendUserSortSpecified: boolean;\r\n    personID: number;\r\n    pubtime: number;\r\n    pubtimeSpecified: boolean;\r\n    pubUser: number;\r\n    pubUserDetail: UserDetailExternal;\r\n    pubUserSpecified: boolean;\r\n    rash: any;\r\n    resp: any;\r\n    result: number;\r\n    resultSpecified: boolean;\r\n    searchCriteria: any;\r\n    secondaryDocumentID: number;\r\n    secondaryDocumentIDSpecified: boolean;\r\n    severity: any;\r\n    shock: any;\r\n    snomedID: number;\r\n    snomedIDSpecified: boolean;\r\n    stopdate: Date; //IAllergyData.stopDate\r\n    stopdateSpecified: boolean;\r\n    stopreason: any;\r\n    userDetail: UserDetailExternal;\r\n    userID: number;\r\n    userIDSpecified: boolean;\r\n    userIndent: number;\r\n    userIndentSpecified: boolean;\r\n    userSort: number;\r\n    userSortSpecified: boolean;\r\n\r\n    static fromExternal(\r\n        _obj: any\r\n    ): AllergyExternal {\r\n        let allergyExternal = new AllergyExternal();\r\n        allergyExternal.allclass = _obj.allclass;\r\n        allergyExternal.allergyGroupID = _obj.allergyGroupID;\r\n        allergyExternal.allergyGroupIDSpecified = _obj.allergyGroupIDSpecified;\r\n        allergyExternal.allergyID = _obj.allergyID;\r\n        allergyExternal.annotate = _obj.annotate;\r\n        allergyExternal.aproxonsetdate = _obj.aproxonsetdate;\r\n        allergyExternal.change = _obj.change;\r\n        allergyExternal.changeSpecified = _obj.changeSpecified;\r\n        allergyExternal.dbCreateDate = System.toDate(_obj.dbCreateDate);\r\n        allergyExternal.dbCreateDateSpecified = _obj.dbCreateDateSpecified;\r\n        allergyExternal.dbUpdatedDate = System.toDate(_obj.dbUpdatedDate);\r\n        allergyExternal.dbUpdatedDateSpecified = _obj.dbUpdatedDateSpecified;\r\n        allergyExternal.description = _obj.description;\r\n        allergyExternal.documentDetail = _obj.documentDetail;\r\n        allergyExternal.drugDescID = _obj.drugDescID;\r\n        allergyExternal.drugDescIDSpecified = _obj.drugDescIDSpecified;\r\n        allergyExternal.errorDetails = _obj.errorDetails;\r\n        allergyExternal.expirationID = _obj.expirationID;\r\n        allergyExternal.extAllergyID = _obj.extAllergyID;\r\n        allergyExternal.extAllergyIDSpecified = _obj.extAllergyIDSpecified;\r\n        allergyExternal.externalAllergyInfoDetail = _obj.externalAllergyInfoDetail;\r\n        allergyExternal.genericProductIndex = _obj.genericProductIndex;\r\n        allergyExternal.gi = _obj.gi;\r\n        allergyExternal.heme = _obj.heme;\r\n        allergyExternal.iscritical = _obj.iscritical;\r\n        allergyExternal.kind = _obj.kind;\r\n        allergyExternal.knowledgeBaseDrugCode = _obj.knowledgeBaseDrugCode;\r\n        allergyExternal.knowledgeBaseDrugCodeSpecified = _obj.knowledgeBaseDrugCodeSpecified;\r\n        allergyExternal.medicationInfo = _obj.medicationInfo;\r\n        allergyExternal.name = _obj.name;\r\n        allergyExternal.ndclabprod = _obj.ndclabprod;\r\n        allergyExternal.ndcpackage = _obj.ndcpackage;\r\n        allergyExternal.onsetdate = System.toDate(_obj.onsetdate);\r\n        allergyExternal.onsetdateSpecified = _obj.onsetdateSpecified;\r\n        allergyExternal.other = _obj.other;\r\n        allergyExternal.pendUserIndent = _obj.pendUserIndent;\r\n        allergyExternal.pendUserIndentSpecified = _obj.pendUserIndentSpecified;\r\n        allergyExternal.pendUserSort = _obj.pendUserSort;\r\n        allergyExternal.pendUserSortSpecified = _obj.pendUserSortSpecified;\r\n        allergyExternal.personID = _obj.personID;\r\n        allergyExternal.pubtime = _obj.pubtime;\r\n        allergyExternal.pubtimeSpecified = _obj.pubtimeSpecified;\r\n        allergyExternal.pubUser = _obj.pubUser;\r\n        allergyExternal.pubUserDetail = UserDetailExternal.fromExternal(_obj.pubUserDetail);\r\n        allergyExternal.pubUserSpecified = _obj.pubUserSpecified;\r\n        allergyExternal.rash = _obj.rash;\r\n        allergyExternal.resp = _obj.resp;\r\n        allergyExternal.result = _obj.result;\r\n        allergyExternal.resultSpecified = _obj.resultSpecified;\r\n        allergyExternal.searchCriteria = _obj.searchCriteria;\r\n        allergyExternal.secondaryDocumentID = _obj.secondaryDocumentID;\r\n        allergyExternal.secondaryDocumentIDSpecified = _obj.secondaryDocumentIDSpecified;\r\n        allergyExternal.severity = _obj.severity;\r\n        allergyExternal.shock = _obj.shock;\r\n        allergyExternal.snomedID = _obj.snomedID;\r\n        allergyExternal.snomedIDSpecified = _obj.snomedIDSpecified;\r\n        allergyExternal.stopdate = System.toDate(_obj.stopdate);\r\n        allergyExternal.stopdateSpecified = _obj.stopdateSpecified;\r\n        allergyExternal.stopreason = _obj.stopreason;\r\n        allergyExternal.userDetail = UserDetailExternal.fromExternal(_obj.userDetail);\r\n        allergyExternal.userID = _obj.userID;\r\n        allergyExternal.userIDSpecified = _obj.userIDSpecified;\r\n        allergyExternal.userIndent = _obj.userIndent;\r\n        allergyExternal.userIndentSpecified = _obj.userIndentSpecified;\r\n        allergyExternal.userSort = _obj.userSort;\r\n        allergyExternal.userSortSpecified = _obj.userSortSpecified;\r\n\r\n        return allergyExternal;\r\n    }\r\n}","import { UserDetailExternal } from \"./UserDetailExternal\";\r\nimport { CodeDetailExternal } from \"./CodeDetailExternal\";\r\nimport { System } from \"../system\";\r\n\r\nexport class ProblemExternal {\r\n    annotate: string;\r\n    aproxonsetdate: any;\r\n    aproxstopdate: any;\r\n    assessmentList: any;\r\n    change: number;\r\n    code: string;\r\n    codechange: any;\r\n    covered: any;\r\n    dbCreateDate: Date;\r\n    dbCreateDateSpecified: boolean;\r\n    dbUpdatedDate: Date;\r\n    dbUpdatedDateSpecified: boolean;\r\n    description: string;\r\n    documentDetail: any;\r\n    errorDetails: any;\r\n    expirationID: number;\r\n    expirationIDSpecified: boolean;\r\n    externalProblemDetail: any;\r\n    extSecondaryProblemID: number;\r\n    extSecondaryProblemIDSpecified: boolean;\r\n    icd9CodeDetail: CodeDetailExternal;\r\n    icd9MasterDiagnosisID: number;\r\n    icd9MasterDiagnosisIDSpecified: boolean;\r\n    icd10CodeDetail: CodeDetailExternal;\r\n    icd10MasterDiagnosisID: number;\r\n    icd10MasterDiagnosisIDSpecified: boolean;\r\n    lastClaimedDate: Date;\r\n    lastClaimedDateSpecified: boolean;\r\n    medicareAdvantageAlert: boolean;\r\n    medicareAdvantageAlertSpecified: boolean;\r\n    medicareAdvantageRiskAdjustmentFactor: any;\r\n    onsetdate: Date;\r\n    onsetdateSpecified: boolean;\r\n    pendUserIndent: number;\r\n    pendUserIndentSpecified: boolean;\r\n    pendUserSort: number;\r\n    pendUserSortSpecified: boolean;\r\n    personID: number;\r\n    priority: number;\r\n    prioritySpecified: boolean;\r\n    problemID: number;\r\n    problemIDSpecified: boolean;\r\n    pubtime: number;\r\n    pubtimeSpecified: boolean;\r\n    pubUser: number;\r\n    pubUserDetail: UserDetailExternal;\r\n    pubUserSpecified: boolean;\r\n    qualifier: string;\r\n    result: number;\r\n    resultSpecified: boolean;\r\n    searchCriteria: any;\r\n    secondaryDocumentID: number;\r\n    secondaryDocumentIDSpecified: boolean;\r\n    secondaryProblemID: number;\r\n    secondaryProblemIDSpecified: boolean;\r\n    snoMedCodeDetail: any;\r\n    snoMedMasterDiagnosisID: number;\r\n    snoMedMasterDiagnosisIDSpecified: boolean;\r\n    stopdate: Date;\r\n    stopdateSpecified: boolean;\r\n    stopreason: any;\r\n    userDetail: UserDetailExternal;\r\n    userDim: number;\r\n    userDimSpecified: boolean;\r\n    userID: number;\r\n    userIDSpecified: boolean;\r\n    userIndent: number;\r\n    userIndentSpecified: boolean;\r\n    userSort: number;\r\n    userSortSpecified: boolean;\r\n\r\n    static fromExternal(\r\n        _obj: any\r\n    ): ProblemExternal {\r\n        let problemExternal = new ProblemExternal();\r\n        problemExternal.annotate = _obj.annotate;\r\n        problemExternal.aproxonsetdate = _obj.aproxonsetdate;\r\n        problemExternal.aproxstopdate = _obj.aproxstopdate;\r\n        problemExternal.assessmentList = _obj.assessmentList;\r\n        problemExternal.change = _obj.change;\r\n        problemExternal.code = _obj.code;\r\n        problemExternal.codechange = _obj.codechange;\r\n        problemExternal.covered = _obj.covered;\r\n        problemExternal.dbCreateDate = System.toDate(_obj.dbCreateDate);\r\n        problemExternal.dbCreateDateSpecified = _obj.dbCreateDateSpecified;\r\n        problemExternal.dbUpdatedDate = System.toDate(_obj.dbUpdatedDate);\r\n        problemExternal.dbUpdatedDateSpecified = _obj.dbUpdatedDateSpecified;\r\n        problemExternal.description = _obj.description;\r\n        problemExternal.documentDetail = _obj.documentDetail;\r\n        problemExternal.errorDetails = _obj.errorDetails;\r\n        problemExternal.expirationID = _obj.expirationID;\r\n        problemExternal.expirationIDSpecified = _obj.expirationIDSpecified;\r\n        problemExternal.externalProblemDetail = _obj.externalProblemDetail;\r\n        problemExternal.extSecondaryProblemID = _obj.extSecondaryProblemID;\r\n        problemExternal.extSecondaryProblemIDSpecified = _obj.extSecondaryProblemIDSpecified;\r\n        problemExternal.icd9CodeDetail = _obj.icd9CodeDetail;\r\n        problemExternal.icd9MasterDiagnosisID = _obj.icd9MasterDiagnosisID;\r\n        problemExternal.icd9MasterDiagnosisIDSpecified = _obj.icd9MasterDiagnosisIDSpecified;\r\n        problemExternal.icd10CodeDetail = _obj.icd10CodeDetail;\r\n        problemExternal.icd10MasterDiagnosisID = _obj.icd10MasterDiagnosisID;\r\n        problemExternal.icd10MasterDiagnosisIDSpecified = _obj.icd10MasterDiagnosisIDSpecified;\r\n        problemExternal.lastClaimedDate = System.toDate(_obj.lastClaimedDate);\r\n        problemExternal.lastClaimedDateSpecified = _obj.lastClaimedDateSpecified;\r\n        problemExternal.medicareAdvantageAlert = _obj.medicareAdvantageAlert;\r\n        problemExternal.medicareAdvantageAlertSpecified = _obj.medicareAdvantageAlertSpecified;\r\n        problemExternal.medicareAdvantageRiskAdjustmentFactor = _obj.medicareAdvantageRiskAdjustmentFactor;\r\n        problemExternal.onsetdate = System.toDate(_obj.onsetdate);\r\n        problemExternal.onsetdateSpecified = _obj.onsetdateSpecified;\r\n        problemExternal.pendUserIndent = _obj.pendUserIndent;\r\n        problemExternal.pendUserIndentSpecified = _obj.pendUserIndentSpecified;\r\n        problemExternal.pendUserSort = _obj.pendUserSort;\r\n        problemExternal.pendUserSortSpecified = _obj.pendUserSortSpecified;\r\n        problemExternal.personID = _obj.personID;\r\n        problemExternal.priority = _obj.priority;\r\n        problemExternal.prioritySpecified = _obj.prioritySpecified;\r\n        problemExternal.problemID = _obj.problemID;\r\n        problemExternal.problemIDSpecified = _obj.problemIDSpecified;\r\n        problemExternal.pubtime = _obj.pubtime;\r\n        problemExternal.pubtimeSpecified = _obj.pubtimeSpecified;\r\n        problemExternal.pubUser = _obj.pubUser;\r\n        problemExternal.pubUserDetail = UserDetailExternal.fromExternal(_obj.pubUserDetail);\r\n        problemExternal.pubUserSpecified = _obj.pubUserSpecified;\r\n        problemExternal.qualifier = _obj.qualifier;\r\n        problemExternal.result = _obj.result;\r\n        problemExternal.resultSpecified = _obj.resultSpecified;\r\n        problemExternal.searchCriteria = _obj.searchCriteria;\r\n        problemExternal.secondaryDocumentID = _obj.secondaryDocumentID;\r\n        problemExternal.secondaryDocumentIDSpecified = _obj.secondaryDocumentIDSpecified;\r\n        problemExternal.secondaryProblemID = _obj.secondaryProblemID;\r\n        problemExternal.secondaryProblemIDSpecified = _obj.secondaryProblemIDSpecified;\r\n        problemExternal.snoMedCodeDetail = _obj.snoMedCodeDetail;\r\n        problemExternal.snoMedMasterDiagnosisID = _obj.snoMedMasterDiagnosisID;\r\n        problemExternal.snoMedMasterDiagnosisIDSpecified = _obj.snoMedMasterDiagnosisIDSpecified;\r\n        problemExternal.stopdate = System.toDate(_obj.stopdate);\r\n        problemExternal.stopdateSpecified = _obj.stopdateSpecified;\r\n        problemExternal.stopreason = _obj.stopreason;\r\n        problemExternal.userDetail = UserDetailExternal.fromExternal(_obj.userDetail);\r\n        problemExternal.userDim = _obj.userDim;\r\n        problemExternal.userDimSpecified = _obj.userDimSpecified;\r\n        problemExternal.userID = _obj.userID;\r\n        problemExternal.userIDSpecified = _obj.userIDSpecified;\r\n        problemExternal.userIndent = _obj.userIndent;\r\n        problemExternal.userIndentSpecified = _obj.userIndentSpecified;\r\n        problemExternal.userSort = _obj.userSort;\r\n        problemExternal.userSortSpecified = _obj.userSortSpecified;\r\n\r\n        return problemExternal;\r\n    }\r\n\r\n}","export class FlowsheetObservation {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    name: string = (this.data.length > 0) ? this.data[0] : '';\r\n    value: string = (this.data.length > 1) ? this.data[1] : '';\r\n    date: string = (this.data.length > 2) ? this.data[2] : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n\r\n}\r\n","import { StringInternal } from '../factories/factories';\r\nimport { Protocol } from './Protocol';\r\nimport { Observation } from './Observation';\r\nimport { ObservationType } from './ObservationType';\r\nimport { Address } from './Address';\r\nimport { Phone } from './Phone';\r\nimport { Immunization } from './Immunization';\r\nimport { FlowsheetObservation } from './FlowsheetObservation';\r\nimport { PatientContact } from './PatientContact';\r\nimport { ReferringProvider } from './ReferringProvider';\r\nimport { Problem } from './Problem';\r\nimport { Insurance } from './Insurance';\r\nimport { CarePlan } from './CarePlan';\r\nimport { Location } from './Location';\r\nimport { Allergies } from './Allergies';\r\nimport { EmrMel } from './EmrMel';\r\nimport { IArrayAdditionalMethods } from '../interfaces/interfaces';\r\nimport { LocationType } from '../enums/enums';\r\nimport { DemographicsExternal } from './external/external';\r\nimport { emptyImage } from '../consts/consts';\r\nimport { System } from './system';\r\n\r\n// TODO: string = PATIENT.REGNOTE; REGGUARANTOR\r\nexport class Patient {\r\n\r\n    private readonly observationType: ObservationType = new ObservationType();\r\n    private _patientId: string;\r\n    private _pid: string;\r\n    private _medicalRecordId: string;\r\n    private _externalId: string;\r\n    private _printId: string;\r\n    private _ssn: string;\r\n    private _firstName: string;\r\n    private _lastName: string;\r\n    private _middleName: string;\r\n    private _labelName: string;\r\n    private _namePrefix: string;\r\n    private _nameSuffix: string;\r\n    private _sex: string;\r\n    private _race: string;\r\n    private _ethnicity: string;\r\n    private _dateOfBirth: string;\r\n    private _dateOfDeath: string;\r\n    private _maritalStatus: string;\r\n    private _language: string;\r\n    private _email: string;\r\n    private _contactBy: string;\r\n    private _contacts: string;\r\n    private _contactsArray: IArrayAdditionalMethods<PatientContact> = [];\r\n    private _employmentStatus: string;\r\n    private _clinicStatus: string;\r\n    private _primaryCarePhysicianName: string;\r\n    private _problems: string;\r\n    private _problemsArray: IArrayAdditionalMethods<Problem> = [];\r\n    private _observations: { [name: string]: IArrayAdditionalMethods<Observation> } = {}\r\n    private _observationList: string;\r\n    private _observatiosArray: IArrayAdditionalMethods<FlowsheetObservation> = [];\r\n    private _protocols: string;\r\n    private _protocolsArray: IArrayAdditionalMethods<Protocol> = [];\r\n    private _insurances: IArrayAdditionalMethods<Insurance> = [];\r\n    private _immunizations: string;\r\n    private _immunizationsArray: IArrayAdditionalMethods<Immunization> = [];\r\n    private _carePlans: string;\r\n    private _carePlansArray: IArrayAdditionalMethods<CarePlan> = [];\r\n    private _locations: string;\r\n    private _locationsId: string;\r\n    private _locationsArray: IArrayAdditionalMethods<Location> = [];\r\n    private _allergies = new Allergies(this._mel);\r\n    private _referringProvider = new ReferringProvider(this._mel);\r\n    private _phone = new Phone(this._mel);\r\n    private _address: Address;\r\n    private _registrationNote: string;\r\n    private _patientPicture: string;\r\n    private _lastOfficeVisit: Date;\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _demographics?: DemographicsExternal\r\n    ) {\r\n        if (_demographics) {\r\n            this._patientPicture = _demographics.patientPicture;\r\n            this._lastOfficeVisit = _demographics.lastOfficeVisitDate;\r\n            this._registrationNote = _demographics.registrationNote;\r\n            this._language = _demographics.preferredLanguage;\r\n            if (_demographics.identifierList) {\r\n                let patientId = _demographics.identifierList.find(e => e.identifierDomain.domainId === \"1.2.3.4.700\");\r\n                this._patientId = (patientId) ? patientId.idValue : this._patientId;\r\n                this._printId = this._patientId;\r\n\r\n                let externalId = _demographics.identifierList.find(e => e.identifierDomain.domainId === \"1.2.3.4.200\");\r\n                this._externalId = (externalId) ? externalId.idValue : this._externalId;\r\n\r\n                let medicalRecordId = _demographics.identifierList.find(e => e.identifierDomain.domainId === \"1.2.3.4.400\");\r\n                this._medicalRecordId = (medicalRecordId) ? medicalRecordId.idValue : this._medicalRecordId;\r\n            }\r\n            if (_demographics.person) {\r\n                let birthDate = System.formatDate(_demographics.person.birthDate);\r\n                this._dateOfBirth = (birthDate) ? birthDate : this._dateOfBirth;\r\n                this._sex = _demographics.person.genderCode;\r\n                if (_demographics.person.mailingAddressList && _demographics.person.mailingAddressList[0]) {\r\n                    this._address = (this._address) ? this._address : new Address(this._mel, _demographics.person.mailingAddressList[0]);\r\n                }\r\n                if (_demographics.person.personNameList && _demographics.person.personNameList[0]) {\r\n                    this._firstName = _demographics.person.personNameList[0].givenName;\r\n                    this._lastName = _demographics.person.personNameList[0].familyName;\r\n                    this._middleName = _demographics.person.personNameList[0].middleName;\r\n\r\n                    this._labelName = _demographics.person.personNameList[0].givenName\r\n                        + ' ' + _demographics.person.personNameList[0].middleName\r\n                        + ' ' + _demographics.person.personNameList[0].familyName;\r\n\r\n                    this._namePrefix = _demographics.person.personNameList[0].prefixName;\r\n                    this._nameSuffix = _demographics.person.personNameList[0].suffixName;\r\n                }\r\n                this._pid = _demographics.patientKeySpecified ? _demographics.patientKey.toString() : this._pid;\r\n                if (_demographics.person.identifierList) {\r\n                    let ssn = _demographics.person.identifierList.find(e => e.identifierDomain.domainId === \"1.2.3.4.300\");\r\n                    this._ssn = (ssn) ? ssn.idValue : this._ssn;\r\n                    this._ssn = (this._ssn) ? this._ssn.replace(/(\\d{3})(\\d{3})(\\d+)/, '$1-$2-$3') : this._ssn;\r\n                }\r\n            }\r\n        }\r\n\r\n        this._address = (this._address) ? this._address : new Address(this._mel);\r\n    }\r\n\r\n    get lastOfficeVisit() {\r\n        return this._lastOfficeVisit;\r\n    }\r\n\r\n    get patientPicture() {\r\n        this._patientPicture = (this._patientPicture != null) ? this._patientPicture\r\n            : emptyImage;\r\n        return this._patientPicture;\r\n    }\r\n\r\n    // Returns the patients ID number\r\n    get patientId() {\r\n        this._patientId = (this._patientId != null) ? this._patientId : this._mel.melFunc('{PATIENT.PATIENTID}');\r\n        return this._patientId;\r\n    }\r\n\r\n    // Returns the internal PID number for patient record\r\n    get pid() {\r\n        this._pid = (this._pid != null) ? this._pid : this._mel.melFunc('{find(\"patient\", \"PID\")}');\r\n        return this._pid;\r\n    }\r\n\r\n    // Returns the patients medical record number.\r\n    get medicalRecordId() {\r\n        this._medicalRecordId = (this._medicalRecordId) ? this._medicalRecordId : this._mel.melFunc('{PATIENT.MEDRECNO}');\r\n        return this._medicalRecordId;\r\n    }\r\n\r\n    // Returns the patients ID from an external system; such as a billing or lab system\r\n    get externalId() {\r\n        this._externalId = (this._externalId != null) ? this._externalId : this._mel.melFunc('{PATIENT.EXTERNALID}');\r\n        return this._externalId;\r\n    }\r\n\r\n    // Returns the preferred patient ID number for printed materials.\r\n    get printId() {\r\n        this._printId = (this._printId != null) ? this._printId : this._mel.melFunc('{PATIENT.PRINTID}');\r\n        return this._printId;\r\n    }\r\n\r\n    // Returns the patients Social Security number.\r\n    get ssn() {\r\n        this._ssn = (this._ssn != null) ? this._ssn : this._mel.melFunc('{PATIENT.SOCSECNO}');\r\n        return this._ssn;\r\n    }\r\n\r\n    // Returns the patients first name.\r\n    get firstName() {\r\n        this._firstName = (this._firstName != null) ? this._firstName : this._mel.melFunc('{PATIENT.FIRSTNAME}');\r\n        return this._firstName;\r\n    }\r\n\r\n    // Returns the patients last name.\r\n    get lastName() {\r\n        this._lastName = (this._lastName != null) ? this._lastName : this._mel.melFunc('{PATIENT.LASTNAME}');\r\n        return this._lastName;\r\n    }\r\n\r\n    // Returns the patients middle name.\r\n    get middleName() {\r\n        this._middleName = (this._middleName != null) ? this._middleName : this._mel.melFunc('{PATIENT.MIDDLENAME}');\r\n        return this._middleName;\r\n    }\r\n\r\n    // Returns the patients full name formatted as follows: string = title first middle last; suffix\r\n    get labelName() {\r\n        this._labelName = (this._labelName != null) ? this._labelName : this._mel.melFunc('{PATIENT.LABELNAME}');\r\n        return this._labelName;\r\n    }\r\n\r\n    // Name Prefix\r\n    get namePrefix() {\r\n        this._namePrefix = (!this._namePrefix) ? this._namePrefix : this._mel.melFunc('{PATIENT.TITLE}');\r\n        return this._namePrefix;\r\n    }\r\n\r\n    // Name Suffix\r\n    get nameSuffix() {\r\n        this._nameSuffix = (!this._nameSuffix) ? this._nameSuffix : this._mel.melFunc('{PATIENT.ENTITLEMENTS}');\r\n        return this._nameSuffix;\r\n    }\r\n\r\n    // Patients sex.\r\n    get sex() {\r\n        this._sex = (this._sex != null) ? this._sex : this._mel.melFunc('{PATIENT.SEX}');\r\n        return this._sex;\r\n    }\r\n\r\n    // Patients race\r\n    get race() {\r\n        this._race = (this._race != null) ? this._race : this._mel.melFunc('{PATIENT.RACE}');\r\n        return this._race;\r\n    }\r\n\r\n    // Patients ethnicity\r\n    get ethnicity() {\r\n        this._ethnicity = (this._ethnicity != null) ? this._ethnicity : this._mel.melFunc('{PATIENT.ETHNICITY}');\r\n        return this._ethnicity;\r\n    }\r\n\r\n    // Returns the patients birth date/time\r\n    get dateOfBirth() {\r\n        this._dateOfBirth = (this._dateOfBirth != null) ? this._dateOfBirth : this._mel.melFunc('{PATIENT.DATEOFBIRTH}');\r\n        return this._dateOfBirth;\r\n    }\r\n\r\n    // Returns the patients date of death\r\n    get dateOfDeath() {\r\n        this._dateOfDeath = (this._dateOfDeath != null) ? this._dateOfDeath : this._mel.melFunc('{PATIENT.DATEOFDEATH}');\r\n        return this._dateOfDeath;\r\n    }\r\n\r\n    // Returns the patients marital status (Single; Married; Divorced; Widowed; Separated; Other or Undetermined)\r\n    get maritalStatus() {\r\n        this._maritalStatus = (this._maritalStatus != null) ? this._maritalStatus : this._mel.melFunc('{PATIENT.MARITALSTATUS}');\r\n        return this._maritalStatus;\r\n    }\r\n\r\n    // Returns the patients preferred language\r\n    get language() {\r\n        this._language = (this._language != null) ? this._language : this._mel.melFunc('{PATIENT.PREFLANG}');\r\n        return this._language;\r\n    }\r\n\r\n    // Returns the patients e-mail address\r\n    get email() {\r\n        this._email = (this._email != null) ? this._email : this._mel.melFunc('{PATIENT.EMAIL}');\r\n        return this._email;\r\n    }\r\n\r\n    // Returns the patients contact by information\r\n    get contactBy() {\r\n        this._contactBy = (this._contactBy != null) ? this._contactBy : this._mel.melFunc('{PATIENT.CONTACTBY}');\r\n        return this._contactBy;\r\n    }\r\n\r\n    get registrationNote() {\r\n        this._registrationNote = (this._registrationNote != null) ? this._registrationNote : this._mel.melFunc('{PATIENT.REGNOTE}');\r\n        return this._registrationNote;\r\n    }\r\n\r\n    // Returns a list of the contacts for the current patient\r\n    get contacts() {\r\n        if (this._contactsArray.length === 0) {\r\n            this._contacts = (this._contacts != null) ? this._contacts : this._mel.melFunc('{PATIENT.CONTACTS}');\r\n            let dataArray = StringInternal(this._contacts).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._contactsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._contactsArray.push(new PatientContact(dataArray[index]));\r\n            }\r\n\r\n            this._contactsArray.tag = 'PATIENT.CONTACTS';\r\n\r\n            this._contactsArray.toMelString = () => {\r\n                return this._contacts;\r\n            }\r\n        }\r\n        return this._contactsArray;\r\n    }\r\n\r\n    // Returns the patients employment status.\r\n    get employmentStatus() {\r\n        this._employmentStatus = (this._employmentStatus != null) ? this._employmentStatus : this._mel.melFunc('{PATIENT.EMPLSTATUS}');\r\n        return this._employmentStatus;\r\n    }\r\n\r\n    // Patients current status in the clinic\r\n    get clinicStatus() {\r\n        this._clinicStatus = (this._clinicStatus != null) ? this._clinicStatus : this._mel.melFunc('{PATIENT.PSTATUS}');\r\n        return this._clinicStatus;\r\n    }\r\n\r\n    // Name of the primary care physician\r\n    get primaryCarePhysicianName() {\r\n        this._primaryCarePhysicianName = (this._primaryCarePhysicianName != null) ? this._primaryCarePhysicianName : this._mel.melFunc('{PATIENT.PCP}');\r\n        return this._primaryCarePhysicianName;\r\n    }\r\n\r\n    // Lists all problems \r\n    get problems() {\r\n        if (this._problemsArray.length === 0) {\r\n            this._problems = (this._problems != null) ? this._problems : this._mel.melFunc('{PROB_AFTER(\"delimited\",\"dat\",\"com\")}');\r\n            let dataArray = StringInternal(this._problems).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._problemsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._problemsArray.push(new Problem(dataArray[index]));\r\n            }\r\n\r\n            this._problemsArray.tag = 'PROB_AFTER';\r\n\r\n            this._problemsArray.toMelString = () => {\r\n                return this._problems;\r\n            }\r\n        }\r\n        return this._problemsArray;\r\n    }\r\n\r\n    // Lists observations by name. \r\n    observations = (name: string) => {\r\n        if (this._observations[name] == null) {\r\n            let updateData = this._mel.melFunc('{LIST_OBS(\"' + name + '\",\"Update\",\"Delimited\",\"value\")}');\r\n            let dataArray = StringInternal(updateData).toList();\r\n            let observationsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                observationsArray.push(new Observation(name, this.observationType.DocumentUnsigned, dataArray[index], this._mel));\r\n            }\r\n            this._observations[name] = observationsArray;\r\n\r\n            let signedData = this._mel.melFunc('{LIST_OBS(\"' + name + '\",\"Signed\",\"Delimited\",\"value\")}');\r\n            let dataArrayU = StringInternal(signedData).toList();\r\n            for (let index = 0; index < dataArrayU.length; index++) {\r\n                this._observations[name].push(new Observation(name, this.observationType.Signed, dataArrayU[index], this._mel));\r\n            }\r\n\r\n            this._observations[name].tag = 'LIST_OBS.' + name;\r\n        }\r\n        return this._observations[name];\r\n    }\r\n\r\n    // Lists all FLOWSHEET observations. \r\n    flowsheetObservations(flowsheet?: string) {\r\n        let flowsheetValue = '';\r\n        if (flowsheet) {\r\n            flowsheetValue = flowsheet;\r\n        }\r\n        else {\r\n            flowsheetValue = this._mel.melFunc('{_EncodeViewNameBS}');\r\n        }\r\n        if (this._observatiosArray.length === 0 || this._observatiosArray.tag != 'GET_FLOWSHEET_VALUES:' + flowsheetValue) {\r\n            this._observationList = this._mel.melFunc('{GET_FLOWSHEET_VALUES(\"' + flowsheetValue + '\",\"DELIM\")}');\r\n            let dataArray = StringInternal(this._observationList).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._observatiosArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._observatiosArray.push(new FlowsheetObservation(dataArray[index]));\r\n            }\r\n\r\n            this._observatiosArray.tag = 'GET_FLOWSHEET_VALUES:' + flowsheetValue;\r\n\r\n            this._observatiosArray.toMelString = () => {\r\n                return this._observationList;\r\n            }\r\n        }\r\n        return this._observatiosArray;\r\n    }\r\n\r\n    // Protocols tell you when a patient is due for a particular action; based on factors that include sex; age; current problems; and current medications. \r\n    // The protocols contains array of observations required for this patient; as indicated by protocols set up in this clinic.\r\n    get protocols() {\r\n        if (this._protocolsArray.length === 0) {\r\n            this._protocols = (this._protocols != null) ? this._protocols : this._mel.melFunc('{LISTPROTOCOLSHORT(\"list\")}');\r\n            let dataArray = StringInternal(this._protocols).toList('\\r\\n');\r\n\r\n            /*jslint plusplus: true */\r\n            this._protocolsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._protocolsArray.push(new Protocol(dataArray[index]))\r\n            }\r\n\r\n            this._protocolsArray.tag = 'LISTPROTOCOLSHORT(\"list\")';\r\n\r\n            this._protocolsArray.toMelString = () => {\r\n                return this._protocols;\r\n            }\r\n        }\r\n        return this._protocolsArray;\r\n    }\r\n   \r\n    // List of patient insurances \r\n    get insurances() {\r\n        if (this._insurances.length === 0) {\r\n            this._insurances.push(new Insurance('P', this._mel));\r\n            this._insurances.push(new Insurance('S', this._mel));\r\n            this._insurances.push(new Insurance('T', this._mel));\r\n        }\r\n        return this._insurances;\r\n    }\r\n\r\n    // List of patient immunizations \r\n    get immunizations() {\r\n        if (this._immunizationsArray.length === 0) {\r\n            this._immunizations = (this._immunizations != null) ? this._immunizations : this._mel.melFunc('{IMMUN_GETLIST()}');\r\n            let dataArray = StringInternal(this._immunizations).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._immunizationsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._immunizationsArray.push(new Immunization(dataArray[index], this._mel));\r\n            }\r\n\r\n            this._immunizationsArray.tag = 'IMMUN_GETLIST';\r\n\r\n            this._immunizationsArray.toMelString = () => {\r\n                return this._immunizations;\r\n            }\r\n        }\r\n        return this._immunizationsArray;\r\n    }\r\n\r\n    get carePlans() {\r\n        if (this._carePlansArray.length === 0) {\r\n            this._carePlans = (this._carePlans != null) ? this._carePlans : this._mel.melFunc('{MEL_LIST_CARE_PLAN(\"delim\",\"all\",\"all\")}');\r\n            let dataArray = StringInternal(this._carePlans).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._carePlansArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._carePlansArray.push(new CarePlan(dataArray[index], this._mel));\r\n            }\r\n\r\n            this._carePlansArray.tag = 'MEL_LIST_CARE_PLAN';\r\n\r\n            this._carePlansArray.toMelString = () => {\r\n                return this._carePlans;\r\n            }\r\n        }\r\n        return this._carePlansArray;\r\n    }\r\n\r\n    get locations() {\r\n        if (this._locationsArray.length === 0) {\r\n            this._locations = (this._locations != null) ? this._locations : this._mel.melFunc('{PATIENT.HOMELOCATIONNAME}');\r\n            this._locationsId = (this._locationsId != null) ? this._locationsId : this._mel.melFunc('{PATIENT.HOMELOCATIONABBREVNAME}');\r\n            let locationProperty = new Location(this._locationsId, this._locations, LocationType.Home);\r\n            this._locationsArray.push(locationProperty);\r\n            this._locationsArray.findByType =\r\n                (function (value) {\r\n                    let index;\r\n                    if (typeof (value) === \"number\") {\r\n                        for (index = 0; index < this.length; index++) {\r\n                            if (this[index].locationType === value) {\r\n                                return this[index];\r\n                            }\r\n                        }\r\n                    }\r\n                    return undefined;\r\n                });\r\n        }\r\n        return this._locationsArray;\r\n    }\r\n\r\n    get allergies() {\r\n        return this._allergies;\r\n    }\r\n\r\n    // referring provider\r\n    get referringProvider() {\r\n        return this._referringProvider;\r\n    }\r\n\r\n    get phone() {\r\n        return this._phone;\r\n    }\r\n\r\n    // Represent patient address object\r\n    get address() {\r\n        return this._address;\r\n    }\r\n\r\n\r\n    // TODO: aren't exist:\r\n\r\n    // List of all orders\r\n    orders: Object;\r\n    // List of all directives\r\n    directives: Object;\r\n    // Lists appointments\r\n    appointments: Object;\r\n    // List all medications and refills\r\n    medications: Object;\r\n}","import { User } from './User';\r\nimport { EmrMel } from './EmrMel';\r\nimport { StringInternal, GetCurrentUser } from '../factories/factories';\r\nimport { UserCallFunction } from '../enums/enums';\r\nimport { IArrayAdditionalMethods } from '../interfaces/interfaces';\r\n\r\nexport class Users {\r\n\r\n    private _currentUser: User;\r\n    private _user: User;\r\n    private _users: string;\r\n    private _usersArray: IArrayAdditionalMethods<User> = [];\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    getUser = (value?: string) => {\r\n        if (value != null) {\r\n            this._user = (this._user != null) ? this._user : new User(this._mel.melFunc('{GETUSERINFO(\"' + value + '\")}'), UserCallFunction.UserInfo);\r\n            return this._user;\r\n        }\r\n        this._currentUser = (this._currentUser != null) ? this._currentUser : new User(GetCurrentUser(this._mel), UserCallFunction.UserInfo);\r\n        return this._currentUser;\r\n    }\r\n\r\n    getUsers = () => {\r\n        if (this._usersArray.length === 0) {\r\n            this._users = this._mel.melFunc('{GET_USER_LIST(USER.CURLOCATIONABBREVNAME, \"\", \"delimited\", true)}');\r\n            let dataArray = StringInternal(this._users).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._usersArray.push(new User(dataArray[index], UserCallFunction.UserList));\r\n            }\r\n\r\n            this._usersArray.tag = 'GET_USER_LIST';\r\n\r\n            this._usersArray.toMelString = () => {\r\n                return this._users;\r\n            }\r\n        }\r\n        return this._usersArray;\r\n    }\r\n}","import { EmrMel } from '../classes/classes';\r\n\r\nexport function GetCurrentUser(_mel: EmrMel) {\r\n    return _mel.melFunc('{GETUSERINFO(\"' + _mel.melFunc('{USER.LOGINNAME}') + '\")}') + '^' +\r\n        _mel.melFunc('{USER.CURLOCATIONNAME}') + '^' +\r\n        _mel.melFunc('{USER.FIRSTNAME}') + '^' +\r\n        _mel.melFunc('{USER.MIDDLENAME}') + '^' +\r\n        _mel.melFunc('{USER.LASTNAME}');\r\n}","/// <reference types=\"chrome\"/>\r\n\r\nimport { simulatorChromeExtensionId } from \"../consts/consts\";\r\n\r\nexport class ExtensionExternalSimulator {\r\n\r\n    EvaluateMel = (data: any): Promise<any> => {\r\n        return this.sendMessage(simulatorChromeExtensionId, { type: 'EvaluateMel', data: data });\r\n    }\r\n\r\n    Demographics = (): Promise<any> => {\r\n        return this.sendMessage(simulatorChromeExtensionId, { type: 'Demographics' } );\r\n    }\r\n\r\n    private sendMessage = (editorExtensionId: string, data: any) => new Promise<any>((resolve, reject) => {\r\n        if (typeof (chrome) !== 'undefined') {\r\n            chrome.runtime.sendMessage(editorExtensionId, data, (response: any) => {\r\n                if (response) {\r\n                    resolve(response);\r\n                }\r\n                else {\r\n                    resolve(null);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            reject('unsupported');\r\n        }\r\n    });\r\n}","/// <reference types=\"chrome\"/>\r\nimport { simulatorChromeExtensionId } from \"../consts/consts\";\r\nimport { GetActiveXErrorMessage } from \"../factories/factories\";\r\nimport { IsActiveXSupported } from \"../factories/IsActiveXSupported\";\r\nimport { ExtensionExternalSimulator } from \"./ExtensionExternalSimulator\";\r\n\r\nexport class Simulator {\r\n    private readonly appObjectNameSimulator = 'GE.CPO.EMR.90.Application.SIMULATOR';\r\n    private readonly noData: string = 'Data Access Error';\r\n    private _isExtensionEvaluated: boolean = false; // holds validation for async call to the Chrome Extension\r\n    private _isActiveX: boolean = false;            // true for activeX simulator\r\n    private app: any;\r\n    private _isSimulator: boolean = false;\r\n\r\n    private _ExtensionExternalSimulator: ExtensionExternalSimulator = new ExtensionExternalSimulator();\r\n\r\n    public isSimulatorAsync = async (): Promise<boolean> => {\r\n        if (this._isSimulator) {\r\n            return this._isSimulator;\r\n        }\r\n        else {\r\n            if (!this._isExtensionEvaluated) {\r\n                this._isSimulator = await this.sendMessage(simulatorChromeExtensionId, { type: \"version\" });\r\n                this._isExtensionEvaluated = true;\r\n            }\r\n            return this._isSimulator;\r\n        }\r\n    }\r\n\r\n    constructor(public _window: any) {\r\n        this.initialization();\r\n    }\r\n\r\n    private initialization = (): void => {\r\n        if (IsActiveXSupported(this._window)) {\r\n            try {\r\n                this.app = new this._window.ActiveXObject(this.appObjectNameSimulator);\r\n                this._isActiveX = true;\r\n                this._isSimulator = true;\r\n                console.info('mdObject is using ActiveX Simulator: ' + this.appObjectNameSimulator);\r\n            } catch (e) {\r\n                let errorMessage = GetActiveXErrorMessage(this.appObjectNameSimulator, e);\r\n                console.info(errorMessage);\r\n            }\r\n        }\r\n    }\r\n\r\n    get externalSimulator(): any {\r\n        return (this._isSimulator) ? ((!this._isActiveX) ? this._ExtensionExternalSimulator : (this.app) ? this.app.external : this.noData) : this.noData;\r\n    }\r\n\r\n    private sendMessage = (editorExtensionId: string, data: any) => new Promise<boolean>((resolve, _reject) => {\r\n        if (typeof (chrome) !== 'undefined') {\r\n            chrome.runtime.sendMessage(editorExtensionId, data, (response: any) => {\r\n                if (response) {\r\n                    console.info('mdObject is using Chrome Extension Simulator: ' + simulatorChromeExtensionId);\r\n                    resolve(true);\r\n                }\r\n                else {\r\n                    console.info('mdObject: Chrome Extension Simulator is missing or inactive');\r\n                    resolve(false);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            resolve(false);\r\n        }\r\n    });\r\n}","import { Location } from './Location';\r\nimport { EmrMel } from './EmrMel';\r\nimport { LocationType } from '../enums/enums';\r\nimport { DocumentVariable } from '../factories/factories';\r\nimport { IArrayAdditionalMethods, IItem } from '../interfaces/interfaces';\r\nimport { Emr } from './Emr';\r\n\r\nexport class ClinicalDocument {\r\n\r\n    private _letiables: string;\r\n    private _did: string;\r\n    private _xid: string;\r\n    private _documentId: string;\r\n    private _status: string;\r\n    private _location: string;\r\n    private _locationPropertyArray: IArrayAdditionalMethods<Location> = [];\r\n    private _locationProperty: Location;\r\n    private _dateOfUpdate: string;\r\n    private _provider: string;\r\n    private _userLoginName: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _emr?: Emr\r\n    ) { }\r\n\r\n    private save = (): void => {\r\n        this._mel.melFunc('{DOCUMENT.mdObject_letiables = \"' + JSON.stringify(this.rawValue).replace(/\"/g, '\\\\\"') + '\"}');\r\n    }\r\n\r\n    private rawValue: IItem = DocumentVariable({}, this.save);\r\n\r\n    // The letiables allows to save any JSON object with the clinicalDocument.\r\n    // Usage: $mdObject.clinicalDocument.letiables = {\"alex\":1} - creates object with letiable alex and assigned value 1.\r\n    //        $mdObject.clinicalDocument.letiables[\"alex\"]=4;  -changes value of alex to 4\r\n    //        $mdObject.clinicalDocument.letiables.save(); - saves the object with the document\r\n    get letiables() {\r\n        if (this._letiables == null) {\r\n            this._letiables = (this._letiables != null) ? this._letiables : this._mel.melFunc('{DOCUMENT.mdObject_letiables}');\r\n            this._letiables = (this._letiables !== '') ? this._letiables : JSON.stringify(this.rawValue);\r\n            try {\r\n                this.rawValue = DocumentVariable(JSON.parse(this._letiables), this.save);\r\n            } catch (e) {\r\n                this.rawValue = {}\r\n            }\r\n        }\r\n        return this.rawValue;\r\n    }\r\n\r\n    set letiables(val: IItem) {\r\n        for (let key in val) {\r\n            this.rawValue[key] = val[key];\r\n        }\r\n        this._mel.melFunc('{DOCUMENT.mdObject_letiables = \"' + JSON.stringify(this.rawValue).replace(/\"/g, '\\\\\"') + '\"}');\r\n    }\r\n\r\n    // The val allows to get or set DOCUMENT letiable\r\n    // Usage: $mdObject.clinicalDocument.val(\"MyVariable\") return value from {DOCUMENT.MyVariable}.\r\n    //        $mdObject.clinicalDocument.val(\"MyVariable\", \"High\") - assign value \"High\" to {DOCUMENT.MyVariable} and stores it with document (saves in database)\r\n    val = (key: string, value?: string): string => {\r\n        if (key == null || key.length === 0) {\r\n            return undefined;\r\n        }\r\n\r\n        if (value == null) {\r\n            return this._mel.melFunc('{DOCUMENT.' + key + '}');\r\n        } else {\r\n            return this._mel.melFunc('{DOCUMENT.' + key + '=\"' + value + '\"}');\r\n        }\r\n    }\r\n\r\n    get did() {\r\n        this._did = (this._did != null) ? this._did : this._mel.melFunc('{find(\"DOCUMENT\",\"DID\")}');\r\n        return this._did;\r\n    }\r\n\r\n    async didAsync(): Promise<string> {\r\n        this._did = (this._did != null) ? this._did : await this._emr.melFuncAsync('{find(\"DOCUMENT\",\"DID\")}');\r\n        return this._did;\r\n    }\r\n\r\n    get xid() {\r\n        this._xid = (this._xid != null) ? this._xid : this._mel.melFunc('{DOCUMENT.XID}').split('.')[0];\r\n        return this._xid;\r\n    }\r\n\r\n    // The unique document identifier for a document within a patient chart. You can see the Doc ID on each \r\n    // document and on a chart update. Each document in the patients chart has a Doc ID.\r\n    get documentId() {\r\n        this._documentId = (this._documentId != null) ? this._documentId : this._mel.melFunc('{DOCUMENT.VISDOCID}');\r\n        return this._documentId;\r\n    }\r\n\r\n\r\n    // Status of the current document. TODO: Convert to enum\r\n    // Code for document status:\r\n    //        A = Active\r\n    //        H = Hold\r\n    //        S = Signed\r\n    get status() {\r\n        this._status = (this._status != null) ? this._status : this._mel.melFunc('{DOCUMENT.STATUS}');\r\n        return this._status;\r\n    }\r\n\r\n    // The location of care of the document for the current chart update.\r\n    get location() {\r\n        if (this._locationPropertyArray.length === 0) {\r\n            this._location = (this._location != null) ? this._location : this._mel.melFunc('{DOCUMENT.LOCOFCARENAME}');\r\n            this._locationProperty = (this._locationProperty != null) ? this._locationProperty : new Location(this._location, this._location, LocationType.Current);\r\n            this._locationPropertyArray.push(this._locationProperty);\r\n            this._locationPropertyArray.findByType =\r\n                (function (value) {\r\n                    let i;\r\n                    if (typeof (value) === \"number\") {\r\n                        for (i = 0; i < this.length; i++) {\r\n                            if (this[i].locationType === value) {\r\n                                return this[i];\r\n                            }\r\n                        }\r\n                    }\r\n                    return undefined;\r\n\r\n                });\r\n        }\r\n\r\n        return this._locationPropertyArray;\r\n    }\r\n\r\n    get dateOfUpdate() {\r\n        this._dateOfUpdate = (this._dateOfUpdate != null) ? this._dateOfUpdate : this._mel.melFunc('{DOCUMENT.CLINICALDATE}');\r\n        return this._dateOfUpdate;\r\n    }\r\n\r\n    get provider() {\r\n        this._provider = (this._provider != null) ? this._provider : this._mel.melFunc('{DOCUMENT.PROVIDER}');\r\n        return this._provider;\r\n    }\r\n\r\n    get userLoginName() {\r\n        this._userLoginName = (this._userLoginName != null) ? this._userLoginName : this._mel.melFunc('{DOCUMENT.USERLOGINNAME}');\r\n        return this._userLoginName;\r\n    }\r\n}","import { EmrApp } from './EmrApp';\r\nimport { EmrMel } from './EmrMel';\r\nimport { EmrWindow } from './EmrWindow';\r\nimport { EmrContent } from './EmrContent';\r\nimport { IArrayAdditionalMethods } from '../interfaces/interfaces';\r\nimport { StringInternal } from '../factories/factories';\r\nimport { DemographicsExternal, AllergyExternal, ProblemExternal } from './external/external';\r\nimport { Patient } from './Patient';\r\nimport { Users } from './Users';\r\nimport { Simulator } from '../simulator/simulator';\r\nimport { ClinicalDocument } from './ClinicalDocument';\r\nimport { LocationType, UserCallFunction } from '../enums/enums'\r\nimport { ObsTermsMap } from './ObsTermsMap';\r\n\r\nexport class Emr {\r\n\r\n    private _emrMel: EmrMel;\r\n    private _emrApp: EmrApp;\r\n    private _melContent: { [name: string]: IArrayAdditionalMethods<EmrContent> } = {}\r\n    private _emrWindow: EmrWindow = new EmrWindow(this.emrMel, this.emrApp, this._window, this._document);\r\n    private _version: string;\r\n    private _external: any;\r\n    private _baseServicesUrl: string;\r\n    private _demographics: string;\r\n    private _allergiesJson: string;\r\n    private _problemsJson: string;\r\n    private _allergyExternalList: AllergyExternal[] = [];\r\n    private _problemExternalList: ProblemExternal[] = [];\r\n    private _simulator: Simulator;\r\n    private _clinicalDocument: ClinicalDocument;\r\n    private _obsTermsMap: ObsTermsMap;\r\n\r\n    private _patient: Patient;\r\n    private _users: Users;\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _document: any\r\n    ) {\r\n        this._window['_melOpener'] = this.emrMel;\r\n        this._window['_appOpener'] = this.emrApp;\r\n        this._simulator = new Simulator(this._window);\r\n        this._obsTermsMap = new ObsTermsMap();\r\n    }\r\n\r\n    get enterpriseId() {\r\n        return this.emrApp.enterpriseId;\r\n    }\r\n\r\n    get external(): any {\r\n        if (this._external) {\r\n            return this._external;\r\n        }\r\n\r\n        this._external = this._external ? this._external        // if the _external is set, then use it\r\n            : this._simulator.isSimulatorAsync ? this._simulator.externalSimulator   // if the simulator is set, then use simulator\r\n            //: isSimulator ? this.emrApp.external \r\n                : (this._window.opener && this._window.opener.external) ? this._window.opener.external\r\n                    : this._window.external;\r\n        return this._external;\r\n    }\r\n\r\n    externalAsync = async (): Promise<any> => {\r\n\r\n        if (this._external) {\r\n            return this._external;\r\n        }\r\n\r\n        this._external = this._external ? this._external        // if the _external is set, then use it\r\n            : (await this._simulator.isSimulatorAsync()) ? this._simulator.externalSimulator   // if the simulator is set, then use simulator\r\n                : (this._window.opener && this._window.opener.external) ? this._window.opener.external\r\n                    : this._window.external;\r\n        return this._external;\r\n    }\r\n\r\n    get databaseVersion():string {\r\n        return this.emrApp.databaseVersion;\r\n    }\r\n\r\n    get version():string {\r\n        this._version = (this._version != null) ? this._version : this.emrMel.melFunc('{VER_EMR()}');\r\n        return this._version;\r\n    }\r\n\r\n    // this is emrWindow as modal's window\r\n    get emrWindow() {\r\n        return this._emrWindow;\r\n    }\r\n\r\n    melContent = (name: string) => {\r\n        if (this._melContent[name] == null) {\r\n            let data = this.emrMel.melFunc('{MEL_GET_CONTENT(\\\"' + name + '\\\",\\\"MATCH\\\")}');\r\n            let dataArray = StringInternal(data).toList();\r\n            let melContentArray: IArrayAdditionalMethods<EmrContent> = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                melContentArray.push(new EmrContent(dataArray[index], this.emrMel, this._window));\r\n            }\r\n            this._melContent[name] = melContentArray;\r\n\r\n            this._melContent[name].tag = function () {\r\n                return 'MEL_GET_CONTENT';\r\n            }();\r\n\r\n            this._melContent[name].toMelString = () => {\r\n                return data;\r\n            }\r\n        }\r\n        return this._melContent[name];\r\n    }\r\n\r\n    get emrMel(): EmrMel {\r\n        this._emrMel = (this._window.opener != null && this._window.opener['_melOpener'] != undefined) ? this._window.opener['_melOpener']\r\n            : (this._emrMel != null) ? this._emrMel\r\n                : new EmrMel(this._window);\r\n        return this._emrMel;\r\n    }\r\n\r\n    get emrApp(): EmrApp {\r\n        this._emrApp = (this._window.opener != null && this._window.opener['_appOpener'] != undefined) ? this._window.opener['_appOpener']\r\n            : (this._emrApp != null) ? this._emrApp\r\n                : new EmrApp(this._window);\r\n        return this._emrApp;\r\n    }\r\n\r\n\r\n    get baseServicesUrl(): string \r\n    {\r\n        this._baseServicesUrl = (this._baseServicesUrl) ? this._baseServicesUrl\r\n            : ((this.external) ? this.external.BaseServicesUrl : this._baseServicesUrl);\r\n\r\n        return this._baseServicesUrl;\r\n    }\r\n\r\n    get demographics(): DemographicsExternal {\r\n        this._demographics = (this._demographics) ? this._demographics\r\n            : ((this.external) ? this.external.Demographics : this._demographics);\r\n\r\n        return new DemographicsExternal(this._demographics);\r\n    }\r\n\r\n    demographicsAsync = async (): Promise<DemographicsExternal> => {\r\n        this._demographics = (this._demographics) ? this._demographics\r\n            : ((await this.externalAsync()) ? await this.externalAsync().then(e=> e.Demographics()) : this._demographics);\r\n\r\n        return new DemographicsExternal(this._demographics);\r\n    }\r\n\r\n    public get allergies(): AllergyExternal[] {\r\n        if (this._allergyExternalList.length === 0) {\r\n\r\n            let allergiesJson = this.allergiesJson()\r\n\r\n            if (allergiesJson) {\r\n                let dataArray = JSON.parse(allergiesJson) as [];\r\n                for (let index = 0; index < dataArray.length; index++) {\r\n                    this._allergyExternalList.push(AllergyExternal.fromExternal(dataArray[index]));\r\n                }\r\n            }\r\n        }\r\n        return this._allergyExternalList;\r\n    }\r\n\r\n    allergiesJson = (): string => {\r\n        this._allergiesJson = (this._allergiesJson) ? this._allergiesJson\r\n            : ((this.external) ? this.external.Allergies : this._allergiesJson);\r\n        return this._allergiesJson;\r\n    }\r\n\r\n    public get problems(): ProblemExternal[] {\r\n        if (this._problemExternalList.length === 0) {\r\n\r\n            let problemsJson = this.problemsJson();\r\n\r\n            if (problemsJson) {\r\n                let dataArray = JSON.parse(problemsJson) as [];\r\n                for (let index = 0; index < dataArray.length; index++) {\r\n                    this._problemExternalList.push(ProblemExternal.fromExternal(dataArray[index]));\r\n                }\r\n            }\r\n        }\r\n        return this._problemExternalList;\r\n    }\r\n\r\n    problemsJson = (): string => {\r\n        this._problemsJson = (this._problemsJson) ? this._problemsJson\r\n            : ((this.external) ? this.external.Problems : this._problemsJson);\r\n        return this._problemsJson;\r\n    }\r\n\r\n    get patient(): Patient {\r\n        if (this._patient === undefined) {\r\n            this._patient = new Patient(this.emrMel, this.demographics);\r\n        }\r\n        return this._patient;\r\n    }\r\n\r\n    patientAsync = async (): Promise<Patient> => {\r\n        if (this._patient === undefined) {\r\n            this._patient = new Patient(this.emrMel, await this.demographicsAsync());\r\n        }\r\n        return this._patient;\r\n    }\r\n\r\n    get users(): Users {\r\n        if (this._users === undefined) {\r\n            this._users = new Users(this.emrMel);\r\n        }\r\n        return this._users;\r\n    }\r\n\r\n    get clinicalDocument(): ClinicalDocument {\r\n        if (this._clinicalDocument === undefined) {\r\n            this._clinicalDocument = new ClinicalDocument(this.emrMel, this);\r\n        }\r\n        return this._clinicalDocument;\r\n    }\r\n\r\n    clinicalDocumentAsync = async (): Promise<ClinicalDocument> => {\r\n        if (this._clinicalDocument === undefined) {\r\n            this._clinicalDocument = new ClinicalDocument(this.emrMel, await this);\r\n        }\r\n        return this._clinicalDocument;\r\n    }\r\n\r\n    get obsTermsMap(): ObsTermsMap {\r\n        return this._obsTermsMap;\r\n    }\r\n\r\n    get LocationType() {\r\n        return LocationType;\r\n    }\r\n\r\n    get UserCallFunction() {\r\n        return UserCallFunction;\r\n    }\r\n\r\n    // Implements MEL eval \r\n    melFuncAsync = async (data: string): Promise<string> => {\r\n        return await this.externalAsync().then(e => e.EvaluateMel(data));\r\n    }\r\n}","export { HumanName } from './HumanName';\r\nexport { Address } from './Address';\r\nexport { Attachment } from \"./Attachment\";\r\nexport { Person } from \"./Person\";\r\nexport { Patient } from \"./Patient\";\r\n\r\nexport class Fhir {\r\n\r\n}","/*\r\n * Comply with https://www.hl7.org/fhir/person.html\r\n * The full fhir support expected in version 3 and above\r\n */\r\n\r\nimport { HumanName } from \"./HumanName\";\r\nimport { Address } from \"./Address\";\r\nimport { Attachment } from \"./Attachment\";\r\n\r\nexport class Person {\r\n    get resourceType(): string { return \"Person\" };\r\n    // from Resource: id, meta, implicitRules, and language\r\n    // from DomainResource: text, contained, extension, and modifierExtension\r\n//    \"identifier\": [{ Identifier }], // A human identifier for this person\r\n    name: HumanName[]; // A name associated with the person\r\n//    \"telecom\": [{ ContactPoint }], // A contact detail for the person\r\n//    \"gender\": \"<code>\", // male | female | other | unknown\r\n    birthDate: Date; // The date on which the person was born\r\n    address: Address[]; // One or more addresses for the person\r\n    photo: Attachment; // Image of the person\r\n//    \"managingOrganization\": { Reference(Organization) }, // The organization that is the custodian of the person record\r\n    active: boolean; // This person's record is in active use\r\n    //\"link\": [{ // Link to a resource that concerns the same actual person\r\n    //    \"target\": { Reference(Patient|Practitioner|RelatedPerson|Person) }, // R!  The resource to which this actual person is associated\r\n    //    \"assurance\": \"<code>\" // level1 | level2 | level3 | level4\r\n    //}]\r\n}","/*\r\n * Comply with https://www.hl7.org/fhir/patient.html\r\n * The full fhir support expected in version 3 and above\r\n */\r\nimport { HumanName } from \"./HumanName\";\r\nimport { Address } from \"./Address\";\r\nimport { Attachment } from \"./Attachment\";\r\nimport { AdministrativeGenderCode } from \"./codes/AdministrativeGenderCode\";\r\nimport { ContactPoint } from \"./ContactPoint\";\r\n\r\nexport class Patient {\r\n    get resourceType():string { return \"Patient\" };\r\n    // from Resource: id, meta, implicitRules, and language\r\n    // from DomainResource: text, contained, extension, and modifierExtension\r\n//    \"identifier\": [{ Identifier }], // An identifier for this patient\r\n    active: boolean; // Whether this patient's record is in active use\r\n    name: HumanName[]; // A name associated with the patient\r\n    telecom: ContactPoint[]; // A contact detail for the individual\r\n    gender: AdministrativeGenderCode; // male | female | other | unknown\r\n    birthDate: Date; // The date of birth for the individual\r\n    // deceased[x]: Indicates if the individual is deceased or not. One of these 2:\r\n    deceasedBoolean: boolean;\r\n    deceasedDateTime: Date;\r\n    address: Address[]; // An address for the individual\r\n//    \"maritalStatus\": { CodeableConcept }, // Marital (civil) status of a patient\r\n    // multipleBirth[x]: Whether patient is part of a multiple birth. One of these 2:\r\n    multipleBirthBoolean: boolean;\r\n    multipleBirthInteger: number;\r\n    photo: Attachment[]; // Image of the patient\r\n    //\"contact\": [{ // A contact party (e.g. guardian, partner, friend) for the patient\r\n    //    \"relationship\": [{ CodeableConcept }], // The kind of relationship\r\n    //    \"name\": { HumanName }, // A name associated with the contact person\r\n    //    \"telecom\": [{ ContactPoint }], // A contact detail for the person\r\n    //    \"address\": { Address }, // Address for the contact person\r\n    //    \"gender\": \"<code>\", // male | female | other | unknown\r\n    //    \"organization\": { Reference(Organization) }, // C? Organization that is associated with the contact\r\n    //    \"period\": { Period } // The period during which this contact person or organization is valid to be contacted relating to this patient\r\n    //}],\r\n  //  \"communication\": [{ // A language which may be used to communicate with the patient about his or her health\r\n  //      \"language\": { CodeableConcept }, // R!  The language which can be used to communicate with the patient about his or her health\r\n  //      \"preferred\": <boolean> // Language preference indicator\r\n  //}],\r\n    //\"generalPractitioner\": [{\r\n    //    Reference(Organization|Practitioner|\r\n    //        PractitionerRole)\r\n    //}], // Patient's nominated primary care provider\r\n//    \"managingOrganization\": { Reference(Organization) }, // Organization that is the custodian of the patient record\r\n//    \"link\": [{ // Link to another patient resource that concerns the same actual person\r\n//        \"other\": { Reference(Patient|RelatedPerson) }, // R!  The other patient or related person resource that the link refers to\r\n//        \"type\": \"<code>\" // R!  replaced-by | replaces | refer | seealso\r\n//    }]\r\n}","import { version, productType } from '../consts/consts'\r\nimport { Fhir } from '../fhir/fhir';\r\nimport { Emr } from './Emr';\r\n\r\nexport class MdObject {\r\n\r\n    private _emr: Emr;\r\n    private _fhir: Fhir;\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _document: any\r\n    ) {\r\n        if (typeof this._window === 'undefined' && typeof this._document === 'undefined') {\r\n            throw new Error(\"MdObject requires a _window with a _document\");\r\n        }\r\n        console.info(\"The mdObject Version:\" + this.version);\r\n\r\n        this._emr = new Emr(this._window, this._document);\r\n\r\n        this._fhir = new Fhir();\r\n    }\r\n\r\n    get version(): string {\r\n        return version;\r\n    }\r\n\r\n    get productType(): string {\r\n        return productType;\r\n    }\r\n\r\n    public get emr():Emr {\r\n        return this._emr;\r\n    }\r\n\r\n    public get fhir(): Fhir {\r\n        return this._fhir;\r\n    }\r\n}","export const version: string = '2.0.0-alpha.1.2';\r\n","export const productType: string = 'GE';","import { MdObject } from './classes/classes';\r\n\r\n(function (window) {\r\n    var mdObject: MdObject;\r\n    try {\r\n        mdObject = new MdObject(window, window.document);\r\n        window['mdObject'] = mdObject;\r\n    }\r\n    catch (e) {\r\n        console.error(e);\r\n    }\r\n    return mdObject;\r\n})(window);\r\n\r\nexport { MdObject } from './classes/classes';"]}