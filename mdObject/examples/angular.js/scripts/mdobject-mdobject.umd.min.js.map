{"version":3,"sources":["../../src/enums/LocationType.ts","../../src/enums/UserCallFunction.ts","../../src/enums/AllergyClassification.ts","../../src/enums/AllergyCriticality.ts","../../src/enums/ObjectState.ts","../../src/enums/AllergyReasonForRemoval.ts","../../src/enums/ObjectStatus.ts","../../src/classes/ObsTermsMap.ts","../../src/classes/Location.ts","../../node_modules/tslib/tslib.es6.js","../../src/classes/EmrContent.ts","../../src/classes/PatientContact.ts","../../src/classes/Problem.ts","../../src/classes/Immunization.ts","../../src/classes/ObservationType.ts","../../src/classes/User.ts","../../src/factories/StringInternal.ts","../../src/classes/AllergyList.ts","../../src/classes/AllergyListRemoved.ts","../../src/factories/DocumentVariable.ts","../../src/factories/IsActiveXSupported.ts","../../src/factories/GetActiveXErrorMessage.ts","../../src/classes/Allergies.ts","../../src/classes/Observation.ts","../../src/classes/Protocol.ts","../../src/classes/Measurement.ts","../../src/classes/Measurements.ts","../../src/classes/Insurance.ts","../../src/classes/CarePlan.ts","../../src/classes/Address.ts","../../src/classes/Phone.ts","../../src/classes/ReferringProviderPhone.ts","../../src/classes/ReferringProvider.ts","../../src/consts/strings.ts","../../src/classes/System.ts","../../src/bases/EmrBase.ts","../../src/classes/EmrMel.ts","../../src/classes/EmrApp.ts","../../src/classes/EmrWindow.ts","../../src/classes/external/DemographicsExternal.ts","../../src/classes/external/UserDetailExternal.ts","../../src/classes/external/AllergyExternal.ts","../../src/classes/external/ProblemExternal.ts","../../src/classes/external/AllergiesExternal.ts","../../src/classes/FlowsheetObservation.ts","../../src/interfaces/ArrayAsync.ts","../../src/classes/Problems.ts","../../src/classes/Patient.ts","../../src/classes/Users.ts","../../src/factories/GetCurrentUser.ts","../../src/simulator/ExtensionExternalSimulator.ts","../../src/simulator/simulator.ts","../../src/classes/ClinicalDocument.ts","../../src/classes/EmrContents.ts","../../src/classes/Emr.ts","../../src/fhir/fhir.ts","../../src/fhir/Person.ts","../../src/fhir/Patient.ts","../../src/classes/MdObject.ts","../../src/consts/version.ts","../../src/consts/productType.ts","../../src/classes/Allergy.ts","../../src/public.ts"],"names":["LocationType","UserCallFunction","AllergyClassification","AllergyCriticality","ObjectState","AllergyReasonForRemoval","ObjectStatus","this","weight","height","id","name","locationType","None","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__generator","thisArg","body","f","y","t","g","_","label","sent","trys","ops","next","verb","throw","return","Symbol","iterator","n","v","op","TypeError","call","done","value","pop","length","push","e","step","__read","o","m","r","i","ar","error","__spread","arguments","concat","_value","_mel","_this","data","split","state","status","Unchanged","contentId","namespace","nodeName","displayName","sourceName","code","codeType","contentGroup","listOrder","contentDefault","toAddString","toChangeString","save","__awaiter$1","Add","Update","Remove","melFunc","_b","codeNumeric","NaN","console","Error","Added","Updated","Removed","type","phone","phoneType","address1","address2","city","zip","country","address","toMelString","problemId","description","codeIcd9","comment","stopReason","codeIcd10","lastModifiedDate","isNew","immunizationId","immunizationGroupId","vaccineGroupName","vaccineName","medicalDisplayName","series","wasGiven","reasonNotGiven","historical","historicalSource","vfcElegibility","ddid","dnid","gpi","kdc","ndc","cvxCode","doseAmount","dosageUnitOfMeasure","route","routeCode","site","siteCode","manufacturer","manufacturerCode","lotNumber","expirationDate","visPublishedDate","administeredByName","administeredDate","administeredDateType","administeredComments","advReactionDateTime","advReactionDateTimeType","advReactionComments","advReactionCmtByName","signed","signedByName","signedDate","reasonRemoved","stopDate","reasonNotGivenMedical","reasonNotGivenMedicalDetail","isError","validateAdd","response","toStringAdd","alert","match","Signed","DocumentUnsigned","callFunction","UserInfo","loginName","searchName","phoneNumber","homeLocation","group","jobTitle","specialty","roles","npi","prescriberId","deaId","stateLicenceId","memberLogin","data2000","uniquePhysicianId","activationDate","currentLocation","firstName","middleName","lastName","UserList","StringInternal","tag","result","String","toList","seporator","dataArray","filter","item","startsWith","str","slice","endsWith","toDate","theDate","Date","toString","isNaN","valueOf","log","onSetDate","criticalIndicator","classification","gpiCode","severity","allergyId","reactionCode","AllergyListRemoved","_super","AllergyList","DocumentVariable","saveCallback","IsActiveXSupported","_window","GetActiveXErrorMessage","objectName","Message","Allergies","_addedArray","_currentArray","_removedArray","defineProperty","_added","index","addedAsync","_a","_c","_current","currentAsync","_removed","removedAsync","Observation","_name","_observationType","observationType","ObservationType","date","time","signingUser","enteringUser","flags","locationOfCare","documentType","documentId","saveObservation","remove","_unitOfMeasure","_tag","Measurement","isCurrent","_weight","_height","getObs","Measurements","_previous","Insurance","insuranceType","_address","_insuranceId","_planName","_groupNumber","_phone","carePlanId","goal","snomedCTCode","target","instructions","goalSetDate","goalMetDate","recordCreatedDateTime","sign","signedBy","recordChangedDateTime","recordChangedBy","patientConditionDescription","patientConditionCode","carePlanAddError","Address","_mailingAddressExternal","_address1","line1Addr","_address2","line2Addr","_city","cityName","_country","countryCode","_postCode","postalCode","_state","stateCode","undefined","Phone","_electronicAddressExternal","formatMelPhone","phoneTest","RegExp","trim","results","exec","_home","find","a","addressSettingCode","urlScheme","urlAddr","_business","_mobile","homeAsync","_d","_e","_f","businessAsync","mobileAsync","_fax","faxAsync","ReferringProviderPhone","_office","_alternative","_pager","ReferringProvider","_referringProviderId","_firstName","_lastName","_email","_fullAddress","emptyImage","simulatorChromeExtensionId","System","parseInt","substr","toImage","arrayBuffer","btoa","fromCharCode","apply","Uint8Array","formatDate","dateToString","getMonth","getDate","getFullYear","nonenumerable","propertyKey","descriptor","getOwnPropertyDescriptor","enumerable","writable","isSimulator","EmrBase","_simulator","isActiveXSupported","noData","isExternalSupported","_external","opener","external","IsDebugMode","externalSimulator","_isSimulator","EmrMel","melObjectName","melObjectNameSimulator","initialization","mel","ActiveXObject","errorMessage","EvaluateMel","eval","obs","OBSNOW","OBSPREV","showUrlDialog","url","EmrApp","appObjectName","appObjectNameSimulator","app","SetPasscode","ShowURLDialog","EnterpriseID","DatabaseVersion","_app","_document","openDialog","toLowerCase","open","features","form","createElement","action","method","key","input","JSON","stringify","appendChild","style","display","submit","DemographicsExternal","json","toJson","_json","obj","parse","confidentialityCode","contactList","electronicAddressList","excludedUserAccess","excludedUserAccessSpecified","guarantorList","guardianList","hasPatientAccess","hasPatientAccessSpecified","healthIssueList","identifierList","lastOfficeVisitDate","lastOfficeVisitDateSpecified","mailingAddressList","medicareAdvantagePatient","medicareAdvantagePatientSpecified","mqicEPatientId","mqicEPatientIdSpecified","organization","patientKey","patientKeySpecified","patientPicture","person","personAge","preferredLanguage","primaryProviderRelationshipList","registrationNote","statusCode","vipCode","UserDetailExternal","fromExternal","_obj","userDetailExternal","activationDateSpecified","authorizations","authorizedLocationOfCares","currentLocationDetail","currentLocationSpecified","deaNumber","errorDetails","expirationDateSpecified","globalID","globalIDSpecified","groupList","homeLocationDetail","homeLocationSpecified","isrespprov","isrespprovSpecified","jobTitleDetail","jobTitleSpecified","lastLoginDate","lastLoginDateSpecified","lastPasswordChange","lastPasswordChangeSpecified","licenseNumber","loginAttempts","loginAttemptsSpecified","memberID","mqicUserName","orgName","pidList","pmpRoleID","pmpRoleIDSpecified","pmpRoleName","prescriberID","providerID","providerIDSpecified","resultSpecified","roleList","specialtyDetail","specialtySpecified","spi","stateName","subscriptionureg","tocElectronicAddress","updateType","upin","AllergyExternal","allclass","allergyGroupID","allergyGroupIDSpecified","allergyID","annotate","aproxonsetdate","change","changeSpecified","dbCreateDate","dbCreateDateSpecified","dbUpdatedDate","dbUpdatedDateSpecified","documentDetail","drugDescID","drugDescIDSpecified","expirationID","extAllergyID","extAllergyIDSpecified","externalAllergyInfoDetail","genericProductIndex","gi","heme","iscritical","kind","knowledgeBaseDrugCode","knowledgeBaseDrugCodeSpecified","medicationInfo","ndclabprod","ndcpackage","onsetdate","onsetdateSpecified","other","pendUserIndent","pendUserIndentSpecified","pendUserSort","pendUserSortSpecified","personID","pubtime","pubtimeSpecified","pubUser","pubUserDetail","pubUserSpecified","rash","resp","searchCriteria","secondaryDocumentID","secondaryDocumentIDSpecified","shock","snomedID","snomedIDSpecified","stopdate","stopdateSpecified","stopreason","userDetail","userID","userIDSpecified","userIndent","userIndentSpecified","userSort","userSortSpecified","ProblemExternal","problemExternal","aproxstopdate","assessmentList","codechange","covered","expirationIDSpecified","externalProblemDetail","extSecondaryProblemID","extSecondaryProblemIDSpecified","icd9CodeDetail","icd9MasterDiagnosisID","icd9MasterDiagnosisIDSpecified","icd10CodeDetail","icd10MasterDiagnosisID","icd10MasterDiagnosisIDSpecified","lastClaimedDate","lastClaimedDateSpecified","medicareAdvantageAlert","medicareAdvantageAlertSpecified","medicareAdvantageRiskAdjustmentFactor","priority","prioritySpecified","problemID","problemIDSpecified","qualifier","secondaryProblemID","secondaryProblemIDSpecified","snoMedCodeDetail","snoMedMasterDiagnosisID","snoMedMasterDiagnosisIDSpecified","userDim","userDimSpecified","AllergiesExternal","map","ArrayAsync","_data","unscopables","copyWithin","entries","fill","findIndex","keys","values","some","predicate","callbackfn","reduce","initialValue","reduceRight","start","end","includes","searchElement","fromIndex","toLocaleString","items","_i","join","separator","reverse","shift","sort","compareFn","splice","deleteCount","unshift","indexOf","lastIndexOf","every","forEach","get","set","Problems","_isLoaded","load","_new","currentProblemMelData","loadMelDataToList","currentProblem","newProblemMelData","newProblem","problem","Problem","_locadMelDataFromString","onsetDate","_problemId","loadAsync","_currentAsync","_newAsync","Patient","_demographics","_allergiesExternal","_contactsArray","_observations","_observatiosArray","_protocolsArray","_insurances","_immunizationsArray","_carePlansArray","_locationsArray","_allergies","_referringProvider","observations","observationsArray","dataArrayU","_patientPicture","_lastOfficeVisit","_registrationNote","_language","patientId","identifierDomain","domainId","_patientId","idValue","_printId","externalId","_externalId","medicalRecordId","_medicalRecordId","birthDate","_dateOfBirth","_dateOfDeath","deceaseIndSpecified","deceaseInd","deceaseTime","_sex","genderCode","personNameList","givenName","familyName","_middleName","_labelName","_namePrefix","prefixName","_nameSuffix","suffixName","_pid","ssn","_ssn","replace","patientIdAsync","pidAsync","medicalRecordIdAsync","externalIdAsync","printIdAsync","ssnAsync","firstNameAsync","lastNameAsync","middleNameAsync","labelNameAsync","namePrefixAsync","nameSuffixAsync","sexAsync","_race","raceAsync","_ethnicity","ethnicityAsync","dateOfBirthAsync","dateOfDeathAsync","_maritalStatus","maritalStatusAsync","languageAsync","emailAsync","_contactBy","contactByAsync","registrationNoteAsync","_contacts","PatientContact","contactsAsync","_employmentStatus","employmentStatusAsync","_clinicStatus","clinicStatusAsync","_primaryCarePhysicianName","primaryCarePhysicianNameAsync","_problems","problemsAsync","flowsheetObservations","flowsheet","flowsheetValue","_observationList","FlowsheetObservation","_protocols","Protocol","_immunizations","Immunization","_carePlans","CarePlan","carePlansAsync","_locations","_locationsId","locationProperty","Location","Home","findByType","_usersArray","getUser","_user","User","_currentUser","GetCurrentUser","getUsers","_users","ExtensionExternalSimulator","_showWait","sendMessage","editorExtensionId","Promise","resolve","reject","chrome","runtime","Simulator","_isExtensionEvaluated","_isActiveX","_ExtensionExternalSimulator","isSimulatorAsync","__awaiter$6","info","_reject","ClinicalDocument","_emr","_locationPropertyArray","rawValue","val","_letiables","_did","didAsync","melFuncAsync","_xid","_documentId","_status","_location","_locationProperty","Current","_dateOfUpdate","_provider","_userLoginName","EmrContents","EmrContent","melData","Emr","_melContent","_problemExternalList","externalAsync","__awaiter$9","melContent","data_1","emrMel","melContentArray","demographicsAsync","then","Demographics","allergiesAsync","_allergiesJson","allergiesJson","problemsJson","_problemsJson","patientAsync","_patient","bind","clinicalDocumentAsync","_clinicalDocument","showWait","emrApp","_obsTermsMap","ObsTermsMap","_emrWindow","EmrWindow","enterpriseId","databaseVersion","_version","emrContentsAsync","content","_emrMel","_emrApp","_baseServicesUrl","BaseServicesUrl","demographics","allergies","Users","Fhir","Person","MdObject","version","_fhir","none","reasonForRemoval","__awaiter$a","toRemoveString","window","mdObject","document"],"mappings":"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","sourcesContent":["export enum LocationType {\r\n    None = 0,\r\n    Home = 1,\r\n    Current = 2\r\n}\r\n","export enum UserCallFunction {\r\n    None = 0,\r\n    UserList = 1,\r\n    UserInfo = 2\r\n}\r\n","export enum AllergyClassification {\r\n    none = '',\r\n    drug = 'DRUG',\r\n    food = 'FOOD',\r\n    environmental = 'ENVIRONMENTAL'\r\n}","export enum AllergyCriticality {\r\n    undefined = '',\r\n    critical = 'C',\r\n    severe = 'S',\r\n    moderate = 'N',\r\n    mild = 'I'\r\n}","export enum ObjectState {\r\n    None = 0,\r\n    Add = 1,\r\n    Update = 2,\r\n    Remove = 3\r\n}\r\n","export enum AllergyReasonForRemoval {\r\n    none = '',\r\n    error = 'Entered in error',\r\n    patientCorrected  = 'Patient corrected',\r\n    disproved = 'Allergy disproved',\r\n    other = 'Other'\r\n}","export enum ObjectStatus {\r\n    Unchanged = 0,\r\n    Added = 1,\r\n    Updated = 2,\r\n    Removed=3\r\n}\r\n","export class ObsTermsMap {\r\n    weight: string = 'Weight';\r\n    height: string = 'Height';\r\n\r\n    constructor() { }\r\n}","import { LocationType } from '../enums';\r\n\r\nexport class Location {\r\n\r\n    constructor(\r\n        public id: string,\r\n        public name: string,\r\n        public locationType: LocationType\r\n    ) {\r\n        this.id = (this.id != null) ? this.id : '';\r\n        this.name = (this.name != null) ? this.name : '';\r\n        this.locationType = (this.locationType != null) ? this.locationType : LocationType.None\r\n    }\r\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { ObjectState, ObjectStatus } from '../enums';\r\nimport { EmrMel } from './EmrMel';\r\n\r\n/* This class correlates to the ContentList table.\r\n * The \"namespace\" parameter (formal key) is not unique and maybe duplicated 255 characters\r\n * The \"nodeName\" parameter (formal name) 20 characters\r\n * The \"displayName\" parameter (formal value) 400 characters\r\n * The \"code\" parameter 20 characters. You may use as Encrypted/Encoded flag.\r\n * The \"codeType\" parameter 10 characters. You may use as type of encryption, for example BASE64 \r\n * The \"contentGroup\" parameter is numeric\r\n * The \"listOrder\" parameter is numeric\r\n * The \"contentDefault\" parameter is numeric\r\n */\r\nexport class EmrContent {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    state: ObjectState = ObjectState.None;\r\n    status: ObjectStatus = ObjectStatus.Unchanged;\r\n\r\n    contentId: string = (this.data.length > 0) ? this.data[0] : '';\r\n    namespace: string = (this.data.length > 1) ? this.data[1] : '';\r\n    nodeName: string = (this.data.length > 2) ? this.data[2] : '';\r\n    displayName: string = (this.data.length > 3) ? this.data[3] : '';\r\n    sourceName: string | null = (this.data.length > 4) ? this.data[4] : '';\r\n    code: string | null = (this.data.length > 5) ? this.data[5] : '';\r\n    codeType: string | null = (this.data.length > 6) ? this.data[6] : '';\r\n    contentGroup: string = (this.data.length > 7) ? this.data[7] : '';\r\n    listOrder: string = (this.data.length > 8) ? this.data[8] : '';\r\n    contentDefault: string = (this.data.length > 9) ? this.data[9] : '';\r\n\r\n    constructor(\r\n        public _value: string | null,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    toAddString = (): string => {\r\n        return this.namespace + '^' +\r\n            this.nodeName + '^' +\r\n            this.displayName + '^' +\r\n            this.sourceName + '^' +\r\n            this.code + '^' +\r\n            this.codeType + '^' +\r\n            this.contentGroup + '^' +\r\n            this.listOrder + '^' +\r\n            this.contentDefault;\r\n    }\r\n\r\n    toChangeString = (): string => {\r\n        return this.namespace + '^' +\r\n            this.nodeName + '^' +\r\n            this.displayName + '^' +\r\n            this.sourceName + '^' +\r\n            this.code + '^' +\r\n            this.codeType + '^' +\r\n            this.contentGroup + '^' +\r\n            this.listOrder + '^' +\r\n            this.contentDefault;\r\n    }\r\n\r\n    save = async () => {\r\n        switch (this.state) {\r\n            case ObjectState.Add: {\r\n                let code: string = await this._mel.melFunc('{MEL_ADD_CONTENT(\"' + this.toAddString() + '\")}');\r\n                let codeNumeric: number = +code;\r\n                if (codeNumeric < 0 || codeNumeric === NaN) {\r\n                    let error = 'EmrContent.save error. Code is ' + code;\r\n                    console.error(error);\r\n                    throw new Error('EmrContent not saved. ' + error);\r\n                }\r\n\r\n                this.contentId = code;\r\n                this.nodeName = (this.nodeName) ? this.nodeName : code;\r\n                this.status = ObjectStatus.Added;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n            case ObjectState.Update: {\r\n                let code: string = await this._mel.melFunc('{MEL_UPDATE_CONTENT(\"' + this.contentId + '\",\"' + this.toChangeString() + '\")}');\r\n                let codeNumeric: number = +code;\r\n\r\n                if (codeNumeric < 0 || codeNumeric === NaN) {\r\n                    let error = 'EmrContent.save error. Code is ' + code;\r\n                    console.error(error);\r\n                    throw new Error('EmrContent not saved. ' + error);\r\n                }\r\n\r\n                this.status = ObjectStatus.Updated;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n            case ObjectState.Remove: {\r\n                let code: string = await this._mel.melFunc('{MEL_REMOVE_CONTENT(\"' + this.contentId + '\")}');\r\n                let codeBoolean: boolean = (code == \"true\");\r\n\r\n                if (!codeBoolean) {\r\n                    let error = 'EmrContent.save error. Code is ' + code;\r\n                    console.error(error);\r\n                    throw new Error('EmrContent not saved. ' + error);\r\n                }\r\n\r\n                this.status = ObjectStatus.Removed;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}","export class PatientContact {\r\n\r\n    private data = (this._value == null) ? [] : this._value.split('^');\r\n    name: string = (this.data.length > 0) ? this.data[0] : '';\r\n    type: string = (this.data.length > 1) ? this.data[1] : '';\r\n    phone: string = (this.data.length > 2) ? this.data[2] : '';\r\n    phoneType: string = (this.data.length > 3) ? this.data[3] : '';\r\n    address1: string = (this.data.length > 4) ? this.data[4] : '';\r\n    address2: string = (this.data.length > 5) ? this.data[5] : '';\r\n    city: string = (this.data.length > 6) ? this.data[6] : '';\r\n    state: string = (this.data.length > 7) ? this.data[7] : '';\r\n    zip: string = (this.data.length > 8) ? this.data[8] : '';\r\n    country: string = (this.data.length > 9) ? this.data[9] : '';\r\n    address: string = this.address1.concat(' ' + this.address2);\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n\r\n    toMelString = (): string => {\r\n        return this._value;\r\n    }\r\n}","import { ObjectStatus } from '../enums';\r\n\r\nexport class Problem {\r\n    status: ObjectStatus = ObjectStatus.Unchanged;\r\n\r\n    problemId: string = '';\r\n    type: string = '';\r\n    description: string = '';\r\n    codeIcd9: string = '';\r\n    comment: string = '';\r\n    onsetDate: Date | undefined;\r\n    stopDate: Date | undefined;\r\n    stopReason: string = '';\r\n    codeIcd10: string = '';\r\n    lastModifiedDate: string = '';\r\n}","import { EmrMel } from './EmrMel'\r\n\r\nexport class Immunization {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n    private isNew: boolean = this._value == null ? true : false;\r\n\r\n    immunizationId: string = (this.data.length > 0) ? this.data[0] : '';\r\n    immunizationGroupId: string = (this.data.length > 1) ? this.data[1] : '';\r\n    vaccineGroupName: string = (this.data.length > 2) ? this.data[2] : '';\r\n    vaccineName: string = (this.data.length > 3) ? this.data[3] : '';\r\n    medicalDisplayName: string = (this.data.length > 4) ? this.data[4] : '';\r\n    series: string = (this.data.length > 5) ? this.data[5] : '';\r\n    wasGiven: string = (this.data.length > 6) ? this.data[6] : '';\r\n    reasonNotGiven: string = (this.data.length > 7) ? this.data[7] : '';\r\n    historical: string = (this.data.length > 8) ? this.data[8] : '';\r\n    historicalSource: string = (this.data.length > 9) ? this.data[9] : '';\r\n    vfcElegibility: string = (this.data.length > 10) ? this.data[10] : '';\r\n    ddid: string = (this.data.length > 11) ? this.data[11] : '';\r\n    dnid: string = (this.data.length > 12) ? this.data[12] : '';\r\n    gpi: string = (this.data.length > 13) ? this.data[13] : '';\r\n    kdc: string = (this.data.length > 14) ? this.data[14] : '';\r\n    ndc: string = (this.data.length > 15) ? this.data[15] : '';\r\n    cvxCode: string = (this.data.length > 16) ? this.data[16] : '';\r\n    doseAmount: string = (this.data.length > 17) ? this.data[17] : '';\r\n    dosageUnitOfMeasure: string = (this.data.length > 18) ? this.data[18] : '';\r\n    route: string = (this.data.length > 19) ? this.data[19] : '';\r\n    routeCode: string = (this.data.length > 20) ? this.data[20] : '';\r\n    site: string = (this.data.length > 21) ? this.data[21] : '';\r\n    siteCode: string = (this.data.length > 22) ? this.data[22] : '';\r\n    manufacturer: string = (this.data.length > 23) ? this.data[23] : '';\r\n    manufacturerCode: string = (this.data.length > 24) ? this.data[24] : '';\r\n    lotNumber: string = (this.data.length > 25) ? this.data[25] : '';\r\n    expirationDate: string = (this.data.length > 26) ? this.data[26] : '';\r\n    visPublishedDate: string = (this.data.length > 27) ? this.data[27] : '';\r\n    administeredByName: string = (this.data.length > 28) ? this.data[28] : '';\r\n    administeredDate: string = (this.data.length > 29) ? this.data[29] : '';\r\n    administeredDateType: string = (this.data.length > 30) ? this.data[30] : '';\r\n    administeredComments: string = (this.data.length > 31) ? this.data[31] : '';\r\n    advReactionDateTime: string = (this.data.length > 32) ? this.data[32] : '';\r\n    advReactionDateTimeType: string = (this.data.length > 33) ? this.data[33] : '';\r\n    advReactionComments: string = (this.data.length > 34) ? this.data[34] : '';\r\n    advReactionCmtByName: string = (this.data.length > 35) ? this.data[35] : '';\r\n    signed: string = (this.data.length > 36) ? this.data[36] : '';\r\n    signedByName: string = (this.data.length > 37) ? this.data[37] : '';\r\n    signedDate: string = (this.data.length > 38) ? this.data[38] : '';\r\n    reasonRemoved: string = (this.data.length > 39) ? this.data[39] : '';\r\n    stopDate: string = (this.data.length > 40) ? this.data[40] : '';\r\n    reasonNotGivenMedical: string = (this.data.length > 41) ? this.data[41] : '';\r\n    reasonNotGivenMedicalDetail: string = (this.data.length > 42) ? this.data[42] : '';\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = (): void => {\r\n        if (this.isNew) {\r\n            let isError = this.validateAdd();\r\n            let response;\r\n            if (isError === '') {\r\n                response = this._mel.melFunc('{IMMUN_ADD(\"' + this.toStringAdd() + '\")}');\r\n                if (response < 0) {\r\n                    alert(response);\r\n                }\r\n            } else {\r\n                alert(isError);\r\n            }\r\n        } else {\r\n            // TODO: add updating of model\r\n        }\r\n    }\r\n\r\n    toMelString = (): string => {\r\n        return this._value;\r\n    }\r\n\r\n    validateAdd = (): string => {\r\n        let errorMessage = ' is required.';\r\n        // check required parameters\r\n        if (this.vaccineGroupName === '') {\r\n            return 'vaccineGroupName' + errorMessage;\r\n        }\r\n        if (this.wasGiven === '') {\r\n            return 'wasGiven' + errorMessage;\r\n        }\r\n        if (this.historical === '') {\r\n            return 'historical' + errorMessage;\r\n        }\r\n        if (this.vfcElegibility === '') {\r\n            return 'vfcElegibility' + errorMessage;\r\n        }\r\n        if (this.administeredDate === '') {\r\n            return 'administeredDate' + errorMessage;\r\n        }\r\n        if (this.doseAmount.match(/[0-9]{1,25}/g) == null) {\r\n            return 'doseAmount should be numeric.';\r\n        }\r\n        return '';\r\n    }\r\n\r\n    toStringAdd = (): string => {\r\n        return this.vaccineGroupName + '^' + \r\n            this.vaccineName + '^' +\r\n            this.medicalDisplayName + '^' +\r\n            this.series + '^' +\r\n            this.wasGiven + '^' +\r\n            this.reasonNotGiven + '^' +\r\n            this.historical + '^' +\r\n            this.historicalSource + '^' +\r\n            this.vfcElegibility + '^' +\r\n            this.ddid + '^' +\r\n            this.dnid + '^' +\r\n            this.gpi + '^' +\r\n            this.kdc + '^' +\r\n            this.ndc + '^' +\r\n            this.cvxCode + '^' +\r\n            this.doseAmount + '^' +\r\n            this.dosageUnitOfMeasure + '^' +\r\n            this.route + '^' +\r\n            this.routeCode + '^' +\r\n            this.site + '^' +\r\n            this.siteCode + '^' +\r\n            this.manufacturer + '^' +\r\n            this.manufacturerCode + '^' +\r\n            this.lotNumber + '^' +\r\n            this.expirationDate + '^' +\r\n            this.visPublishedDate + '^' +\r\n            this.administeredByName + '^' +\r\n            this.administeredDate + '^' +\r\n            this.administeredDateType + '^' +\r\n            this.administeredComments + '^' +\r\n            this.advReactionDateTime + '^' +\r\n            this.advReactionDateTimeType + '^' +\r\n            this.advReactionComments + '^' +\r\n            this.advReactionCmtByName + '^' +\r\n            this.signed + '^' +\r\n            this.signedByName + '^' +\r\n            this.signedDate + '^' +\r\n            this.reasonRemoved + '^' +\r\n            this.stopDate + '^' +\r\n            this.reasonNotGivenMedical + '^' +\r\n            this.reasonNotGivenMedicalDetail;\r\n    }\r\n}","export class ObservationType {\r\n\r\n    None: string = 'Undefined';\r\n    Signed: string = 'Signed';\r\n    DocumentUnsigned: string = 'Update';\r\n\r\n    constructor() { }\r\n}","import { UserCallFunction } from '../enums';\r\n\r\nexport class User {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    loginName: string;\r\n    searchName: string;\r\n    phoneNumber: string;\r\n    homeLocation: string;\r\n    group: string;\r\n    jobTitle: string;\r\n    specialty: string;\r\n    roles: Array<string>;\r\n    npi: string;\r\n    prescriberId: string;\r\n    deaId: string;\r\n    stateLicenceId: string;\r\n    memberLogin: string;\r\n    data2000: string;\r\n    uniquePhysicianId: string;\r\n    activationDate: string;\r\n    expirationDate: string;\r\n    currentLocation: string;\r\n    firstName: string;\r\n    middleName: string;\r\n    lastName: string;\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public callFunction: UserCallFunction\r\n    ) {\r\n        if (callFunction === UserCallFunction.UserInfo) {\r\n            this.loginName = (this.data.length > 0) ? this.data[0] : '';\r\n            this.searchName = (this.data.length > 1) ? this.data[1] : '';\r\n            this.phoneNumber = (this.data.length > 2) ? this.data[2] : '';\r\n            this.homeLocation = (this.data.length > 3) ? this.data[3] : '';\r\n            this.group = (this.data.length > 4) ? this.data[4] : '';\r\n            this.jobTitle = (this.data.length > 5) ? this.data[5] : '';\r\n            this.specialty = (this.data.length > 6) ? this.data[6] : '';\r\n            this.roles = (this.data.length > 7) ? this.data[7].split(';') : [];\r\n            this.npi = (this.data.length > 8) ? this.data[8] : '';\r\n            this.prescriberId = (this.data.length > 9) ? this.data[9] : '';\r\n            this.deaId = (this.data.length > 10) ? this.data[10] : '';\r\n            this.stateLicenceId = (this.data.length > 11) ? this.data[11] : '';\r\n            this.memberLogin = (this.data.length > 12) ? this.data[12] : '';\r\n            this.data2000 = (this.data.length > 13) ? this.data[13] : '';\r\n            this.uniquePhysicianId = (this.data.length > 14) ? this.data[14] : '';\r\n            this.activationDate = (this.data.length > 15) ? this.data[15] : '';\r\n            this.expirationDate = (this.data.length > 16) ? this.data[16] : '';\r\n            this.currentLocation = (this.data.length > 17) ? this.data[17] : '';\r\n            this.firstName = (this.data.length > 18) ? this.data[18] : '';\r\n            this.middleName = (this.data.length > 19) ? this.data[19] : '';\r\n            this.lastName = (this.data.length > 20) ? this.data[20] : '';\r\n        }\r\n\r\n        if (callFunction === UserCallFunction.UserList) {\r\n            this.loginName = (this.data.length > 0) ? this.data[0] : '';\r\n            this.searchName = (this.data.length > 1) ? this.data[1] : '';\r\n            this.phoneNumber = (this.data.length > 2) ? this.data[2] : '';\r\n            this.homeLocation = (this.data.length > 3) ? this.data[3] : '';\r\n            this.group = (this.data.length > 4) ? this.data[4] : '';\r\n            this.jobTitle = (this.data.length > 5) ? this.data[5] : '';\r\n            this.specialty = (this.data.length > 6) ? this.data[6] : '';\r\n            this.npi = (this.data.length > 7) ? this.data[7] : '';\r\n            this.prescriberId = (this.data.length > 8) ? this.data[8] : '';\r\n            this.deaId = (this.data.length > 9) ? this.data[9] : '';\r\n            this.stateLicenceId = (this.data.length > 10) ? this.data[10] : '';\r\n            this.memberLogin = (this.data.length > 11) ? this.data[11] : '';\r\n            this.data2000 = (this.data.length > 12) ? this.data[12] : '';\r\n            this.uniquePhysicianId = (this.data.length > 13) ? this.data[13] : '';\r\n            this.activationDate = (this.data.length > 14) ? this.data[14] : '';\r\n            this.expirationDate = (this.data.length > 15) ? this.data[15] : '';\r\n            this.roles = [];\r\n        }\r\n    }\r\n\r\n    toMelString = () => {\r\n        return this._value;\r\n    }\r\n}","import { IStringInternal } from '../interfaces';\r\n\r\nexport function StringInternal(value: string, tag?: string): IStringInternal {\r\n    value = (value) ? value : '';\r\n    let result: IStringInternal = new String(value) as IStringInternal;\r\n\r\n    // Function parse string object to array of string \r\n    result.toList = (seporator?: string): Array<string> => {\r\n        if (seporator == null) {\r\n            seporator = '|';\r\n        }\r\n        let dataArray = value.split(seporator);\r\n        /*jslint plusplus: true */\r\n        dataArray = dataArray.filter((item) => {\r\n            return item.length !== 0;\r\n        });\r\n        return dataArray;\r\n    }\r\n\r\n    // String helper function to validate that string start with specified string\r\n    result.startsWith = (str: string) => {\r\n        return value.slice(0, str.length) === str;\r\n    }\r\n\r\n    // String helper function to validate that string end with specified string\r\n    result.endsWith = (str: string) => {\r\n        return value.slice(-str.length) === str;\r\n    }\r\n\r\n    result.tag = (tag != null) ? tag : '';\r\n\r\n    result.toDate = (): Date | undefined => {\r\n        let theDate = new Date(value.toString());\r\n        if (theDate instanceof Date && !isNaN(theDate.valueOf())) {\r\n            return theDate;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    return result;\r\n}","import { StringInternal } from '../factories/StringInternal';\r\nimport { IAllergyData } from '../interfaces';\r\n\r\nexport class AllergyList implements IAllergyData {\r\n\r\n    protected data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    name = (() => {\r\n        console.log(this._value);\r\n        return (this.data.length > 0);}) ? this.data[0] : '';\r\n    onSetDate = StringInternal((this.data.length > 1) ? this.data[1] : '').toDate();\r\n        criticalIndicator = (this.data.length > 2) ? this.data[2] : '';\r\n    classification = (this.data.length > 3) ? this.data[3] : '';\r\n    description = (this.data.length > 4) ? this.data[4] : '';\r\n    gpiCode = (this.data.length > 5) ? this.data[5] : '';\r\n    severity = (this.data.length > 6) ? this.data[6] : '';\r\n    allergyId = (this.data.length > 7) ? this.data[7] : '';\r\n    stopDate = null;\r\n    reactionCode: number = 32; // OTHER=32\r\n    \r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n}","import { StringInternal } from '../factories/StringInternal';\r\nimport { AllergyList } from './AllergyList';\r\n\r\nexport class AllergyListRemoved extends AllergyList {\r\n\r\n    name = (this.data.length > 0) ? this.data[0] : '';\r\n    onSetDate = StringInternal((this.data.length > 1) ? this.data[1] : '').toDate();\r\n    stopDate = (this.data.length > 2) ? this.data[2] : '';\r\n    criticalIndicator = (this.data.length > 3) ? this.data[3] : '';\r\n    classification = (this.data.length > 4) ? this.data[4] : '';\r\n    description = (this.data.length > 5) ? this.data[5] : '';\r\n    gpiCode = (this.data.length > 6) ? this.data[6] : '';\r\n    severity = (this.data.length > 7) ? this.data[7] : '';\r\n    allergyId = (this.data.length > 8) ? this.data[8] : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) {\r\n        super(_value);\r\n    }\r\n}","import { IItem } from '../interfaces';\r\n\r\nexport function DocumentVariable(value, saveCallback): IItem {\r\n    let result: IItem = (value == null) ? new Object() : value;\r\n    result.save = () => {\r\n        if (saveCallback != null) {\r\n            saveCallback();\r\n        }\r\n    }\r\n    return result;\r\n}","export function IsActiveXSupported(_window: any): boolean {\r\n    let result: boolean = 'ActiveXObject' in _window;\r\n\r\n    // Verify ActiveX support in this browser\r\n    if (!result) {\r\n        console.log(\"Your browser does not support ActiveX objects\");\r\n    }\r\n    return result;\r\n}","export function GetActiveXErrorMessage(objectName: string, e: { Message: string }) {\r\n    let result = \"Unable to load ActiveX interface \" + objectName;\r\n    result += ((e != null && e.hasOwnProperty(\"Message\")) ? \".\\nError message: \" + e.Message : \"\");\r\n    return result;\r\n}","import { AllergyList } from './AllergyList';\r\nimport { AllergyListRemoved } from './AllergyListRemoved';\r\nimport { EmrMel } from './EmrMel';\r\nimport { StringInternal } from '../factories/factories';\r\nimport { IArrayAdditionalMethods } from '../interfaces';\r\n\r\nexport class Allergies {\r\n\r\n    private _added: string;\r\n    private _addedArray: IArrayAdditionalMethods<AllergyList> = [];\r\n    private _current: string;\r\n    private _currentArray: IArrayAdditionalMethods<AllergyList> = [];\r\n    private _removed: string;\r\n    private _removedArray: IArrayAdditionalMethods<AllergyList> = [];\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get added() {\r\n        if (this._addedArray.length === 0) {\r\n            this._added = (this._added != null) ? this._added : this._mel.melFunc('{ALL_NEW(\"delimited\")}');\r\n            let dataArray = StringInternal(this._added).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._addedArray.push(new AllergyList(dataArray[index]));\r\n            }\r\n        }\r\n        return this._addedArray;\r\n    }\r\n\r\n    async addedAsync() {\r\n        if (this._addedArray.length === 0) {\r\n            this._added = (this._added != null) ? this._added : await this._mel.melFunc('{ALL_NEW(\"delimited\")}');\r\n            let dataArray = StringInternal(this._added).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._addedArray.push(new AllergyList(dataArray[index]));\r\n            }\r\n        }\r\n        return this._addedArray;\r\n    }\r\n\r\n    get current() {\r\n        if (this._currentArray.length === 0) {\r\n            this._current = (this._current != null) ? this._current : this._mel.melFunc('{ALL_PRIOR(\"delimited\")}');\r\n            let dataArray = StringInternal(this._current).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._currentArray.push(new AllergyList(dataArray[index]));\r\n            }\r\n        }\r\n        return this._currentArray;\r\n    }\r\n\r\n    async currentAsync() {\r\n        if (this._currentArray.length === 0) {\r\n            this._current = (this._current != null) ? this._current : await this._mel.melFunc('{ALL_PRIOR(\"delimited\")}');\r\n            let dataArray = StringInternal(this._current).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._currentArray.push(new AllergyList(dataArray[index]));\r\n            }\r\n        }\r\n        return this._currentArray;\r\n    }\r\n    \r\n    get removed() {\r\n        if (this._removedArray.length === 0) {\r\n            this._removed = (this._removed != null) ? this._removed : this._mel.melFunc('{ALL_REMOVED(\"delimited\")}');\r\n            let dataArray = StringInternal(this._removed).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._removedArray.push(new AllergyListRemoved(dataArray[index]));\r\n            }\r\n        }\r\n        return this._removedArray;\r\n    }\r\n\r\n    async removedAsync() {\r\n        if (this._removedArray.length === 0) {\r\n            this._removed = (this._removed != null) ? this._removed : await this._mel.melFunc('{ALL_REMOVED(\"delimited\")}');\r\n            let dataArray = StringInternal(this._removed).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._removedArray.push(new AllergyListRemoved(dataArray[index]));\r\n            }\r\n        }\r\n        return this._removedArray;\r\n    }\r\n}","import { ObservationType } from './ObservationType';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class Observation {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n    private _unitOfMeasure;\r\n    private _tag;\r\n    private readonly observationType: ObservationType = new ObservationType();\r\n\r\n    name: string = (this._name != null) ? this._name : '';\r\n    value: string = (this.data.length > 0) ? this.data[0] : '';\r\n    date: string = (this.data.length > 1) ? this.data[1] : '';\r\n    time: string = (this.data.length > 2) ? this.data[2] : '';\r\n    signingUser: string = (this.data.length > 3) ? this.data[3] : '';\r\n    enteringUser: string = (this.data.length > 4) ? this.data[4] : '';\r\n    flags: string = (this.data.length > 5) ? this.data[5] : '';\r\n    comment: string = (this.data.length > 6) ? this.data[6] : '';\r\n    state: string = (this.data.length > 7) ? this.data[7] : '';\r\n    locationOfCare: string = (this.data.length > 8) ? this.data[8] : '';\r\n    documentType: string = (this.data.length > 9) ? this.data[9] : '';\r\n    documentId: string = (this.data.length > 10) ? this.data[10] : '';\r\n    type: string = this._observationType;\r\n\r\n    constructor(\r\n        public _name: string,\r\n        public _observationType: string,\r\n        public _value: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = (): string => {\r\n        let response = this._mel.saveObservation(this.name, this.value, this.date); //  this._mel.melFunc('{OBSNOW(\"' + this.name + '\",\"' + this.value + '\")}');\r\n        if (this.tag != null && this.tag != '') {\r\n            response = this._mel.melFunc('{OBSTAGNOW(\"' + this.name + '\",\"' + this.tag + '\")}');\r\n        }\r\n        if (this.comment != null && this.comment != '') {\r\n            response = this._mel.melFunc('{OBSMODIFIERNOW(\"' + this.name + '\",\"' + this.comment + '\")}');\r\n        }\r\n        return response;\r\n    }\r\n\r\n    remove = (): void => {\r\n\r\n    }\r\n\r\n    get unitOfMeasure() {\r\n        this._unitOfMeasure = (this._unitOfMeasure != null) ? this._unitOfMeasure : this._mel.melFunc('{OBSUNIT(\"' + this.name + '\")}');\r\n        return this._unitOfMeasure;\r\n    }\r\n\r\n    get tag() {\r\n        this._tag = (this._tag != null) ? this._tag\r\n            : (this._observationType === this.observationType.DocumentUnsigned) ? this._mel.melFunc('{OBSTAGNOW(\"' + this.name + '\")}')\r\n                : '';\r\n        return this._tag;\r\n    }\r\n}\r\n","export class Protocol {\r\n\r\n    name: string = (this._value != null) ? this._value : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n}","import { ObsTermsMap } from './ObsTermsMap';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class Measurement implements ObsTermsMap {\r\n\r\n    constructor(\r\n        public isCurrent: boolean,\r\n        public _weight: string,\r\n        public _height: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    // mdObject.obsTermsMap.weight\r\n    get weight(): string {\r\n        return this._mel.getObs(this.isCurrent, this._weight);\r\n    }\r\n\r\n    // mdObject.obsTermsMap.height\r\n    get height(): string {\r\n        return this._mel.getObs(this.isCurrent, this._height);\r\n    }\r\n}","import { Measurement } from './Measurement';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class Measurements {\r\n\r\n    private _current: Measurement;\r\n    private _previous: Measurement;\r\n\r\n    constructor(\r\n        public _weight: string,\r\n        public _height: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get current() {\r\n        return (this._current != null) ? this._current : new Measurement(true, this._weight, this._height, this._mel);\r\n    }\r\n\r\n    get previous() {\r\n        return (this._previous != null) ? this._previous : new Measurement(false, this._weight, this._height, this._mel);\r\n    }\r\n}","import { EmrMel } from './EmrMel';\r\n\r\nexport class Insurance {\r\n\r\n    private _name: string;\r\n    private _address: string;\r\n    private _insuranceId: string;\r\n    private _planName: string;\r\n    private _groupNumber: string;\r\n    private _phone: string;\r\n\r\n\r\n    constructor(\r\n        public insuranceType: string, // Type of insurance P = Primary S = Secondary O = Other,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    // The name of the patients insurance carrier.\r\n    get name() {\r\n        this._name = (this._name == null) ? this._mel.melFunc('{INS_NAME(\"' + this.insuranceType + '\")}') : this._name;\r\n        return this._name;\r\n    }\r\n\r\n    // The name and address of the patients insurance carrier.\r\n    get address() {\r\n        this._address = (this._address == null) ? this._mel.melFunc('{INS_ADDR(\"' + this.insuranceType + '\")}') : this._address;\r\n        return this._address;\r\n    }\r\n\r\n    // The patients insurance ID number for insurance carrier.\r\n    get insuranceId() {\r\n        this._insuranceId = (this._insuranceId == null) ? this._mel.melFunc('{INS_ID(\"' + this.insuranceType + '\")}') : this._insuranceId;\r\n        return this._insuranceId;\r\n    }\r\n\r\n    // The name of the patients plan for insurance\r\n    get planName() {\r\n        this._planName = (this._planName == null) ? this._mel.melFunc('{INS_PLAN(\"' + this.insuranceType + '\")}') : this._planName;\r\n        return this._planName;\r\n    }\r\n\r\n    // The group number of the patients insurance carrier.\r\n    get groupNumber() {\r\n        this._groupNumber = (this._groupNumber == null) ? this._mel.melFunc('{INS_GRP(\"' + this.insuranceType + '\")}') : this._groupNumber;\r\n        return this._groupNumber;\r\n    }\r\n\r\n    // The phone number of the patients insurance company\r\n    get phone() {\r\n        this._phone = (this._phone == null) ? this._mel.melFunc('{INS_PHONE(\"' + this.insuranceType + '\")}') : this._phone;\r\n        return this._phone;\r\n    }\r\n}","import { EmrMel } from './EmrMel';\r\n\r\nexport class CarePlan {\r\n\r\n    private data = this._value == null ? [] : this._value.split('^');\r\n    private isNew = this._value == null ? true : false;\r\n\r\n    carePlanId: string = (this.data.length > 0) ? this.data[0] : '';\r\n    goal: string = (this.data.length > 1) ? this.data[1] : '';\r\n    snomedCTCode: string = (this.data.length > 2) ? this.data[2] : '';\r\n    target: string = (this.data.length > 3) ? this.data[3] : '';\r\n    instructions: string = (this.data.length > 4) ? this.data[4] : '';\r\n    goalSetDate: string = (this.data.length > 5) ? this.data[5] : '';\r\n    goalMetDate: string = (this.data.length > 6) ? this.data[6] : '';\r\n    recordCreatedDateTime: string = (this.data.length > 7) ? this.data[7] : '';\r\n    sign: string = (this.data.length > 8) ? this.data[8] : '';\r\n    signedBy: string = (this.data.length > 9) ? this.data[9] : '';\r\n    signedDate: string = (this.data.length > 10) ? this.data[10] : '';\r\n    recordChangedDateTime: string = (this.data.length > 11) ? this.data[11] : '';\r\n    recordChangedBy: string = (this.data.length > 12) ? this.data[12] : '';\r\n    patientConditionDescription: string = (this.data.length > 13) ? this.data[13] : '';\r\n    patientConditionCode: string = (this.data.length > 14) ? this.data[14] : '';\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = (): void => {\r\n        if (this.isNew) {\r\n            let isError = this.validateAdd(); //TODO ADD VALIDATION\r\n            let response;\r\n            if (isError === '') {\r\n                response = this._mel.melFunc('{MEL_ADD_CARE_PLAN(' + this.toStringAdd() + ')}');\r\n                if (response < 0) {\r\n                    alert(this.carePlanAddError(response));\r\n                }\r\n            } else {\r\n                alert(isError);\r\n            }\r\n        }\r\n        else {\r\n            //update ;\r\n            //{MEL_UPDATE_CARE_PLAN(\"1691155657053120\",\"Goal-Exercise to lose weight\",\"\",\"\",\"\" ,\"\",\"2013/08/03\" ,\"\")}\r\n            //err_code = Mel.eval(\"{MEL_UPDATE_CARE_PLAN(\\\"\" +careplanID + \"\\\",\\\"\" +DB_TimeStamp + \"\\\",\\\"\" +goal_sel + \"\\\",\\\"\" +snomed_code + \"\\\",\\\"\" +target + \"\\\",\\\"\" +ins_sel + \"\\\",\\\"\" +sdate + \"\\\",\\\"\" +mdate + \"\\\",\\\"\" +problemID + \"\\\")}\");\r\n        }\r\n    }\r\n\r\n    toMelString = (): string => {\r\n        return this._value;\r\n    }\r\n\r\n    validateAdd = (): string => {\r\n        let errorMessage: string = ' is required.';\r\n        // check required parameters\r\n        if (this.goal === '') {\r\n            return 'goal' + errorMessage;\r\n        }\r\n        return '';\r\n    }\r\n\r\n    //MEL symbol for adding care this._value - format\r\n    //MEL_ADD_CARE_PLAN (Goal, SNOMEDCTCODE, Target, Instructions, GoalSetDate, GoalMetDate, PRID ( pipe separated Problem IDs selected from patients active problems) \r\n    toStringAdd = (): string => {\r\n        return '\\\"' + this.goal + '\\\",\\\"' +\r\n            this.snomedCTCode + '\\\",\\\"' +\r\n            this.target + '\\\",\\\"' +\r\n            this.instructions + '\\\",\\\"' +\r\n            this.goalSetDate + '\\\",\\\"' +\r\n            this.goalMetDate + '\\\",\\\"' +\r\n            this.patientConditionCode + '\\\"';\r\n    }\r\n\r\n    carePlanAddError = (code: string): string => {\r\n        let response: string = '';\r\n        switch (code) {\r\n            case \"-1\":\r\n                response = \"Error Code -1: Description or blank is too long.\";\r\n                break;\r\n            case \"-2\":\r\n                response = \"Error Code -2: Code is too long.\";\r\n                break;\r\n            case \"-3\":\r\n                response = \"Error Code -3: Target is too long.\";\r\n                break;\r\n            case \"-4\":\r\n                response = \"Error Code -4: Instruction is too long.\";\r\n                break;\r\n            case \"-5\":\r\n                response = \"Error Code -5: goalSetDate is invalid.\";\r\n                break;\r\n            case \"-6\":\r\n                response = \"Error Code -6: goalMetDate is invalid or less than goalSetDate.\";\r\n                break;\r\n            case \"-7\":\r\n                response = \"Error Code -7: Invalid patientConditionCode. Use $mdObject.patient.problems[index].problemId\";\r\n                break;\r\n            case \"-8\":\r\n                response = \"Error Code -8: Cannot add Care Plan for some other reason.\";\r\n                break;\r\n            case \"-21\":\r\n                response = \"Error Code -21: Service layer error.\";\r\n                break;\r\n            default:\r\n        }\r\n        return response;\r\n    }\r\n}","import { EmrMel } from './EmrMel';\r\nimport { MailingAddressExternal } from './external/MailingAddressExternal';\r\n\r\nexport class Address {\r\n\r\n    private _address1: string;\r\n    private _address2: string;\r\n    private _city: string;\r\n    private _state: string;\r\n    private _postCode: string;\r\n    private _country: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _mailingAddressExternal?: MailingAddressExternal\r\n    ) {\r\n        if (this._mailingAddressExternal) {\r\n            this._address1 = this._mailingAddressExternal.line1Addr;\r\n            this._address2 = this._mailingAddressExternal.line2Addr;\r\n            this._city = this._mailingAddressExternal.cityName;\r\n            this._country = this._mailingAddressExternal.countryCode;\r\n            this._postCode = this._mailingAddressExternal.postalCode;\r\n            this._state = this._mailingAddressExternal.stateCode;\r\n        }\r\n    }\r\n\r\n    // Returns the first line of the patients address\r\n    get address1() {\r\n        this._address1 = (this._address1 !== undefined) ? this._address1 : this._mel.melFunc('{PATIENT.ADDRESS1}');\r\n        return this._address1;\r\n    }\r\n\r\n    // Returns the second line of the patients address\r\n    get address2() {\r\n        this._address2 = (this._address2 !== undefined) ? this._address2 : this._mel.melFunc('{PATIENT.ADDRESS2}');\r\n        return this._address2;\r\n    }\r\n\r\n    // Returns the patients city of residence\r\n    get city() {\r\n        this._city = (this._city !== undefined) ? this._city : this._mel.melFunc('{PATIENT.CITY}');\r\n        return this._city;\r\n    }\r\n\r\n    // Returns the patients country of residence\r\n    get country() {\r\n        this._country = (this._country !== undefined) ? this._country : this._mel.melFunc('{PATIENT.COUNTRY}');\r\n        return this._country;\r\n    }\r\n\r\n    // Returns the patients ZIP/Postal code\r\n    get postCode() {\r\n        this._postCode = (this._postCode !== undefined) ? this._postCode : this._mel.melFunc('{PATIENT.ZIP}');\r\n        return this._postCode;\r\n    }\r\n\r\n    // Returns the patients state or province\r\n    get state() {\r\n        this._state = (this._state !== undefined) ? this._state : this._mel.melFunc('{PATIENT.STATE}');\r\n        return this._state;\r\n    }\r\n}","import { EmrMel } from './EmrMel';\r\nimport { ElectronicAddressExternal } from './external/ElectronicAddressExternal';\r\n\r\nexport class Phone {\r\n\r\n    private _home: string;\r\n    private _business: string;\r\n    private _mobile: string;\r\n    private _fax: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _electronicAddressExternal?: ElectronicAddressExternal[]\r\n    ) {\r\n        if (this._electronicAddressExternal) {\r\n            this._home = (this._home !== undefined) ? this._home : this._electronicAddressExternal.find(a => (a.addressSettingCode === \"H\" && a.urlScheme === \"tel\"))?.urlAddr;\r\n            this._home = (this._home) ? this.formatMelPhone(this._home) : this._home;\r\n\r\n            this._business = (this._business !== undefined) ? this._business : this._electronicAddressExternal.find(a => (a.addressSettingCode === \"WP\" && a.urlScheme === \"tel\"))?.urlAddr;\r\n            this._business = (this._business) ? this.formatMelPhone(this._business) : this._business;\r\n\r\n            this._mobile = (this._mobile !== undefined) ? this._mobile : this._electronicAddressExternal.find(a => (a.addressSettingCode === \"MC\" && a.urlScheme === \"tel\"))?.urlAddr;\r\n            this._mobile = (this._mobile) ? this.formatMelPhone(this._mobile) : this._mobile;\r\n        }\r\n    }\r\n\r\n    private formatMelPhone = (phone) => {\r\n        var phoneTest = new RegExp(/(\\d{3})(\\d{3})(\\d{4})(\\d+)?/);\r\n        phone = phone.trim();\r\n        var results = phoneTest.exec(phone);\r\n        if (results !== null && results.length > 4) {\r\n            return \"(\" + results[1] + \") \" + results[2] + \"-\" + results[3] + (typeof results[4] !== \"undefined\" ? \" [\" + results[4] + \"]\" : \"\");\r\n        }\r\n        else {\r\n            return phone;\r\n        }\r\n    }\r\n\r\n    get home() {\r\n        this._home = (this._home != null) ? this._home : this._mel.melFunc('{PATIENT.ALTPHONE}');\r\n        return this._home;\r\n    }\r\n\r\n    async homeAsync() {\r\n        this._home = (this._home != null) ? this._home : await this._mel.melFunc('{PATIENT.ALTPHONE}');\r\n        return this._home;\r\n    }\r\n\r\n    // Returns the patients business/work telephone number\r\n    get business() {\r\n        this._business = (this._business != null) ? this._business : this._mel.melFunc('{PATIENT.WORKPHONE}');\r\n        return this._business;\r\n    }\r\n\r\n    async businessAsync() {\r\n        this._business = (this._business != null) ? this._business : await this._mel.melFunc('{PATIENT.WORKPHONE}');\r\n        return this._business;\r\n    }\r\n\r\n    // Returns the patients cell phone number\r\n    get mobile() {\r\n        this._mobile = (this._mobile != null) ? this._mobile : this._mel.melFunc('{PATIENT.CELLPHONE}');\r\n        return this._mobile;\r\n    }\r\n\r\n    async mobileAsync() {\r\n        this._mobile = (this._mobile != null) ? this._mobile : await this._mel.melFunc('{PATIENT.CELLPHONE}');\r\n        return this._mobile;\r\n    }\r\n\r\n    // Returns the patients fax number\r\n    get fax() {\r\n        this._fax = (this._fax != null) ? this._fax : this._mel.melFunc('{PATIENT.FAXPHONE}');\r\n        return this._fax;\r\n    }\r\n\r\n    async faxAsync() {\r\n        this._fax = (this._fax != null) ? this._fax : await this._mel.melFunc('{PATIENT.FAXPHONE}');\r\n        return this._fax;\r\n    }\r\n}","import { EmrMel } from './EmrMel';\r\n\r\nexport class ReferringProviderPhone {\r\n\r\n    private _office: string;\r\n    private _alternative: string;\r\n    private _fax: string;\r\n    private _pager: string;\r\n    private _mobile: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get office() {\r\n        this._office = (this._office != null) ? this._office : this._mel.melFunc('{PATIENT.REFMDOFFICEPHONE}');\r\n        return this._office;\r\n    }\r\n\r\n    get alternative() {\r\n        this._alternative = (this._alternative != null) ? this._alternative : this._mel.melFunc('{PATIENT.REFMDALTPHONE}');\r\n        return this._alternative;\r\n    }\r\n\r\n    get fax() {\r\n        this._fax = (this._fax != null) ? this._fax : this._mel.melFunc('{PATIENT.REFMDFAXPHONE}');\r\n        return this._fax;\r\n    }\r\n\r\n    get pager() {\r\n        this._pager = (this._pager != null) ? this._pager : this._mel.melFunc('{PATIENT.REFMDPAGERPHONE}');\r\n        return this._pager;\r\n    }\r\n\r\n    get mobile() {\r\n        this._mobile = (this._mobile != null) ? this._mobile : this._mel.melFunc('{PATIENT.REFMDCELLPHONE}');\r\n        return this._mobile;\r\n    }\r\n}","import { ReferringProviderPhone } from './ReferringProviderPhone';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class ReferringProvider {\r\n\r\n    private _referringProviderId: string;\r\n    private _firstName: string;\r\n    private _lastName: string;\r\n    private _email: string;\r\n    private _fullAddress: string;\r\n    private _phone = new ReferringProviderPhone(this._mel);\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n\r\n    get referringProviderId() {\r\n        this._referringProviderId = (this._referringProviderId != null) ? this._referringProviderId : this._mel.melFunc('{PATIENT.REFMDID}');\r\n        return this._referringProviderId;\r\n    }\r\n\r\n    get firstName() {\r\n        this._firstName = (this._firstName != null) ? this._firstName : this._mel.melFunc('{PATIENT.REFMDFIRSTNAME}');\r\n        return this._firstName;\r\n    }\r\n\r\n    get lastName() {\r\n        this._lastName = (this._lastName != null) ? this._lastName : this._mel.melFunc('{PATIENT.REFMDLASTNAME}');\r\n        return this._lastName;\r\n    }\r\n\r\n    get email() {\r\n        this._email = (this._email != null) ? this._email : this._mel.melFunc('{PATIENT.REFMDEMAILADDRESS}');\r\n        return this._email;\r\n    }\r\n\r\n    get fullAddress() {\r\n        this._fullAddress = (this._fullAddress != null) ? this._fullAddress : this._mel.melFunc('{PATIENT.REFMDADDRESS}');\r\n        return this._fullAddress;\r\n    }\r\n\r\n    get phone() {\r\n        return this._phone;\r\n    }\r\n}","export const emptyImage: string = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII===';\r\nexport const simulatorChromeExtensionId = \"chgnndkhlnpmfkjnchmnhkfneccghaaf\";","import { emptyImage } from \"../consts/strings\";\r\n\r\nexport class System {\r\n    static isSimulator: boolean = false;\r\n\r\n    static toDate(value: string): Date {\r\n        if (value) {\r\n            return new Date(parseInt(value.substr(6)));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    static toImage(arrayBuffer:[]){\r\n        if (arrayBuffer) {\r\n            return \"data:image/jpg;base64,\" + btoa(String.fromCharCode.apply(null, new Uint8Array(arrayBuffer)));\r\n        }\r\n        else {\r\n            return emptyImage;\r\n        }\r\n    }\r\n\r\n    static formatDate(value: string): string {\r\n        if (value) {\r\n            if (value.length == 8) {\r\n                return value.substr(4, 2) + '/' + value.substr(6, 2) + '/' + value.substr(0, 4);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static dateToString(date: Date): string {\r\n        return ((date.getMonth() > 8) ? (date.getMonth() + 1) : ('0' + (date.getMonth() + 1)))\r\n            + '/' + ((date.getDate() > 9) ? date.getDate() : ('0' + date.getDate()))\r\n            + '/' + date.getFullYear();\r\n    }\r\n\r\n    static nonenumerable (target: any, propertyKey: string) {\r\n        let descriptor = Object.getOwnPropertyDescriptor(target, propertyKey) || {};\r\n        if (descriptor.enumerable !== false) {\r\n            descriptor.enumerable = false;\r\n            descriptor.writable = true;\r\n            Object.defineProperty(target, propertyKey, descriptor)\r\n        }\r\n    }\r\n}","import { IsActiveXSupported } from '../factories/factories';\r\n// Avoid Circular dependency detected. Do not reference classes\r\nimport { System } from '../classes/System';\r\nimport { Simulator } from '../simulator/simulator';\r\n\r\nexport abstract class EmrBase {\r\n\r\n    readonly isActiveXSupported = IsActiveXSupported(this._window);\r\n    readonly noData: string = 'Data Access Error';\r\n    errorMessage: string;\r\n\r\n    readonly isExternalSupported: boolean = (this.external) ? true : false;\r\n    private _external: any;\r\n    private _isSimulator: boolean;\r\n\r\n    get external(): any {\r\n        if (this._external === 'UnitTest') {\r\n            return undefined;\r\n        }\r\n        if (this._external) {\r\n            return this._external;\r\n        }\r\n\r\n        this._external = this._external ? this._external        // if the _external is set, then use it\r\n            : (this._window.opener && this._window.opener.external) ? this._window.opener.external\r\n                : this._window.external;\r\n        if (this._external.IsDebugMode === undefined) {\r\n            // try simulator\r\n            this._external = this._simulator.externalSimulator;\r\n        }\r\n\r\n        return this._external;\r\n    }\r\n\r\n    get isSimulator(): boolean {\r\n        this._isSimulator = (this._window.opener != null && this._window.opener['_isSimulator'] != undefined) ? this._window.opener['_isSimulator']\r\n            : (this._isSimulator) ? this._isSimulator\r\n                : System.isSimulator;\r\n        return this._isSimulator;\r\n    }\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _simulator: Simulator\r\n    ) {\r\n\r\n        this._window['_isSimulator'] = this.isSimulator;\r\n    }\r\n\r\n    abstract get externalSimulator(): any;\r\n}","import { System } from './System';\r\nimport { GetActiveXErrorMessage, IsActiveXSupported } from '../factories/factories';\r\nimport { EmrBase } from '../bases/EmrBase';\r\nimport { Simulator } from '../simulator/simulator';\r\n\r\nexport class EmrMel extends EmrBase {\r\n\r\n    private melObjectName = 'GE.CPO.EMR.80.MEL';\r\n    private melObjectNameSimulator = 'GE.CPO.EMR.80.MEL.SIMULATOR';\r\n    private mel;\r\n    public errorMessage: string;\r\n    readonly noData: string = 'Data Access Error';\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _simulator: Simulator\r\n    ) {\r\n        super(_window, _simulator);\r\n\r\n        this.initialization();\r\n    }\r\n\r\n    private initialization = (): void => {\r\n        if (IsActiveXSupported(this._window)) {\r\n            try {\r\n                this.mel = new this._window.ActiveXObject(this.melObjectName);\r\n            } catch (e) {\r\n                this.errorMessage = GetActiveXErrorMessage(this.melObjectName, e);\r\n            }\r\n            // Try to activate simulator\r\n            if (this.errorMessage != null) {\r\n                try {\r\n                    this.mel = new this._window.ActiveXObject(this.melObjectNameSimulator);\r\n                    System.isSimulator = true;\r\n                } catch (e) {\r\n                    console.log(this.errorMessage);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Implements MEL eval \r\n    melFunc = (data: string): string => {\r\n        return (this.external) ? this.external.EvaluateMel(data, false) : (this.mel) ? this.mel.eval(data) :  this.noData;\r\n    }\r\n\r\n    saveObservation = (obs: string, value: string, date: string): string => {\r\n        return (this.mel == null) ? this.noData : this.mel.OBSNOW(obs, value, date);\r\n    }\r\n\r\n    getObs = (isCurrent: boolean, data: string): string => {\r\n        return (this.mel == null) ? this.noData : ((isCurrent == true) ? this.mel.OBSNOW(data, '', '') : this.mel.OBSPREV(data));\r\n    }\r\n\r\n    showUrlDialog = (url: string): void => {\r\n        this.melFunc('{SHOWHTMLFORM(\"' + url + '\",\"test\")}');\r\n    }\r\n\r\n    get externalSimulator(): any {\r\n        return (this.mel == null) ? this.noData : this.mel.external;\r\n    }\r\n\r\n}","import { EmrBase } from '../bases/bases'\r\nimport { GetActiveXErrorMessage } from '../factories/factories';\r\nimport { Simulator } from '../simulator/simulator';\r\nimport { System } from './System';\r\n\r\nexport class EmrApp extends EmrBase {\r\n\r\n    private appObjectName = 'GE.CPO.EMR.90.Application';\r\n    private appObjectNameSimulator = 'GE.CPO.EMR.90.Application.SIMULATOR';\r\n    private app;\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _simulator: Simulator\r\n    ) {\r\n        super(_window, _simulator);\r\n\r\n        this.initialization();\r\n    }\r\n\r\n    private initialization = (): void => {\r\n        if (this.isActiveXSupported) {\r\n            try {\r\n                this.app = new this._window.ActiveXObject(this.appObjectName);\r\n                this.app.SetPasscode(this._window.external['Passcode']);\r\n            } catch (e) {\r\n                this.errorMessage = GetActiveXErrorMessage(this.appObjectName, e);\r\n            }\r\n            // Try to activate simulator\r\n            if (this.errorMessage != null) {\r\n                try {\r\n                    this.app = new this._window.ActiveXObject(this.appObjectNameSimulator);\r\n                    System.isSimulator = true;\r\n                } catch (e) {\r\n                    this.errorMessage = GetActiveXErrorMessage(this.appObjectName, e);\r\n                    alert(this.errorMessage);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    get enterpriseId(): string {\r\n        return (this.app == null) ? this.noData : this.app.EnterpriseID;\r\n    }\r\n\r\n    get databaseVersion(): string {\r\n        return (this.app == null) ? this.noData : this.app.DatabaseVersion;\r\n    }\r\n\r\n    showUrlDialog = (url: string): string => {\r\n        return (this.app == null) ? this.noData : this.app.ShowURLDialog(url);\r\n    }\r\n\r\n    get externalSimulator(): any {\r\n        return (this.app == null) ? this.noData : this.app.external;\r\n    }\r\n}","import { StringInternal } from '../factories/StringInternal';\r\nimport { EmrMel } from './EmrMel';\r\nimport { EmrApp } from './EmrApp';\r\n\r\nexport class EmrWindow {\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _app: EmrApp,\r\n        public _window: any,\r\n        public _document: any\r\n    ) { }\r\n\r\n    openDialog = (url: string) => {\r\n        ((StringInternal(url.toLowerCase())).startsWith('//localserver')) ? this._mel.showUrlDialog(url) : this._app.showUrlDialog(url);\r\n    }\r\n\r\n    /**\r\n     * Arguments :\r\n     * verb : 'GET'|'POST', defaults to \"GET\"\r\n     * target : an optional opening target (a name, or \"_blank\"), defaults to \"_self\"\r\n     */\r\n    open = (url: string, verb: string, target: string, features: string, data: Object) => {\r\n        let form: HTMLFormElement = this._document.createElement(\"form\");\r\n        form.action = url;\r\n        form.method = verb || 'GET';\r\n        form.target = target || \"_self\";\r\n        if (data) {\r\n            for (let key in data) {\r\n                let input: HTMLTextAreaElement = this._document.createElement(\"textarea\");\r\n                input.name = key;\r\n                input.value = (typeof data[key] === \"object\") ? JSON.stringify(data[key]) : data[key];\r\n                form.appendChild(input);\r\n            }\r\n        }\r\n        form.style.display = 'none';\r\n        this._document.body.appendChild(form);\r\n        let _window = this._window.open(\"about:blank\", target, features);\r\n        form.submit();\r\n        return _window;\r\n    }\r\n}","import { System } from \"../System\";\r\nimport { PersonExternal } from './PersonExternal';\r\nimport { IdentifierExternal } from \"./IdentifierExternal\";\r\nimport { PersonAgeExternal } from \"./PersonAgeExternal\";\r\nimport { PrimaryProviderRelationshipExternal } from \"./PrimaryProviderRelationshipExternal\";\r\nimport { MailingAddressExternal } from \"./MailingAddressExternal\";\r\n\r\nexport class DemographicsExternal {\r\n    private _json: string;\r\n        confidentialityCode: any;\r\n        contactList: any;\r\n        electronicAddressList: any;\r\n    excludedUserAccess: number;\r\n    excludedUserAccessSpecified: boolean;\r\n        guarantorList: any;\r\n        guardianList: any;\r\n    hasPatientAccess: boolean;\r\n    hasPatientAccessSpecified: boolean;\r\n        healthIssueList: any;\r\n    identifierList: IdentifierExternal[];\r\n    lastOfficeVisitDate: Date;\r\n    lastOfficeVisitDateSpecified: boolean;\r\n    mailingAddressList: MailingAddressExternal[];\r\n    medicareAdvantagePatient: boolean;\r\n    medicareAdvantagePatientSpecified: boolean;\r\n    mqicEPatientId: number;\r\n    mqicEPatientIdSpecified: boolean;\r\n        organization: any;\r\n    patientKey: number;\r\n    patientKeySpecified: boolean;\r\n    patientPicture: string;\r\n    person: PersonExternal;\r\n    personAge: PersonAgeExternal;\r\n    preferredLanguage: string;\r\n    primaryProviderRelationshipList: PrimaryProviderRelationshipExternal[];\r\n    registrationNote: string;\r\n    statusCode: string;\r\n    vipCode: string;\r\n\r\n    constructor(\r\n        public json: string\r\n    ) {\r\n        if (json) {\r\n            this._json = json;\r\n            let obj = JSON.parse(json);\r\n            this.confidentialityCode = obj.confidentialityCode;\r\n            this.contactList = obj.contactList;\r\n            this.electronicAddressList = obj.electronicAddressList;\r\n            this.excludedUserAccess = obj.excludedUserAccess;\r\n            this.excludedUserAccessSpecified = obj.excludedUserAccessSpecified;\r\n            this.guarantorList = obj.guarantorList;\r\n            this.guardianList = obj.guardianList;\r\n            this.hasPatientAccess = obj.hasPatientAccess;\r\n            this.hasPatientAccessSpecified = obj.hasPatientAccessSpecified;\r\n            this.healthIssueList = obj.healthIssueList;\r\n            this.identifierList = obj.identifierList;\r\n            this.lastOfficeVisitDate = System.toDate(obj.lastOfficeVisitDate);\r\n            this.lastOfficeVisitDateSpecified = obj.lastOfficeVisitDateSpecified;\r\n            this.mailingAddressList = obj.mailingAddressList;\r\n            this.medicareAdvantagePatient = obj.medicareAdvantagePatient;\r\n            this.medicareAdvantagePatientSpecified = obj.medicareAdvantagePatientSpecified;\r\n            this.mqicEPatientId = obj.mqicEPatientId;\r\n            this.mqicEPatientIdSpecified = obj.mqicEPatientIdSpecified;\r\n            this.organization = obj.organization;\r\n            this.patientKey = obj.patientKey;\r\n            this.patientKeySpecified = obj.patientKeySpecified;\r\n            this.patientPicture = System.toImage(obj.patientPicture);\r\n            this.person = obj.person;\r\n            this.personAge = obj.personAge;\r\n            this.preferredLanguage = obj.preferredLanguage;\r\n            this.primaryProviderRelationshipList = obj.primaryProviderRelationshipList;\r\n            this.registrationNote = obj.registrationNote;\r\n            this.statusCode = obj.statusCode;\r\n            this.vipCode = obj.vipCode;\r\n        }\r\n    }\r\n\r\n    toJson = (): string => { return this._json;}\r\n}\r\n","import { System } from \"../System\";\r\n\r\nexport class UserDetailExternal {\r\n    activationDate: Date;\r\n    activationDateSpecified: boolean;\r\n    authorizations: any;\r\n    authorizedLocationOfCares: any;\r\n    currentLocation: number;\r\n    currentLocationDetail: any;\r\n    currentLocationSpecified: boolean;\r\n    data2000: any;\r\n    deaNumber: any;\r\n    errorDetails: any;\r\n    expirationDate: Date;\r\n    expirationDateSpecified: boolean;\r\n    firstName: string;\r\n    globalID: number;\r\n    globalIDSpecified: boolean;\r\n    groupList: any;\r\n    homeLocation: number;\r\n    homeLocationDetail: any;\r\n    homeLocationSpecified: boolean;\r\n    isrespprov: number;\r\n    isrespprovSpecified: boolean;\r\n    jobTitle: number;\r\n    jobTitleDetail: any;\r\n    jobTitleSpecified: boolean;\r\n    lastLoginDate: Date;\r\n    lastLoginDateSpecified: boolean;\r\n    lastName: string;\r\n    lastPasswordChange: Date;\r\n    lastPasswordChangeSpecified: boolean;\r\n    licenseNumber: any;\r\n    loginAttempts: number;\r\n    loginAttemptsSpecified: boolean;\r\n    loginName: any;\r\n    memberID: any;\r\n    middleName: string;\r\n    mqicUserName: any;\r\n    npi: any;\r\n    orgName: any;\r\n    phone: any;\r\n    pidList: any;\r\n    pmpRoleID: number;\r\n    pmpRoleIDSpecified: boolean;\r\n    pmpRoleName: any;\r\n    prescriberID: any;\r\n    providerID: number;\r\n    providerIDSpecified: boolean;\r\n    result: number;\r\n    resultSpecified: boolean;\r\n    roleList: any;\r\n    specialty: number;\r\n    specialtyDetail: any;\r\n    specialtySpecified: boolean;\r\n    spi: any;\r\n    stateName: any;\r\n    status: any;\r\n    subscriptionureg: any;\r\n    tocElectronicAddress: any;\r\n    updateType: any;\r\n    upin: any;\r\n\r\n    static fromExternal(\r\n        _obj: any\r\n    ): UserDetailExternal {\r\n        let userDetailExternal = new UserDetailExternal();\r\n        if (_obj) {\r\n            userDetailExternal.activationDate = System.toDate(_obj.activationDate);\r\n            userDetailExternal.activationDateSpecified = _obj.activationDateSpecified;\r\n            userDetailExternal.authorizations = _obj.authorizations;\r\n            userDetailExternal.authorizedLocationOfCares = _obj.authorizedLocationOfCares;\r\n            userDetailExternal.currentLocation = _obj.currentLocation;\r\n            userDetailExternal.currentLocationDetail = _obj.currentLocationDetail;\r\n            userDetailExternal.currentLocationSpecified = _obj.currentLocationSpecified;\r\n            userDetailExternal.data2000 = _obj.data2000;\r\n            userDetailExternal.deaNumber = _obj.deaNumber;\r\n            userDetailExternal.errorDetails = _obj.errorDetails;\r\n            userDetailExternal.expirationDate = System.toDate(_obj.expirationDate);\r\n            userDetailExternal.expirationDateSpecified = _obj.expirationDateSpecified;\r\n            userDetailExternal.firstName = _obj.firstName;\r\n            userDetailExternal.globalID = _obj.globalID;\r\n            userDetailExternal.globalIDSpecified = _obj.globalIDSpecified;\r\n            userDetailExternal.groupList = _obj.groupList;\r\n            userDetailExternal.homeLocation = _obj.homeLocation;\r\n            userDetailExternal.homeLocationDetail = _obj.homeLocationDetail;\r\n            userDetailExternal.homeLocationSpecified = _obj.homeLocationSpecified;\r\n            userDetailExternal.isrespprov = _obj.isrespprov;\r\n            userDetailExternal.isrespprovSpecified = _obj.isrespprovSpecified;\r\n            userDetailExternal.jobTitle = _obj.jobTitle;\r\n            userDetailExternal.jobTitleDetail = _obj.jobTitleDetail;\r\n            userDetailExternal.jobTitleSpecified = _obj.jobTitleSpecified;\r\n            userDetailExternal.lastLoginDate = System.toDate(_obj.lastLoginDate);\r\n            userDetailExternal.lastLoginDateSpecified = _obj.lastLoginDateSpecified;\r\n            userDetailExternal.lastName = _obj.lastName;\r\n            userDetailExternal.lastPasswordChange = System.toDate(_obj.lastPasswordChange);\r\n            userDetailExternal.lastPasswordChangeSpecified = _obj.lastPasswordChangeSpecified;\r\n            userDetailExternal.licenseNumber = _obj.licenseNumber;\r\n            userDetailExternal.loginAttempts = _obj.loginAttempts;\r\n            userDetailExternal.loginAttemptsSpecified = _obj.loginAttemptsSpecified;\r\n            userDetailExternal.loginName = _obj.loginName;\r\n            userDetailExternal.memberID = _obj.memberID;\r\n            userDetailExternal.middleName = _obj.middleName;\r\n            userDetailExternal.mqicUserName = _obj.mqicUserName;\r\n            userDetailExternal.npi = _obj.npi;\r\n            userDetailExternal.orgName = _obj.orgName;\r\n            userDetailExternal.phone = _obj.phone;\r\n            userDetailExternal.pidList = _obj.pidList;\r\n            userDetailExternal.pmpRoleID = _obj.pmpRoleID;\r\n            userDetailExternal.pmpRoleIDSpecified = _obj.pmpRoleIDSpecified;\r\n            userDetailExternal.pmpRoleName = _obj.pmpRoleName;\r\n            userDetailExternal.prescriberID = _obj.prescriberID;\r\n            userDetailExternal.providerID = _obj.providerID;\r\n            userDetailExternal.providerIDSpecified = _obj.providerIDSpecified;\r\n            userDetailExternal.result = _obj.result;\r\n            userDetailExternal.resultSpecified = _obj.resultSpecified;\r\n            userDetailExternal.roleList = _obj.roleList;\r\n            userDetailExternal.specialty = _obj.specialty;\r\n            userDetailExternal.specialtyDetail = _obj.specialtyDetail;\r\n            userDetailExternal.specialtySpecified = _obj.specialtySpecified;\r\n            userDetailExternal.spi = _obj.spi;\r\n            userDetailExternal.stateName = _obj.stateName;\r\n            userDetailExternal.status = _obj.status;\r\n            userDetailExternal.subscriptionureg = _obj.subscriptionureg;\r\n            userDetailExternal.tocElectronicAddress = _obj.tocElectronicAddress;\r\n            userDetailExternal.updateType = _obj.updateType;\r\n            userDetailExternal.upin = _obj.upin;\r\n        }\r\n        return userDetailExternal;\r\n    }\r\n\r\n}","import { UserDetailExternal } from './UserDetailExternal';\r\nimport { System } from '../System';\r\n\r\nexport class AllergyExternal {\r\n    allclass: string; //IAllergyData.classification.substr(0,1) See: AllergyClassCode\r\n    allergyGroupID: number;\r\n    allergyGroupIDSpecified: boolean;\r\n    allergyID: number;\r\n    annotate: any;\r\n    aproxonsetdate: any;\r\n    change: number; //4 - deleted; 6 - added; 2 - current\r\n    changeSpecified: boolean;\r\n    dbCreateDate: Date;\r\n    dbCreateDateSpecified: boolean;\r\n    dbUpdatedDate: Date;\r\n    dbUpdatedDateSpecified: boolean;\r\n    description: string; //IAllergyData.description\r\n    documentDetail: any;\r\n    drugDescID: number;\r\n    drugDescIDSpecified: boolean;\r\n    errorDetails: any;\r\n    expirationID: number;\r\n    extAllergyID: number;\r\n    extAllergyIDSpecified: boolean;\r\n    externalAllergyInfoDetail: any;\r\n    genericProductIndex: any;\r\n    gi: any;\r\n    heme: any;\r\n    iscritical: string;\r\n    kind: any;\r\n    knowledgeBaseDrugCode: string;\r\n    knowledgeBaseDrugCodeSpecified: boolean;\r\n    medicationInfo: any;\r\n    name: string; //IAllergyData.name\r\n    ndclabprod: any;\r\n    ndcpackage: any;\r\n    onsetdate: Date; //IAllergyData.onSetDate\r\n    onsetdateSpecified: boolean;\r\n    other: any;\r\n    pendUserIndent: number;\r\n    pendUserIndentSpecified: boolean;\r\n    pendUserSort: number;\r\n    pendUserSortSpecified: boolean;\r\n    personID: number;\r\n    pubtime: number;\r\n    pubtimeSpecified: boolean;\r\n    pubUser: number;\r\n    pubUserDetail: UserDetailExternal;\r\n    pubUserSpecified: boolean;\r\n    rash: any;\r\n    resp: any;\r\n    result: number;\r\n    resultSpecified: boolean;\r\n    searchCriteria: any;\r\n    secondaryDocumentID: number;\r\n    secondaryDocumentIDSpecified: boolean;\r\n    severity: any;\r\n    shock: any;\r\n    snomedID: number;\r\n    snomedIDSpecified: boolean;\r\n    stopdate: Date; //IAllergyData.stopDate\r\n    stopdateSpecified: boolean;\r\n    stopreason: any;\r\n    userDetail: UserDetailExternal;\r\n    userID: number;\r\n    userIDSpecified: boolean;\r\n    userIndent: number;\r\n    userIndentSpecified: boolean;\r\n    userSort: number;\r\n    userSortSpecified: boolean;\r\n\r\n    constructor(\r\n        _obj: any\r\n    ) {\r\n        this.allclass = _obj.allclass;\r\n        this.allergyGroupID = _obj.allergyGroupID;\r\n        this.allergyGroupIDSpecified = _obj.allergyGroupIDSpecified;\r\n        this.allergyID = _obj.allergyID;\r\n        this.annotate = _obj.annotate;\r\n        this.aproxonsetdate = _obj.aproxonsetdate;\r\n        this.change = _obj.change;\r\n        this.changeSpecified = _obj.changeSpecified;\r\n        this.dbCreateDate = System.toDate(_obj.dbCreateDate);\r\n        this.dbCreateDateSpecified = _obj.dbCreateDateSpecified;\r\n        this.dbUpdatedDate = System.toDate(_obj.dbUpdatedDate);\r\n        this.dbUpdatedDateSpecified = _obj.dbUpdatedDateSpecified;\r\n        this.description = _obj.description;\r\n        this.documentDetail = _obj.documentDetail;\r\n        this.drugDescID = _obj.drugDescID;\r\n        this.drugDescIDSpecified = _obj.drugDescIDSpecified;\r\n        this.errorDetails = _obj.errorDetails;\r\n        this.expirationID = _obj.expirationID;\r\n        this.extAllergyID = _obj.extAllergyID;\r\n        this.extAllergyIDSpecified = _obj.extAllergyIDSpecified;\r\n        this.externalAllergyInfoDetail = _obj.externalAllergyInfoDetail;\r\n        this.genericProductIndex = _obj.genericProductIndex;\r\n        this.gi = _obj.gi;\r\n        this.heme = _obj.heme;\r\n        this.iscritical = _obj.iscritical;\r\n        this.kind = _obj.kind;\r\n        this.knowledgeBaseDrugCode = _obj.knowledgeBaseDrugCode;\r\n        this.knowledgeBaseDrugCodeSpecified = _obj.knowledgeBaseDrugCodeSpecified;\r\n        this.medicationInfo = _obj.medicationInfo;\r\n        this.name = _obj.name;\r\n        this.ndclabprod = _obj.ndclabprod;\r\n        this.ndcpackage = _obj.ndcpackage;\r\n        this.onsetdate = System.toDate(_obj.onsetdate);\r\n        this.onsetdateSpecified = _obj.onsetdateSpecified;\r\n        this.other = _obj.other;\r\n        this.pendUserIndent = _obj.pendUserIndent;\r\n        this.pendUserIndentSpecified = _obj.pendUserIndentSpecified;\r\n        this.pendUserSort = _obj.pendUserSort;\r\n        this.pendUserSortSpecified = _obj.pendUserSortSpecified;\r\n        this.personID = _obj.personID;\r\n        this.pubtime = _obj.pubtime;\r\n        this.pubtimeSpecified = _obj.pubtimeSpecified;\r\n        this.pubUser = _obj.pubUser;\r\n        this.pubUserDetail = UserDetailExternal.fromExternal(_obj.pubUserDetail);\r\n        this.pubUserSpecified = _obj.pubUserSpecified;\r\n        this.rash = _obj.rash;\r\n        this.resp = _obj.resp;\r\n        this.result = _obj.result;\r\n        this.resultSpecified = _obj.resultSpecified;\r\n        this.searchCriteria = _obj.searchCriteria;\r\n        this.secondaryDocumentID = _obj.secondaryDocumentID;\r\n        this.secondaryDocumentIDSpecified = _obj.secondaryDocumentIDSpecified;\r\n        this.severity = _obj.severity;\r\n        this.shock = _obj.shock;\r\n        this.snomedID = _obj.snomedID;\r\n        this.snomedIDSpecified = _obj.snomedIDSpecified;\r\n        this.stopdate = System.toDate(_obj.stopdate);\r\n        this.stopdateSpecified = _obj.stopdateSpecified;\r\n        this.stopreason = _obj.stopreason;\r\n        this.userDetail = UserDetailExternal.fromExternal(_obj.userDetail);\r\n        this.userID = _obj.userID;\r\n        this.userIDSpecified = _obj.userIDSpecified;\r\n        this.userIndent = _obj.userIndent;\r\n        this.userIndentSpecified = _obj.userIndentSpecified;\r\n        this.userSort = _obj.userSort;\r\n        this.userSortSpecified = _obj.userSortSpecified;\r\n    }\r\n}","import { UserDetailExternal } from \"./UserDetailExternal\";\r\nimport { CodeDetailExternal } from \"./CodeDetailExternal\";\r\nimport { System } from \"../System\";\r\n\r\nexport class ProblemExternal {\r\n    annotate: string;\r\n    aproxonsetdate: any;\r\n    aproxstopdate: any;\r\n    assessmentList: any;\r\n    change: number;\r\n    code: string;\r\n    codechange: any;\r\n    covered: any;\r\n    dbCreateDate: Date;\r\n    dbCreateDateSpecified: boolean;\r\n    dbUpdatedDate: Date;\r\n    dbUpdatedDateSpecified: boolean;\r\n    description: string;\r\n    documentDetail: any;\r\n    errorDetails: any;\r\n    expirationID: number;\r\n    expirationIDSpecified: boolean;\r\n    externalProblemDetail: any;\r\n    extSecondaryProblemID: number;\r\n    extSecondaryProblemIDSpecified: boolean;\r\n    icd9CodeDetail: CodeDetailExternal;\r\n    icd9MasterDiagnosisID: number;\r\n    icd9MasterDiagnosisIDSpecified: boolean;\r\n    icd10CodeDetail: CodeDetailExternal;\r\n    icd10MasterDiagnosisID: number;\r\n    icd10MasterDiagnosisIDSpecified: boolean;\r\n    lastClaimedDate: Date;\r\n    lastClaimedDateSpecified: boolean;\r\n    medicareAdvantageAlert: boolean;\r\n    medicareAdvantageAlertSpecified: boolean;\r\n    medicareAdvantageRiskAdjustmentFactor: any;\r\n    onsetdate: Date;\r\n    onsetdateSpecified: boolean;\r\n    pendUserIndent: number;\r\n    pendUserIndentSpecified: boolean;\r\n    pendUserSort: number;\r\n    pendUserSortSpecified: boolean;\r\n    personID: number;\r\n    priority: number;\r\n    prioritySpecified: boolean;\r\n    problemID: number;\r\n    problemIDSpecified: boolean;\r\n    pubtime: number;\r\n    pubtimeSpecified: boolean;\r\n    pubUser: number;\r\n    pubUserDetail: UserDetailExternal;\r\n    pubUserSpecified: boolean;\r\n    qualifier: string;\r\n    result: number;\r\n    resultSpecified: boolean;\r\n    searchCriteria: any;\r\n    secondaryDocumentID: number;\r\n    secondaryDocumentIDSpecified: boolean;\r\n    secondaryProblemID: number;\r\n    secondaryProblemIDSpecified: boolean;\r\n    snoMedCodeDetail: any;\r\n    snoMedMasterDiagnosisID: number;\r\n    snoMedMasterDiagnosisIDSpecified: boolean;\r\n    stopdate: Date;\r\n    stopdateSpecified: boolean;\r\n    stopreason: any;\r\n    userDetail: UserDetailExternal;\r\n    userDim: number;\r\n    userDimSpecified: boolean;\r\n    userID: number;\r\n    userIDSpecified: boolean;\r\n    userIndent: number;\r\n    userIndentSpecified: boolean;\r\n    userSort: number;\r\n    userSortSpecified: boolean;\r\n\r\n    static fromExternal(\r\n        _obj: any\r\n    ): ProblemExternal {\r\n        let problemExternal = new ProblemExternal();\r\n        problemExternal.annotate = _obj.annotate;\r\n        problemExternal.aproxonsetdate = _obj.aproxonsetdate;\r\n        problemExternal.aproxstopdate = _obj.aproxstopdate;\r\n        problemExternal.assessmentList = _obj.assessmentList;\r\n        problemExternal.change = _obj.change;\r\n        problemExternal.code = _obj.code;\r\n        problemExternal.codechange = _obj.codechange;\r\n        problemExternal.covered = _obj.covered;\r\n        problemExternal.dbCreateDate = System.toDate(_obj.dbCreateDate);\r\n        problemExternal.dbCreateDateSpecified = _obj.dbCreateDateSpecified;\r\n        problemExternal.dbUpdatedDate = System.toDate(_obj.dbUpdatedDate);\r\n        problemExternal.dbUpdatedDateSpecified = _obj.dbUpdatedDateSpecified;\r\n        problemExternal.description = _obj.description;\r\n        problemExternal.documentDetail = _obj.documentDetail;\r\n        problemExternal.errorDetails = _obj.errorDetails;\r\n        problemExternal.expirationID = _obj.expirationID;\r\n        problemExternal.expirationIDSpecified = _obj.expirationIDSpecified;\r\n        problemExternal.externalProblemDetail = _obj.externalProblemDetail;\r\n        problemExternal.extSecondaryProblemID = _obj.extSecondaryProblemID;\r\n        problemExternal.extSecondaryProblemIDSpecified = _obj.extSecondaryProblemIDSpecified;\r\n        problemExternal.icd9CodeDetail = _obj.icd9CodeDetail;\r\n        problemExternal.icd9MasterDiagnosisID = _obj.icd9MasterDiagnosisID;\r\n        problemExternal.icd9MasterDiagnosisIDSpecified = _obj.icd9MasterDiagnosisIDSpecified;\r\n        problemExternal.icd10CodeDetail = _obj.icd10CodeDetail;\r\n        problemExternal.icd10MasterDiagnosisID = _obj.icd10MasterDiagnosisID;\r\n        problemExternal.icd10MasterDiagnosisIDSpecified = _obj.icd10MasterDiagnosisIDSpecified;\r\n        problemExternal.lastClaimedDate = System.toDate(_obj.lastClaimedDate);\r\n        problemExternal.lastClaimedDateSpecified = _obj.lastClaimedDateSpecified;\r\n        problemExternal.medicareAdvantageAlert = _obj.medicareAdvantageAlert;\r\n        problemExternal.medicareAdvantageAlertSpecified = _obj.medicareAdvantageAlertSpecified;\r\n        problemExternal.medicareAdvantageRiskAdjustmentFactor = _obj.medicareAdvantageRiskAdjustmentFactor;\r\n        problemExternal.onsetdate = System.toDate(_obj.onsetdate);\r\n        problemExternal.onsetdateSpecified = _obj.onsetdateSpecified;\r\n        problemExternal.pendUserIndent = _obj.pendUserIndent;\r\n        problemExternal.pendUserIndentSpecified = _obj.pendUserIndentSpecified;\r\n        problemExternal.pendUserSort = _obj.pendUserSort;\r\n        problemExternal.pendUserSortSpecified = _obj.pendUserSortSpecified;\r\n        problemExternal.personID = _obj.personID;\r\n        problemExternal.priority = _obj.priority;\r\n        problemExternal.prioritySpecified = _obj.prioritySpecified;\r\n        problemExternal.problemID = _obj.problemID;\r\n        problemExternal.problemIDSpecified = _obj.problemIDSpecified;\r\n        problemExternal.pubtime = _obj.pubtime;\r\n        problemExternal.pubtimeSpecified = _obj.pubtimeSpecified;\r\n        problemExternal.pubUser = _obj.pubUser;\r\n        problemExternal.pubUserDetail = UserDetailExternal.fromExternal(_obj.pubUserDetail);\r\n        problemExternal.pubUserSpecified = _obj.pubUserSpecified;\r\n        problemExternal.qualifier = _obj.qualifier;\r\n        problemExternal.result = _obj.result;\r\n        problemExternal.resultSpecified = _obj.resultSpecified;\r\n        problemExternal.searchCriteria = _obj.searchCriteria;\r\n        problemExternal.secondaryDocumentID = _obj.secondaryDocumentID;\r\n        problemExternal.secondaryDocumentIDSpecified = _obj.secondaryDocumentIDSpecified;\r\n        problemExternal.secondaryProblemID = _obj.secondaryProblemID;\r\n        problemExternal.secondaryProblemIDSpecified = _obj.secondaryProblemIDSpecified;\r\n        problemExternal.snoMedCodeDetail = _obj.snoMedCodeDetail;\r\n        problemExternal.snoMedMasterDiagnosisID = _obj.snoMedMasterDiagnosisID;\r\n        problemExternal.snoMedMasterDiagnosisIDSpecified = _obj.snoMedMasterDiagnosisIDSpecified;\r\n        problemExternal.stopdate = System.toDate(_obj.stopdate);\r\n        problemExternal.stopdateSpecified = _obj.stopdateSpecified;\r\n        problemExternal.stopreason = _obj.stopreason;\r\n        problemExternal.userDetail = UserDetailExternal.fromExternal(_obj.userDetail);\r\n        problemExternal.userDim = _obj.userDim;\r\n        problemExternal.userDimSpecified = _obj.userDimSpecified;\r\n        problemExternal.userID = _obj.userID;\r\n        problemExternal.userIDSpecified = _obj.userIDSpecified;\r\n        problemExternal.userIndent = _obj.userIndent;\r\n        problemExternal.userIndentSpecified = _obj.userIndentSpecified;\r\n        problemExternal.userSort = _obj.userSort;\r\n        problemExternal.userSortSpecified = _obj.userSortSpecified;\r\n\r\n        return problemExternal;\r\n    }\r\n\r\n}","import { AllergyExternal } from './AllergyExternal';\r\n\r\nexport class AllergiesExternal extends Array<AllergyExternal>\r\n{\r\n\r\n    constructor(public json: string = '[]') {\r\n        super(...(JSON.parse(json) as []).map(e => new AllergyExternal(e)));\r\n    }\r\n\r\n\r\n}","export class FlowsheetObservation {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    name: string = (this.data.length > 0) ? this.data[0] : '';\r\n    value: string = (this.data.length > 1) ? this.data[1] : '';\r\n    date: string = (this.data.length > 2) ? this.data[2] : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n\r\n}\r\n","export class ArrayAsync<T> \r\n{\r\n    [Symbol.unscopables](): { copyWithin: boolean; entries: boolean; fill: boolean; find: boolean; findIndex: boolean; keys: boolean; values: boolean; } {\r\n        return { copyWithin: true, entries: true, fill: true, find: true, findIndex: true, keys: true, values: true };\r\n    }\r\n    some(predicate: (value: T, index: number, array: T[]) => unknown, thisArg?: any): boolean {\r\n        return this._data.some(predicate, thisArg);\r\n    }\r\n    map<U>(callbackfn: (value: T, index: number, array: T[]) => U, thisArg?: any): U[] {\r\n        return this._data.map<U>(callbackfn, thisArg);\r\n    }\r\n    filter(predicate: (value: T, index: number, array: T[]) => unknown, thisArg?: any): T[];\r\n    filter(predicate: any, thisArg?: any);\r\n    filter<S extends T>(predicate: (value: T, index: number, array: T[]) => value is S, thisArg?: any): S[] {\r\n        return this._data.filter<S>(predicate, thisArg);\r\n    }\r\n\r\n    reduce(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T, initialValue: T): T;\r\n    reduce(callbackfn: any, initialValue?: any);\r\n    reduce(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T): T;\r\n    reduce<U>(callbackfn: (previousValue: U, currentValue: T, currentIndex: number, array: T[]) => U, initialValue?: U): U {\r\n        return this._data.reduce<U>(callbackfn, initialValue);\r\n    }\r\n\r\n    reduceRight(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T): T;\r\n    reduceRight(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) => T, initialValue: T): T;\r\n    reduceRight(callbackfn: any, initialValue?: any);\r\n    reduceRight<U>(callbackfn: (previousValue: U, currentValue: T, currentIndex: number, array: T[]) => U, initialValue?: U): U {\r\n        return this._data.reduceRight<U>(callbackfn, initialValue);\r\n    }\r\n\r\n    find(predicate: (value: T, index: number, obj: T[]) => unknown, thisArg?: any): T;\r\n    find(predicate: any, thisArg?: any);\r\n    find<S extends T>(predicate: (this: void, value: T, index: number, obj: T[]) => value is S, thisArg?: any): S {\r\n        return this._data.find<S>(predicate, thisArg);\r\n    }\r\n\r\n    findIndex(predicate: (value: T, index: number, obj: T[]) => unknown, thisArg?: any): number {\r\n        return this._data.findIndex(predicate, thisArg);\r\n    }\r\n    fill(value: T, start?: number, end?: number): this {\r\n        this._data = this._data.fill(value, start, end);\r\n        return this;\r\n    }\r\n    copyWithin(target: number, start: number, end?: number): this {\r\n        this._data = this._data.copyWithin(target, start, end);\r\n        return this;\r\n    }\r\n    entries(): IterableIterator<[number, T]> {\r\n        return this._data.entries();\r\n    }\r\n    keys(): IterableIterator<number> {\r\n        return this._data.keys();\r\n    }\r\n    values(): IterableIterator<T> {\r\n        return this._data.values();\r\n    }\r\n    includes(searchElement: T, fromIndex?: number): boolean {\r\n        return this._data.includes(searchElement, fromIndex);\r\n    }\r\n    _data: Array<T> = new Array<T>();\r\n\r\n    /**\r\n     * Gets or sets the length of the array. This is a number one higher than the highest element defined in an array.\r\n     */\r\n    get length(): number {\r\n        return this._data.length;\r\n    }\r\n    /**\r\n     * Returns a string representation of an array.\r\n     */\r\n    toString(): string {\r\n        return this._data.toString();\r\n    }\r\n    /**\r\n     * Returns a string representation of an array. The elements are converted to string using their toLocalString methods.\r\n     */\r\n    toLocaleString(): string {\r\n        return this._data.toLocaleString();\r\n    }\r\n    /**\r\n     * Removes the last element from an array and returns it.\r\n     */\r\n    pop(): T | undefined\r\n    {\r\n        return this._data.pop();\r\n    }\r\n    /**\r\n     * Appends new elements to an array, and returns the new length of the array.\r\n     * @param items New elements of the Array.\r\n     */\r\n    push(...items: T[]): number {\r\n        return this._data.push(...items);\r\n    }\r\n    /**\r\n     * Combines two or more arrays.\r\n     * @param items Additional items to add to the end of array1.\r\n     */\r\n    concat(...items: (T | ConcatArray<T>)[]): T[] {\r\n        return this._data.concat(...items);\r\n    }\r\n    /**\r\n     * Adds all the elements of an array separated by the specified separator string.\r\n     * @param separator A string used to separate one element of an array from the next in the resulting String. If omitted, the array elements are separated with a comma.\r\n     */\r\n    join(separator?: string): string {\r\n        return this._data.join(separator);\r\n    }\r\n    /**\r\n     * Reverses the elements in an Array.\r\n     */\r\n    reverse(): T[] {\r\n        return this._data.reverse();\r\n    }\r\n    /**\r\n     * Removes the first element from an array and returns it.\r\n     */\r\n    shift(): T | undefined {\r\n        return this._data.shift();\r\n    }\r\n    /**\r\n     * Returns a section of an array.\r\n     * @param start The beginning of the specified portion of the array.\r\n     * @param end The end of the specified portion of the array. This is exclusive of the element at the index 'end'.\r\n     */\r\n    slice(start?: number, end?: number): T[] {\r\n        return this._data.slice(start, end);\r\n    }\r\n    /**\r\n     * Sorts an array.\r\n     * @param compareFn Function used to determine the order of the elements. It is expected to return\r\n     * a negative value if first argument is less than second argument, zero if they're equal and a positive\r\n     * value otherwise. If omitted, the elements are sorted in ascending, ASCII character order.\r\n     * ```ts\r\n     * [11,2,22,1].sort((a, b) => a - b)\r\n     * ```\r\n     */\r\n    sort(compareFn?: (a: T, b: T) => number): this {\r\n        this._data = this._data.sort(compareFn);\r\n        return this;\r\n    }\r\n    /**\r\n     * Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\r\n     * @param start The zero-based location in the array from which to start removing elements.\r\n     * @param deleteCount The number of elements to remove.\r\n     */\r\n    splice(start: number, deleteCount?: number): T[];\r\n    /**\r\n     * Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\r\n     * @param start The zero-based location in the array from which to start removing elements.\r\n     * @param deleteCount The number of elements to remove.\r\n     * @param items Elements to insert into the array in place of the deleted elements.\r\n     */\r\n    splice(start: number, deleteCount: number, ...items: T[]): T[] {\r\n        return this._data.splice(start, deleteCount, ...items);\r\n    }\r\n    /**\r\n     * Inserts new elements at the start of an array.\r\n     * @param items  Elements to insert at the start of the Array.\r\n     */\r\n    unshift(...items: T[]): number {\r\n        return this._data.unshift(...items);\r\n    }\r\n    /**\r\n     * Returns the index of the first occurrence of a value in an array.\r\n     * @param searchElement The value to locate in the array.\r\n     * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.\r\n     */\r\n    indexOf(searchElement: T, fromIndex?: number): number {\r\n        return this._data.indexOf(searchElement, fromIndex);\r\n    }\r\n    /**\r\n     * Returns the index of the last occurrence of a specified value in an array.\r\n     * @param searchElement The value to locate in the array.\r\n     * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at the last index in the array.\r\n     */\r\n    lastIndexOf(searchElement: T, fromIndex?: number): number {\r\n        return this._data.lastIndexOf(searchElement, fromIndex);\r\n    }\r\n    /**\r\n     * Determines whether all the members of an array satisfy the specified test.\r\n     * @param predicate A function that accepts up to three arguments. The every method calls\r\n     * the predicate function for each element in the array until the predicate returns a value\r\n     * which is coercible to the Boolean value false, or until the end of the array.\r\n     * @param thisArg An object to which the this keyword can refer in the predicate function.\r\n     * If thisArg is omitted, undefined is used as the this value.\r\n     */\r\n    every(predicate: (value: T, index: number, array: T[]) => unknown, thisArg?: any): boolean {\r\n        return this._data.every(predicate, thisArg);\r\n    }\r\n\r\n    /**\r\n     * Performs the specified action for each element in an array.\r\n     * @param callbackfn  A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array.\r\n     * @param thisArg  An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\r\n     */\r\n    forEach(callbackfn: (value: T, index: number, array: T[]) => void, thisArg?: any): void {\r\n        return this._data.forEach(callbackfn, thisArg);\r\n    }\r\n\r\n    [Symbol.iterator]() {\r\n        return this._data.values();\r\n    }\r\n\r\n    get(n: number): T { return this._data[n] };\r\n\r\n    set(n: number, value: T) { this._data[n] = value;}    \r\n}","import { Problem } from './Problem';\r\nimport { StringInternal } from '../factories/factories';\r\nimport { EmrMel } from './EmrMel';\r\nimport { ArrayAsync } from '../interfaces/ArrayAsync';\r\nimport { ObjectStatus } from '../enums';\r\n\r\nexport class Problems extends ArrayAsync<Problem>{\r\n    private _isLoaded = false;\r\n    tag: string;\r\n    currentProblemMelData: string;\r\n    newProblemMelData: string;\r\n\r\n    load = (mel: EmrMel) => {\r\n        if (!this._isLoaded) {\r\n            // Load Current\r\n            this._current(mel);\r\n            // Load Added\r\n            this._new(mel);\r\n\r\n            this._isLoaded = true;\r\n        }\r\n    }\r\n\r\n    async loadAsync(mel: EmrMel) {\r\n        if (!this._isLoaded) {\r\n            // Load Current\r\n            await this._currentAsync(mel);\r\n            // Load Added\r\n            await this._newAsync(mel);\r\n\r\n\r\n            this._isLoaded = true;\r\n        }\r\n    } \r\n\r\n    private _current = (mel: EmrMel) => {\r\n        this.currentProblemMelData = (this.currentProblemMelData != null) ? this.currentProblemMelData : mel.melFunc('{PROB_PRIOR(\"delimited\",\"dat\",\"com\")}');\r\n        this.loadMelDataToList(this.currentProblemMelData, this.currentProblem);\r\n    }\r\n\r\n    async _currentAsync(mel: EmrMel) {\r\n        this.currentProblemMelData = (this.currentProblemMelData != null) ? this.currentProblemMelData : await mel.melFunc('{PROB_PRIOR(\"delimited\",\"dat\",\"com\")}');\r\n        this.loadMelDataToList(this.currentProblemMelData, this.currentProblem);\r\n    }\r\n\r\n    private _new = (mel: EmrMel) => {\r\n        this.newProblemMelData = (this.newProblemMelData != null) ? this.newProblemMelData : mel.melFunc('{PROB_NEW(\"delimited\",\"dat\",\"com\")}');\r\n        this.loadMelDataToList(this.newProblemMelData, this.newProblem);\r\n    }\r\n\r\n    async _newAsync(mel: EmrMel) {\r\n        this.newProblemMelData = (this.newProblemMelData != null) ? this.newProblemMelData : await mel.melFunc('{PROB_NEW(\"delimited\",\"dat\",\"com\")}');\r\n        this.loadMelDataToList(this.newProblemMelData, this.newProblem);\r\n    }\r\n\r\n\r\n    private loadMelDataToList = (data: string, predicate: (value: string)=> Problem) => {\r\n        let dataArray = StringInternal(data).toList();\r\n        for (let index = 0; index < dataArray.length; index++) {\r\n            this.push(predicate(dataArray[index]));\r\n        }\r\n    }\r\n\r\n    currentProblem = (value: string): Problem => {\r\n        let data: Array<string> = (value == null) ? [] : value.split('^');\r\n        let problem: Problem = new Problem();\r\n\r\n        problem = this._locadMelDataFromString(data, problem);\r\n\r\n        return problem;\r\n    }\r\n\r\n    newProblem = (value: string): Problem => {\r\n        let data: Array<string> = (value == null) ? [] : value.split('^');\r\n        let problem: Problem = new Problem();\r\n        problem.status = ObjectStatus.Added;\r\n\r\n        problem = this._locadMelDataFromString(data, problem);\r\n\r\n        return problem;\r\n    }\r\n\r\n    _locadMelDataFromString = (data: Array<string>, problem: Problem) => {\r\n        problem.type = (data.length > 0) ? data[0] : '';\r\n        problem.description = (data.length > 1) ? data[1] : '';\r\n        problem.codeIcd9 = (data.length > 2) ? data[2] : '';\r\n        problem.comment = (data.length > 3) ? data[3] : '';\r\n        problem.onsetDate = StringInternal((data.length > 4) ? data[4] : '').toDate();\r\n        problem.stopDate = StringInternal((data.length > 5) ? data[5] : '').toDate();\r\n        problem.stopReason = (data.length > 6) ? data[6] : '';\r\n        problem.codeIcd10 = (data.length > 7) ? data[7] : '';\r\n        problem.lastModifiedDate = (data.length > 9) ? data[9] : '';\r\n\r\n        let _problemId = (data.length > 8) ? data[8] : '';\r\n        let index = _problemId.indexOf('.');\r\n        _problemId = (index > -1) ? _problemId.substr(0, index) : _problemId;\r\n        problem.problemId = _problemId;\r\n\r\n        return problem;\r\n    }\r\n\r\n}","import { StringInternal } from '../factories/factories';\r\nimport { Protocol } from './Protocol';\r\nimport { Observation } from './Observation';\r\nimport { ObservationType } from './ObservationType';\r\nimport { Address } from './Address';\r\nimport { Phone } from './Phone';\r\nimport { Immunization } from './Immunization';\r\nimport { FlowsheetObservation } from './FlowsheetObservation';\r\nimport { PatientContact } from './PatientContact';\r\nimport { ReferringProvider } from './ReferringProvider';\r\nimport { Insurance } from './Insurance';\r\nimport { CarePlan } from './CarePlan';\r\nimport { Location } from './Location';\r\nimport { Allergies } from './Allergies';\r\nimport { EmrMel } from './EmrMel';\r\nimport { IArrayAdditionalMethods } from '../interfaces';\r\nimport { LocationType } from '../enums';\r\nimport { AllergiesExternal, DemographicsExternal } from './external/external';\r\nimport { emptyImage } from '../consts/strings';\r\nimport { System } from './System';\r\nimport { Problems } from './Problems';\r\n\r\n// TODO: string = PATIENT.REGNOTE; REGGUARANTOR\r\nexport class Patient {\r\n\r\n    private readonly observationType: ObservationType = new ObservationType();\r\n    private _patientId: string;\r\n    private _pid: string;\r\n    private _medicalRecordId: string;\r\n    private _externalId: string;\r\n    private _printId: string;\r\n    private _ssn: string;\r\n    private _firstName: string;\r\n    private _lastName: string;\r\n    private _middleName: string;\r\n    private _labelName: string;\r\n    private _namePrefix: string;\r\n    private _nameSuffix: string;\r\n    private _sex: string;\r\n    private _race: string;\r\n    private _ethnicity: string;\r\n    private _dateOfBirth: string;\r\n    private _dateOfDeath: string;\r\n    private _maritalStatus: string;\r\n    private _language: string;\r\n    private _email: string;\r\n    private _contactBy: string;\r\n    private _contacts: string;\r\n    private _contactsArray: IArrayAdditionalMethods<PatientContact> = [];\r\n    private _employmentStatus: string;\r\n    private _clinicStatus: string;\r\n    private _primaryCarePhysicianName: string;\r\n    private _problems: Problems;\r\n    private _observations: { [name: string]: IArrayAdditionalMethods<Observation> } = {}\r\n    private _observationList: string;\r\n    private _observatiosArray: IArrayAdditionalMethods<FlowsheetObservation> = [];\r\n    private _protocols: string;\r\n    private _protocolsArray: IArrayAdditionalMethods<Protocol> = [];\r\n    private _insurances: IArrayAdditionalMethods<Insurance> = [];\r\n    private _immunizations: string;\r\n    private _immunizationsArray: IArrayAdditionalMethods<Immunization> = [];\r\n    private _carePlans: string;\r\n    private _carePlansArray: IArrayAdditionalMethods<CarePlan> = [];\r\n    private _locations: string;\r\n    private _locationsId: string;\r\n    private _locationsArray: IArrayAdditionalMethods<Location> = [];\r\n    private _allergies = new Allergies(this._mel);\r\n    private _referringProvider = new ReferringProvider(this._mel);\r\n    private _phone: Phone;\r\n    private _address: Address;\r\n    private _registrationNote: string;\r\n    private _patientPicture: string;\r\n    private _lastOfficeVisit: Date;\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _demographics?: DemographicsExternal,\r\n        public _allergiesExternal?: AllergiesExternal\r\n    ) {\r\n        if (_demographics) {\r\n            this._patientPicture = _demographics.patientPicture;\r\n            this._lastOfficeVisit = _demographics.lastOfficeVisitDate;\r\n            this._registrationNote = _demographics.registrationNote;\r\n            this._language = _demographics.preferredLanguage;\r\n            if (_demographics.identifierList) {\r\n                let patientId = _demographics.identifierList.find(e => e.identifierDomain.domainId === \"1.2.3.4.700\");\r\n                this._patientId = (patientId) ? patientId.idValue : this._patientId;\r\n                this._printId = this._patientId;\r\n\r\n                let externalId = _demographics.identifierList.find(e => e.identifierDomain.domainId === \"1.2.3.4.200\");\r\n                this._externalId = (externalId) ? externalId.idValue : this._externalId;\r\n\r\n                let medicalRecordId = _demographics.identifierList.find(e => e.identifierDomain.domainId === \"1.2.3.4.400\");\r\n                this._medicalRecordId = (medicalRecordId) ? medicalRecordId.idValue : this._medicalRecordId;\r\n            }\r\n            if (_demographics.person) {\r\n                let birthDate = System.formatDate(_demographics.person.birthDate);\r\n                this._dateOfBirth = (birthDate) ? birthDate : this._dateOfBirth;\r\n                this._dateOfDeath = (_demographics.person.deceaseIndSpecified && _demographics.person.deceaseInd) ?\r\n                    System.formatDate(_demographics.person.deceaseTime) : this._dateOfDeath;\r\n\r\n                this._sex = _demographics.person.genderCode;\r\n                if (_demographics.person.mailingAddressList && _demographics.person.mailingAddressList[0]) {\r\n                    this._address = (this._address) ? this._address : new Address(this._mel, _demographics.person.mailingAddressList[0]);\r\n                }\r\n                if (_demographics.person.electronicAddressList) {\r\n                    this._phone = (this._phone) ? this._phone : new Phone(this._mel, _demographics.person.electronicAddressList);\r\n                }\r\n                if (_demographics.person.personNameList && _demographics.person.personNameList[0]) {\r\n                    this._firstName = (_demographics.person.personNameList[0].givenName === null) ?\r\n                        '' : _demographics.person.personNameList[0].givenName;\r\n                    this._lastName = (_demographics.person.personNameList[0].familyName === null) ?\r\n                        '' : _demographics.person.personNameList[0].familyName;\r\n                    this._middleName = (_demographics.person.personNameList[0].middleName === null) ?\r\n                        '' : _demographics.person.personNameList[0].middleName;\r\n\r\n                    this._labelName = this._firstName\r\n                        + ' ' + this._middleName\r\n                        + ' ' + this._lastName;\r\n\r\n                    this._namePrefix = _demographics.person.personNameList[0].prefixName;\r\n                    this._nameSuffix = _demographics.person.personNameList[0].suffixName;\r\n                }\r\n                this._pid = _demographics.patientKeySpecified ? _demographics.patientKey.toString() : this._pid;\r\n                if (_demographics.person.identifierList) {\r\n                    let ssn = _demographics.person.identifierList.find(e => e.identifierDomain.domainId === \"1.2.3.4.300\");\r\n                    this._ssn = (ssn) ? ssn.idValue : this._ssn;\r\n                    this._ssn = (this._ssn) ? this._ssn.replace(/(\\d{3})(\\d{3})(\\d+)/, '$1-$2-$3') : this._ssn;\r\n                }\r\n            }\r\n        }\r\n\r\n        this._address = (this._address) ? this._address : new Address(this._mel);\r\n        this._phone = (this._phone) ? this._phone : new Phone(this._mel);\r\n    }\r\n\r\n    get lastOfficeVisit() {\r\n        return this._lastOfficeVisit;\r\n    }\r\n\r\n    get patientPicture() {\r\n        this._patientPicture = (this._patientPicture !== undefined) ? this._patientPicture\r\n            : emptyImage;\r\n        return this._patientPicture;\r\n    }\r\n\r\n    // Returns the patients ID number\r\n    get patientId() {\r\n        this._patientId = (this._patientId !== undefined) ? this._patientId : this._mel.melFunc('{PATIENT.PATIENTID}');\r\n        return this._patientId;\r\n    }\r\n\r\n    async patientIdAsync() {\r\n        this._patientId = (this._patientId !== undefined) ? this._patientId : await this._mel.melFunc('{PATIENT.PATIENTID}');\r\n        return this._patientId;\r\n    }\r\n\r\n    // Returns the internal PID number for patient record\r\n    get pid() {\r\n        this._pid = (this._pid !== undefined) ? this._pid : this._mel.melFunc('{find(\"patient\", \"PID\")}');\r\n        return this._pid;\r\n    }\r\n\r\n    async pidAsync() {\r\n        this._pid = (this._pid !== undefined) ? this._pid : await this._mel.melFunc('{find(\"patient\", \"PID\")}');\r\n        return this._pid;\r\n    }\r\n\r\n    // Returns the patients medical record number.\r\n    get medicalRecordId() {\r\n        this._medicalRecordId = (this._medicalRecordId !== undefined) ? this._medicalRecordId : this._mel.melFunc('{PATIENT.MEDRECNO}');\r\n        return this._medicalRecordId;\r\n    }\r\n\r\n    async medicalRecordIdAsync() {\r\n        this._medicalRecordId = (this._medicalRecordId !== undefined) ? this._medicalRecordId : await this._mel.melFunc('{PATIENT.MEDRECNO}');\r\n        return this._medicalRecordId;\r\n    }\r\n\r\n    // Returns the patients ID from an external system; such as a billing or lab system\r\n    get externalId() {\r\n        this._externalId = (this._externalId !== undefined) ? this._externalId : this._mel.melFunc('{PATIENT.EXTERNALID}');\r\n        return this._externalId;\r\n    }\r\n\r\n    async externalIdAsync() {\r\n        this._externalId = (this._externalId !== undefined) ? this._externalId : await this._mel.melFunc('{PATIENT.EXTERNALID}');\r\n        return this._externalId;\r\n    }\r\n\r\n    // Returns the preferred patient ID number for printed materials.\r\n    get printId() {\r\n        this._printId = (this._printId !== undefined) ? this._printId : this._mel.melFunc('{PATIENT.PRINTID}');\r\n        return this._printId;\r\n    }\r\n\r\n    async printIdAsync() {\r\n        this._printId = (this._printId !== undefined) ? this._printId : await this._mel.melFunc('{PATIENT.PRINTID}');\r\n        return this._printId;\r\n    }\r\n\r\n    // Returns the patients Social Security number.\r\n    get ssn() {\r\n        this._ssn = (this._ssn !== undefined) ? this._ssn : this._mel.melFunc('{PATIENT.SOCSECNO}');\r\n        return this._ssn;\r\n    }\r\n\r\n    async ssnAsync() {\r\n        this._ssn = (this._ssn !== undefined) ? this._ssn : await this._mel.melFunc('{PATIENT.SOCSECNO}');\r\n        return this._ssn;\r\n    }\r\n\r\n    // Returns the patients first name.\r\n    get firstName() {\r\n        this._firstName = (this._firstName !== undefined) ? this._firstName : this._mel.melFunc('{PATIENT.FIRSTNAME}');\r\n        return this._firstName;\r\n    }\r\n\r\n    async firstNameAsync() {\r\n        this._firstName = (this._firstName !== undefined) ? this._firstName : await this._mel.melFunc('{PATIENT.FIRSTNAME}');\r\n        return this._firstName;\r\n    }\r\n\r\n    // Returns the patients last name.\r\n    get lastName() {\r\n        this._lastName = (this._lastName !== undefined) ? this._lastName : this._mel.melFunc('{PATIENT.LASTNAME}');\r\n        return this._lastName;\r\n    }\r\n\r\n    async lastNameAsync() {\r\n        this._lastName = (this._lastName !== undefined) ? this._lastName : await this._mel.melFunc('{PATIENT.LASTNAME}');\r\n        return this._lastName;\r\n    }\r\n\r\n    // Returns the patients middle name.\r\n    get middleName() {\r\n        this._middleName = (this._middleName !== undefined) ? this._middleName : this._mel.melFunc('{PATIENT.MIDDLENAME}');\r\n        return this._middleName;\r\n    }\r\n\r\n    async middleNameAsync() {\r\n        this._middleName = (this._middleName !== undefined) ? this._middleName : await this._mel.melFunc('{PATIENT.MIDDLENAME}');\r\n        return this._middleName;\r\n    }\r\n\r\n    // Returns the patients full name formatted as follows: string = title first middle last; suffix\r\n    get labelName() {\r\n        this._labelName = (this._labelName !== undefined) ? this._labelName : this._mel.melFunc('{PATIENT.LABELNAME}');\r\n        return this._labelName;\r\n    }\r\n\r\n    async labelNameAsync() {\r\n        this._labelName = (this._labelName !== undefined) ? this._labelName : await this._mel.melFunc('{PATIENT.LABELNAME}');\r\n        return this._labelName;\r\n    }\r\n\r\n    // Name Prefix\r\n    get namePrefix() {\r\n        this._namePrefix = (this._namePrefix !== undefined) ? this._namePrefix : this._mel.melFunc('{PATIENT.TITLE}');\r\n        return this._namePrefix;\r\n    }\r\n\r\n    async namePrefixAsync() {\r\n        this._namePrefix = (this._namePrefix !== undefined) ? this._namePrefix : await this._mel.melFunc('{PATIENT.TITLE}');\r\n        return this._namePrefix;\r\n    }\r\n\r\n    // Name Suffix\r\n    get nameSuffix() {\r\n        this._nameSuffix = (this._nameSuffix !== undefined) ? this._nameSuffix : this._mel.melFunc('{PATIENT.ENTITLEMENTS}');\r\n        return this._nameSuffix;\r\n    }\r\n\r\n    async nameSuffixAsync() {\r\n        this._nameSuffix = (this._nameSuffix !== undefined) ? this._nameSuffix : await this._mel.melFunc('{PATIENT.ENTITLEMENTS}');\r\n        return this._nameSuffix;\r\n    }\r\n\r\n    // Patients sex.\r\n    get sex() {\r\n        this._sex = (this._sex  !== undefined) ? this._sex : this._mel.melFunc('{PATIENT.SEX}');\r\n        return this._sex;\r\n    }\r\n\r\n    async sexAsync() {\r\n        this._sex = (this._sex !== undefined) ? this._sex : await this._mel.melFunc('{PATIENT.SEX}');\r\n        return this._sex;\r\n    }\r\n\r\n    // Patients race\r\n    get race() {\r\n        this._race = (this._race  !== undefined) ? this._race : this._mel.melFunc('{PATIENT.RACE}');\r\n        return this._race;\r\n    }\r\n\r\n    async raceAsync() {\r\n        this._race = (this._race !== undefined) ? this._race : await this._mel.melFunc('{PATIENT.RACE}');\r\n        return this._race;\r\n    }\r\n\r\n    // Patients ethnicity\r\n    get ethnicity() {\r\n        this._ethnicity = (this._ethnicity  !== undefined) ? this._ethnicity : this._mel.melFunc('{PATIENT.ETHNICITY}');\r\n        return this._ethnicity;\r\n    }\r\n\r\n    async ethnicityAsync() {\r\n        this._ethnicity = (this._ethnicity !== undefined) ? this._ethnicity : await this._mel.melFunc('{PATIENT.ETHNICITY}');\r\n        return this._ethnicity;\r\n    }\r\n\r\n    // Returns the patients birth date/time\r\n    get dateOfBirth() {\r\n        this._dateOfBirth = (this._dateOfBirth  !== undefined) ? this._dateOfBirth : this._mel.melFunc('{PATIENT.DATEOFBIRTH}');\r\n        return this._dateOfBirth;\r\n    }\r\n\r\n    async dateOfBirthAsync() {\r\n        this._dateOfBirth = (this._dateOfBirth !== undefined) ? this._dateOfBirth : await this._mel.melFunc('{PATIENT.DATEOFBIRTH}');\r\n        return this._dateOfBirth;\r\n    }\r\n\r\n    // Returns the patients date of death\r\n    get dateOfDeath() {\r\n        this._dateOfDeath = (this._dateOfDeath  !== undefined) ? this._dateOfDeath : this._mel.melFunc('{PATIENT.DATEOFDEATH}');\r\n        return this._dateOfDeath;\r\n    }\r\n\r\n    async dateOfDeathAsync() {\r\n        this._dateOfDeath = (this._dateOfDeath !== undefined) ? this._dateOfDeath : await this._mel.melFunc('{PATIENT.DATEOFDEATH}');\r\n        return this._dateOfDeath;\r\n    }\r\n\r\n    // Returns the patients marital status (Single; Married; Divorced; Widowed; Separated; Other or Undetermined)\r\n    get maritalStatus() {\r\n        this._maritalStatus = (this._maritalStatus  !== undefined) ? this._maritalStatus : this._mel.melFunc('{PATIENT.MARITALSTATUS}');\r\n        return this._maritalStatus;\r\n    }\r\n\r\n    async maritalStatusAsync() {\r\n        this._maritalStatus = (this._maritalStatus !== undefined) ? this._maritalStatus : await this._mel.melFunc('{PATIENT.MARITALSTATUS}');\r\n        return this._maritalStatus;\r\n    }\r\n\r\n    // Returns the patients preferred language\r\n    get language() {\r\n        this._language = (this._language  !== undefined) ? this._language : this._mel.melFunc('{PATIENT.PREFLANG}');\r\n        return this._language;\r\n    }\r\n\r\n    async languageAsync() {\r\n        this._language = (this._language !== undefined) ? this._language : await this._mel.melFunc('{PATIENT.PREFLANG}');\r\n        return this._language;\r\n    }\r\n\r\n    // Returns the patients e-mail address\r\n    get email() {\r\n        this._email = (this._email  !== undefined) ? this._email : this._mel.melFunc('{PATIENT.EMAIL}');\r\n        return this._email;\r\n    }\r\n\r\n    async emailAsync() {\r\n        this._email = (this._email !== undefined) ? this._email : await this._mel.melFunc('{PATIENT.EMAIL}');\r\n        return this._email;\r\n    }\r\n\r\n    // Returns the patients contact by information\r\n    get contactBy() {\r\n        this._contactBy = (this._contactBy  !== undefined) ? this._contactBy : this._mel.melFunc('{PATIENT.CONTACTBY}');\r\n        return this._contactBy;\r\n    }\r\n\r\n    async contactByAsync() {\r\n        this._contactBy = (this._contactBy !== undefined) ? this._contactBy : await this._mel.melFunc('{PATIENT.CONTACTBY}');\r\n        return this._contactBy;\r\n    }\r\n\r\n    get registrationNote() {\r\n        this._registrationNote = (this._registrationNote  !== undefined) ? this._registrationNote : this._mel.melFunc('{PATIENT.REGNOTE}');\r\n        return this._registrationNote;\r\n    }\r\n\r\n    async registrationNoteAsync() {\r\n        this._registrationNote = (this._registrationNote !== undefined) ? this._registrationNote : await this._mel.melFunc('{PATIENT.REGNOTE}');\r\n        return this._registrationNote;\r\n    }\r\n\r\n    // Returns a list of the contacts for the current patient\r\n    get contacts() {\r\n        if (this._contactsArray.length === 0) {\r\n            this._contacts = (this._contacts  !== undefined) ? this._contacts : this._mel.melFunc('{PATIENT.CONTACTS}');\r\n            let dataArray = StringInternal(this._contacts).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._contactsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._contactsArray.push(new PatientContact(dataArray[index]));\r\n            }\r\n\r\n            this._contactsArray.tag = 'PATIENT.CONTACTS';\r\n\r\n            this._contactsArray.toMelString = () => {\r\n                return this._contacts;\r\n            }\r\n        }\r\n        return this._contactsArray;\r\n    }\r\n\r\n    async contactsAsync() {\r\n        if (this._contactsArray.length === 0) {\r\n            this._contacts = (this._contacts !== undefined) ? this._contacts : await this._mel.melFunc('{PATIENT.CONTACTS}');\r\n            let dataArray = StringInternal(this._contacts).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._contactsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._contactsArray.push(new PatientContact(dataArray[index]));\r\n            }\r\n\r\n            this._contactsArray.tag = 'PATIENT.CONTACTS';\r\n\r\n            this._contactsArray.toMelString = () => {\r\n                return this._contacts;\r\n            }\r\n        }\r\n        return this._contactsArray;\r\n    }\r\n\r\n    // Returns the patients employment status.\r\n    get employmentStatus() {\r\n        this._employmentStatus = (this._employmentStatus  !== undefined) ? this._employmentStatus : this._mel.melFunc('{PATIENT.EMPLSTATUS}');\r\n        return this._employmentStatus;\r\n    }\r\n\r\n    async employmentStatusAsync() {\r\n        this._employmentStatus = (this._employmentStatus !== undefined) ? this._employmentStatus : await this._mel.melFunc('{PATIENT.EMPLSTATUS}');\r\n        return this._employmentStatus;\r\n    }\r\n\r\n    // Patients current status in the clinic\r\n    get clinicStatus() {\r\n        this._clinicStatus = (this._clinicStatus  !== undefined) ? this._clinicStatus : this._mel.melFunc('{PATIENT.PSTATUS}');\r\n        return this._clinicStatus;\r\n    }\r\n\r\n    async clinicStatusAsync() {\r\n        this._clinicStatus = (this._clinicStatus !== undefined) ? this._clinicStatus : await this._mel.melFunc('{PATIENT.PSTATUS}');\r\n        return this._clinicStatus;\r\n    }\r\n\r\n    // Name of the primary care physician\r\n    get primaryCarePhysicianName() {\r\n        this._primaryCarePhysicianName = (this._primaryCarePhysicianName !== undefined) ?\r\n            this._primaryCarePhysicianName : this._mel.melFunc('{PATIENT.PCP}');\r\n        return this._primaryCarePhysicianName;\r\n    }\r\n\r\n    async primaryCarePhysicianNameAsync() {\r\n        this._primaryCarePhysicianName = (this._primaryCarePhysicianName !== undefined) ?\r\n            this._primaryCarePhysicianName : await this._mel.melFunc('{PATIENT.PCP}');\r\n        return this._primaryCarePhysicianName;\r\n    }\r\n\r\n    // Lists all problems \r\n    get problems() {\r\n        if (!this._problems) {\r\n            this._problems = new Problems();\r\n            this._problems.load(this._mel);\r\n        }\r\n    \r\n        this._problems.tag = 'PROB_AFTER';\r\n\r\n        return this._problems;\r\n    }\r\n\r\n    async problemsAsync() {\r\n        if (!this._problems) {\r\n            this._problems = new Problems();\r\n            await this._problems.loadAsync(this._mel);\r\n        }\r\n        return this._problems;\r\n    }\r\n\r\n    // Lists observations by name. \r\n    observations = (name: string) => {\r\n        if (this._observations[name] == null) {\r\n            let updateData = this._mel.melFunc('{LIST_OBS(\"' + name + '\",\"Update\",\"Delimited\",\"value\")}');\r\n            let dataArray = StringInternal(updateData).toList();\r\n            let observationsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                observationsArray.push(new Observation(name, this.observationType.DocumentUnsigned, dataArray[index], this._mel));\r\n            }\r\n            this._observations[name] = observationsArray;\r\n\r\n            let signedData = this._mel.melFunc('{LIST_OBS(\"' + name + '\",\"Signed\",\"Delimited\",\"value\")}');\r\n            let dataArrayU = StringInternal(signedData).toList();\r\n            for (let index = 0; index < dataArrayU.length; index++) {\r\n                this._observations[name].push(new Observation(name, this.observationType.Signed, dataArrayU[index], this._mel));\r\n            }\r\n\r\n            this._observations[name].tag = 'LIST_OBS.' + name;\r\n        }\r\n        return this._observations[name];\r\n    }\r\n\r\n    // Lists all FLOWSHEET observations. \r\n    flowsheetObservations(flowsheet?: string) {\r\n        let flowsheetValue = '';\r\n        if (flowsheet) {\r\n            flowsheetValue = flowsheet;\r\n        }\r\n        else {\r\n            flowsheetValue = this._mel.melFunc('{_EncodeViewNameBS}');\r\n        }\r\n        if (this._observatiosArray.length === 0 || this._observatiosArray.tag != 'GET_FLOWSHEET_VALUES:' + flowsheetValue) {\r\n            this._observationList = this._mel.melFunc('{GET_FLOWSHEET_VALUES(\"' + flowsheetValue + '\",\"DELIM\")}');\r\n            let dataArray = StringInternal(this._observationList).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._observatiosArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._observatiosArray.push(new FlowsheetObservation(dataArray[index]));\r\n            }\r\n\r\n            this._observatiosArray.tag = 'GET_FLOWSHEET_VALUES:' + flowsheetValue;\r\n\r\n            this._observatiosArray.toMelString = () => {\r\n                return this._observationList;\r\n            }\r\n        }\r\n        return this._observatiosArray;\r\n    }\r\n\r\n    // Protocols tell you when a patient is due for a particular action; based on factors that include sex; age; current problems; and current medications. \r\n    // The protocols contains array of observations required for this patient; as indicated by protocols set up in this clinic.\r\n    get protocols() {\r\n        if (this._protocolsArray.length === 0) {\r\n            this._protocols = (this._protocols  !== undefined) ? this._protocols : this._mel.melFunc('{LISTPROTOCOLSHORT(\"list\")}');\r\n            let dataArray = StringInternal(this._protocols).toList('\\r\\n');\r\n\r\n            /*jslint plusplus: true */\r\n            this._protocolsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._protocolsArray.push(new Protocol(dataArray[index]))\r\n            }\r\n\r\n            this._protocolsArray.tag = 'LISTPROTOCOLSHORT(\"list\")';\r\n\r\n            this._protocolsArray.toMelString = () => {\r\n                return this._protocols;\r\n            }\r\n        }\r\n        return this._protocolsArray;\r\n    }\r\n   \r\n    // List of patient insurances \r\n    get insurances() {\r\n        if (this._insurances.length === 0) {\r\n            this._insurances.push(new Insurance('P', this._mel));\r\n            this._insurances.push(new Insurance('S', this._mel));\r\n            this._insurances.push(new Insurance('T', this._mel));\r\n        }\r\n        return this._insurances;\r\n    }\r\n\r\n    // List of patient immunizations \r\n    get immunizations() {\r\n        if (this._immunizationsArray.length === 0) {\r\n            this._immunizations = (this._immunizations  !== undefined) ? this._immunizations : this._mel.melFunc('{IMMUN_GETLIST()}');\r\n            let dataArray = StringInternal(this._immunizations).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._immunizationsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._immunizationsArray.push(new Immunization(dataArray[index], this._mel));\r\n            }\r\n\r\n            this._immunizationsArray.tag = 'IMMUN_GETLIST';\r\n\r\n            this._immunizationsArray.toMelString = () => {\r\n                return this._immunizations;\r\n            }\r\n        }\r\n        return this._immunizationsArray;\r\n    }\r\n\r\n    get carePlans() {\r\n        if (this._carePlansArray.length === 0) {\r\n            this._carePlans = (this._carePlans  !== undefined) ? this._carePlans : this._mel.melFunc('{MEL_LIST_CARE_PLAN(\"delim\",\"all\",\"all\")}');\r\n            let dataArray = StringInternal(this._carePlans).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._carePlansArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._carePlansArray.push(new CarePlan(dataArray[index], this._mel));\r\n            }\r\n\r\n            this._carePlansArray.tag = 'MEL_LIST_CARE_PLAN';\r\n\r\n            this._carePlansArray.toMelString = () => {\r\n                return this._carePlans;\r\n            }\r\n        }\r\n        return this._carePlansArray;\r\n    }\r\n\r\n    async carePlansAsync() {\r\n        if (this._carePlansArray.length === 0) {\r\n            this._carePlans = (this._carePlans !== undefined) ? this._carePlans : await this._mel.melFunc('{MEL_LIST_CARE_PLAN(\"delim\",\"all\",\"all\")}');\r\n            let dataArray = StringInternal(this._carePlans).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._carePlansArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._carePlansArray.push(new CarePlan(dataArray[index], this._mel));\r\n            }\r\n\r\n            this._carePlansArray.tag = 'MEL_LIST_CARE_PLAN';\r\n\r\n            this._carePlansArray.toMelString = () => {\r\n                return this._carePlans;\r\n            }\r\n        }\r\n        return this._carePlansArray;\r\n    }\r\n\r\n    get locations() {\r\n        if (this._locationsArray.length === 0) {\r\n            this._locations = (this._locations  !== undefined) ? this._locations : this._mel.melFunc('{PATIENT.HOMELOCATIONNAME}');\r\n            this._locationsId = (this._locationsId  !== undefined) ? this._locationsId : this._mel.melFunc('{PATIENT.HOMELOCATIONABBREVNAME}');\r\n            let locationProperty = new Location(this._locationsId, this._locations, LocationType.Home);\r\n            this._locationsArray.push(locationProperty);\r\n            this._locationsArray.findByType =\r\n                (function (value) {\r\n                    let index;\r\n                    if (typeof (value) === \"number\") {\r\n                        for (index = 0; index < this.length; index++) {\r\n                            if (this[index].locationType === value) {\r\n                                return this[index];\r\n                            }\r\n                        }\r\n                    }\r\n                    return undefined;\r\n                });\r\n        }\r\n        return this._locationsArray;\r\n    }\r\n\r\n    get allergies(): Allergies {\r\n        return this._allergies;\r\n    }\r\n\r\n    // referring provider\r\n    get referringProvider() {\r\n        return this._referringProvider;\r\n    }\r\n\r\n    get phone() {\r\n        return this._phone;\r\n    }\r\n\r\n    // Represent patient address object\r\n    get address() {\r\n        return this._address;\r\n    }\r\n\r\n\r\n    // TODO: aren't exist:\r\n\r\n    // List of all orders\r\n    orders: Object;\r\n    // List of all directives\r\n    directives: Object;\r\n    // Lists appointments\r\n    appointments: Object;\r\n    // List all medications and refills\r\n    medications: Object;\r\n}","import { User } from './User';\r\nimport { EmrMel } from './EmrMel';\r\nimport { StringInternal, GetCurrentUser } from '../factories/factories';\r\nimport { UserCallFunction } from '../enums';\r\nimport { IArrayAdditionalMethods } from '../interfaces';\r\n\r\nexport class Users {\r\n\r\n    private _currentUser: User;\r\n    private _user: User;\r\n    private _users: string;\r\n    private _usersArray: IArrayAdditionalMethods<User> = [];\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    getUser = (value?: string) => {\r\n        if (value != null) {\r\n            this._user = (this._user != null) ? this._user : new User(this._mel.melFunc('{GETUSERINFO(\"' + value + '\")}'), UserCallFunction.UserInfo);\r\n            return this._user;\r\n        }\r\n        this._currentUser = (this._currentUser != null) ? this._currentUser : new User(GetCurrentUser(this._mel), UserCallFunction.UserInfo);\r\n        return this._currentUser;\r\n    }\r\n\r\n    getUsers = () => {\r\n        if (this._usersArray.length === 0) {\r\n            this._users = this._mel.melFunc('{GET_USER_LIST(USER.CURLOCATIONABBREVNAME, \"\", \"delimited\", true)}');\r\n            let dataArray = StringInternal(this._users).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._usersArray.push(new User(dataArray[index], UserCallFunction.UserList));\r\n            }\r\n\r\n            this._usersArray.tag = 'GET_USER_LIST';\r\n\r\n            this._usersArray.toMelString = () => {\r\n                return this._users;\r\n            }\r\n        }\r\n        return this._usersArray;\r\n    }\r\n}","import { EmrMel } from '../classes/EmrMel';\r\n\r\nexport function GetCurrentUser(_mel: EmrMel) {\r\n    return _mel.melFunc('{GETUSERINFO(\"' + _mel.melFunc('{USER.LOGINNAME}') + '\")}') + '^' +\r\n        _mel.melFunc('{USER.CURLOCATIONNAME}') + '^' +\r\n        _mel.melFunc('{USER.FIRSTNAME}') + '^' +\r\n        _mel.melFunc('{USER.MIDDLENAME}') + '^' +\r\n        _mel.melFunc('{USER.LASTNAME}');\r\n}","/// <reference types=\"chrome\"/>\r\n\r\nimport { simulatorChromeExtensionId } from \"../consts/strings\";\r\n\r\nexport class ExtensionExternalSimulator {\r\n\r\n    EvaluateMel = (data: any, _showWait: boolean = false): Promise<any> => {\r\n        return this.sendMessage(simulatorChromeExtensionId, { type: 'EvaluateMel', data: data });\r\n    }\r\n\r\n    get Demographics(): Promise<any> {\r\n        return this.sendMessage(simulatorChromeExtensionId, { type: 'Demographics' });\r\n    }\r\n\r\n    get Allergies(): Promise<any> {\r\n        return this.sendMessage(simulatorChromeExtensionId, { type: 'Allergies' });\r\n    }\r\n\r\n    private sendMessage = (editorExtensionId: string, data: any) => new Promise<any>((resolve, reject) => {\r\n        if (typeof (chrome) !== 'undefined') {\r\n            if (typeof (chrome.runtime) !== 'undefined') {\r\n                chrome.runtime.sendMessage(editorExtensionId, data, (response: any) => {\r\n                    if (typeof (response) !== 'undefined') {\r\n                        resolve(response);\r\n                    }\r\n                    else {\r\n                        resolve(null);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                reject('unsupported');\r\n            }\r\n        }\r\n        else {\r\n            reject('unsupported');\r\n        }\r\n    });\r\n}","/// <reference types=\"chrome\"/>\r\nimport { simulatorChromeExtensionId } from \"../consts/strings\";\r\nimport { GetActiveXErrorMessage } from \"../factories/factories\";\r\nimport { IsActiveXSupported } from \"../factories/IsActiveXSupported\";\r\nimport { ExtensionExternalSimulator } from \"./ExtensionExternalSimulator\";\r\n\r\nexport class Simulator {\r\n    private readonly appObjectNameSimulator = 'GE.CPO.EMR.90.Application.SIMULATOR';\r\n    private readonly noData: string = 'Data Access Error';\r\n    private _isExtensionEvaluated: boolean = false; // holds validation for async call to the Chrome Extension\r\n    private _isActiveX: boolean = false;            // true for activeX simulator\r\n    private app: any;\r\n    private _isSimulator: boolean = false;\r\n\r\n    private _ExtensionExternalSimulator: ExtensionExternalSimulator = new ExtensionExternalSimulator();\r\n\r\n    public isSimulatorAsync = async (): Promise<boolean> => {\r\n        if (this._isSimulator) {\r\n            return this._isSimulator;\r\n        }\r\n        else {\r\n            if (!this._isExtensionEvaluated) {\r\n                this._isSimulator = await this.sendMessage(simulatorChromeExtensionId, { type: \"version\" });\r\n                this._isExtensionEvaluated = true;\r\n            }\r\n            return this._isSimulator;\r\n        }\r\n    }\r\n\r\n    constructor(public _window: any) {\r\n        this.initialization();\r\n    }\r\n\r\n    private initialization = (): void => {\r\n        if (IsActiveXSupported(this._window)) {\r\n            try {\r\n                this.app = new this._window.ActiveXObject(this.appObjectNameSimulator);\r\n                this._isActiveX = true;\r\n                this._isSimulator = true;\r\n                console.info('mdObject is using ActiveX Simulator: ' + this.appObjectNameSimulator);\r\n            } catch (e) {\r\n                let errorMessage = GetActiveXErrorMessage(this.appObjectNameSimulator, e);\r\n                console.info(errorMessage);\r\n            }\r\n        }\r\n    }\r\n\r\n    get externalSimulator(): any {\r\n        return ((!this._isActiveX) ? this._ExtensionExternalSimulator : (this.app) ? this.app.external : this.noData);\r\n    }\r\n\r\n    private sendMessage = (editorExtensionId: string, data: any) => new Promise<boolean>((resolve, _reject) => {\r\n        if (typeof (chrome) !== 'undefined') {\r\n            if (typeof (chrome.runtime) !== 'undefined') {\r\n                chrome.runtime.sendMessage(editorExtensionId, data, (response: any) => {\r\n                    if (response) {\r\n                        console.info('mdObject is using Chrome Extension Simulator: ' + simulatorChromeExtensionId);\r\n                        resolve(true);\r\n                    }\r\n                    else {\r\n                        console.info('mdObject: Chrome Extension Simulator is missing or inactive');\r\n                        resolve(false);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                resolve(false);\r\n            }\r\n        }\r\n        else {\r\n            resolve(false);\r\n        }\r\n    });\r\n}","import { Location } from './Location';\r\nimport { EmrMel } from './EmrMel';\r\nimport { LocationType } from '../enums';\r\nimport { DocumentVariable } from '../factories/factories';\r\nimport { IArrayAdditionalMethods, IItem } from '../interfaces';\r\nimport { Emr } from './Emr';\r\n\r\nexport class ClinicalDocument {\r\n\r\n    private _letiables: string;\r\n    private _did: string;\r\n    private _xid: string;\r\n    private _documentId: string;\r\n    private _status: string;\r\n    private _location: string;\r\n    private _locationPropertyArray: IArrayAdditionalMethods<Location> = [];\r\n    private _locationProperty: Location;\r\n    private _dateOfUpdate: string;\r\n    private _provider: string;\r\n    private _userLoginName: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _emr?: Emr\r\n    ) { }\r\n\r\n    private save = (): void => {\r\n        this._mel.melFunc('{DOCUMENT.mdObject_letiables = \"' + JSON.stringify(this.rawValue).replace(/\"/g, '\\\\\"') + '\"}');\r\n    }\r\n\r\n    private rawValue: IItem = DocumentVariable({}, this.save);\r\n\r\n    // The letiables allows to save any JSON object with the clinicalDocument.\r\n    // Usage: $mdObject.clinicalDocument.letiables = {\"alex\":1} - creates object with letiable alex and assigned value 1.\r\n    //        $mdObject.clinicalDocument.letiables[\"alex\"]=4;  -changes value of alex to 4\r\n    //        $mdObject.clinicalDocument.letiables.save(); - saves the object with the document\r\n    get letiables() {\r\n        if (this._letiables == null) {\r\n            this._letiables = (this._letiables != null) ? this._letiables : this._mel.melFunc('{DOCUMENT.mdObject_letiables}');\r\n            this._letiables = (this._letiables !== '') ? this._letiables : JSON.stringify(this.rawValue);\r\n            try {\r\n                this.rawValue = DocumentVariable(JSON.parse(this._letiables), this.save);\r\n            } catch (e) {\r\n                this.rawValue = {}\r\n            }\r\n        }\r\n        return this.rawValue;\r\n    }\r\n\r\n    set letiables(val: IItem) {\r\n        for (let key in val) {\r\n            this.rawValue[key] = val[key];\r\n        }\r\n        this._mel.melFunc('{DOCUMENT.mdObject_letiables = \"' + JSON.stringify(this.rawValue).replace(/\"/g, '\\\\\"') + '\"}');\r\n    }\r\n\r\n    // The val allows to get or set DOCUMENT letiable\r\n    // Usage: $mdObject.clinicalDocument.val(\"MyVariable\") return value from {DOCUMENT.MyVariable}.\r\n    //        $mdObject.clinicalDocument.val(\"MyVariable\", \"High\") - assign value \"High\" to {DOCUMENT.MyVariable} and stores it with document (saves in database)\r\n    val = (key: string, value?: string): string => {\r\n        if (key == null || key.length === 0) {\r\n            return undefined;\r\n        }\r\n\r\n        if (value == null) {\r\n            return this._mel.melFunc('{DOCUMENT.' + key + '}');\r\n        } else {\r\n            return this._mel.melFunc('{DOCUMENT.' + key + '=\"' + value + '\"}');\r\n        }\r\n    }\r\n\r\n    get did() {\r\n        this._did = (this._did != null) ? this._did : this._mel.melFunc('{find(\"DOCUMENT\",\"DID\")}');\r\n        return this._did;\r\n    }\r\n\r\n    async didAsync(): Promise<string> {\r\n        this._did = (this._did != null) ? this._did : await this._emr.melFuncAsync('{find(\"DOCUMENT\",\"DID\")}');\r\n        return this._did;\r\n    }\r\n\r\n    get xid() {\r\n        this._xid = (this._xid != null) ? this._xid : this._mel.melFunc('{DOCUMENT.XID}').split('.')[0];\r\n        return this._xid;\r\n    }\r\n\r\n    // The unique document identifier for a document within a patient chart. You can see the Doc ID on each \r\n    // document and on a chart update. Each document in the patients chart has a Doc ID.\r\n    get documentId() {\r\n        this._documentId = (this._documentId != null) ? this._documentId : this._mel.melFunc('{DOCUMENT.VISDOCID}');\r\n        return this._documentId;\r\n    }\r\n\r\n\r\n    // Status of the current document. TODO: Convert to enum\r\n    // Code for document status:\r\n    //        A = Active\r\n    //        H = Hold\r\n    //        S = Signed\r\n    get status() {\r\n        this._status = (this._status != null) ? this._status : this._mel.melFunc('{DOCUMENT.STATUS}');\r\n        return this._status;\r\n    }\r\n\r\n    // The location of care of the document for the current chart update.\r\n    get location() {\r\n        if (this._locationPropertyArray.length === 0) {\r\n            this._location = (this._location != null) ? this._location : this._mel.melFunc('{DOCUMENT.LOCOFCARENAME}');\r\n            this._locationProperty = (this._locationProperty != null) ? this._locationProperty : new Location(this._location, this._location, LocationType.Current);\r\n            this._locationPropertyArray.push(this._locationProperty);\r\n            this._locationPropertyArray.findByType =\r\n                (function (value) {\r\n                    let i;\r\n                    if (typeof (value) === \"number\") {\r\n                        for (i = 0; i < this.length; i++) {\r\n                            if (this[i].locationType === value) {\r\n                                return this[i];\r\n                            }\r\n                        }\r\n                    }\r\n                    return undefined;\r\n\r\n                });\r\n        }\r\n\r\n        return this._locationPropertyArray;\r\n    }\r\n\r\n    get dateOfUpdate() {\r\n        this._dateOfUpdate = (this._dateOfUpdate != null) ? this._dateOfUpdate : this._mel.melFunc('{DOCUMENT.CLINICALDATE}');\r\n        return this._dateOfUpdate;\r\n    }\r\n\r\n    get provider() {\r\n        this._provider = (this._provider != null) ? this._provider : this._mel.melFunc('{DOCUMENT.PROVIDER}');\r\n        return this._provider;\r\n    }\r\n\r\n    get userLoginName() {\r\n        this._userLoginName = (this._userLoginName != null) ? this._userLoginName : this._mel.melFunc('{DOCUMENT.USERLOGINNAME}');\r\n        return this._userLoginName;\r\n    }\r\n}","import { ArrayAsync } from \"../interfaces/ArrayAsync\"\r\nimport { EmrContent } from \"./EmrContent\"\r\nimport { EmrMel } from './EmrMel';\r\nimport { StringInternal } from '../factories/factories';\r\n\r\nexport class EmrContents extends ArrayAsync<EmrContent> {\r\n    private _isLoaded = false;\r\n    melData: string;\r\n    tag: string;\r\n    _name: string;\r\n    \r\n    async loadAsync(name: string, mel: EmrMel) {\r\n        if (!this._isLoaded || this._name !== name) {\r\n            this._name = name;\r\n            this.tag = 'MEL_GET_CONTENT';\r\n            this.melData = await mel.melFunc('{MEL_GET_CONTENT(\\\"' + name + '\\\",\\\"MATCH\\\")}');\r\n\r\n            this.loadMelDataToList(this.melData, mel);\r\n\r\n            this._isLoaded = true;\r\n        }\r\n    }\r\n\r\n    private loadMelDataToList = (data: string, mel: EmrMel) => {\r\n        let dataArray = StringInternal(data).toList();\r\n        for (let index = 0; index < dataArray.length; index++) {\r\n            this.push(new EmrContent(dataArray[index], mel));\r\n        }\r\n    }\r\n}","import { EmrApp } from './EmrApp';\r\nimport { EmrMel } from './EmrMel';\r\nimport { EmrWindow } from './EmrWindow';\r\nimport { EmrContent } from './EmrContent';\r\nimport { IArrayAdditionalMethods } from '../interfaces';\r\nimport { StringInternal } from '../factories/factories';\r\nimport { DemographicsExternal, ProblemExternal } from './external/external';\r\nimport { Patient } from './Patient';\r\nimport { Users } from './Users';\r\nimport { Simulator } from '../simulator/simulator';\r\nimport { ClinicalDocument } from './ClinicalDocument';\r\nimport { LocationType, UserCallFunction } from '../enums'\r\nimport { ObsTermsMap } from './ObsTermsMap';\r\nimport { AllergiesExternal } from './external/AllergiesExternal';\r\nimport { EmrContents } from './EmrContents';\r\n\r\nexport class Emr {\r\n\r\n    private _emrMel: EmrMel;\r\n    private _emrApp: EmrApp;\r\n    private _melContent: { [name: string]: IArrayAdditionalMethods<EmrContent> } = {}\r\n    private _emrWindow: EmrWindow;\r\n    private _version: string;\r\n    private _external: any;\r\n    private _baseServicesUrl: string;\r\n    private _demographics: string;\r\n    private _allergiesJson: string;\r\n    private _problemsJson: string;\r\n    private _problemExternalList: ProblemExternal[] = [];\r\n    private _simulator: Simulator;\r\n    private _clinicalDocument: ClinicalDocument;\r\n    private _obsTermsMap: ObsTermsMap;\r\n\r\n    private _patient: Patient;\r\n    private _users: Users;\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _document: any\r\n    ) {\r\n        this._simulator = new Simulator(this._window); // should be the first here\r\n\r\n        this._window['_melOpener'] = this.emrMel;\r\n        this._window['_appOpener'] = this.emrApp;\r\n        this._obsTermsMap = new ObsTermsMap();\r\n        this._emrWindow = new EmrWindow(this.emrMel, this.emrApp, this._window, this._document);\r\n    }\r\n\r\n    get enterpriseId() {\r\n        return this.emrApp.enterpriseId;\r\n    }\r\n\r\n    get external(): any {\r\n        if (this._external) {\r\n            return this._external;\r\n        }\r\n\r\n        this._external = (this._window.opener && this._window.opener.external)\r\n            ? this._window.opener.external : this._window.external;\r\n        if (this._external.IsDebugMode === undefined) {\r\n            // try simulator\r\n            this._external = this._simulator.externalSimulator;\r\n        }\r\n\r\n        return this._external;\r\n    }\r\n\r\n    externalAsync = async (): Promise<any> => {\r\n\r\n        if (this._external) {\r\n            return this._external;\r\n        }\r\n\r\n        this._external = (await this._simulator.isSimulatorAsync())\r\n            ? this._simulator.externalSimulator   // if the simulator is set, then use simulator\r\n                : (this._window.opener && this._window.opener.external) ? this._window.opener.external\r\n                    : this._window.external;\r\n        return this._external;\r\n    }\r\n\r\n    get databaseVersion():string {\r\n        return this.emrApp.databaseVersion;\r\n    }\r\n\r\n    get version():string {\r\n        this._version = (this._version != null) ? this._version : this.emrMel.melFunc('{VER_EMR()}');\r\n        return this._version;\r\n    }\r\n\r\n    // this is emrWindow as modal's window\r\n    get emrWindow() {\r\n        return this._emrWindow;\r\n    }\r\n\r\n    async emrContentsAsync(name: string):Promise<EmrContents> {\r\n        let content = new EmrContents();\r\n        await content.loadAsync(name, this.emrMel);\r\n        return content;\r\n    }\r\n\r\n    melContent = (name: string) => {\r\n        if (this._melContent[name] == null) {\r\n            let data = this.emrMel.melFunc('{MEL_GET_CONTENT(\\\"' + name + '\\\",\\\"MATCH\\\")}');\r\n            let dataArray = StringInternal(data).toList();\r\n            let melContentArray: IArrayAdditionalMethods<EmrContent> = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                melContentArray.push(new EmrContent(dataArray[index], this.emrMel));\r\n            }\r\n            this._melContent[name] = melContentArray;\r\n\r\n            this._melContent[name].tag = function () {\r\n                return 'MEL_GET_CONTENT';\r\n            }();\r\n\r\n            this._melContent[name].toMelString = () => {\r\n                return data;\r\n            }\r\n        }\r\n        return this._melContent[name];\r\n    }\r\n\r\n    get emrMel(): EmrMel {\r\n        this._emrMel = (this._window.opener != null && this._window.opener['_melOpener'] != undefined) ? this._window.opener['_melOpener']\r\n            : (this._emrMel != null) ? this._emrMel\r\n                : new EmrMel(this._window, this._simulator);\r\n        return this._emrMel;\r\n    }\r\n\r\n    get emrApp(): EmrApp {\r\n        this._emrApp = (this._window.opener != null && this._window.opener['_appOpener'] != undefined) ? this._window.opener['_appOpener']\r\n            : (this._emrApp != null) ? this._emrApp\r\n                : new EmrApp(this._window, this._simulator);\r\n        return this._emrApp;\r\n    }\r\n\r\n\r\n    get baseServicesUrl(): string \r\n    {\r\n        this._baseServicesUrl = (this._baseServicesUrl) ? this._baseServicesUrl\r\n            : ((this.external) ? this.external.BaseServicesUrl : this._baseServicesUrl);\r\n\r\n        return this._baseServicesUrl;\r\n    }\r\n\r\n    get demographics(): DemographicsExternal {\r\n        this._demographics = (this._demographics) ? this._demographics\r\n            : ((this.external) ? this.external.Demographics : this._demographics);\r\n\r\n        return new DemographicsExternal(this._demographics);\r\n    }\r\n\r\n    demographicsAsync = async (): Promise<DemographicsExternal> => {\r\n        this._demographics = (this._demographics) ? this._demographics\r\n            : ((await this.externalAsync()) ? await this.externalAsync().then(e=> e.Demographics) : this._demographics);\r\n\r\n        return new DemographicsExternal(this._demographics);\r\n    }\r\n\r\n    public get allergies(): AllergiesExternal {\r\n        this._allergiesJson = (this._allergiesJson) ? this._allergiesJson\r\n            : ((this.external) ? this.external.Allergies : this._allergiesJson);\r\n\r\n        return new AllergiesExternal(this._allergiesJson);\r\n    }\r\n\r\n    allergiesAsync = async (): Promise<AllergiesExternal> => {\r\n        this._allergiesJson = (this._allergiesJson) ? this._allergiesJson\r\n            : ((await this.externalAsync()) ? await this.externalAsync().then(e => e.Allergies) : this._allergiesJson);\r\n\r\n        return new AllergiesExternal(this._allergiesJson);\r\n    }\r\n\r\n    allergiesJson = (): string => {\r\n        this._allergiesJson = (this._allergiesJson) ? this._allergiesJson\r\n            : ((this.external) ? this.external.Allergies : this._allergiesJson);\r\n        return this._allergiesJson;\r\n    }\r\n\r\n    public get problems(): ProblemExternal[] {\r\n        if (this._problemExternalList.length === 0) {\r\n\r\n            let problemsJson = this.problemsJson();\r\n\r\n            if (problemsJson) {\r\n                let dataArray = JSON.parse(problemsJson) as [];\r\n                for (let index = 0; index < dataArray.length; index++) {\r\n                    this._problemExternalList.push(ProblemExternal.fromExternal(dataArray[index]));\r\n                }\r\n            }\r\n        }\r\n        return this._problemExternalList;\r\n    }\r\n\r\n    problemsJson = (): string => {\r\n        this._problemsJson = (this._problemsJson) ? this._problemsJson\r\n            : ((this.external) ? this.external.Problems : this._problemsJson);\r\n        return this._problemsJson;\r\n    }\r\n\r\n    get patient(): Patient {\r\n        if (this._patient === undefined) {\r\n            this._patient = new Patient(this.emrMel, this.demographics, this.allergies);\r\n        }\r\n        return this._patient;\r\n    }\r\n\r\n    patientAsync = async (): Promise<Patient> => {\r\n        if (this._patient === undefined) {\r\n            this._patient = new Patient(this.emrMel, await this.demographicsAsync(), await this.allergiesAsync());\r\n        }\r\n        return this._patient;\r\n    }\r\n\r\n    get users(): Users {\r\n        if (this._users === undefined) {\r\n            this._users = new Users(this.emrMel);\r\n        }\r\n        return this._users;\r\n    }\r\n\r\n    get clinicalDocument(): ClinicalDocument {\r\n        if (this._clinicalDocument === undefined) {\r\n            this._clinicalDocument = new ClinicalDocument(this.emrMel, this);\r\n        }\r\n        return this._clinicalDocument;\r\n    }\r\n\r\n    clinicalDocumentAsync = async (): Promise<ClinicalDocument> => {\r\n        if (this._clinicalDocument === undefined) {\r\n            this._clinicalDocument = new ClinicalDocument(this.emrMel, await this);\r\n        }\r\n        return this._clinicalDocument;\r\n    }\r\n\r\n    get obsTermsMap(): ObsTermsMap {\r\n        return this._obsTermsMap;\r\n    }\r\n\r\n    get LocationType() {\r\n        return LocationType;\r\n    }\r\n\r\n    get UserCallFunction() {\r\n        return UserCallFunction;\r\n    }\r\n\r\n    // Implements MEL eval \r\n    melFuncAsync = async (data: string, showWait: boolean = false): Promise<string> => {\r\n        return await this.externalAsync().then(e => e.EvaluateMel(data, showWait));\r\n    }\r\n}","export { HumanName } from './HumanName';\r\nexport { Address } from './Address';\r\nexport { Attachment } from \"./Attachment\";\r\nexport { Person } from \"./Person\";\r\nexport { Patient } from \"./Patient\";\r\n\r\nexport class Fhir {\r\n\r\n}","/*\r\n * Comply with https://www.hl7.org/fhir/person.html\r\n * The full fhir support expected in version 3 and above\r\n */\r\n\r\nimport { HumanName } from \"./HumanName\";\r\nimport { Address } from \"./Address\";\r\nimport { Attachment } from \"./Attachment\";\r\n\r\nexport class Person {\r\n    get resourceType(): string { return \"Person\" };\r\n    // from Resource: id, meta, implicitRules, and language\r\n    // from DomainResource: text, contained, extension, and modifierExtension\r\n//    \"identifier\": [{ Identifier }], // A human identifier for this person\r\n    name: HumanName[]; // A name associated with the person\r\n//    \"telecom\": [{ ContactPoint }], // A contact detail for the person\r\n//    \"gender\": \"<code>\", // male | female | other | unknown\r\n    birthDate: Date; // The date on which the person was born\r\n    address: Address[]; // One or more addresses for the person\r\n    photo: Attachment; // Image of the person\r\n//    \"managingOrganization\": { Reference(Organization) }, // The organization that is the custodian of the person record\r\n    active: boolean; // This person's record is in active use\r\n    //\"link\": [{ // Link to a resource that concerns the same actual person\r\n    //    \"target\": { Reference(Patient|Practitioner|RelatedPerson|Person) }, // R!  The resource to which this actual person is associated\r\n    //    \"assurance\": \"<code>\" // level1 | level2 | level3 | level4\r\n    //}]\r\n}","/*\r\n * Comply with https://www.hl7.org/fhir/patient.html\r\n * The full fhir support expected in version 3 and above\r\n */\r\nimport { HumanName } from \"./HumanName\";\r\nimport { Address } from \"./Address\";\r\nimport { Attachment } from \"./Attachment\";\r\nimport { AdministrativeGenderCode } from \"./codes/AdministrativeGenderCode\";\r\nimport { ContactPoint } from \"./ContactPoint\";\r\n\r\nexport class Patient {\r\n    get resourceType():string { return \"Patient\" };\r\n    // from Resource: id, meta, implicitRules, and language\r\n    // from DomainResource: text, contained, extension, and modifierExtension\r\n//    \"identifier\": [{ Identifier }], // An identifier for this patient\r\n    active: boolean; // Whether this patient's record is in active use\r\n    name: HumanName[]; // A name associated with the patient\r\n    telecom: ContactPoint[]; // A contact detail for the individual\r\n    gender: AdministrativeGenderCode; // male | female | other | unknown\r\n    birthDate: Date; // The date of birth for the individual\r\n    // deceased[x]: Indicates if the individual is deceased or not. One of these 2:\r\n    deceasedBoolean: boolean;\r\n    deceasedDateTime: Date;\r\n    address: Address[]; // An address for the individual\r\n//    \"maritalStatus\": { CodeableConcept }, // Marital (civil) status of a patient\r\n    // multipleBirth[x]: Whether patient is part of a multiple birth. One of these 2:\r\n    multipleBirthBoolean: boolean;\r\n    multipleBirthInteger: number;\r\n    photo: Attachment[]; // Image of the patient\r\n    //\"contact\": [{ // A contact party (e.g. guardian, partner, friend) for the patient\r\n    //    \"relationship\": [{ CodeableConcept }], // The kind of relationship\r\n    //    \"name\": { HumanName }, // A name associated with the contact person\r\n    //    \"telecom\": [{ ContactPoint }], // A contact detail for the person\r\n    //    \"address\": { Address }, // Address for the contact person\r\n    //    \"gender\": \"<code>\", // male | female | other | unknown\r\n    //    \"organization\": { Reference(Organization) }, // C? Organization that is associated with the contact\r\n    //    \"period\": { Period } // The period during which this contact person or organization is valid to be contacted relating to this patient\r\n    //}],\r\n  //  \"communication\": [{ // A language which may be used to communicate with the patient about his or her health\r\n  //      \"language\": { CodeableConcept }, // R!  The language which can be used to communicate with the patient about his or her health\r\n  //      \"preferred\": <boolean> // Language preference indicator\r\n  //}],\r\n    //\"generalPractitioner\": [{\r\n    //    Reference(Organization|Practitioner|\r\n    //        PractitionerRole)\r\n    //}], // Patient's nominated primary care provider\r\n//    \"managingOrganization\": { Reference(Organization) }, // Organization that is the custodian of the patient record\r\n//    \"link\": [{ // Link to another patient resource that concerns the same actual person\r\n//        \"other\": { Reference(Patient|RelatedPerson) }, // R!  The other patient or related person resource that the link refers to\r\n//        \"type\": \"<code>\" // R!  replaced-by | replaces | refer | seealso\r\n//    }]\r\n}","// <copyright file=\"MdObject.ts\" company=\"mdObject, Inc\">\r\n// Copyright (c) mdObject, Inc. All rights reserved.\r\n// Licensed under the MS-PL license. See LICENSE file in the project root for full license information.\r\n// </copyright>\r\nimport { version } from '../consts/version'\r\nimport { productType } from '../consts/productType'\r\nimport { Fhir } from '../fhir/fhir';\r\nimport { Emr } from './Emr';\r\n\r\nexport class MdObject {\r\n\r\n    private _emr: Emr;\r\n    private _fhir: Fhir;\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _document: any\r\n    ) {\r\n        if (typeof this._window === 'undefined' && typeof this._document === 'undefined') {\r\n            throw new Error(\"MdObject requires a _window with a _document\");\r\n        }\r\n        console.info(\"The mdObject Version:\" + this.version);\r\n\r\n        this._emr = new Emr(this._window, this._document);\r\n\r\n        this._fhir = new Fhir();\r\n    }\r\n\r\n    get version(): string {\r\n        return version;\r\n    }\r\n\r\n    get productType(): string {\r\n        return productType;\r\n    }\r\n\r\n    public get emr():Emr {\r\n        return this._emr;\r\n    }\r\n\r\n    public get fhir(): Fhir {\r\n        return this._fhir;\r\n    }\r\n}","export const version: string = '2.0.0-alpha.2.2';\r\n","export const productType: string = 'GE';","import { IAllergyData } from '../interfaces/IAllergyData';\r\nimport { EmrMel } from './EmrMel';\r\nimport { ObjectState, AllergyClassification, AllergyCriticality, AllergyReasonForRemoval, ObjectStatus } from '../enums';\r\nimport { System } from './System';\r\n\r\nexport class Allergy implements IAllergyData {\r\n    state: ObjectState = ObjectState.None;\r\n    status: ObjectStatus = ObjectStatus.Unchanged;\r\n\r\n  name: string = '';\r\n  onSetDate: Date | any;\r\n  criticalIndicator: AllergyCriticality = AllergyCriticality.undefined;\r\n  classification: AllergyClassification = AllergyClassification.none;\r\n  description: string = ''; // Use this field for reaction\r\n  gpiCode: string = '';\r\n  severity: string = '';\r\n  stopDate: Date | undefined;\r\n  allergyId: string = '';\r\n  reactionCode: number = 32; // OTHER=32\r\n  reasonForRemoval: AllergyReasonForRemoval = AllergyReasonForRemoval.none;\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = async () => {\r\n        switch (this.state) {\r\n            case ObjectState.Add: {\r\n                let code: string = await this._mel.melFunc('{MEL_ADD_ALLERGY(\"' + this.toAddString() + '\")}');\r\n\r\n                if (code !== '') {\r\n                    let error = 'Allergy.save error. Code is ' + code;\r\n                    console.error(error);\r\n                    throw new Error('Allergy not saved. ' + error);\r\n                }\r\n\r\n                this.status = ObjectStatus.Added;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n            case ObjectState.Update: {\r\n                let code: string = await this._mel.melFunc('{MEL_CHANGE_ALLERGY(\"' + this.toChangeString() + '\")}');\r\n\r\n            if (code !== '0') {\r\n            let error = 'Allergy.save error. Code is ' + code;\r\n            console.error(error);\r\n            throw new Error('Allergy not saved. ' + error);\r\n            }\r\n\r\n                this.status = ObjectStatus.Updated;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n            case ObjectState.Remove: {\r\n                let code: string = await this._mel.melFunc('{MEL_REMOVE_ALLERGY(\"' + this.toRemoveString() + '\")}');\r\n\r\n                if (code !== '0') {\r\n                    let error = 'Allergy.save error. Code is ' + code;\r\n                    console.error(error);\r\n                    throw new Error('Allergy not saved. ' + error);\r\n                }\r\n\r\n                this.status = ObjectStatus.Removed;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private toChangeString = (): string => {\r\n        return this.allergyId + '\",\"' +\r\n            this.description + '\",\"' +\r\n            (this.onSetDate ? System.dateToString(this.onSetDate) : '') + '\",\"' +\r\n            (this.stopDate ? System.dateToString(this.stopDate) : '') + '\",\"' +\r\n            this.criticalIndicator + '\",\"' +\r\n            this.classification;\r\n    }\r\n\r\n    private toRemoveString = (): string => {\r\n        return this.allergyId + '\",\"' +\r\n            (this.stopDate ? System.dateToString(this.stopDate) : '') + '\",\"' +\r\n            (this.reasonForRemoval !== AllergyReasonForRemoval.none ? this.reasonForRemoval : '');\r\n    }\r\n\r\n    private toAddString = (): string => {\r\n        return this.name + '\",\"' +\r\n            this.description + '\",\"' +\r\n            (this.onSetDate ? System.dateToString(this.onSetDate) : '') + '\",\"' +\r\n            this.allergyId + '\",' +\r\n            this.reactionCode + ',\"' +\r\n            this.gpiCode + '\",\"' +\r\n            (this.stopDate ? System.dateToString(this.stopDate) : '') + '\",\"' +\r\n            this.criticalIndicator + '\",\"' +\r\n            this.classification;\r\n    }\r\n}","import { MdObject } from './classes';\r\n\r\n(function (window) {\r\n    var mdObject: MdObject;\r\n    try {\r\n        mdObject = new MdObject(window, window.document);\r\n        window['mdObject'] = mdObject;\r\n    }\r\n    catch (e) {\r\n        console.error(e);\r\n    }\r\n    return mdObject;\r\n})(window);\r\n\r\nexport * from './classes';\r\nexport * from './enums';\r\nexport * from './interfaces';\r\n"]}