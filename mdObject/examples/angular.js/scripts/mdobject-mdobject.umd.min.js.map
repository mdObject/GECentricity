{"version":3,"sources":["../../src/enums/LocationType.ts","../../src/enums/UserCallFunction.ts","../../src/enums/AllergyClassification.ts","../../src/enums/AllergyCriticality.ts","../../src/enums/ObjectState.ts","../../src/enums/AllergyReasonForRemoval.ts","../../src/enums/ObjectStatus.ts","../../src/classes/ObsTermsMap.ts","../../src/classes/Location.ts","../../node_modules/tslib/tslib.es6.js","../../src/classes/EmrContent.ts","../../src/classes/PatientContact.ts","../../src/fhir/types/Converter.ts","../../src/classes/EmrObject.ts","../../src/consts/strings.ts","../../src/classes/System.ts","../../src/classes/Problem.ts","../../src/classes/Immunization.ts","../../src/classes/ObservationType.ts","../../src/classes/User.ts","../../src/factories/StringInternal.ts","../../src/classes/AllergyList.ts","../../src/classes/AllergyListRemoved.ts","../../src/factories/DocumentVariable.ts","../../src/factories/IsActiveXSupported.ts","../../src/factories/GetActiveXErrorMessage.ts","../../src/classes/Allergies.ts","../../src/classes/Observation.ts","../../src/classes/Protocol.ts","../../src/classes/Measurement.ts","../../src/classes/Measurements.ts","../../src/classes/Insurance.ts","../../src/classes/CarePlan.ts","../../src/classes/Address.ts","../../src/classes/Phone.ts","../../src/classes/ReferringProviderPhone.ts","../../src/classes/ReferringProvider.ts","../../src/bases/EmrBase.ts","../../src/classes/EmrMel.ts","../../src/classes/EmrApp.ts","../../src/classes/EmrWindow.ts","../../src/classes/external/DemographicsExternal.ts","../../src/classes/external/UserDetailExternal.ts","../../src/classes/external/AllergyExternal.ts","../../src/classes/external/ProblemExternal.ts","../../src/classes/external/AllergiesExternal.ts","../../src/classes/FlowsheetObservation.ts","../../src/classes/Problems.ts","../../src/classes/Patient.ts","../../src/classes/Users.ts","../../src/factories/GetCurrentUser.ts","../../src/simulator/ExtensionExternalSimulator.ts","../../src/simulator/simulator.ts","../../src/classes/ClinicalDocument.ts","../../src/classes/EmrContents.ts","../../src/classes/Emr.ts","../../src/classes/MdObject.ts","../../src/consts/version.ts","../../src/consts/productType.ts","../../src/classes/Allergy.ts","../../src/fhir/HumanName.ts","../../src/fhir/Address.ts","../../src/fhir/Attachment.ts","../../src/fhir/Person.ts","../../src/fhir/Patient.ts","../../src/fhir/Coding.ts","../../src/fhir/CodeableConcept.ts","../../src/fhir/Condition.ts","../../src/fhir/Resource.ts","../../src/fhir/Bundle.ts","../../src/fhir/EntryBundle.ts","../../src/fhir/Search.ts","../../src/fhir/Signature.ts","../../src/fhir/Meta.ts","../../src/public.ts"],"names":["LocationType","UserCallFunction","AllergyClassification","AllergyCriticality","ObjectState","AllergyReasonForRemoval","ObjectStatus","this","weight","height","id","name","locationType","None","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__generator","thisArg","body","f","y","t","g","_","label","sent","trys","ops","next","verb","throw","return","Symbol","iterator","n","v","op","TypeError","call","done","value","pop","length","push","e","step","__read","o","m","r","i","ar","error","__spread","arguments","concat","params","_this","state","status","Unchanged","initializeData","contentId","data","namespace","nodeName","displayName","sourceName","code","codeType","contentGroup","listOrder","contentDefault","toAddString","toChangeString","save","mel","__awaiter$1","_mel","Error","Add","Update","Remove","melFunc","_b","codeNumeric","NaN","console","Added","Updated","Removed","_a","split","_value","type","phone","phoneType","address1","address2","city","zip","country","address","toMelString","Converter","dateTimeToDate","source","Date","EmrObject","objectSetup","base","item","keys","filter","key","forEach","emptyImage","simulatorChromeExtensionId","System","toDate","parseInt","substr","toImage","arrayBuffer","btoa","String","fromCharCode","apply","Uint8Array","formatDate","dateToString","date","getMonth","getDate","getFullYear","nonenumerable","target","propertyKey","descriptor","getOwnPropertyDescriptor","enumerable","writable","defineProperty","isSimulator","Problem","problem","_super","assessment","note","problemId","description","codeIcd9","comment","onsetDate","undefined","stopDate","stopReason","codeIcd10","lastModifiedDate","saveAsync","__awaiter$2","_g","fromFhir","condition","text","notes","onsetDateTime","abatementDateTime","_c","coding","find","system","_e","_d","isNew","immunizationId","immunizationGroupId","vaccineGroupName","vaccineName","medicalDisplayName","series","wasGiven","reasonNotGiven","historical","historicalSource","vfcElegibility","ddid","dnid","gpi","kdc","ndc","cvxCode","doseAmount","dosageUnitOfMeasure","route","routeCode","site","siteCode","manufacturer","manufacturerCode","lotNumber","expirationDate","visPublishedDate","administeredByName","administeredDate","administeredDateType","administeredComments","advReactionDateTime","advReactionDateTimeType","advReactionComments","advReactionCmtByName","signed","signedByName","signedDate","reasonRemoved","reasonNotGivenMedical","reasonNotGivenMedicalDetail","isError","validateAdd","response","toStringAdd","alert","match","Signed","DocumentUnsigned","callFunction","UserInfo","loginName","searchName","phoneNumber","homeLocation","group","jobTitle","specialty","roles","npi","prescriberId","deaId","stateLicenceId","memberLogin","data2000","uniquePhysicianId","activationDate","currentLocation","firstName","middleName","lastName","UserList","StringInternal","tag","result","toList","seporator","dataArray","startsWith","str","slice","endsWith","theDate","toString","isNaN","valueOf","log","onSetDate","criticalIndicator","classification","gpiCode","severity","allergyId","reactionCode","AllergyListRemoved","AllergyList","DocumentVariable","saveCallback","IsActiveXSupported","_window","GetActiveXErrorMessage","objectName","Message","Allergies","_addedArray","_currentArray","_removedArray","_added","index","addedAsync","_current","currentAsync","_removed","removedAsync","Observation","_name","_observationType","observationType","ObservationType","time","signingUser","enteringUser","flags","locationOfCare","documentType","documentId","saveObservation","remove","_unitOfMeasure","_tag","Measurement","isCurrent","_weight","_height","getObs","Measurements","_previous","Insurance","insuranceType","_address","_insuranceId","_planName","_groupNumber","_phone","carePlanId","goal","snomedCTCode","instructions","goalSetDate","goalMetDate","recordCreatedDateTime","sign","signedBy","recordChangedDateTime","recordChangedBy","patientConditionDescription","patientConditionCode","carePlanAddError","Address","_mailingAddressExternal","_address1","line1Addr","_address2","line2Addr","_city","cityName","_country","countryCode","_postCode","postalCode","_state","stateCode","Phone","_electronicAddressExternal","formatMelPhone","phoneTest","RegExp","trim","results","exec","_home","a","addressSettingCode","urlScheme","urlAddr","_business","_mobile","homeAsync","_f","businessAsync","mobileAsync","_fax","faxAsync","ReferringProviderPhone","_office","_alternative","_pager","ReferringProvider","_referringProviderId","_firstName","_lastName","_email","_fullAddress","EmrBase","_simulator","isActiveXSupported","noData","isExternalSupported","_external","opener","external","IsDebugMode","externalSimulator","_isSimulator","EmrMel","melObjectName","melObjectNameSimulator","initialization","ActiveXObject","errorMessage","EvaluateMel","eval","obs","OBSNOW","OBSPREV","showUrlDialog","url","EmrApp","appObjectName","appObjectNameSimulator","app","SetPasscode","ShowURLDialog","EnterpriseID","DatabaseVersion","_app","_document","openDialog","toLowerCase","open","features","form","createElement","action","method","input","JSON","stringify","appendChild","style","display","submit","DemographicsExternal","json","toJson","_json","obj","parse","confidentialityCode","contactList","electronicAddressList","excludedUserAccess","excludedUserAccessSpecified","guarantorList","guardianList","hasPatientAccess","hasPatientAccessSpecified","healthIssueList","identifierList","lastOfficeVisitDate","lastOfficeVisitDateSpecified","mailingAddressList","medicareAdvantagePatient","medicareAdvantagePatientSpecified","mqicEPatientId","mqicEPatientIdSpecified","organization","patientKey","patientKeySpecified","patientPicture","person","personAge","preferredLanguage","primaryProviderRelationshipList","registrationNote","statusCode","vipCode","UserDetailExternal","fromExternal","_obj","userDetailExternal","activationDateSpecified","authorizations","authorizedLocationOfCares","currentLocationDetail","currentLocationSpecified","deaNumber","errorDetails","expirationDateSpecified","globalID","globalIDSpecified","groupList","homeLocationDetail","homeLocationSpecified","isrespprov","isrespprovSpecified","jobTitleDetail","jobTitleSpecified","lastLoginDate","lastLoginDateSpecified","lastPasswordChange","lastPasswordChangeSpecified","licenseNumber","loginAttempts","loginAttemptsSpecified","memberID","mqicUserName","orgName","pidList","pmpRoleID","pmpRoleIDSpecified","pmpRoleName","prescriberID","providerID","providerIDSpecified","resultSpecified","roleList","specialtyDetail","specialtySpecified","spi","stateName","subscriptionureg","tocElectronicAddress","updateType","upin","AllergyExternal","allclass","allergyGroupID","allergyGroupIDSpecified","allergyID","annotate","aproxonsetdate","change","changeSpecified","dbCreateDate","dbCreateDateSpecified","dbUpdatedDate","dbUpdatedDateSpecified","documentDetail","drugDescID","drugDescIDSpecified","expirationID","extAllergyID","extAllergyIDSpecified","externalAllergyInfoDetail","genericProductIndex","gi","heme","iscritical","kind","knowledgeBaseDrugCode","knowledgeBaseDrugCodeSpecified","medicationInfo","ndclabprod","ndcpackage","onsetdate","onsetdateSpecified","other","pendUserIndent","pendUserIndentSpecified","pendUserSort","pendUserSortSpecified","personID","pubtime","pubtimeSpecified","pubUser","pubUserDetail","pubUserSpecified","rash","resp","searchCriteria","secondaryDocumentID","secondaryDocumentIDSpecified","shock","snomedID","snomedIDSpecified","stopdate","stopdateSpecified","stopreason","userDetail","userID","userIDSpecified","userIndent","userIndentSpecified","userSort","userSortSpecified","ProblemExternal","problemExternal","aproxstopdate","assessmentList","codechange","covered","expirationIDSpecified","externalProblemDetail","extSecondaryProblemID","extSecondaryProblemIDSpecified","icd9CodeDetail","icd9MasterDiagnosisID","icd9MasterDiagnosisIDSpecified","icd10CodeDetail","icd10MasterDiagnosisID","icd10MasterDiagnosisIDSpecified","lastClaimedDate","lastClaimedDateSpecified","medicareAdvantageAlert","medicareAdvantageAlertSpecified","medicareAdvantageRiskAdjustmentFactor","priority","prioritySpecified","problemID","problemIDSpecified","qualifier","secondaryProblemID","secondaryProblemIDSpecified","snoMedCodeDetail","snoMedMasterDiagnosisID","snoMedMasterDiagnosisIDSpecified","userDim","userDimSpecified","AllergiesExternal","map","Problems","_isLoaded","load","_new","loadAsync","__awaiter$5","_currentAsync","_newAsync","_removedAsync","currentProblemMelData","loadMelDataToList","currentProblem","newProblemMelData","newProblem","removedProblemMelData","markRemovedMelDataFromList","removedProblem","predicate","Changed","_locadMelDataFromString","_problemId","indexOf","filterProblems","problems","Patient","_demographics","_allergiesExternal","_contactsArray","_observations","_observatiosArray","_protocolsArray","_insurances","_immunizationsArray","_carePlansArray","_locationsArray","_allergies","_referringProvider","observations","observationsArray","dataArrayU","_patientPicture","_lastOfficeVisit","_registrationNote","_language","patientId","identifierDomain","domainId","_patientId","idValue","_printId","externalId","_externalId","medicalRecordId","_medicalRecordId","birthDate","_dateOfBirth","_dateOfDeath","deceaseIndSpecified","deceaseInd","deceaseTime","_sex","genderCode","personNameList","givenName","familyName","_middleName","_labelName","_namePrefix","prefixName","_nameSuffix","suffixName","_pid","ssn","_ssn","replace","patientIdAsync","pidAsync","medicalRecordIdAsync","externalIdAsync","printIdAsync","ssnAsync","firstNameAsync","lastNameAsync","middleNameAsync","labelNameAsync","namePrefixAsync","nameSuffixAsync","sexAsync","_race","raceAsync","_ethnicity","ethnicityAsync","dateOfBirthAsync","dateOfDeathAsync","_maritalStatus","maritalStatusAsync","languageAsync","emailAsync","_contactBy","contactByAsync","registrationNoteAsync","_contacts","PatientContact","contactsAsync","_employmentStatus","employmentStatusAsync","_clinicStatus","clinicStatusAsync","_primaryCarePhysicianName","primaryCarePhysicianNameAsync","_problems","problemsAsync","flowsheetObservations","flowsheet","flowsheetValue","_observationList","FlowsheetObservation","_protocols","Protocol","_immunizations","Immunization","_carePlans","CarePlan","carePlansAsync","_locations","_locationsId","locationProperty","Location","Home","findByType","_usersArray","getUser","_user","User","_currentUser","GetCurrentUser","getUsers","_users","ExtensionExternalSimulator","_showWait","sendMessage","editorExtensionId","Promise","resolve","reject","chrome","runtime","Simulator","_isExtensionEvaluated","_isActiveX","_ExtensionExternalSimulator","isSimulatorAsync","__awaiter$7","info","_reject","ClinicalDocument","_emr","_locationPropertyArray","rawValue","val","_letiables","_did","didAsync","melFuncAsync","_xid","_documentId","_status","_location","_locationProperty","Current","_dateOfUpdate","_provider","_userLoginName","EmrContents","__awaiter$9","melData","EmrContent","Emr","_melContent","_problemExternalList","externalAsync","__awaiter$a","melContent","reload","emrMel","demographicsAsync","then","Demographics","allergiesAsync","_allergiesJson","allergiesJson","problemsJson","_problemsJson","patientAsync","_patient","bind","clinicalDocumentAsync","_clinicalDocument","showWait","emrApp","_obsTermsMap","ObsTermsMap","_emrWindow","EmrWindow","enterpriseId","databaseVersion","_version","emrContentsAsync","content","_emrMel","_emrApp","_baseServicesUrl","BaseServicesUrl","demographics","allergies","Users","MdObject","version","packageVersion","none","reasonForRemoval","__awaiter$b","toRemoveString","HumanName","Address$1","Attachment","Person","Patient$1","Coding","CodeableConcept","Condition","resourceType","Resource","Bundle","EntryBundle","Search","Signature","Meta","window","mdObject","document"],"mappings":"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","sourcesContent":["export enum LocationType {\r\n    None = 0,\r\n    Home = 1,\r\n    Current = 2\r\n}\r\n","export enum UserCallFunction {\r\n    None = 0,\r\n    UserList = 1,\r\n    UserInfo = 2\r\n}\r\n","export enum AllergyClassification {\r\n    none = '',\r\n    drug = 'DRUG',\r\n    food = 'FOOD',\r\n    environmental = 'ENVIRONMENTAL'\r\n}","export enum AllergyCriticality {\r\n    undefined = '',\r\n    critical = 'C',\r\n    severe = 'S',\r\n    moderate = 'N',\r\n    mild = 'I'\r\n}","export enum ObjectState {\r\n    None = 0,\r\n    Add = 1,\r\n    Update = 2,\r\n    Remove = 3\r\n}\r\n","export enum AllergyReasonForRemoval {\r\n    none = '',\r\n    error = 'Entered in error',\r\n    patientCorrected  = 'Patient corrected',\r\n    disproved = 'Allergy disproved',\r\n    other = 'Other'\r\n}","export enum ObjectStatus {\r\n    Unchanged = 0,\r\n    Added = 1,\r\n    Updated = 2,\r\n    Removed = 3,\r\n    Changed = 4,\r\n}\r\n","export class ObsTermsMap {\r\n    weight: string = 'Weight';\r\n    height: string = 'Height';\r\n\r\n    constructor() { }\r\n}","import { LocationType } from '../enums';\r\n\r\nexport class Location {\r\n\r\n    constructor(\r\n        public id: string,\r\n        public name: string,\r\n        public locationType: LocationType\r\n    ) {\r\n        this.id = (this.id != null) ? this.id : '';\r\n        this.name = (this.name != null) ? this.name : '';\r\n        this.locationType = (this.locationType != null) ? this.locationType : LocationType.None\r\n    }\r\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { ObjectState, ObjectStatus } from '../enums';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport interface EmrContentParams {\r\n    data?: string,\r\n    mel?: EmrMel\r\n    // Add Parameters ...\r\n}\r\n\r\n/* This class correlates to the ContentList table.\r\n * The \"namespace\" parameter (formal key) is not unique and maybe duplicated 255 characters\r\n * The \"nodeName\" parameter (formal name) 20 characters\r\n * The \"displayName\" parameter (formal value) 400 characters\r\n * The \"code\" parameter 20 characters. You may use as Encrypted/Encoded flag.\r\n * The \"codeType\" parameter 10 characters. You may use as type of encryption, for example BASE64 \r\n * The \"contentGroup\" parameter is numeric\r\n * The \"listOrder\" parameter is numeric\r\n * The \"contentDefault\" parameter is numeric\r\n */\r\nexport class EmrContent {\r\n\r\n\r\n    state: ObjectState = ObjectState.None;\r\n    status: ObjectStatus = ObjectStatus.Unchanged;\r\n\r\n    contentId: string;\r\n    namespace: string;\r\n    nodeName: string;\r\n    displayName: string;\r\n    sourceName: string | null;\r\n    code: string | null;\r\n    codeType: string | null;\r\n    contentGroup: string;\r\n    listOrder: string;\r\n    contentDefault: string;\r\n\r\n    private _mel: EmrMel\r\n    private data: Array<string>;\r\n\r\n    constructor(params: EmrContentParams = {} as EmrContentParams) {\r\n        let { data = null, mel = null } = params;\r\n        this._mel = mel;\r\n        this.data = (data == null) ? [] : data.split('^');\r\n        this.initializeData()\r\n    }\r\n\r\n    private initializeData = (): void => {\r\n        this.contentId = (this.data.length > 0) ? this.data[0] : '';\r\n        this.namespace = (this.data.length > 1) ? this.data[1] : '';\r\n        this.nodeName = (this.data.length > 2) ? this.data[2] : '';\r\n        this.displayName = (this.data.length > 3) ? this.data[3] : '';\r\n        this.sourceName = (this.data.length > 4) ? this.data[4] : '';\r\n        this.code = (this.data.length > 5) ? this.data[5] : '';\r\n        this.codeType = (this.data.length > 6) ? this.data[6] : '';\r\n        this.contentGroup = (this.data.length > 7) ? this.data[7] : '';\r\n        this.listOrder = (this.data.length > 8) ? this.data[8] : '';\r\n        this.contentDefault = (this.data.length > 9) ? this.data[9] : '';\r\n    }\r\n\r\n    private toAddString = (): string => {\r\n        return this.namespace + '^' +\r\n            this.nodeName + '^' +\r\n            this.displayName + '^' +\r\n            this.sourceName + '^' +\r\n            this.code + '^' +\r\n            this.codeType + '^' +\r\n            this.contentGroup + '^' +\r\n            this.listOrder + '^' +\r\n            this.contentDefault;\r\n    }\r\n\r\n    private toChangeString = (): string => {\r\n        return this.namespace + '^' +\r\n            this.nodeName + '^' +\r\n            this.displayName + '^' +\r\n            this.sourceName + '^' +\r\n            this.code + '^' +\r\n            this.codeType + '^' +\r\n            this.contentGroup + '^' +\r\n            this.listOrder + '^' +\r\n            this.contentDefault;\r\n    }\r\n\r\n    save = async (mel?: EmrMel) => {\r\n        if (!this._mel && mel) { this._mel = mel; }\r\n        if (!this._mel) { throw new Error('Mel undefined');}\r\n        switch (this.state) {\r\n            case ObjectState.Add: {\r\n                let code: string = await this._mel.melFunc('{MEL_ADD_CONTENT(\"' + this.toAddString() + '\")}');\r\n                let codeNumeric: number = +code;\r\n                if (codeNumeric < 0 || codeNumeric === NaN) {\r\n                    let error = 'EmrContent.save error. Code is ' + code;\r\n                    console.error(error);\r\n                    throw new Error('EmrContent not saved. ' + error);\r\n                }\r\n\r\n                this.contentId = code;\r\n                this.nodeName = (this.nodeName) ? this.nodeName : code;\r\n                this.status = ObjectStatus.Added;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n            case ObjectState.Update: {\r\n                let code: string = await this._mel.melFunc('{MEL_UPDATE_CONTENT(\"' + this.contentId + '\",\"' + this.toChangeString() + '\")}');\r\n                let codeNumeric: number = +code;\r\n\r\n                if (codeNumeric < 0 || codeNumeric === NaN) {\r\n                    let error = 'EmrContent.save error. Code is ' + code;\r\n                    console.error(error);\r\n                    throw new Error('EmrContent not saved. ' + error);\r\n                }\r\n\r\n                this.status = ObjectStatus.Updated;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n            case ObjectState.Remove: {\r\n                let code: string = await this._mel.melFunc('{MEL_REMOVE_CONTENT(\"' + this.contentId + '\")}');\r\n                let codeBoolean: boolean = (code == \"true\");\r\n\r\n                if (!codeBoolean) {\r\n                    let error = 'EmrContent.save error. Code is ' + code;\r\n                    console.error(error);\r\n                    throw new Error('EmrContent not saved. ' + error);\r\n                }\r\n\r\n                this.status = ObjectStatus.Removed;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}","export class PatientContact {\r\n\r\n    private data = (this._value == null) ? [] : this._value.split('^');\r\n    name: string = (this.data.length > 0) ? this.data[0] : '';\r\n    type: string = (this.data.length > 1) ? this.data[1] : '';\r\n    phone: string = (this.data.length > 2) ? this.data[2] : '';\r\n    phoneType: string = (this.data.length > 3) ? this.data[3] : '';\r\n    address1: string = (this.data.length > 4) ? this.data[4] : '';\r\n    address2: string = (this.data.length > 5) ? this.data[5] : '';\r\n    city: string = (this.data.length > 6) ? this.data[6] : '';\r\n    state: string = (this.data.length > 7) ? this.data[7] : '';\r\n    zip: string = (this.data.length > 8) ? this.data[8] : '';\r\n    country: string = (this.data.length > 9) ? this.data[9] : '';\r\n    address: string = this.address1.concat(' ' + this.address2);\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n\r\n    toMelString = (): string => {\r\n        return this._value;\r\n    }\r\n}","import { dateTime } from \"./dateTime\";\r\n\r\nexport class Converter {\r\n\r\n    static dateTimeToDate(source: dateTime): Date {\r\n        return new Date(source);\r\n    }\r\n}","import { EmrMel } from \"./EmrMel\";\r\nimport { ObjectState, ObjectStatus } from '../enums';\r\n\r\nexport abstract class EmrObject<T> {\r\n    status: ObjectStatus = ObjectStatus.Unchanged;\r\n    state: ObjectState = ObjectState.None;\r\n\r\n    // All base properties MUST have an initial value!!! \r\n    protected objectSetup(base?: T, item?: T) {\r\n        if (item && base) {\r\n            Object.keys(base)\r\n                .filter(key => (typeof base[key]) !== \"function\")\r\n                .forEach(key => {\r\n                    base[key] = item[key] ? item[key] : base[key];\r\n                });\r\n        }\r\n    }\r\n\r\n    abstract saveAsync(mel: EmrMel): Promise<void>;\r\n}","export const emptyImage: string = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII===';\r\nexport const simulatorChromeExtensionId = \"chgnndkhlnpmfkjnchmnhkfneccghaaf\";","import { emptyImage } from \"../consts/strings\";\r\n\r\nexport class System {\r\n    static isSimulator: boolean = false;\r\n\r\n    static toDate(value: string): Date {\r\n        if (value) {\r\n            return new Date(parseInt(value.substr(6)));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    static toImage(arrayBuffer:[]){\r\n        if (arrayBuffer) {\r\n            return \"data:image/jpg;base64,\" + btoa(String.fromCharCode.apply(null, new Uint8Array(arrayBuffer)));\r\n        }\r\n        else {\r\n            return emptyImage;\r\n        }\r\n    }\r\n\r\n    static formatDate(value: string): string {\r\n        if (value) {\r\n            if (value.length == 8) {\r\n                return value.substr(4, 2) + '/' + value.substr(6, 2) + '/' + value.substr(0, 4);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static dateToString(date: Date): string {\r\n        return ((date.getMonth() > 8) ? (date.getMonth() + 1) : ('0' + (date.getMonth() + 1)))\r\n            + '/' + ((date.getDate() > 9) ? date.getDate() : ('0' + date.getDate()))\r\n            + '/' + date.getFullYear();\r\n    }\r\n\r\n    static nonenumerable (target: any, propertyKey: string) {\r\n        let descriptor = Object.getOwnPropertyDescriptor(target, propertyKey) || {};\r\n        if (descriptor.enumerable !== false) {\r\n            descriptor.enumerable = false;\r\n            descriptor.writable = true;\r\n            Object.defineProperty(target, propertyKey, descriptor)\r\n        }\r\n    }\r\n}","import { ObjectState, ObjectStatus } from '../enums';\r\nimport { Condition } from '../fhir';\r\nimport { Converter } from '../fhir/types';\r\nimport { EmrMel } from './EmrMel';\r\nimport { EmrObject } from './EmrObject';\r\nimport { System } from './System';\r\n\r\nexport class Problem extends EmrObject<Problem> {\r\n\r\n    // The assessment values:\r\n    // New or N\r\n    // Improved or I\r\n    // Unchanged or U\r\n    // Deteriorated or D\r\n    // Comment only or C\r\n    // Note. Codes that were supported in previous releases may also appear as Better (B), Same (S), or Worse (W).\r\n    assessment: string = 'N';\r\n    note: string = '';\r\n\r\n    problemId: string = '';\r\n    type: string = '';\r\n    description: string = '';\r\n    codeIcd9: string = '';\r\n    comment: string = '';\r\n    onsetDate: Date | undefined = undefined;\r\n    stopDate: Date | undefined = undefined;\r\n    stopReason: string = '';\r\n    codeIcd10: string = '';\r\n    lastModifiedDate: string = '';\r\n\r\n    \r\n    save = (mel: EmrMel) => {\r\n        switch (this.state) {\r\n            case ObjectState.Add: {\r\n                let code: string = mel.melFunc('{MEL_ADD_PROBLEM(\"' + this.toAddString() + '\")}');\r\n\r\n                if (code !== '0') {\r\n                    let error = 'Problem.save error. Code is ' + code;\r\n                    console.error(error);\r\n                    throw new Error('Problem not saved. ' + error);\r\n                }\r\n\r\n                this.status = ObjectStatus.Added;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    saveAsync = async (mel: EmrMel) => {\r\n        switch (this.state) {\r\n            case ObjectState.Add: {\r\n                let code: string = await mel.melFunc('{MEL_ADD_PROBLEM(\"' + this.toAddString() + '\")}');\r\n\r\n                if (code !== '0') {\r\n                    let error = 'Problem.save error. Code is ' + code;\r\n                    console.error(error);\r\n                    throw new Error('Problem not saved. ' + error);\r\n                }\r\n\r\n                this.status = ObjectStatus.Added;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    constructor(problem?: Problem) {\r\n        super();\r\n        this.objectSetup(this, problem);\r\n    }\r\n\r\n    public get code()  {\r\n        return this.codeIcd9 && this.codeIcd10\r\n            ? this.codeIcd9 + '|' + this.codeIcd10\r\n            : this.codeIcd9 + this.codeIcd10;\r\n    }\r\n\r\n    private toAddString = (): string => {\r\n        return this.type + '\",\"' +\r\n            this.description + '\",\"' +\r\n            this.code + '\",\"' +\r\n            (this.onsetDate ? System.dateToString(this.onsetDate) : '') + '\",\"' +\r\n            (this.stopDate ? System.dateToString(this.stopDate) : '') + '\",\"' +\r\n            this.comment + '\",' +\r\n            this.assessment + ',\"' +\r\n            this.note;\r\n    }\r\n\r\n\r\n    // Usage:\r\n    // let problem: Problem = Problem.fromFhir(condition);\r\n    //\r\n    static fromFhir(condition: Condition): Problem {\r\n        const problem = new this()\r\n        if (condition) {\r\n            problem.problemId = condition.id;\r\n            problem.description = condition.code?.text;\r\n            problem.comment = condition.notes;\r\n            problem.onsetDate = Converter.dateTimeToDate(condition.onsetDateTime);\r\n            problem.stopDate = Converter.dateTimeToDate(condition.abatementDateTime);\r\n            problem.codeIcd9 = condition.code?.coding.find(e => e.system === \"http://hl7.org/fhir/sid/icd-9-cm\")?.code;\r\n            problem.codeIcd10 = condition.code?.coding.find(e => e.system === \"http://hl7.org/fhir/sid/icd-10\")?.code;\r\n            problem.type = 'DX OF';\r\n        }\r\n        return problem;        \r\n    }\r\n}","import { EmrMel } from './EmrMel'\r\n\r\nexport class Immunization {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n    private isNew: boolean = this._value == null ? true : false;\r\n\r\n    immunizationId: string = (this.data.length > 0) ? this.data[0] : '';\r\n    immunizationGroupId: string = (this.data.length > 1) ? this.data[1] : '';\r\n    vaccineGroupName: string = (this.data.length > 2) ? this.data[2] : '';\r\n    vaccineName: string = (this.data.length > 3) ? this.data[3] : '';\r\n    medicalDisplayName: string = (this.data.length > 4) ? this.data[4] : '';\r\n    series: string = (this.data.length > 5) ? this.data[5] : '';\r\n    wasGiven: string = (this.data.length > 6) ? this.data[6] : '';\r\n    reasonNotGiven: string = (this.data.length > 7) ? this.data[7] : '';\r\n    historical: string = (this.data.length > 8) ? this.data[8] : '';\r\n    historicalSource: string = (this.data.length > 9) ? this.data[9] : '';\r\n    vfcElegibility: string = (this.data.length > 10) ? this.data[10] : '';\r\n    ddid: string = (this.data.length > 11) ? this.data[11] : '';\r\n    dnid: string = (this.data.length > 12) ? this.data[12] : '';\r\n    gpi: string = (this.data.length > 13) ? this.data[13] : '';\r\n    kdc: string = (this.data.length > 14) ? this.data[14] : '';\r\n    ndc: string = (this.data.length > 15) ? this.data[15] : '';\r\n    cvxCode: string = (this.data.length > 16) ? this.data[16] : '';\r\n    doseAmount: string = (this.data.length > 17) ? this.data[17] : '';\r\n    dosageUnitOfMeasure: string = (this.data.length > 18) ? this.data[18] : '';\r\n    route: string = (this.data.length > 19) ? this.data[19] : '';\r\n    routeCode: string = (this.data.length > 20) ? this.data[20] : '';\r\n    site: string = (this.data.length > 21) ? this.data[21] : '';\r\n    siteCode: string = (this.data.length > 22) ? this.data[22] : '';\r\n    manufacturer: string = (this.data.length > 23) ? this.data[23] : '';\r\n    manufacturerCode: string = (this.data.length > 24) ? this.data[24] : '';\r\n    lotNumber: string = (this.data.length > 25) ? this.data[25] : '';\r\n    expirationDate: string = (this.data.length > 26) ? this.data[26] : '';\r\n    visPublishedDate: string = (this.data.length > 27) ? this.data[27] : '';\r\n    administeredByName: string = (this.data.length > 28) ? this.data[28] : '';\r\n    administeredDate: string = (this.data.length > 29) ? this.data[29] : '';\r\n    administeredDateType: string = (this.data.length > 30) ? this.data[30] : '';\r\n    administeredComments: string = (this.data.length > 31) ? this.data[31] : '';\r\n    advReactionDateTime: string = (this.data.length > 32) ? this.data[32] : '';\r\n    advReactionDateTimeType: string = (this.data.length > 33) ? this.data[33] : '';\r\n    advReactionComments: string = (this.data.length > 34) ? this.data[34] : '';\r\n    advReactionCmtByName: string = (this.data.length > 35) ? this.data[35] : '';\r\n    signed: string = (this.data.length > 36) ? this.data[36] : '';\r\n    signedByName: string = (this.data.length > 37) ? this.data[37] : '';\r\n    signedDate: string = (this.data.length > 38) ? this.data[38] : '';\r\n    reasonRemoved: string = (this.data.length > 39) ? this.data[39] : '';\r\n    stopDate: string = (this.data.length > 40) ? this.data[40] : '';\r\n    reasonNotGivenMedical: string = (this.data.length > 41) ? this.data[41] : '';\r\n    reasonNotGivenMedicalDetail: string = (this.data.length > 42) ? this.data[42] : '';\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = (): void => {\r\n        if (this.isNew) {\r\n            let isError = this.validateAdd();\r\n            let response;\r\n            if (isError === '') {\r\n                response = this._mel.melFunc('{IMMUN_ADD(\"' + this.toStringAdd() + '\")}');\r\n                if (response < 0) {\r\n                    alert(response);\r\n                }\r\n            } else {\r\n                alert(isError);\r\n            }\r\n        } else {\r\n            // TODO: add updating of model\r\n        }\r\n    }\r\n\r\n    toMelString = (): string => {\r\n        return this._value;\r\n    }\r\n\r\n    validateAdd = (): string => {\r\n        let errorMessage = ' is required.';\r\n        // check required parameters\r\n        if (this.vaccineGroupName === '') {\r\n            return 'vaccineGroupName' + errorMessage;\r\n        }\r\n        if (this.wasGiven === '') {\r\n            return 'wasGiven' + errorMessage;\r\n        }\r\n        if (this.historical === '') {\r\n            return 'historical' + errorMessage;\r\n        }\r\n        if (this.vfcElegibility === '') {\r\n            return 'vfcElegibility' + errorMessage;\r\n        }\r\n        if (this.administeredDate === '') {\r\n            return 'administeredDate' + errorMessage;\r\n        }\r\n        if (this.doseAmount.match(/[0-9]{1,25}/g) == null) {\r\n            return 'doseAmount should be numeric.';\r\n        }\r\n        return '';\r\n    }\r\n\r\n    toStringAdd = (): string => {\r\n        return this.vaccineGroupName + '^' + \r\n            this.vaccineName + '^' +\r\n            this.medicalDisplayName + '^' +\r\n            this.series + '^' +\r\n            this.wasGiven + '^' +\r\n            this.reasonNotGiven + '^' +\r\n            this.historical + '^' +\r\n            this.historicalSource + '^' +\r\n            this.vfcElegibility + '^' +\r\n            this.ddid + '^' +\r\n            this.dnid + '^' +\r\n            this.gpi + '^' +\r\n            this.kdc + '^' +\r\n            this.ndc + '^' +\r\n            this.cvxCode + '^' +\r\n            this.doseAmount + '^' +\r\n            this.dosageUnitOfMeasure + '^' +\r\n            this.route + '^' +\r\n            this.routeCode + '^' +\r\n            this.site + '^' +\r\n            this.siteCode + '^' +\r\n            this.manufacturer + '^' +\r\n            this.manufacturerCode + '^' +\r\n            this.lotNumber + '^' +\r\n            this.expirationDate + '^' +\r\n            this.visPublishedDate + '^' +\r\n            this.administeredByName + '^' +\r\n            this.administeredDate + '^' +\r\n            this.administeredDateType + '^' +\r\n            this.administeredComments + '^' +\r\n            this.advReactionDateTime + '^' +\r\n            this.advReactionDateTimeType + '^' +\r\n            this.advReactionComments + '^' +\r\n            this.advReactionCmtByName + '^' +\r\n            this.signed + '^' +\r\n            this.signedByName + '^' +\r\n            this.signedDate + '^' +\r\n            this.reasonRemoved + '^' +\r\n            this.stopDate + '^' +\r\n            this.reasonNotGivenMedical + '^' +\r\n            this.reasonNotGivenMedicalDetail;\r\n    }\r\n}","export class ObservationType {\r\n\r\n    None: string = 'Undefined';\r\n    Signed: string = 'Signed';\r\n    DocumentUnsigned: string = 'Update';\r\n\r\n    constructor() { }\r\n}","import { UserCallFunction } from '../enums';\r\n\r\nexport class User {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    loginName: string;\r\n    searchName: string;\r\n    phoneNumber: string;\r\n    homeLocation: string;\r\n    group: string;\r\n    jobTitle: string;\r\n    specialty: string;\r\n    roles: Array<string>;\r\n    npi: string;\r\n    prescriberId: string;\r\n    deaId: string;\r\n    stateLicenceId: string;\r\n    memberLogin: string;\r\n    data2000: string;\r\n    uniquePhysicianId: string;\r\n    activationDate: string;\r\n    expirationDate: string;\r\n    currentLocation: string;\r\n    firstName: string;\r\n    middleName: string;\r\n    lastName: string;\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public callFunction: UserCallFunction\r\n    ) {\r\n        if (callFunction === UserCallFunction.UserInfo) {\r\n            this.loginName = (this.data.length > 0) ? this.data[0] : '';\r\n            this.searchName = (this.data.length > 1) ? this.data[1] : '';\r\n            this.phoneNumber = (this.data.length > 2) ? this.data[2] : '';\r\n            this.homeLocation = (this.data.length > 3) ? this.data[3] : '';\r\n            this.group = (this.data.length > 4) ? this.data[4] : '';\r\n            this.jobTitle = (this.data.length > 5) ? this.data[5] : '';\r\n            this.specialty = (this.data.length > 6) ? this.data[6] : '';\r\n            this.roles = (this.data.length > 7) ? this.data[7].split(';') : [];\r\n            this.npi = (this.data.length > 8) ? this.data[8] : '';\r\n            this.prescriberId = (this.data.length > 9) ? this.data[9] : '';\r\n            this.deaId = (this.data.length > 10) ? this.data[10] : '';\r\n            this.stateLicenceId = (this.data.length > 11) ? this.data[11] : '';\r\n            this.memberLogin = (this.data.length > 12) ? this.data[12] : '';\r\n            this.data2000 = (this.data.length > 13) ? this.data[13] : '';\r\n            this.uniquePhysicianId = (this.data.length > 14) ? this.data[14] : '';\r\n            this.activationDate = (this.data.length > 15) ? this.data[15] : '';\r\n            this.expirationDate = (this.data.length > 16) ? this.data[16] : '';\r\n            this.currentLocation = (this.data.length > 17) ? this.data[17] : '';\r\n            this.firstName = (this.data.length > 18) ? this.data[18] : '';\r\n            this.middleName = (this.data.length > 19) ? this.data[19] : '';\r\n            this.lastName = (this.data.length > 20) ? this.data[20] : '';\r\n        }\r\n\r\n        if (callFunction === UserCallFunction.UserList) {\r\n            this.loginName = (this.data.length > 0) ? this.data[0] : '';\r\n            this.searchName = (this.data.length > 1) ? this.data[1] : '';\r\n            this.phoneNumber = (this.data.length > 2) ? this.data[2] : '';\r\n            this.homeLocation = (this.data.length > 3) ? this.data[3] : '';\r\n            this.group = (this.data.length > 4) ? this.data[4] : '';\r\n            this.jobTitle = (this.data.length > 5) ? this.data[5] : '';\r\n            this.specialty = (this.data.length > 6) ? this.data[6] : '';\r\n            this.npi = (this.data.length > 7) ? this.data[7] : '';\r\n            this.prescriberId = (this.data.length > 8) ? this.data[8] : '';\r\n            this.deaId = (this.data.length > 9) ? this.data[9] : '';\r\n            this.stateLicenceId = (this.data.length > 10) ? this.data[10] : '';\r\n            this.memberLogin = (this.data.length > 11) ? this.data[11] : '';\r\n            this.data2000 = (this.data.length > 12) ? this.data[12] : '';\r\n            this.uniquePhysicianId = (this.data.length > 13) ? this.data[13] : '';\r\n            this.activationDate = (this.data.length > 14) ? this.data[14] : '';\r\n            this.expirationDate = (this.data.length > 15) ? this.data[15] : '';\r\n            this.roles = [];\r\n        }\r\n    }\r\n\r\n    toMelString = () => {\r\n        return this._value;\r\n    }\r\n}","import { IStringInternal } from '../interfaces';\r\n\r\nexport function StringInternal(value: string, tag?: string): IStringInternal {\r\n    value = (value) ? value : '';\r\n    let result: IStringInternal = new String(value) as IStringInternal;\r\n\r\n    // Function parse string object to array of string \r\n    result.toList = (seporator?: string): Array<string> => {\r\n        if (seporator == null) {\r\n            seporator = '|';\r\n        }\r\n        let dataArray = value.split(seporator);\r\n        /*jslint plusplus: true */\r\n        dataArray = dataArray.filter((item) => {\r\n            return item.length !== 0;\r\n        });\r\n        return dataArray;\r\n    }\r\n\r\n    // String helper function to validate that string start with specified string\r\n    result.startsWith = (str: string) => {\r\n        return value.slice(0, str.length) === str;\r\n    }\r\n\r\n    // String helper function to validate that string end with specified string\r\n    result.endsWith = (str: string) => {\r\n        return value.slice(-str.length) === str;\r\n    }\r\n\r\n    result.tag = (tag != null) ? tag : '';\r\n\r\n    result.toDate = (): Date | undefined => {\r\n        let theDate = new Date(value.toString());\r\n        if (theDate instanceof Date && !isNaN(theDate.valueOf())) {\r\n            return theDate;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    return result;\r\n}","import { StringInternal } from '../factories/StringInternal';\r\nimport { IAllergyData } from '../interfaces';\r\n\r\nexport class AllergyList implements IAllergyData {\r\n\r\n    protected data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    name = (() => {\r\n        console.log(this._value);\r\n        return (this.data.length > 0);}) ? this.data[0] : '';\r\n    onSetDate = StringInternal((this.data.length > 1) ? this.data[1] : '').toDate();\r\n        criticalIndicator = (this.data.length > 2) ? this.data[2] : '';\r\n    classification = (this.data.length > 3) ? this.data[3] : '';\r\n    description = (this.data.length > 4) ? this.data[4] : '';\r\n    gpiCode = (this.data.length > 5) ? this.data[5] : '';\r\n    severity = (this.data.length > 6) ? this.data[6] : '';\r\n    allergyId = (this.data.length > 7) ? this.data[7] : '';\r\n    stopDate = null;\r\n    reactionCode: number = 32; // OTHER=32\r\n    \r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n}","import { StringInternal } from '../factories/StringInternal';\r\nimport { AllergyList } from './AllergyList';\r\n\r\nexport class AllergyListRemoved extends AllergyList {\r\n\r\n    name = (this.data.length > 0) ? this.data[0] : '';\r\n    onSetDate = StringInternal((this.data.length > 1) ? this.data[1] : '').toDate();\r\n    stopDate = (this.data.length > 2) ? this.data[2] : '';\r\n    criticalIndicator = (this.data.length > 3) ? this.data[3] : '';\r\n    classification = (this.data.length > 4) ? this.data[4] : '';\r\n    description = (this.data.length > 5) ? this.data[5] : '';\r\n    gpiCode = (this.data.length > 6) ? this.data[6] : '';\r\n    severity = (this.data.length > 7) ? this.data[7] : '';\r\n    allergyId = (this.data.length > 8) ? this.data[8] : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) {\r\n        super(_value);\r\n    }\r\n}","import { IItem } from '../interfaces';\r\n\r\nexport function DocumentVariable(value, saveCallback): IItem {\r\n    let result: IItem = (value == null) ? new Object() : value;\r\n    result.save = () => {\r\n        if (saveCallback != null) {\r\n            saveCallback();\r\n        }\r\n    }\r\n    return result;\r\n}","export function IsActiveXSupported(_window: any): boolean {\r\n    let result: boolean = 'ActiveXObject' in _window;\r\n\r\n    // Verify ActiveX support in this browser\r\n    if (!result) {\r\n        console.log(\"Your browser does not support ActiveX objects\");\r\n    }\r\n    return result;\r\n}","export function GetActiveXErrorMessage(objectName: string, e: { Message: string }) {\r\n    let result = \"Unable to load ActiveX interface \" + objectName;\r\n    result += ((e != null && e.hasOwnProperty(\"Message\")) ? \".\\nError message: \" + e.Message : \"\");\r\n    return result;\r\n}","import { AllergyList } from './AllergyList';\r\nimport { AllergyListRemoved } from './AllergyListRemoved';\r\nimport { EmrMel } from './EmrMel';\r\nimport { StringInternal } from '../factories/factories';\r\nimport { IArrayAdditionalMethods } from '../interfaces';\r\n\r\nexport class Allergies {\r\n\r\n    private _added: string;\r\n    private _addedArray: IArrayAdditionalMethods<AllergyList> = [];\r\n    private _current: string;\r\n    private _currentArray: IArrayAdditionalMethods<AllergyList> = [];\r\n    private _removed: string;\r\n    private _removedArray: IArrayAdditionalMethods<AllergyList> = [];\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get added() {\r\n        if (this._addedArray.length === 0) {\r\n            this._added = (this._added != null) ? this._added : this._mel.melFunc('{ALL_NEW(\"delimited\")}');\r\n            let dataArray = StringInternal(this._added).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._addedArray.push(new AllergyList(dataArray[index]));\r\n            }\r\n        }\r\n        return this._addedArray;\r\n    }\r\n\r\n    async addedAsync() {\r\n        if (this._addedArray.length === 0) {\r\n            this._added = (this._added != null) ? this._added : await this._mel.melFunc('{ALL_NEW(\"delimited\")}');\r\n            let dataArray = StringInternal(this._added).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._addedArray.push(new AllergyList(dataArray[index]));\r\n            }\r\n        }\r\n        return this._addedArray;\r\n    }\r\n\r\n    get current() {\r\n        if (this._currentArray.length === 0) {\r\n            this._current = (this._current != null) ? this._current : this._mel.melFunc('{ALL_PRIOR(\"delimited\")}');\r\n            let dataArray = StringInternal(this._current).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._currentArray.push(new AllergyList(dataArray[index]));\r\n            }\r\n        }\r\n        return this._currentArray;\r\n    }\r\n\r\n    async currentAsync() {\r\n        if (this._currentArray.length === 0) {\r\n            this._current = (this._current != null) ? this._current : await this._mel.melFunc('{ALL_PRIOR(\"delimited\")}');\r\n            let dataArray = StringInternal(this._current).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._currentArray.push(new AllergyList(dataArray[index]));\r\n            }\r\n        }\r\n        return this._currentArray;\r\n    }\r\n    \r\n    get removed() {\r\n        if (this._removedArray.length === 0) {\r\n            this._removed = (this._removed != null) ? this._removed : this._mel.melFunc('{ALL_REMOVED(\"delimited\")}');\r\n            let dataArray = StringInternal(this._removed).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._removedArray.push(new AllergyListRemoved(dataArray[index]));\r\n            }\r\n        }\r\n        return this._removedArray;\r\n    }\r\n\r\n    async removedAsync() {\r\n        if (this._removedArray.length === 0) {\r\n            this._removed = (this._removed != null) ? this._removed : await this._mel.melFunc('{ALL_REMOVED(\"delimited\")}');\r\n            let dataArray = StringInternal(this._removed).toList();\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._removedArray.push(new AllergyListRemoved(dataArray[index]));\r\n            }\r\n        }\r\n        return this._removedArray;\r\n    }\r\n}","import { ObservationType } from './ObservationType';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class Observation {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n    private _unitOfMeasure;\r\n    private _tag;\r\n    private readonly observationType: ObservationType = new ObservationType();\r\n\r\n    name: string = (this._name != null) ? this._name : '';\r\n    value: string = (this.data.length > 0) ? this.data[0] : '';\r\n    date: string = (this.data.length > 1) ? this.data[1] : '';\r\n    time: string = (this.data.length > 2) ? this.data[2] : '';\r\n    signingUser: string = (this.data.length > 3) ? this.data[3] : '';\r\n    enteringUser: string = (this.data.length > 4) ? this.data[4] : '';\r\n    flags: string = (this.data.length > 5) ? this.data[5] : '';\r\n    comment: string = (this.data.length > 6) ? this.data[6] : '';\r\n    state: string = (this.data.length > 7) ? this.data[7] : '';\r\n    locationOfCare: string = (this.data.length > 8) ? this.data[8] : '';\r\n    documentType: string = (this.data.length > 9) ? this.data[9] : '';\r\n    documentId: string = (this.data.length > 10) ? this.data[10] : '';\r\n    type: string = this._observationType;\r\n\r\n    constructor(\r\n        public _name: string,\r\n        public _observationType: string,\r\n        public _value: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = (): string => {\r\n        let response = this._mel.saveObservation(this.name, this.value, this.date); //  this._mel.melFunc('{OBSNOW(\"' + this.name + '\",\"' + this.value + '\")}');\r\n        if (this.tag != null && this.tag != '') {\r\n            response = this._mel.melFunc('{OBSTAGNOW(\"' + this.name + '\",\"' + this.tag + '\")}');\r\n        }\r\n        if (this.comment != null && this.comment != '') {\r\n            response = this._mel.melFunc('{OBSMODIFIERNOW(\"' + this.name + '\",\"' + this.comment + '\")}');\r\n        }\r\n        return response;\r\n    }\r\n\r\n    remove = (): void => {\r\n\r\n    }\r\n\r\n    get unitOfMeasure() {\r\n        this._unitOfMeasure = (this._unitOfMeasure != null) ? this._unitOfMeasure : this._mel.melFunc('{OBSUNIT(\"' + this.name + '\")}');\r\n        return this._unitOfMeasure;\r\n    }\r\n\r\n    get tag() {\r\n        this._tag = (this._tag != null) ? this._tag\r\n            : (this._observationType === this.observationType.DocumentUnsigned) ? this._mel.melFunc('{OBSTAGNOW(\"' + this.name + '\")}')\r\n                : '';\r\n        return this._tag;\r\n    }\r\n}\r\n","export class Protocol {\r\n\r\n    name: string = (this._value != null) ? this._value : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n}","import { ObsTermsMap } from './ObsTermsMap';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class Measurement implements ObsTermsMap {\r\n\r\n    constructor(\r\n        public isCurrent: boolean,\r\n        public _weight: string,\r\n        public _height: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    // mdObject.obsTermsMap.weight\r\n    get weight(): string {\r\n        return this._mel.getObs(this.isCurrent, this._weight);\r\n    }\r\n\r\n    // mdObject.obsTermsMap.height\r\n    get height(): string {\r\n        return this._mel.getObs(this.isCurrent, this._height);\r\n    }\r\n}","import { Measurement } from './Measurement';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class Measurements {\r\n\r\n    private _current: Measurement;\r\n    private _previous: Measurement;\r\n\r\n    constructor(\r\n        public _weight: string,\r\n        public _height: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get current() {\r\n        return (this._current != null) ? this._current : new Measurement(true, this._weight, this._height, this._mel);\r\n    }\r\n\r\n    get previous() {\r\n        return (this._previous != null) ? this._previous : new Measurement(false, this._weight, this._height, this._mel);\r\n    }\r\n}","import { EmrMel } from './EmrMel';\r\n\r\nexport class Insurance {\r\n\r\n    private _name: string;\r\n    private _address: string;\r\n    private _insuranceId: string;\r\n    private _planName: string;\r\n    private _groupNumber: string;\r\n    private _phone: string;\r\n\r\n\r\n    constructor(\r\n        public insuranceType: string, // Type of insurance P = Primary S = Secondary O = Other,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    // The name of the patients insurance carrier.\r\n    get name() {\r\n        this._name = (this._name == null) ? this._mel.melFunc('{INS_NAME(\"' + this.insuranceType + '\")}') : this._name;\r\n        return this._name;\r\n    }\r\n\r\n    // The name and address of the patients insurance carrier.\r\n    get address() {\r\n        this._address = (this._address == null) ? this._mel.melFunc('{INS_ADDR(\"' + this.insuranceType + '\")}') : this._address;\r\n        return this._address;\r\n    }\r\n\r\n    // The patients insurance ID number for insurance carrier.\r\n    get insuranceId() {\r\n        this._insuranceId = (this._insuranceId == null) ? this._mel.melFunc('{INS_ID(\"' + this.insuranceType + '\")}') : this._insuranceId;\r\n        return this._insuranceId;\r\n    }\r\n\r\n    // The name of the patients plan for insurance\r\n    get planName() {\r\n        this._planName = (this._planName == null) ? this._mel.melFunc('{INS_PLAN(\"' + this.insuranceType + '\")}') : this._planName;\r\n        return this._planName;\r\n    }\r\n\r\n    // The group number of the patients insurance carrier.\r\n    get groupNumber() {\r\n        this._groupNumber = (this._groupNumber == null) ? this._mel.melFunc('{INS_GRP(\"' + this.insuranceType + '\")}') : this._groupNumber;\r\n        return this._groupNumber;\r\n    }\r\n\r\n    // The phone number of the patients insurance company\r\n    get phone() {\r\n        this._phone = (this._phone == null) ? this._mel.melFunc('{INS_PHONE(\"' + this.insuranceType + '\")}') : this._phone;\r\n        return this._phone;\r\n    }\r\n}","import { EmrMel } from './EmrMel';\r\n\r\nexport class CarePlan {\r\n\r\n    private data = this._value == null ? [] : this._value.split('^');\r\n    private isNew = this._value == null ? true : false;\r\n\r\n    carePlanId: string = (this.data.length > 0) ? this.data[0] : '';\r\n    goal: string = (this.data.length > 1) ? this.data[1] : '';\r\n    snomedCTCode: string = (this.data.length > 2) ? this.data[2] : '';\r\n    target: string = (this.data.length > 3) ? this.data[3] : '';\r\n    instructions: string = (this.data.length > 4) ? this.data[4] : '';\r\n    goalSetDate: string = (this.data.length > 5) ? this.data[5] : '';\r\n    goalMetDate: string = (this.data.length > 6) ? this.data[6] : '';\r\n    recordCreatedDateTime: string = (this.data.length > 7) ? this.data[7] : '';\r\n    sign: string = (this.data.length > 8) ? this.data[8] : '';\r\n    signedBy: string = (this.data.length > 9) ? this.data[9] : '';\r\n    signedDate: string = (this.data.length > 10) ? this.data[10] : '';\r\n    recordChangedDateTime: string = (this.data.length > 11) ? this.data[11] : '';\r\n    recordChangedBy: string = (this.data.length > 12) ? this.data[12] : '';\r\n    patientConditionDescription: string = (this.data.length > 13) ? this.data[13] : '';\r\n    patientConditionCode: string = (this.data.length > 14) ? this.data[14] : '';\r\n\r\n    constructor(\r\n        public _value: string,\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = (): void => {\r\n        if (this.isNew) {\r\n            let isError = this.validateAdd(); //TODO ADD VALIDATION\r\n            let response;\r\n            if (isError === '') {\r\n                response = this._mel.melFunc('{MEL_ADD_CARE_PLAN(' + this.toStringAdd() + ')}');\r\n                if (response < 0) {\r\n                    alert(this.carePlanAddError(response));\r\n                }\r\n            } else {\r\n                alert(isError);\r\n            }\r\n        }\r\n        else {\r\n            //update ;\r\n            //{MEL_UPDATE_CARE_PLAN(\"1691155657053120\",\"Goal-Exercise to lose weight\",\"\",\"\",\"\" ,\"\",\"2013/08/03\" ,\"\")}\r\n            //err_code = Mel.eval(\"{MEL_UPDATE_CARE_PLAN(\\\"\" +careplanID + \"\\\",\\\"\" +DB_TimeStamp + \"\\\",\\\"\" +goal_sel + \"\\\",\\\"\" +snomed_code + \"\\\",\\\"\" +target + \"\\\",\\\"\" +ins_sel + \"\\\",\\\"\" +sdate + \"\\\",\\\"\" +mdate + \"\\\",\\\"\" +problemID + \"\\\")}\");\r\n        }\r\n    }\r\n\r\n    toMelString = (): string => {\r\n        return this._value;\r\n    }\r\n\r\n    validateAdd = (): string => {\r\n        let errorMessage: string = ' is required.';\r\n        // check required parameters\r\n        if (this.goal === '') {\r\n            return 'goal' + errorMessage;\r\n        }\r\n        return '';\r\n    }\r\n\r\n    //MEL symbol for adding care this._value - format\r\n    //MEL_ADD_CARE_PLAN (Goal, SNOMEDCTCODE, Target, Instructions, GoalSetDate, GoalMetDate, PRID ( pipe separated Problem IDs selected from patients active problems) \r\n    toStringAdd = (): string => {\r\n        return '\\\"' + this.goal + '\\\",\\\"' +\r\n            this.snomedCTCode + '\\\",\\\"' +\r\n            this.target + '\\\",\\\"' +\r\n            this.instructions + '\\\",\\\"' +\r\n            this.goalSetDate + '\\\",\\\"' +\r\n            this.goalMetDate + '\\\",\\\"' +\r\n            this.patientConditionCode + '\\\"';\r\n    }\r\n\r\n    carePlanAddError = (code: string): string => {\r\n        let response: string = '';\r\n        switch (code) {\r\n            case \"-1\":\r\n                response = \"Error Code -1: Description or blank is too long.\";\r\n                break;\r\n            case \"-2\":\r\n                response = \"Error Code -2: Code is too long.\";\r\n                break;\r\n            case \"-3\":\r\n                response = \"Error Code -3: Target is too long.\";\r\n                break;\r\n            case \"-4\":\r\n                response = \"Error Code -4: Instruction is too long.\";\r\n                break;\r\n            case \"-5\":\r\n                response = \"Error Code -5: goalSetDate is invalid.\";\r\n                break;\r\n            case \"-6\":\r\n                response = \"Error Code -6: goalMetDate is invalid or less than goalSetDate.\";\r\n                break;\r\n            case \"-7\":\r\n                response = \"Error Code -7: Invalid patientConditionCode. Use $mdObject.patient.problems[index].problemId\";\r\n                break;\r\n            case \"-8\":\r\n                response = \"Error Code -8: Cannot add Care Plan for some other reason.\";\r\n                break;\r\n            case \"-21\":\r\n                response = \"Error Code -21: Service layer error.\";\r\n                break;\r\n            default:\r\n        }\r\n        return response;\r\n    }\r\n}","import { EmrMel } from './EmrMel';\r\nimport { MailingAddressExternal } from './external/MailingAddressExternal';\r\n\r\nexport class Address {\r\n\r\n    private _address1: string;\r\n    private _address2: string;\r\n    private _city: string;\r\n    private _state: string;\r\n    private _postCode: string;\r\n    private _country: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _mailingAddressExternal?: MailingAddressExternal\r\n    ) {\r\n        if (this._mailingAddressExternal) {\r\n            this._address1 = this._mailingAddressExternal.line1Addr;\r\n            this._address2 = this._mailingAddressExternal.line2Addr;\r\n            this._city = this._mailingAddressExternal.cityName;\r\n            this._country = this._mailingAddressExternal.countryCode;\r\n            this._postCode = this._mailingAddressExternal.postalCode;\r\n            this._state = this._mailingAddressExternal.stateCode;\r\n        }\r\n    }\r\n\r\n    // Returns the first line of the patients address\r\n    get address1() {\r\n        this._address1 = (this._address1 !== undefined) ? this._address1 : this._mel.melFunc('{PATIENT.ADDRESS1}');\r\n        return this._address1;\r\n    }\r\n\r\n    // Returns the second line of the patients address\r\n    get address2() {\r\n        this._address2 = (this._address2 !== undefined) ? this._address2 : this._mel.melFunc('{PATIENT.ADDRESS2}');\r\n        return this._address2;\r\n    }\r\n\r\n    // Returns the patients city of residence\r\n    get city() {\r\n        this._city = (this._city !== undefined) ? this._city : this._mel.melFunc('{PATIENT.CITY}');\r\n        return this._city;\r\n    }\r\n\r\n    // Returns the patients country of residence\r\n    get country() {\r\n        this._country = (this._country !== undefined) ? this._country : this._mel.melFunc('{PATIENT.COUNTRY}');\r\n        return this._country;\r\n    }\r\n\r\n    // Returns the patients ZIP/Postal code\r\n    get postCode() {\r\n        this._postCode = (this._postCode !== undefined) ? this._postCode : this._mel.melFunc('{PATIENT.ZIP}');\r\n        return this._postCode;\r\n    }\r\n\r\n    // Returns the patients state or province\r\n    get state() {\r\n        this._state = (this._state !== undefined) ? this._state : this._mel.melFunc('{PATIENT.STATE}');\r\n        return this._state;\r\n    }\r\n}","import { EmrMel } from './EmrMel';\r\nimport { ElectronicAddressExternal } from './external/ElectronicAddressExternal';\r\n\r\nexport class Phone {\r\n\r\n    private _home: string;\r\n    private _business: string;\r\n    private _mobile: string;\r\n    private _fax: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _electronicAddressExternal?: ElectronicAddressExternal[]\r\n    ) {\r\n        if (this._electronicAddressExternal) {\r\n            this._home = (this._home !== undefined) ? this._home : this._electronicAddressExternal.find(a => (a.addressSettingCode === \"H\" && a.urlScheme === \"tel\"))?.urlAddr;\r\n            this._home = (this._home) ? this.formatMelPhone(this._home) : this._home;\r\n\r\n            this._business = (this._business !== undefined) ? this._business : this._electronicAddressExternal.find(a => (a.addressSettingCode === \"WP\" && a.urlScheme === \"tel\"))?.urlAddr;\r\n            this._business = (this._business) ? this.formatMelPhone(this._business) : this._business;\r\n\r\n            this._mobile = (this._mobile !== undefined) ? this._mobile : this._electronicAddressExternal.find(a => (a.addressSettingCode === \"MC\" && a.urlScheme === \"tel\"))?.urlAddr;\r\n            this._mobile = (this._mobile) ? this.formatMelPhone(this._mobile) : this._mobile;\r\n        }\r\n    }\r\n\r\n    private formatMelPhone = (phone) => {\r\n        var phoneTest = new RegExp(/(\\d{3})(\\d{3})(\\d{4})(\\d+)?/);\r\n        phone = phone.trim();\r\n        var results = phoneTest.exec(phone);\r\n        if (results !== null && results.length > 4) {\r\n            return \"(\" + results[1] + \") \" + results[2] + \"-\" + results[3] + (typeof results[4] !== \"undefined\" ? \" [\" + results[4] + \"]\" : \"\");\r\n        }\r\n        else {\r\n            return phone;\r\n        }\r\n    }\r\n\r\n    get home() {\r\n        this._home = (this._home != null) ? this._home : this._mel.melFunc('{PATIENT.ALTPHONE}');\r\n        return this._home;\r\n    }\r\n\r\n    async homeAsync() {\r\n        this._home = (this._home != null) ? this._home : await this._mel.melFunc('{PATIENT.ALTPHONE}');\r\n        return this._home;\r\n    }\r\n\r\n    // Returns the patients business/work telephone number\r\n    get business() {\r\n        this._business = (this._business != null) ? this._business : this._mel.melFunc('{PATIENT.WORKPHONE}');\r\n        return this._business;\r\n    }\r\n\r\n    async businessAsync() {\r\n        this._business = (this._business != null) ? this._business : await this._mel.melFunc('{PATIENT.WORKPHONE}');\r\n        return this._business;\r\n    }\r\n\r\n    // Returns the patients cell phone number\r\n    get mobile() {\r\n        this._mobile = (this._mobile != null) ? this._mobile : this._mel.melFunc('{PATIENT.CELLPHONE}');\r\n        return this._mobile;\r\n    }\r\n\r\n    async mobileAsync() {\r\n        this._mobile = (this._mobile != null) ? this._mobile : await this._mel.melFunc('{PATIENT.CELLPHONE}');\r\n        return this._mobile;\r\n    }\r\n\r\n    // Returns the patients fax number\r\n    get fax() {\r\n        this._fax = (this._fax != null) ? this._fax : this._mel.melFunc('{PATIENT.FAXPHONE}');\r\n        return this._fax;\r\n    }\r\n\r\n    async faxAsync() {\r\n        this._fax = (this._fax != null) ? this._fax : await this._mel.melFunc('{PATIENT.FAXPHONE}');\r\n        return this._fax;\r\n    }\r\n}","import { EmrMel } from './EmrMel';\r\n\r\nexport class ReferringProviderPhone {\r\n\r\n    private _office: string;\r\n    private _alternative: string;\r\n    private _fax: string;\r\n    private _pager: string;\r\n    private _mobile: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    get office() {\r\n        this._office = (this._office != null) ? this._office : this._mel.melFunc('{PATIENT.REFMDOFFICEPHONE}');\r\n        return this._office;\r\n    }\r\n\r\n    get alternative() {\r\n        this._alternative = (this._alternative != null) ? this._alternative : this._mel.melFunc('{PATIENT.REFMDALTPHONE}');\r\n        return this._alternative;\r\n    }\r\n\r\n    get fax() {\r\n        this._fax = (this._fax != null) ? this._fax : this._mel.melFunc('{PATIENT.REFMDFAXPHONE}');\r\n        return this._fax;\r\n    }\r\n\r\n    get pager() {\r\n        this._pager = (this._pager != null) ? this._pager : this._mel.melFunc('{PATIENT.REFMDPAGERPHONE}');\r\n        return this._pager;\r\n    }\r\n\r\n    get mobile() {\r\n        this._mobile = (this._mobile != null) ? this._mobile : this._mel.melFunc('{PATIENT.REFMDCELLPHONE}');\r\n        return this._mobile;\r\n    }\r\n}","import { ReferringProviderPhone } from './ReferringProviderPhone';\r\nimport { EmrMel } from './EmrMel';\r\n\r\nexport class ReferringProvider {\r\n\r\n    private _referringProviderId: string;\r\n    private _firstName: string;\r\n    private _lastName: string;\r\n    private _email: string;\r\n    private _fullAddress: string;\r\n    private _phone = new ReferringProviderPhone(this._mel);\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n\r\n    get referringProviderId() {\r\n        this._referringProviderId = (this._referringProviderId != null) ? this._referringProviderId : this._mel.melFunc('{PATIENT.REFMDID}');\r\n        return this._referringProviderId;\r\n    }\r\n\r\n    get firstName() {\r\n        this._firstName = (this._firstName != null) ? this._firstName : this._mel.melFunc('{PATIENT.REFMDFIRSTNAME}');\r\n        return this._firstName;\r\n    }\r\n\r\n    get lastName() {\r\n        this._lastName = (this._lastName != null) ? this._lastName : this._mel.melFunc('{PATIENT.REFMDLASTNAME}');\r\n        return this._lastName;\r\n    }\r\n\r\n    get email() {\r\n        this._email = (this._email != null) ? this._email : this._mel.melFunc('{PATIENT.REFMDEMAILADDRESS}');\r\n        return this._email;\r\n    }\r\n\r\n    get fullAddress() {\r\n        this._fullAddress = (this._fullAddress != null) ? this._fullAddress : this._mel.melFunc('{PATIENT.REFMDADDRESS}');\r\n        return this._fullAddress;\r\n    }\r\n\r\n    get phone() {\r\n        return this._phone;\r\n    }\r\n}","import { IsActiveXSupported } from '../factories/factories';\r\n// Avoid Circular dependency detected. Do not reference classes\r\nimport { System } from '../classes/System';\r\nimport { Simulator } from '../simulator/simulator';\r\n\r\nexport abstract class EmrBase {\r\n\r\n    readonly isActiveXSupported = IsActiveXSupported(this._window);\r\n    readonly noData: string = 'Data Access Error';\r\n    errorMessage: string;\r\n\r\n    readonly isExternalSupported: boolean = (this.external) ? true : false;\r\n    private _external: any;\r\n    private _isSimulator: boolean;\r\n\r\n    get external(): any {\r\n        if (this._external === 'UnitTest') {\r\n            return undefined;\r\n        }\r\n        if (this._external) {\r\n            return this._external;\r\n        }\r\n\r\n        this._external = this._external ? this._external        // if the _external is set, then use it\r\n            : (this._window.opener && this._window.opener.external) ? this._window.opener.external\r\n                : this._window.external;\r\n        if (this._external.IsDebugMode === undefined) {\r\n            // try simulator\r\n            this._external = this._simulator.externalSimulator;\r\n        }\r\n\r\n        return this._external;\r\n    }\r\n\r\n    get isSimulator(): boolean {\r\n        this._isSimulator = (this._window.opener != null && this._window.opener['_isSimulator'] != undefined) ? this._window.opener['_isSimulator']\r\n            : (this._isSimulator) ? this._isSimulator\r\n                : System.isSimulator;\r\n        return this._isSimulator;\r\n    }\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _simulator: Simulator\r\n    ) {\r\n\r\n        this._window['_isSimulator'] = this.isSimulator;\r\n    }\r\n\r\n    abstract get externalSimulator(): any;\r\n}","import { System } from './System';\r\nimport { GetActiveXErrorMessage, IsActiveXSupported } from '../factories/factories';\r\nimport { EmrBase } from '../bases/EmrBase';\r\nimport { Simulator } from '../simulator/simulator';\r\n\r\nexport class EmrMel extends EmrBase {\r\n\r\n    private melObjectName = 'GE.CPO.EMR.80.MEL';\r\n    private melObjectNameSimulator = 'GE.CPO.EMR.80.MEL.SIMULATOR';\r\n    private mel;\r\n    public errorMessage: string;\r\n    readonly noData: string = 'Data Access Error';\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _simulator: Simulator\r\n    ) {\r\n        super(_window, _simulator);\r\n\r\n        this.initialization();\r\n    }\r\n\r\n    private initialization = (): void => {\r\n        if (IsActiveXSupported(this._window)) {\r\n            try {\r\n                this.mel = new this._window.ActiveXObject(this.melObjectName);\r\n            } catch (e) {\r\n                this.errorMessage = GetActiveXErrorMessage(this.melObjectName, e);\r\n            }\r\n            // Try to activate simulator\r\n            if (this.errorMessage != null) {\r\n                try {\r\n                    this.mel = new this._window.ActiveXObject(this.melObjectNameSimulator);\r\n                    System.isSimulator = true;\r\n                } catch (e) {\r\n                    console.log(this.errorMessage);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Implements MEL eval \r\n    melFunc = (data: string): string => {\r\n        return (this.external) ? this.external.EvaluateMel(data, false) : (this.mel) ? this.mel.eval(data) :  this.noData;\r\n    }\r\n\r\n    saveObservation = (obs: string, value: string, date: string): string => {\r\n        return (this.mel == null) ? this.noData : this.mel.OBSNOW(obs, value, date);\r\n    }\r\n\r\n    getObs = (isCurrent: boolean, data: string): string => {\r\n        return (this.mel == null) ? this.noData : ((isCurrent == true) ? this.mel.OBSNOW(data, '', '') : this.mel.OBSPREV(data));\r\n    }\r\n\r\n    showUrlDialog = (url: string): void => {\r\n        this.melFunc('{SHOWHTMLFORM(\"' + url + '\",\"test\")}');\r\n    }\r\n\r\n    get externalSimulator(): any {\r\n        return (this.mel == null) ? this.noData : this.mel.external;\r\n    }\r\n\r\n}","import { EmrBase } from '../bases/bases'\r\nimport { GetActiveXErrorMessage } from '../factories/factories';\r\nimport { Simulator } from '../simulator/simulator';\r\nimport { System } from './System';\r\n\r\nexport class EmrApp extends EmrBase {\r\n\r\n    private appObjectName = 'GE.CPO.EMR.90.Application';\r\n    private appObjectNameSimulator = 'GE.CPO.EMR.90.Application.SIMULATOR';\r\n    private app;\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _simulator: Simulator\r\n    ) {\r\n        super(_window, _simulator);\r\n\r\n        this.initialization();\r\n    }\r\n\r\n    private initialization = (): void => {\r\n        if (this.isActiveXSupported) {\r\n            try {\r\n                this.app = new this._window.ActiveXObject(this.appObjectName);\r\n                this.app.SetPasscode(this._window.external['Passcode']);\r\n            } catch (e) {\r\n                this.errorMessage = GetActiveXErrorMessage(this.appObjectName, e);\r\n            }\r\n            // Try to activate simulator\r\n            if (this.errorMessage != null) {\r\n                try {\r\n                    this.app = new this._window.ActiveXObject(this.appObjectNameSimulator);\r\n                    System.isSimulator = true;\r\n                } catch (e) {\r\n                    this.errorMessage = GetActiveXErrorMessage(this.appObjectName, e);\r\n                    alert(this.errorMessage);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    get enterpriseId(): string {\r\n        return (this.app == null) ? this.noData : this.app.EnterpriseID;\r\n    }\r\n\r\n    get databaseVersion(): string {\r\n        return (this.app == null) ? this.noData : this.app.DatabaseVersion;\r\n    }\r\n\r\n    showUrlDialog = (url: string): string => {\r\n        return (this.app == null) ? this.noData : this.app.ShowURLDialog(url);\r\n    }\r\n\r\n    get externalSimulator(): any {\r\n        return (this.app == null) ? this.noData : this.app.external;\r\n    }\r\n}","import { StringInternal } from '../factories/StringInternal';\r\nimport { EmrMel } from './EmrMel';\r\nimport { EmrApp } from './EmrApp';\r\n\r\nexport class EmrWindow {\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _app: EmrApp,\r\n        public _window: any,\r\n        public _document: any\r\n    ) { }\r\n\r\n    openDialog = (url: string) => {\r\n        ((StringInternal(url.toLowerCase())).startsWith('//localserver')) ? this._mel.showUrlDialog(url) : this._app.showUrlDialog(url);\r\n    }\r\n\r\n    /**\r\n     * Arguments :\r\n     * verb : 'GET'|'POST', defaults to \"GET\"\r\n     * target : an optional opening target (a name, or \"_blank\"), defaults to \"_self\"\r\n     */\r\n    open = (url: string, verb: string, target: string, features: string, data: Object) => {\r\n        let form: HTMLFormElement = this._document.createElement(\"form\");\r\n        form.action = url;\r\n        form.method = verb || 'GET';\r\n        form.target = target || \"_self\";\r\n        if (data) {\r\n            for (let key in data) {\r\n                let input: HTMLTextAreaElement = this._document.createElement(\"textarea\");\r\n                input.name = key;\r\n                input.value = (typeof data[key] === \"object\") ? JSON.stringify(data[key]) : data[key];\r\n                form.appendChild(input);\r\n            }\r\n        }\r\n        form.style.display = 'none';\r\n        this._document.body.appendChild(form);\r\n        let _window = this._window.open(\"about:blank\", target, features);\r\n        form.submit();\r\n        return _window;\r\n    }\r\n}","import { System } from \"../System\";\r\nimport { PersonExternal } from './PersonExternal';\r\nimport { IdentifierExternal } from \"./IdentifierExternal\";\r\nimport { PersonAgeExternal } from \"./PersonAgeExternal\";\r\nimport { PrimaryProviderRelationshipExternal } from \"./PrimaryProviderRelationshipExternal\";\r\nimport { MailingAddressExternal } from \"./MailingAddressExternal\";\r\n\r\nexport class DemographicsExternal {\r\n    private _json: string;\r\n        confidentialityCode: any;\r\n        contactList: any;\r\n        electronicAddressList: any;\r\n    excludedUserAccess: number;\r\n    excludedUserAccessSpecified: boolean;\r\n        guarantorList: any;\r\n        guardianList: any;\r\n    hasPatientAccess: boolean;\r\n    hasPatientAccessSpecified: boolean;\r\n        healthIssueList: any;\r\n    identifierList: IdentifierExternal[];\r\n    lastOfficeVisitDate: Date;\r\n    lastOfficeVisitDateSpecified: boolean;\r\n    mailingAddressList: MailingAddressExternal[];\r\n    medicareAdvantagePatient: boolean;\r\n    medicareAdvantagePatientSpecified: boolean;\r\n    mqicEPatientId: number;\r\n    mqicEPatientIdSpecified: boolean;\r\n        organization: any;\r\n    patientKey: number;\r\n    patientKeySpecified: boolean;\r\n    patientPicture: string;\r\n    person: PersonExternal;\r\n    personAge: PersonAgeExternal;\r\n    preferredLanguage: string;\r\n    primaryProviderRelationshipList: PrimaryProviderRelationshipExternal[];\r\n    registrationNote: string;\r\n    statusCode: string;\r\n    vipCode: string;\r\n\r\n    constructor(\r\n        public json: string\r\n    ) {\r\n        if (json) {\r\n            this._json = json;\r\n            let obj = JSON.parse(json);\r\n            this.confidentialityCode = obj.confidentialityCode;\r\n            this.contactList = obj.contactList;\r\n            this.electronicAddressList = obj.electronicAddressList;\r\n            this.excludedUserAccess = obj.excludedUserAccess;\r\n            this.excludedUserAccessSpecified = obj.excludedUserAccessSpecified;\r\n            this.guarantorList = obj.guarantorList;\r\n            this.guardianList = obj.guardianList;\r\n            this.hasPatientAccess = obj.hasPatientAccess;\r\n            this.hasPatientAccessSpecified = obj.hasPatientAccessSpecified;\r\n            this.healthIssueList = obj.healthIssueList;\r\n            this.identifierList = obj.identifierList;\r\n            this.lastOfficeVisitDate = System.toDate(obj.lastOfficeVisitDate);\r\n            this.lastOfficeVisitDateSpecified = obj.lastOfficeVisitDateSpecified;\r\n            this.mailingAddressList = obj.mailingAddressList;\r\n            this.medicareAdvantagePatient = obj.medicareAdvantagePatient;\r\n            this.medicareAdvantagePatientSpecified = obj.medicareAdvantagePatientSpecified;\r\n            this.mqicEPatientId = obj.mqicEPatientId;\r\n            this.mqicEPatientIdSpecified = obj.mqicEPatientIdSpecified;\r\n            this.organization = obj.organization;\r\n            this.patientKey = obj.patientKey;\r\n            this.patientKeySpecified = obj.patientKeySpecified;\r\n            this.patientPicture = System.toImage(obj.patientPicture);\r\n            this.person = obj.person;\r\n            this.personAge = obj.personAge;\r\n            this.preferredLanguage = obj.preferredLanguage;\r\n            this.primaryProviderRelationshipList = obj.primaryProviderRelationshipList;\r\n            this.registrationNote = obj.registrationNote;\r\n            this.statusCode = obj.statusCode;\r\n            this.vipCode = obj.vipCode;\r\n        }\r\n    }\r\n\r\n    toJson = (): string => { return this._json;}\r\n}\r\n","import { System } from \"../System\";\r\n\r\nexport class UserDetailExternal {\r\n    activationDate: Date;\r\n    activationDateSpecified: boolean;\r\n    authorizations: any;\r\n    authorizedLocationOfCares: any;\r\n    currentLocation: number;\r\n    currentLocationDetail: any;\r\n    currentLocationSpecified: boolean;\r\n    data2000: any;\r\n    deaNumber: any;\r\n    errorDetails: any;\r\n    expirationDate: Date;\r\n    expirationDateSpecified: boolean;\r\n    firstName: string;\r\n    globalID: number;\r\n    globalIDSpecified: boolean;\r\n    groupList: any;\r\n    homeLocation: number;\r\n    homeLocationDetail: any;\r\n    homeLocationSpecified: boolean;\r\n    isrespprov: number;\r\n    isrespprovSpecified: boolean;\r\n    jobTitle: number;\r\n    jobTitleDetail: any;\r\n    jobTitleSpecified: boolean;\r\n    lastLoginDate: Date;\r\n    lastLoginDateSpecified: boolean;\r\n    lastName: string;\r\n    lastPasswordChange: Date;\r\n    lastPasswordChangeSpecified: boolean;\r\n    licenseNumber: any;\r\n    loginAttempts: number;\r\n    loginAttemptsSpecified: boolean;\r\n    loginName: any;\r\n    memberID: any;\r\n    middleName: string;\r\n    mqicUserName: any;\r\n    npi: any;\r\n    orgName: any;\r\n    phone: any;\r\n    pidList: any;\r\n    pmpRoleID: number;\r\n    pmpRoleIDSpecified: boolean;\r\n    pmpRoleName: any;\r\n    prescriberID: any;\r\n    providerID: number;\r\n    providerIDSpecified: boolean;\r\n    result: number;\r\n    resultSpecified: boolean;\r\n    roleList: any;\r\n    specialty: number;\r\n    specialtyDetail: any;\r\n    specialtySpecified: boolean;\r\n    spi: any;\r\n    stateName: any;\r\n    status: any;\r\n    subscriptionureg: any;\r\n    tocElectronicAddress: any;\r\n    updateType: any;\r\n    upin: any;\r\n\r\n    static fromExternal(\r\n        _obj: any\r\n    ): UserDetailExternal {\r\n        let userDetailExternal = new UserDetailExternal();\r\n        if (_obj) {\r\n            userDetailExternal.activationDate = System.toDate(_obj.activationDate);\r\n            userDetailExternal.activationDateSpecified = _obj.activationDateSpecified;\r\n            userDetailExternal.authorizations = _obj.authorizations;\r\n            userDetailExternal.authorizedLocationOfCares = _obj.authorizedLocationOfCares;\r\n            userDetailExternal.currentLocation = _obj.currentLocation;\r\n            userDetailExternal.currentLocationDetail = _obj.currentLocationDetail;\r\n            userDetailExternal.currentLocationSpecified = _obj.currentLocationSpecified;\r\n            userDetailExternal.data2000 = _obj.data2000;\r\n            userDetailExternal.deaNumber = _obj.deaNumber;\r\n            userDetailExternal.errorDetails = _obj.errorDetails;\r\n            userDetailExternal.expirationDate = System.toDate(_obj.expirationDate);\r\n            userDetailExternal.expirationDateSpecified = _obj.expirationDateSpecified;\r\n            userDetailExternal.firstName = _obj.firstName;\r\n            userDetailExternal.globalID = _obj.globalID;\r\n            userDetailExternal.globalIDSpecified = _obj.globalIDSpecified;\r\n            userDetailExternal.groupList = _obj.groupList;\r\n            userDetailExternal.homeLocation = _obj.homeLocation;\r\n            userDetailExternal.homeLocationDetail = _obj.homeLocationDetail;\r\n            userDetailExternal.homeLocationSpecified = _obj.homeLocationSpecified;\r\n            userDetailExternal.isrespprov = _obj.isrespprov;\r\n            userDetailExternal.isrespprovSpecified = _obj.isrespprovSpecified;\r\n            userDetailExternal.jobTitle = _obj.jobTitle;\r\n            userDetailExternal.jobTitleDetail = _obj.jobTitleDetail;\r\n            userDetailExternal.jobTitleSpecified = _obj.jobTitleSpecified;\r\n            userDetailExternal.lastLoginDate = System.toDate(_obj.lastLoginDate);\r\n            userDetailExternal.lastLoginDateSpecified = _obj.lastLoginDateSpecified;\r\n            userDetailExternal.lastName = _obj.lastName;\r\n            userDetailExternal.lastPasswordChange = System.toDate(_obj.lastPasswordChange);\r\n            userDetailExternal.lastPasswordChangeSpecified = _obj.lastPasswordChangeSpecified;\r\n            userDetailExternal.licenseNumber = _obj.licenseNumber;\r\n            userDetailExternal.loginAttempts = _obj.loginAttempts;\r\n            userDetailExternal.loginAttemptsSpecified = _obj.loginAttemptsSpecified;\r\n            userDetailExternal.loginName = _obj.loginName;\r\n            userDetailExternal.memberID = _obj.memberID;\r\n            userDetailExternal.middleName = _obj.middleName;\r\n            userDetailExternal.mqicUserName = _obj.mqicUserName;\r\n            userDetailExternal.npi = _obj.npi;\r\n            userDetailExternal.orgName = _obj.orgName;\r\n            userDetailExternal.phone = _obj.phone;\r\n            userDetailExternal.pidList = _obj.pidList;\r\n            userDetailExternal.pmpRoleID = _obj.pmpRoleID;\r\n            userDetailExternal.pmpRoleIDSpecified = _obj.pmpRoleIDSpecified;\r\n            userDetailExternal.pmpRoleName = _obj.pmpRoleName;\r\n            userDetailExternal.prescriberID = _obj.prescriberID;\r\n            userDetailExternal.providerID = _obj.providerID;\r\n            userDetailExternal.providerIDSpecified = _obj.providerIDSpecified;\r\n            userDetailExternal.result = _obj.result;\r\n            userDetailExternal.resultSpecified = _obj.resultSpecified;\r\n            userDetailExternal.roleList = _obj.roleList;\r\n            userDetailExternal.specialty = _obj.specialty;\r\n            userDetailExternal.specialtyDetail = _obj.specialtyDetail;\r\n            userDetailExternal.specialtySpecified = _obj.specialtySpecified;\r\n            userDetailExternal.spi = _obj.spi;\r\n            userDetailExternal.stateName = _obj.stateName;\r\n            userDetailExternal.status = _obj.status;\r\n            userDetailExternal.subscriptionureg = _obj.subscriptionureg;\r\n            userDetailExternal.tocElectronicAddress = _obj.tocElectronicAddress;\r\n            userDetailExternal.updateType = _obj.updateType;\r\n            userDetailExternal.upin = _obj.upin;\r\n        }\r\n        return userDetailExternal;\r\n    }\r\n\r\n}","import { UserDetailExternal } from './UserDetailExternal';\r\nimport { System } from '../System';\r\n\r\nexport class AllergyExternal {\r\n    allclass: string; //IAllergyData.classification.substr(0,1) See: AllergyClassCode\r\n    allergyGroupID: number;\r\n    allergyGroupIDSpecified: boolean;\r\n    allergyID: number;\r\n    annotate: any;\r\n    aproxonsetdate: any;\r\n    change: number; //4 - deleted; 6 - added; 2 - current\r\n    changeSpecified: boolean;\r\n    dbCreateDate: Date;\r\n    dbCreateDateSpecified: boolean;\r\n    dbUpdatedDate: Date;\r\n    dbUpdatedDateSpecified: boolean;\r\n    description: string; //IAllergyData.description\r\n    documentDetail: any;\r\n    drugDescID: number;\r\n    drugDescIDSpecified: boolean;\r\n    errorDetails: any;\r\n    expirationID: number;\r\n    extAllergyID: number;\r\n    extAllergyIDSpecified: boolean;\r\n    externalAllergyInfoDetail: any;\r\n    genericProductIndex: any;\r\n    gi: any;\r\n    heme: any;\r\n    iscritical: string;\r\n    kind: any;\r\n    knowledgeBaseDrugCode: string;\r\n    knowledgeBaseDrugCodeSpecified: boolean;\r\n    medicationInfo: any;\r\n    name: string; //IAllergyData.name\r\n    ndclabprod: any;\r\n    ndcpackage: any;\r\n    onsetdate: Date; //IAllergyData.onSetDate\r\n    onsetdateSpecified: boolean;\r\n    other: any;\r\n    pendUserIndent: number;\r\n    pendUserIndentSpecified: boolean;\r\n    pendUserSort: number;\r\n    pendUserSortSpecified: boolean;\r\n    personID: number;\r\n    pubtime: number;\r\n    pubtimeSpecified: boolean;\r\n    pubUser: number;\r\n    pubUserDetail: UserDetailExternal;\r\n    pubUserSpecified: boolean;\r\n    rash: any;\r\n    resp: any;\r\n    result: number;\r\n    resultSpecified: boolean;\r\n    searchCriteria: any;\r\n    secondaryDocumentID: number;\r\n    secondaryDocumentIDSpecified: boolean;\r\n    severity: any;\r\n    shock: any;\r\n    snomedID: number;\r\n    snomedIDSpecified: boolean;\r\n    stopdate: Date; //IAllergyData.stopDate\r\n    stopdateSpecified: boolean;\r\n    stopreason: any;\r\n    userDetail: UserDetailExternal;\r\n    userID: number;\r\n    userIDSpecified: boolean;\r\n    userIndent: number;\r\n    userIndentSpecified: boolean;\r\n    userSort: number;\r\n    userSortSpecified: boolean;\r\n\r\n    constructor(\r\n        _obj: any\r\n    ) {\r\n        this.allclass = _obj.allclass;\r\n        this.allergyGroupID = _obj.allergyGroupID;\r\n        this.allergyGroupIDSpecified = _obj.allergyGroupIDSpecified;\r\n        this.allergyID = _obj.allergyID;\r\n        this.annotate = _obj.annotate;\r\n        this.aproxonsetdate = _obj.aproxonsetdate;\r\n        this.change = _obj.change;\r\n        this.changeSpecified = _obj.changeSpecified;\r\n        this.dbCreateDate = System.toDate(_obj.dbCreateDate);\r\n        this.dbCreateDateSpecified = _obj.dbCreateDateSpecified;\r\n        this.dbUpdatedDate = System.toDate(_obj.dbUpdatedDate);\r\n        this.dbUpdatedDateSpecified = _obj.dbUpdatedDateSpecified;\r\n        this.description = _obj.description;\r\n        this.documentDetail = _obj.documentDetail;\r\n        this.drugDescID = _obj.drugDescID;\r\n        this.drugDescIDSpecified = _obj.drugDescIDSpecified;\r\n        this.errorDetails = _obj.errorDetails;\r\n        this.expirationID = _obj.expirationID;\r\n        this.extAllergyID = _obj.extAllergyID;\r\n        this.extAllergyIDSpecified = _obj.extAllergyIDSpecified;\r\n        this.externalAllergyInfoDetail = _obj.externalAllergyInfoDetail;\r\n        this.genericProductIndex = _obj.genericProductIndex;\r\n        this.gi = _obj.gi;\r\n        this.heme = _obj.heme;\r\n        this.iscritical = _obj.iscritical;\r\n        this.kind = _obj.kind;\r\n        this.knowledgeBaseDrugCode = _obj.knowledgeBaseDrugCode;\r\n        this.knowledgeBaseDrugCodeSpecified = _obj.knowledgeBaseDrugCodeSpecified;\r\n        this.medicationInfo = _obj.medicationInfo;\r\n        this.name = _obj.name;\r\n        this.ndclabprod = _obj.ndclabprod;\r\n        this.ndcpackage = _obj.ndcpackage;\r\n        this.onsetdate = System.toDate(_obj.onsetdate);\r\n        this.onsetdateSpecified = _obj.onsetdateSpecified;\r\n        this.other = _obj.other;\r\n        this.pendUserIndent = _obj.pendUserIndent;\r\n        this.pendUserIndentSpecified = _obj.pendUserIndentSpecified;\r\n        this.pendUserSort = _obj.pendUserSort;\r\n        this.pendUserSortSpecified = _obj.pendUserSortSpecified;\r\n        this.personID = _obj.personID;\r\n        this.pubtime = _obj.pubtime;\r\n        this.pubtimeSpecified = _obj.pubtimeSpecified;\r\n        this.pubUser = _obj.pubUser;\r\n        this.pubUserDetail = UserDetailExternal.fromExternal(_obj.pubUserDetail);\r\n        this.pubUserSpecified = _obj.pubUserSpecified;\r\n        this.rash = _obj.rash;\r\n        this.resp = _obj.resp;\r\n        this.result = _obj.result;\r\n        this.resultSpecified = _obj.resultSpecified;\r\n        this.searchCriteria = _obj.searchCriteria;\r\n        this.secondaryDocumentID = _obj.secondaryDocumentID;\r\n        this.secondaryDocumentIDSpecified = _obj.secondaryDocumentIDSpecified;\r\n        this.severity = _obj.severity;\r\n        this.shock = _obj.shock;\r\n        this.snomedID = _obj.snomedID;\r\n        this.snomedIDSpecified = _obj.snomedIDSpecified;\r\n        this.stopdate = System.toDate(_obj.stopdate);\r\n        this.stopdateSpecified = _obj.stopdateSpecified;\r\n        this.stopreason = _obj.stopreason;\r\n        this.userDetail = UserDetailExternal.fromExternal(_obj.userDetail);\r\n        this.userID = _obj.userID;\r\n        this.userIDSpecified = _obj.userIDSpecified;\r\n        this.userIndent = _obj.userIndent;\r\n        this.userIndentSpecified = _obj.userIndentSpecified;\r\n        this.userSort = _obj.userSort;\r\n        this.userSortSpecified = _obj.userSortSpecified;\r\n    }\r\n}","import { UserDetailExternal } from \"./UserDetailExternal\";\r\nimport { CodeDetailExternal } from \"./CodeDetailExternal\";\r\nimport { System } from \"../System\";\r\n\r\nexport class ProblemExternal {\r\n    annotate: string;\r\n    aproxonsetdate: any;\r\n    aproxstopdate: any;\r\n    assessmentList: any;\r\n    change: number;\r\n    code: string;\r\n    codechange: any;\r\n    covered: any;\r\n    dbCreateDate: Date;\r\n    dbCreateDateSpecified: boolean;\r\n    dbUpdatedDate: Date;\r\n    dbUpdatedDateSpecified: boolean;\r\n    description: string;\r\n    documentDetail: any;\r\n    errorDetails: any;\r\n    expirationID: number;\r\n    expirationIDSpecified: boolean;\r\n    externalProblemDetail: any;\r\n    extSecondaryProblemID: number;\r\n    extSecondaryProblemIDSpecified: boolean;\r\n    icd9CodeDetail: CodeDetailExternal;\r\n    icd9MasterDiagnosisID: number;\r\n    icd9MasterDiagnosisIDSpecified: boolean;\r\n    icd10CodeDetail: CodeDetailExternal;\r\n    icd10MasterDiagnosisID: number;\r\n    icd10MasterDiagnosisIDSpecified: boolean;\r\n    lastClaimedDate: Date;\r\n    lastClaimedDateSpecified: boolean;\r\n    medicareAdvantageAlert: boolean;\r\n    medicareAdvantageAlertSpecified: boolean;\r\n    medicareAdvantageRiskAdjustmentFactor: any;\r\n    onsetdate: Date;\r\n    onsetdateSpecified: boolean;\r\n    pendUserIndent: number;\r\n    pendUserIndentSpecified: boolean;\r\n    pendUserSort: number;\r\n    pendUserSortSpecified: boolean;\r\n    personID: number;\r\n    priority: number;\r\n    prioritySpecified: boolean;\r\n    problemID: number;\r\n    problemIDSpecified: boolean;\r\n    pubtime: number;\r\n    pubtimeSpecified: boolean;\r\n    pubUser: number;\r\n    pubUserDetail: UserDetailExternal;\r\n    pubUserSpecified: boolean;\r\n    qualifier: string;\r\n    result: number;\r\n    resultSpecified: boolean;\r\n    searchCriteria: any;\r\n    secondaryDocumentID: number;\r\n    secondaryDocumentIDSpecified: boolean;\r\n    secondaryProblemID: number;\r\n    secondaryProblemIDSpecified: boolean;\r\n    snoMedCodeDetail: any;\r\n    snoMedMasterDiagnosisID: number;\r\n    snoMedMasterDiagnosisIDSpecified: boolean;\r\n    stopdate: Date;\r\n    stopdateSpecified: boolean;\r\n    stopreason: any;\r\n    userDetail: UserDetailExternal;\r\n    userDim: number;\r\n    userDimSpecified: boolean;\r\n    userID: number;\r\n    userIDSpecified: boolean;\r\n    userIndent: number;\r\n    userIndentSpecified: boolean;\r\n    userSort: number;\r\n    userSortSpecified: boolean;\r\n\r\n    static fromExternal(\r\n        _obj: any\r\n    ): ProblemExternal {\r\n        let problemExternal = new ProblemExternal();\r\n        problemExternal.annotate = _obj.annotate;\r\n        problemExternal.aproxonsetdate = _obj.aproxonsetdate;\r\n        problemExternal.aproxstopdate = _obj.aproxstopdate;\r\n        problemExternal.assessmentList = _obj.assessmentList;\r\n        problemExternal.change = _obj.change;\r\n        problemExternal.code = _obj.code;\r\n        problemExternal.codechange = _obj.codechange;\r\n        problemExternal.covered = _obj.covered;\r\n        problemExternal.dbCreateDate = System.toDate(_obj.dbCreateDate);\r\n        problemExternal.dbCreateDateSpecified = _obj.dbCreateDateSpecified;\r\n        problemExternal.dbUpdatedDate = System.toDate(_obj.dbUpdatedDate);\r\n        problemExternal.dbUpdatedDateSpecified = _obj.dbUpdatedDateSpecified;\r\n        problemExternal.description = _obj.description;\r\n        problemExternal.documentDetail = _obj.documentDetail;\r\n        problemExternal.errorDetails = _obj.errorDetails;\r\n        problemExternal.expirationID = _obj.expirationID;\r\n        problemExternal.expirationIDSpecified = _obj.expirationIDSpecified;\r\n        problemExternal.externalProblemDetail = _obj.externalProblemDetail;\r\n        problemExternal.extSecondaryProblemID = _obj.extSecondaryProblemID;\r\n        problemExternal.extSecondaryProblemIDSpecified = _obj.extSecondaryProblemIDSpecified;\r\n        problemExternal.icd9CodeDetail = _obj.icd9CodeDetail;\r\n        problemExternal.icd9MasterDiagnosisID = _obj.icd9MasterDiagnosisID;\r\n        problemExternal.icd9MasterDiagnosisIDSpecified = _obj.icd9MasterDiagnosisIDSpecified;\r\n        problemExternal.icd10CodeDetail = _obj.icd10CodeDetail;\r\n        problemExternal.icd10MasterDiagnosisID = _obj.icd10MasterDiagnosisID;\r\n        problemExternal.icd10MasterDiagnosisIDSpecified = _obj.icd10MasterDiagnosisIDSpecified;\r\n        problemExternal.lastClaimedDate = System.toDate(_obj.lastClaimedDate);\r\n        problemExternal.lastClaimedDateSpecified = _obj.lastClaimedDateSpecified;\r\n        problemExternal.medicareAdvantageAlert = _obj.medicareAdvantageAlert;\r\n        problemExternal.medicareAdvantageAlertSpecified = _obj.medicareAdvantageAlertSpecified;\r\n        problemExternal.medicareAdvantageRiskAdjustmentFactor = _obj.medicareAdvantageRiskAdjustmentFactor;\r\n        problemExternal.onsetdate = System.toDate(_obj.onsetdate);\r\n        problemExternal.onsetdateSpecified = _obj.onsetdateSpecified;\r\n        problemExternal.pendUserIndent = _obj.pendUserIndent;\r\n        problemExternal.pendUserIndentSpecified = _obj.pendUserIndentSpecified;\r\n        problemExternal.pendUserSort = _obj.pendUserSort;\r\n        problemExternal.pendUserSortSpecified = _obj.pendUserSortSpecified;\r\n        problemExternal.personID = _obj.personID;\r\n        problemExternal.priority = _obj.priority;\r\n        problemExternal.prioritySpecified = _obj.prioritySpecified;\r\n        problemExternal.problemID = _obj.problemID;\r\n        problemExternal.problemIDSpecified = _obj.problemIDSpecified;\r\n        problemExternal.pubtime = _obj.pubtime;\r\n        problemExternal.pubtimeSpecified = _obj.pubtimeSpecified;\r\n        problemExternal.pubUser = _obj.pubUser;\r\n        problemExternal.pubUserDetail = UserDetailExternal.fromExternal(_obj.pubUserDetail);\r\n        problemExternal.pubUserSpecified = _obj.pubUserSpecified;\r\n        problemExternal.qualifier = _obj.qualifier;\r\n        problemExternal.result = _obj.result;\r\n        problemExternal.resultSpecified = _obj.resultSpecified;\r\n        problemExternal.searchCriteria = _obj.searchCriteria;\r\n        problemExternal.secondaryDocumentID = _obj.secondaryDocumentID;\r\n        problemExternal.secondaryDocumentIDSpecified = _obj.secondaryDocumentIDSpecified;\r\n        problemExternal.secondaryProblemID = _obj.secondaryProblemID;\r\n        problemExternal.secondaryProblemIDSpecified = _obj.secondaryProblemIDSpecified;\r\n        problemExternal.snoMedCodeDetail = _obj.snoMedCodeDetail;\r\n        problemExternal.snoMedMasterDiagnosisID = _obj.snoMedMasterDiagnosisID;\r\n        problemExternal.snoMedMasterDiagnosisIDSpecified = _obj.snoMedMasterDiagnosisIDSpecified;\r\n        problemExternal.stopdate = System.toDate(_obj.stopdate);\r\n        problemExternal.stopdateSpecified = _obj.stopdateSpecified;\r\n        problemExternal.stopreason = _obj.stopreason;\r\n        problemExternal.userDetail = UserDetailExternal.fromExternal(_obj.userDetail);\r\n        problemExternal.userDim = _obj.userDim;\r\n        problemExternal.userDimSpecified = _obj.userDimSpecified;\r\n        problemExternal.userID = _obj.userID;\r\n        problemExternal.userIDSpecified = _obj.userIDSpecified;\r\n        problemExternal.userIndent = _obj.userIndent;\r\n        problemExternal.userIndentSpecified = _obj.userIndentSpecified;\r\n        problemExternal.userSort = _obj.userSort;\r\n        problemExternal.userSortSpecified = _obj.userSortSpecified;\r\n\r\n        return problemExternal;\r\n    }\r\n\r\n}","import { AllergyExternal } from './AllergyExternal';\r\n\r\nexport class AllergiesExternal extends Array<AllergyExternal>\r\n{\r\n\r\n    constructor(public json: string = '[]') {\r\n        super(...(JSON.parse(json) as []).map(e => new AllergyExternal(e)));\r\n    }\r\n\r\n\r\n}","export class FlowsheetObservation {\r\n\r\n    private data: Array<string> = (this._value == null) ? [] : this._value.split('^');\r\n\r\n    name: string = (this.data.length > 0) ? this.data[0] : '';\r\n    value: string = (this.data.length > 1) ? this.data[1] : '';\r\n    date: string = (this.data.length > 2) ? this.data[2] : '';\r\n\r\n    constructor(\r\n        public _value: string\r\n    ) { }\r\n\r\n}\r\n","import { Problem } from './Problem';\r\nimport { StringInternal } from '../factories/factories';\r\nimport { EmrMel } from './EmrMel';\r\nimport { ObjectStatus } from '../enums';\r\n\r\nexport class Problems extends Array<Problem>{\r\n    private _isLoaded = false;\r\n    tag: string;\r\n    currentProblemMelData: string;\r\n    newProblemMelData: string;\r\n    removedProblemMelData: string;\r\n\r\n    load = (mel: EmrMel) => {\r\n        if (!this._isLoaded) {\r\n            // Load Current\r\n            this._current(mel);\r\n            // Load Added\r\n            this._new(mel);\r\n            // Load Removed\r\n            this._removed(mel);\r\n\r\n            this._isLoaded = true;\r\n        }\r\n    }\r\n\r\n    loadAsync = async (mel: EmrMel) =>{\r\n        if (!this._isLoaded) {\r\n            // Load Current\r\n            await this._currentAsync(mel);\r\n            // Load Added\r\n            await this._newAsync(mel);\r\n            // Load Removed\r\n            await this._removedAsync(mel);\r\n\r\n            this._isLoaded = true;\r\n        }\r\n    } \r\n\r\n    private _current = (mel: EmrMel) => {\r\n        this.currentProblemMelData = (this.currentProblemMelData != null) ? this.currentProblemMelData : mel.melFunc('{PROB_PRIOR(\"delimited\",\"dat\",\"com\")}');\r\n        this.loadMelDataToList(this.currentProblemMelData, this.currentProblem);\r\n    }\r\n\r\n    _currentAsync = async (mel: EmrMel) =>{\r\n        this.currentProblemMelData = (this.currentProblemMelData != null) ? this.currentProblemMelData : await mel.melFunc('{PROB_PRIOR(\"delimited\",\"dat\",\"com\")}');\r\n        this.loadMelDataToList(this.currentProblemMelData, this.currentProblem);\r\n    }\r\n\r\n    private _new = (mel: EmrMel) => {\r\n        this.newProblemMelData = (this.newProblemMelData != null) ? this.newProblemMelData : mel.melFunc('{PROB_NEW(\"delimited\",\"dat\",\"com\")}');\r\n        this.loadMelDataToList(this.newProblemMelData, this.newProblem);\r\n    }\r\n\r\n    _newAsync = async (mel: EmrMel) =>{\r\n        this.newProblemMelData = (this.newProblemMelData != null) ? this.newProblemMelData : await mel.melFunc('{PROB_NEW(\"delimited\",\"dat\",\"com\")}');\r\n        this.loadMelDataToList(this.newProblemMelData, this.newProblem);\r\n    }\r\n\r\n    private _removed = (mel: EmrMel) => {\r\n        this.removedProblemMelData = (this.removedProblemMelData != null) ? this.removedProblemMelData : mel.melFunc('{PROB_REMOVED(\"delimited\",\"dat\",\"com\")}');\r\n        this.markRemovedMelDataFromList(this.removedProblemMelData, this.removedProblem);\r\n    }\r\n\r\n    _removedAsync = async(mel: EmrMel) =>{\r\n        this.removedProblemMelData = (this.removedProblemMelData != null) ? this.removedProblemMelData : await mel.melFunc('{PROB_REMOVED(\"delimited\",\"dat\",\"com\")}');\r\n        this.markRemovedMelDataFromList(this.removedProblemMelData, this.removedProblem);\r\n    }\r\n\r\n    private loadMelDataToList = (data: string, predicate: (value: string)=> Problem) => {\r\n        let dataArray = StringInternal(data).toList();\r\n        for (let index = 0; index < dataArray.length; index++) {\r\n            this.push(predicate(dataArray[index]));\r\n        }\r\n    }\r\n\r\n    private markRemovedMelDataFromList = (data: string, predicate: (value: string) => Problem) => {\r\n        let dataArray = StringInternal(data).toList();\r\n        for (let index = 0; index < dataArray.length; index++) {\r\n            let problem = predicate(dataArray[index]);\r\n            this.forEach((value) => { // find in the list and mark status as Changed\r\n                if (value.problemId === problem.problemId) {\r\n                    value.status = ObjectStatus.Changed;\r\n                }\r\n            });\r\n            this.push(problem); //Added with Removed\r\n        }\r\n    }\r\n\r\n\r\n    currentProblem = (value: string): Problem => {\r\n        let data: Array<string> = (value == null) ? [] : value.split('^');\r\n        let problem: Problem = new Problem();\r\n\r\n        problem = this._locadMelDataFromString(data, problem);\r\n\r\n        return problem;\r\n    }\r\n\r\n    newProblem = (value: string): Problem => {\r\n        let data: Array<string> = (value == null) ? [] : value.split('^');\r\n        let problem: Problem = new Problem();\r\n        problem.status = ObjectStatus.Added;\r\n\r\n        problem = this._locadMelDataFromString(data, problem);\r\n\r\n        return problem;\r\n    }\r\n\r\n    removedProblem = (value: string): Problem => {\r\n        let data: Array<string> = (value == null) ? [] : value.split('^');\r\n        let problem: Problem = new Problem();\r\n        problem.status = ObjectStatus.Removed;\r\n\r\n        problem = this._locadMelDataFromString(data, problem);\r\n\r\n        return problem;\r\n    }\r\n\r\n    _locadMelDataFromString = (data: Array<string>, problem: Problem) => {\r\n        problem.type = (data.length > 0) ? data[0] : '';\r\n        problem.description = (data.length > 1) ? data[1] : '';\r\n        problem.codeIcd9 = (data.length > 2) ? data[2] : '';\r\n        problem.comment = (data.length > 3) ? data[3] : '';\r\n        problem.onsetDate = StringInternal((data.length > 4) ? data[4] : '').toDate();\r\n        problem.stopDate = StringInternal((data.length > 5) ? data[5] : '').toDate();\r\n        problem.stopReason = (data.length > 6) ? data[6] : '';\r\n        problem.codeIcd10 = (data.length > 7) ? data[7] : '';\r\n        problem.lastModifiedDate = (data.length > 9) ? data[9] : '';\r\n\r\n        let _problemId = (data.length > 8) ? data[8] : '';\r\n        let index = _problemId.indexOf('.');\r\n        _problemId = (index > -1) ? _problemId.substr(0, index) : _problemId;\r\n        problem.problemId = _problemId;\r\n\r\n        return problem;\r\n    }\r\n\r\n    filterProblems = (predicate: (value: Problem, index: number, array: Problem[]) => unknown, thisArg?: any): Problems => {\r\n        let problems = new Problems();\r\n        problems.push(...super.filter(predicate, thisArg));\r\n        return problems;\r\n    }\r\n \r\n}","import { StringInternal } from '../factories/factories';\r\nimport { Protocol } from './Protocol';\r\nimport { Observation } from './Observation';\r\nimport { ObservationType } from './ObservationType';\r\nimport { Address } from './Address';\r\nimport { Phone } from './Phone';\r\nimport { Immunization } from './Immunization';\r\nimport { FlowsheetObservation } from './FlowsheetObservation';\r\nimport { PatientContact } from './PatientContact';\r\nimport { ReferringProvider } from './ReferringProvider';\r\nimport { Insurance } from './Insurance';\r\nimport { CarePlan } from './CarePlan';\r\nimport { Location } from './Location';\r\nimport { Allergies } from './Allergies';\r\nimport { EmrMel } from './EmrMel';\r\nimport { IArrayAdditionalMethods } from '../interfaces';\r\nimport { LocationType } from '../enums';\r\nimport { AllergiesExternal, DemographicsExternal } from './external/external';\r\nimport { emptyImage } from '../consts/strings';\r\nimport { System } from './System';\r\nimport { Problems } from './Problems';\r\n\r\n// TODO: string = PATIENT.REGNOTE; REGGUARANTOR\r\nexport class Patient {\r\n\r\n    private readonly observationType: ObservationType = new ObservationType();\r\n    private _patientId: string;\r\n    private _pid: string;\r\n    private _medicalRecordId: string;\r\n    private _externalId: string;\r\n    private _printId: string;\r\n    private _ssn: string;\r\n    private _firstName: string;\r\n    private _lastName: string;\r\n    private _middleName: string;\r\n    private _labelName: string;\r\n    private _namePrefix: string;\r\n    private _nameSuffix: string;\r\n    private _sex: string;\r\n    private _race: string;\r\n    private _ethnicity: string;\r\n    private _dateOfBirth: string;\r\n    private _dateOfDeath: string;\r\n    private _maritalStatus: string;\r\n    private _language: string;\r\n    private _email: string;\r\n    private _contactBy: string;\r\n    private _contacts: string;\r\n    private _contactsArray: IArrayAdditionalMethods<PatientContact> = [];\r\n    private _employmentStatus: string;\r\n    private _clinicStatus: string;\r\n    private _primaryCarePhysicianName: string;\r\n    private _problems: Problems;\r\n    private _observations: { [name: string]: IArrayAdditionalMethods<Observation> } = {}\r\n    private _observationList: string;\r\n    private _observatiosArray: IArrayAdditionalMethods<FlowsheetObservation> = [];\r\n    private _protocols: string;\r\n    private _protocolsArray: IArrayAdditionalMethods<Protocol> = [];\r\n    private _insurances: IArrayAdditionalMethods<Insurance> = [];\r\n    private _immunizations: string;\r\n    private _immunizationsArray: IArrayAdditionalMethods<Immunization> = [];\r\n    private _carePlans: string;\r\n    private _carePlansArray: IArrayAdditionalMethods<CarePlan> = [];\r\n    private _locations: string;\r\n    private _locationsId: string;\r\n    private _locationsArray: IArrayAdditionalMethods<Location> = [];\r\n    private _allergies = new Allergies(this._mel);\r\n    private _referringProvider = new ReferringProvider(this._mel);\r\n    private _phone: Phone;\r\n    private _address: Address;\r\n    private _registrationNote: string;\r\n    private _patientPicture: string;\r\n    private _lastOfficeVisit: Date;\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _demographics?: DemographicsExternal,\r\n        public _allergiesExternal?: AllergiesExternal\r\n    ) {\r\n        if (_demographics) {\r\n            this._patientPicture = _demographics.patientPicture;\r\n            this._lastOfficeVisit = _demographics.lastOfficeVisitDate;\r\n            this._registrationNote = _demographics.registrationNote;\r\n            this._language = _demographics.preferredLanguage;\r\n            if (_demographics.identifierList) {\r\n                let patientId = _demographics.identifierList.find(e => e.identifierDomain.domainId === \"1.2.3.4.700\");\r\n                this._patientId = (patientId) ? patientId.idValue : this._patientId;\r\n                this._printId = this._patientId;\r\n\r\n                let externalId = _demographics.identifierList.find(e => e.identifierDomain.domainId === \"1.2.3.4.200\");\r\n                this._externalId = (externalId) ? externalId.idValue : this._externalId;\r\n\r\n                let medicalRecordId = _demographics.identifierList.find(e => e.identifierDomain.domainId === \"1.2.3.4.400\");\r\n                this._medicalRecordId = (medicalRecordId) ? medicalRecordId.idValue : this._medicalRecordId;\r\n            }\r\n            if (_demographics.person) {\r\n                let birthDate = System.formatDate(_demographics.person.birthDate);\r\n                this._dateOfBirth = (birthDate) ? birthDate : this._dateOfBirth;\r\n                this._dateOfDeath = (_demographics.person.deceaseIndSpecified && _demographics.person.deceaseInd) ?\r\n                    System.formatDate(_demographics.person.deceaseTime) : this._dateOfDeath;\r\n\r\n                this._sex = _demographics.person.genderCode;\r\n                if (_demographics.person.mailingAddressList && _demographics.person.mailingAddressList[0]) {\r\n                    this._address = (this._address) ? this._address : new Address(this._mel, _demographics.person.mailingAddressList[0]);\r\n                }\r\n                if (_demographics.person.electronicAddressList) {\r\n                    this._phone = (this._phone) ? this._phone : new Phone(this._mel, _demographics.person.electronicAddressList);\r\n                }\r\n                if (_demographics.person.personNameList && _demographics.person.personNameList[0]) {\r\n                    this._firstName = (_demographics.person.personNameList[0].givenName === null) ?\r\n                        '' : _demographics.person.personNameList[0].givenName;\r\n                    this._lastName = (_demographics.person.personNameList[0].familyName === null) ?\r\n                        '' : _demographics.person.personNameList[0].familyName;\r\n                    this._middleName = (_demographics.person.personNameList[0].middleName === null) ?\r\n                        '' : _demographics.person.personNameList[0].middleName;\r\n\r\n                    this._labelName = this._firstName\r\n                        + ' ' + this._middleName\r\n                        + ' ' + this._lastName;\r\n\r\n                    this._namePrefix = _demographics.person.personNameList[0].prefixName;\r\n                    this._nameSuffix = _demographics.person.personNameList[0].suffixName;\r\n                }\r\n                this._pid = _demographics.patientKeySpecified ? _demographics.patientKey.toString() : this._pid;\r\n                if (_demographics.person.identifierList) {\r\n                    let ssn = _demographics.person.identifierList.find(e => e.identifierDomain.domainId === \"1.2.3.4.300\");\r\n                    this._ssn = (ssn) ? ssn.idValue : this._ssn;\r\n                    this._ssn = (this._ssn) ? this._ssn.replace(/(\\d{3})(\\d{3})(\\d+)/, '$1-$2-$3') : this._ssn;\r\n                }\r\n            }\r\n        }\r\n\r\n        this._address = (this._address) ? this._address : new Address(this._mel);\r\n        this._phone = (this._phone) ? this._phone : new Phone(this._mel);\r\n    }\r\n\r\n    get lastOfficeVisit() {\r\n        return this._lastOfficeVisit;\r\n    }\r\n\r\n    get patientPicture() {\r\n        this._patientPicture = (this._patientPicture !== undefined) ? this._patientPicture\r\n            : emptyImage;\r\n        return this._patientPicture;\r\n    }\r\n\r\n    // Returns the patients ID number\r\n    get patientId() {\r\n        this._patientId = (this._patientId !== undefined) ? this._patientId : this._mel.melFunc('{PATIENT.PATIENTID}');\r\n        return this._patientId;\r\n    }\r\n\r\n    async patientIdAsync() {\r\n        this._patientId = (this._patientId !== undefined) ? this._patientId : await this._mel.melFunc('{PATIENT.PATIENTID}');\r\n        return this._patientId;\r\n    }\r\n\r\n    // Returns the internal PID number for patient record\r\n    get pid() {\r\n        this._pid = (this._pid !== undefined) ? this._pid : this._mel.melFunc('{find(\"patient\", \"PID\")}');\r\n        return this._pid;\r\n    }\r\n\r\n    async pidAsync() {\r\n        this._pid = (this._pid !== undefined) ? this._pid : await this._mel.melFunc('{find(\"patient\", \"PID\")}');\r\n        return this._pid;\r\n    }\r\n\r\n    // Returns the patients medical record number.\r\n    get medicalRecordId() {\r\n        this._medicalRecordId = (this._medicalRecordId !== undefined) ? this._medicalRecordId : this._mel.melFunc('{PATIENT.MEDRECNO}');\r\n        return this._medicalRecordId;\r\n    }\r\n\r\n    async medicalRecordIdAsync() {\r\n        this._medicalRecordId = (this._medicalRecordId !== undefined) ? this._medicalRecordId : await this._mel.melFunc('{PATIENT.MEDRECNO}');\r\n        return this._medicalRecordId;\r\n    }\r\n\r\n    // Returns the patients ID from an external system; such as a billing or lab system\r\n    get externalId() {\r\n        this._externalId = (this._externalId !== undefined) ? this._externalId : this._mel.melFunc('{PATIENT.EXTERNALID}');\r\n        return this._externalId;\r\n    }\r\n\r\n    async externalIdAsync() {\r\n        this._externalId = (this._externalId !== undefined) ? this._externalId : await this._mel.melFunc('{PATIENT.EXTERNALID}');\r\n        return this._externalId;\r\n    }\r\n\r\n    // Returns the preferred patient ID number for printed materials.\r\n    get printId() {\r\n        this._printId = (this._printId !== undefined) ? this._printId : this._mel.melFunc('{PATIENT.PRINTID}');\r\n        return this._printId;\r\n    }\r\n\r\n    async printIdAsync() {\r\n        this._printId = (this._printId !== undefined) ? this._printId : await this._mel.melFunc('{PATIENT.PRINTID}');\r\n        return this._printId;\r\n    }\r\n\r\n    // Returns the patients Social Security number.\r\n    get ssn() {\r\n        this._ssn = (this._ssn !== undefined) ? this._ssn : this._mel.melFunc('{PATIENT.SOCSECNO}');\r\n        return this._ssn;\r\n    }\r\n\r\n    async ssnAsync() {\r\n        this._ssn = (this._ssn !== undefined) ? this._ssn : await this._mel.melFunc('{PATIENT.SOCSECNO}');\r\n        return this._ssn;\r\n    }\r\n\r\n    // Returns the patients first name.\r\n    get firstName() {\r\n        this._firstName = (this._firstName !== undefined) ? this._firstName : this._mel.melFunc('{PATIENT.FIRSTNAME}');\r\n        return this._firstName;\r\n    }\r\n\r\n    async firstNameAsync() {\r\n        this._firstName = (this._firstName !== undefined) ? this._firstName : await this._mel.melFunc('{PATIENT.FIRSTNAME}');\r\n        return this._firstName;\r\n    }\r\n\r\n    // Returns the patients last name.\r\n    get lastName() {\r\n        this._lastName = (this._lastName !== undefined) ? this._lastName : this._mel.melFunc('{PATIENT.LASTNAME}');\r\n        return this._lastName;\r\n    }\r\n\r\n    async lastNameAsync() {\r\n        this._lastName = (this._lastName !== undefined) ? this._lastName : await this._mel.melFunc('{PATIENT.LASTNAME}');\r\n        return this._lastName;\r\n    }\r\n\r\n    // Returns the patients middle name.\r\n    get middleName() {\r\n        this._middleName = (this._middleName !== undefined) ? this._middleName : this._mel.melFunc('{PATIENT.MIDDLENAME}');\r\n        return this._middleName;\r\n    }\r\n\r\n    async middleNameAsync() {\r\n        this._middleName = (this._middleName !== undefined) ? this._middleName : await this._mel.melFunc('{PATIENT.MIDDLENAME}');\r\n        return this._middleName;\r\n    }\r\n\r\n    // Returns the patients full name formatted as follows: string = title first middle last; suffix\r\n    get labelName() {\r\n        this._labelName = (this._labelName !== undefined) ? this._labelName : this._mel.melFunc('{PATIENT.LABELNAME}');\r\n        return this._labelName;\r\n    }\r\n\r\n    async labelNameAsync() {\r\n        this._labelName = (this._labelName !== undefined) ? this._labelName : await this._mel.melFunc('{PATIENT.LABELNAME}');\r\n        return this._labelName;\r\n    }\r\n\r\n    // Name Prefix\r\n    get namePrefix() {\r\n        this._namePrefix = (this._namePrefix !== undefined) ? this._namePrefix : this._mel.melFunc('{PATIENT.TITLE}');\r\n        return this._namePrefix;\r\n    }\r\n\r\n    async namePrefixAsync() {\r\n        this._namePrefix = (this._namePrefix !== undefined) ? this._namePrefix : await this._mel.melFunc('{PATIENT.TITLE}');\r\n        return this._namePrefix;\r\n    }\r\n\r\n    // Name Suffix\r\n    get nameSuffix() {\r\n        this._nameSuffix = (this._nameSuffix !== undefined) ? this._nameSuffix : this._mel.melFunc('{PATIENT.ENTITLEMENTS}');\r\n        return this._nameSuffix;\r\n    }\r\n\r\n    async nameSuffixAsync() {\r\n        this._nameSuffix = (this._nameSuffix !== undefined) ? this._nameSuffix : await this._mel.melFunc('{PATIENT.ENTITLEMENTS}');\r\n        return this._nameSuffix;\r\n    }\r\n\r\n    // Patients sex.\r\n    get sex() {\r\n        this._sex = (this._sex  !== undefined) ? this._sex : this._mel.melFunc('{PATIENT.SEX}');\r\n        return this._sex;\r\n    }\r\n\r\n    async sexAsync() {\r\n        this._sex = (this._sex !== undefined) ? this._sex : await this._mel.melFunc('{PATIENT.SEX}');\r\n        return this._sex;\r\n    }\r\n\r\n    // Patients race\r\n    get race() {\r\n        this._race = (this._race  !== undefined) ? this._race : this._mel.melFunc('{PATIENT.RACE}');\r\n        return this._race;\r\n    }\r\n\r\n    async raceAsync() {\r\n        this._race = (this._race !== undefined) ? this._race : await this._mel.melFunc('{PATIENT.RACE}');\r\n        return this._race;\r\n    }\r\n\r\n    // Patients ethnicity\r\n    get ethnicity() {\r\n        this._ethnicity = (this._ethnicity  !== undefined) ? this._ethnicity : this._mel.melFunc('{PATIENT.ETHNICITY}');\r\n        return this._ethnicity;\r\n    }\r\n\r\n    async ethnicityAsync() {\r\n        this._ethnicity = (this._ethnicity !== undefined) ? this._ethnicity : await this._mel.melFunc('{PATIENT.ETHNICITY}');\r\n        return this._ethnicity;\r\n    }\r\n\r\n    // Returns the patients birth date/time\r\n    get dateOfBirth() {\r\n        this._dateOfBirth = (this._dateOfBirth  !== undefined) ? this._dateOfBirth : this._mel.melFunc('{PATIENT.DATEOFBIRTH}');\r\n        return this._dateOfBirth;\r\n    }\r\n\r\n    async dateOfBirthAsync() {\r\n        this._dateOfBirth = (this._dateOfBirth !== undefined) ? this._dateOfBirth : await this._mel.melFunc('{PATIENT.DATEOFBIRTH}');\r\n        return this._dateOfBirth;\r\n    }\r\n\r\n    // Returns the patients date of death\r\n    get dateOfDeath() {\r\n        this._dateOfDeath = (this._dateOfDeath  !== undefined) ? this._dateOfDeath : this._mel.melFunc('{PATIENT.DATEOFDEATH}');\r\n        return this._dateOfDeath;\r\n    }\r\n\r\n    async dateOfDeathAsync() {\r\n        this._dateOfDeath = (this._dateOfDeath !== undefined) ? this._dateOfDeath : await this._mel.melFunc('{PATIENT.DATEOFDEATH}');\r\n        return this._dateOfDeath;\r\n    }\r\n\r\n    // Returns the patients marital status (Single; Married; Divorced; Widowed; Separated; Other or Undetermined)\r\n    get maritalStatus() {\r\n        this._maritalStatus = (this._maritalStatus  !== undefined) ? this._maritalStatus : this._mel.melFunc('{PATIENT.MARITALSTATUS}');\r\n        return this._maritalStatus;\r\n    }\r\n\r\n    async maritalStatusAsync() {\r\n        this._maritalStatus = (this._maritalStatus !== undefined) ? this._maritalStatus : await this._mel.melFunc('{PATIENT.MARITALSTATUS}');\r\n        return this._maritalStatus;\r\n    }\r\n\r\n    // Returns the patients preferred language\r\n    get language() {\r\n        this._language = (this._language  !== undefined) ? this._language : this._mel.melFunc('{PATIENT.PREFLANG}');\r\n        return this._language;\r\n    }\r\n\r\n    async languageAsync() {\r\n        this._language = (this._language !== undefined) ? this._language : await this._mel.melFunc('{PATIENT.PREFLANG}');\r\n        return this._language;\r\n    }\r\n\r\n    // Returns the patients e-mail address\r\n    get email() {\r\n        this._email = (this._email  !== undefined) ? this._email : this._mel.melFunc('{PATIENT.EMAIL}');\r\n        return this._email;\r\n    }\r\n\r\n    async emailAsync() {\r\n        this._email = (this._email !== undefined) ? this._email : await this._mel.melFunc('{PATIENT.EMAIL}');\r\n        return this._email;\r\n    }\r\n\r\n    // Returns the patients contact by information\r\n    get contactBy() {\r\n        this._contactBy = (this._contactBy  !== undefined) ? this._contactBy : this._mel.melFunc('{PATIENT.CONTACTBY}');\r\n        return this._contactBy;\r\n    }\r\n\r\n    async contactByAsync() {\r\n        this._contactBy = (this._contactBy !== undefined) ? this._contactBy : await this._mel.melFunc('{PATIENT.CONTACTBY}');\r\n        return this._contactBy;\r\n    }\r\n\r\n    get registrationNote() {\r\n        this._registrationNote = (this._registrationNote  !== undefined) ? this._registrationNote : this._mel.melFunc('{PATIENT.REGNOTE}');\r\n        return this._registrationNote;\r\n    }\r\n\r\n    async registrationNoteAsync() {\r\n        this._registrationNote = (this._registrationNote !== undefined) ? this._registrationNote : await this._mel.melFunc('{PATIENT.REGNOTE}');\r\n        return this._registrationNote;\r\n    }\r\n\r\n    // Returns a list of the contacts for the current patient\r\n    get contacts() {\r\n        if (this._contactsArray.length === 0) {\r\n            this._contacts = (this._contacts  !== undefined) ? this._contacts : this._mel.melFunc('{PATIENT.CONTACTS}');\r\n            let dataArray = StringInternal(this._contacts).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._contactsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._contactsArray.push(new PatientContact(dataArray[index]));\r\n            }\r\n\r\n            this._contactsArray.tag = 'PATIENT.CONTACTS';\r\n\r\n            this._contactsArray.toMelString = () => {\r\n                return this._contacts;\r\n            }\r\n        }\r\n        return this._contactsArray;\r\n    }\r\n\r\n    async contactsAsync() {\r\n        if (this._contactsArray.length === 0) {\r\n            this._contacts = (this._contacts !== undefined) ? this._contacts : await this._mel.melFunc('{PATIENT.CONTACTS}');\r\n            let dataArray = StringInternal(this._contacts).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._contactsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._contactsArray.push(new PatientContact(dataArray[index]));\r\n            }\r\n\r\n            this._contactsArray.tag = 'PATIENT.CONTACTS';\r\n\r\n            this._contactsArray.toMelString = () => {\r\n                return this._contacts;\r\n            }\r\n        }\r\n        return this._contactsArray;\r\n    }\r\n\r\n    // Returns the patients employment status.\r\n    get employmentStatus() {\r\n        this._employmentStatus = (this._employmentStatus  !== undefined) ? this._employmentStatus : this._mel.melFunc('{PATIENT.EMPLSTATUS}');\r\n        return this._employmentStatus;\r\n    }\r\n\r\n    async employmentStatusAsync() {\r\n        this._employmentStatus = (this._employmentStatus !== undefined) ? this._employmentStatus : await this._mel.melFunc('{PATIENT.EMPLSTATUS}');\r\n        return this._employmentStatus;\r\n    }\r\n\r\n    // Patients current status in the clinic\r\n    get clinicStatus() {\r\n        this._clinicStatus = (this._clinicStatus  !== undefined) ? this._clinicStatus : this._mel.melFunc('{PATIENT.PSTATUS}');\r\n        return this._clinicStatus;\r\n    }\r\n\r\n    async clinicStatusAsync() {\r\n        this._clinicStatus = (this._clinicStatus !== undefined) ? this._clinicStatus : await this._mel.melFunc('{PATIENT.PSTATUS}');\r\n        return this._clinicStatus;\r\n    }\r\n\r\n    // Name of the primary care physician\r\n    get primaryCarePhysicianName() {\r\n        this._primaryCarePhysicianName = (this._primaryCarePhysicianName !== undefined) ?\r\n            this._primaryCarePhysicianName : this._mel.melFunc('{PATIENT.PCP}');\r\n        return this._primaryCarePhysicianName;\r\n    }\r\n\r\n    async primaryCarePhysicianNameAsync() {\r\n        this._primaryCarePhysicianName = (this._primaryCarePhysicianName !== undefined) ?\r\n            this._primaryCarePhysicianName : await this._mel.melFunc('{PATIENT.PCP}');\r\n        return this._primaryCarePhysicianName;\r\n    }\r\n\r\n    // Lists all problems \r\n    get problems() {\r\n        if (!this._problems) {\r\n            this._problems = new Problems();\r\n            this._problems.load(this._mel);\r\n        }\r\n    \r\n        this._problems.tag = 'PROB_AFTER';\r\n\r\n        return this._problems;\r\n    }\r\n\r\n    async problemsAsync() {\r\n        if (!this._problems) {\r\n            this._problems = new Problems();\r\n            await this._problems.loadAsync(this._mel);\r\n        }\r\n        return this._problems;\r\n    }\r\n\r\n    // Lists observations by name. \r\n    observations = (name: string) => {\r\n        if (this._observations[name] == null) {\r\n            let updateData = this._mel.melFunc('{LIST_OBS(\"' + name + '\",\"Update\",\"Delimited\",\"value\")}');\r\n            let dataArray = StringInternal(updateData).toList();\r\n            let observationsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                observationsArray.push(new Observation(name, this.observationType.DocumentUnsigned, dataArray[index], this._mel));\r\n            }\r\n            this._observations[name] = observationsArray;\r\n\r\n            let signedData = this._mel.melFunc('{LIST_OBS(\"' + name + '\",\"Signed\",\"Delimited\",\"value\")}');\r\n            let dataArrayU = StringInternal(signedData).toList();\r\n            for (let index = 0; index < dataArrayU.length; index++) {\r\n                this._observations[name].push(new Observation(name, this.observationType.Signed, dataArrayU[index], this._mel));\r\n            }\r\n\r\n            this._observations[name].tag = 'LIST_OBS.' + name;\r\n        }\r\n        return this._observations[name];\r\n    }\r\n\r\n    // Lists all FLOWSHEET observations. \r\n    flowsheetObservations(flowsheet?: string) {\r\n        let flowsheetValue = '';\r\n        if (flowsheet) {\r\n            flowsheetValue = flowsheet;\r\n        }\r\n        else {\r\n            flowsheetValue = this._mel.melFunc('{_EncodeViewNameBS}');\r\n        }\r\n        if (this._observatiosArray.length === 0 || this._observatiosArray.tag != 'GET_FLOWSHEET_VALUES:' + flowsheetValue) {\r\n            this._observationList = this._mel.melFunc('{GET_FLOWSHEET_VALUES(\"' + flowsheetValue + '\",\"DELIM\")}');\r\n            let dataArray = StringInternal(this._observationList).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._observatiosArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._observatiosArray.push(new FlowsheetObservation(dataArray[index]));\r\n            }\r\n\r\n            this._observatiosArray.tag = 'GET_FLOWSHEET_VALUES:' + flowsheetValue;\r\n\r\n            this._observatiosArray.toMelString = () => {\r\n                return this._observationList;\r\n            }\r\n        }\r\n        return this._observatiosArray;\r\n    }\r\n\r\n    // Protocols tell you when a patient is due for a particular action; based on factors that include sex; age; current problems; and current medications. \r\n    // The protocols contains array of observations required for this patient; as indicated by protocols set up in this clinic.\r\n    get protocols() {\r\n        if (this._protocolsArray.length === 0) {\r\n            this._protocols = (this._protocols  !== undefined) ? this._protocols : this._mel.melFunc('{LISTPROTOCOLSHORT(\"list\")}');\r\n            let dataArray = StringInternal(this._protocols).toList('\\r\\n');\r\n\r\n            /*jslint plusplus: true */\r\n            this._protocolsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._protocolsArray.push(new Protocol(dataArray[index]))\r\n            }\r\n\r\n            this._protocolsArray.tag = 'LISTPROTOCOLSHORT(\"list\")';\r\n\r\n            this._protocolsArray.toMelString = () => {\r\n                return this._protocols;\r\n            }\r\n        }\r\n        return this._protocolsArray;\r\n    }\r\n   \r\n    // List of patient insurances \r\n    get insurances() {\r\n        if (this._insurances.length === 0) {\r\n            this._insurances.push(new Insurance('P', this._mel));\r\n            this._insurances.push(new Insurance('S', this._mel));\r\n            this._insurances.push(new Insurance('T', this._mel));\r\n        }\r\n        return this._insurances;\r\n    }\r\n\r\n    // List of patient immunizations \r\n    get immunizations() {\r\n        if (this._immunizationsArray.length === 0) {\r\n            this._immunizations = (this._immunizations  !== undefined) ? this._immunizations : this._mel.melFunc('{IMMUN_GETLIST()}');\r\n            let dataArray = StringInternal(this._immunizations).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._immunizationsArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._immunizationsArray.push(new Immunization(dataArray[index], this._mel));\r\n            }\r\n\r\n            this._immunizationsArray.tag = 'IMMUN_GETLIST';\r\n\r\n            this._immunizationsArray.toMelString = () => {\r\n                return this._immunizations;\r\n            }\r\n        }\r\n        return this._immunizationsArray;\r\n    }\r\n\r\n    get carePlans() {\r\n        if (this._carePlansArray.length === 0) {\r\n            this._carePlans = (this._carePlans  !== undefined) ? this._carePlans : this._mel.melFunc('{MEL_LIST_CARE_PLAN(\"delim\",\"all\",\"all\")}');\r\n            let dataArray = StringInternal(this._carePlans).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._carePlansArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._carePlansArray.push(new CarePlan(dataArray[index], this._mel));\r\n            }\r\n\r\n            this._carePlansArray.tag = 'MEL_LIST_CARE_PLAN';\r\n\r\n            this._carePlansArray.toMelString = () => {\r\n                return this._carePlans;\r\n            }\r\n        }\r\n        return this._carePlansArray;\r\n    }\r\n\r\n    async carePlansAsync() {\r\n        if (this._carePlansArray.length === 0) {\r\n            this._carePlans = (this._carePlans !== undefined) ? this._carePlans : await this._mel.melFunc('{MEL_LIST_CARE_PLAN(\"delim\",\"all\",\"all\")}');\r\n            let dataArray = StringInternal(this._carePlans).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            this._carePlansArray = [];\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._carePlansArray.push(new CarePlan(dataArray[index], this._mel));\r\n            }\r\n\r\n            this._carePlansArray.tag = 'MEL_LIST_CARE_PLAN';\r\n\r\n            this._carePlansArray.toMelString = () => {\r\n                return this._carePlans;\r\n            }\r\n        }\r\n        return this._carePlansArray;\r\n    }\r\n\r\n    get locations() {\r\n        if (this._locationsArray.length === 0) {\r\n            this._locations = (this._locations  !== undefined) ? this._locations : this._mel.melFunc('{PATIENT.HOMELOCATIONNAME}');\r\n            this._locationsId = (this._locationsId  !== undefined) ? this._locationsId : this._mel.melFunc('{PATIENT.HOMELOCATIONABBREVNAME}');\r\n            let locationProperty = new Location(this._locationsId, this._locations, LocationType.Home);\r\n            this._locationsArray.push(locationProperty);\r\n            this._locationsArray.findByType =\r\n                (function (value) {\r\n                    let index;\r\n                    if (typeof (value) === \"number\") {\r\n                        for (index = 0; index < this.length; index++) {\r\n                            if (this[index].locationType === value) {\r\n                                return this[index];\r\n                            }\r\n                        }\r\n                    }\r\n                    return undefined;\r\n                });\r\n        }\r\n        return this._locationsArray;\r\n    }\r\n\r\n    get allergies(): Allergies {\r\n        return this._allergies;\r\n    }\r\n\r\n    // referring provider\r\n    get referringProvider() {\r\n        return this._referringProvider;\r\n    }\r\n\r\n    get phone() {\r\n        return this._phone;\r\n    }\r\n\r\n    // Represent patient address object\r\n    get address() {\r\n        return this._address;\r\n    }\r\n\r\n\r\n    // TODO: aren't exist:\r\n\r\n    // List of all orders\r\n    orders: Object;\r\n    // List of all directives\r\n    directives: Object;\r\n    // Lists appointments\r\n    appointments: Object;\r\n    // List all medications and refills\r\n    medications: Object;\r\n}","import { User } from './User';\r\nimport { EmrMel } from './EmrMel';\r\nimport { StringInternal, GetCurrentUser } from '../factories/factories';\r\nimport { UserCallFunction } from '../enums';\r\nimport { IArrayAdditionalMethods } from '../interfaces';\r\n\r\nexport class Users {\r\n\r\n    private _currentUser: User;\r\n    private _user: User;\r\n    private _users: string;\r\n    private _usersArray: IArrayAdditionalMethods<User> = [];\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    getUser = (value?: string) => {\r\n        if (value != null) {\r\n            this._user = (this._user != null) ? this._user : new User(this._mel.melFunc('{GETUSERINFO(\"' + value + '\")}'), UserCallFunction.UserInfo);\r\n            return this._user;\r\n        }\r\n        this._currentUser = (this._currentUser != null) ? this._currentUser : new User(GetCurrentUser(this._mel), UserCallFunction.UserInfo);\r\n        return this._currentUser;\r\n    }\r\n\r\n    getUsers = () => {\r\n        if (this._usersArray.length === 0) {\r\n            this._users = this._mel.melFunc('{GET_USER_LIST(USER.CURLOCATIONABBREVNAME, \"\", \"delimited\", true)}');\r\n            let dataArray = StringInternal(this._users).toList();\r\n\r\n            /*jslint plusplus: true */\r\n            for (let index = 0; index < dataArray.length; index++) {\r\n                this._usersArray.push(new User(dataArray[index], UserCallFunction.UserList));\r\n            }\r\n\r\n            this._usersArray.tag = 'GET_USER_LIST';\r\n\r\n            this._usersArray.toMelString = () => {\r\n                return this._users;\r\n            }\r\n        }\r\n        return this._usersArray;\r\n    }\r\n}","import { EmrMel } from '../classes/EmrMel';\r\n\r\nexport function GetCurrentUser(_mel: EmrMel) {\r\n    return _mel.melFunc('{GETUSERINFO(\"' + _mel.melFunc('{USER.LOGINNAME}') + '\")}') + '^' +\r\n        _mel.melFunc('{USER.CURLOCATIONNAME}') + '^' +\r\n        _mel.melFunc('{USER.FIRSTNAME}') + '^' +\r\n        _mel.melFunc('{USER.MIDDLENAME}') + '^' +\r\n        _mel.melFunc('{USER.LASTNAME}');\r\n}","/// <reference types=\"chrome\"/>\r\n\r\nimport { simulatorChromeExtensionId } from \"../consts/strings\";\r\n\r\nexport class ExtensionExternalSimulator {\r\n\r\n    EvaluateMel = (data: any, _showWait: boolean = false): Promise<any> => {\r\n        return this.sendMessage(simulatorChromeExtensionId, { type: 'EvaluateMel', data: data });\r\n    }\r\n\r\n    get Demographics(): Promise<any> {\r\n        return this.sendMessage(simulatorChromeExtensionId, { type: 'Demographics' });\r\n    }\r\n\r\n    get Allergies(): Promise<any> {\r\n        return this.sendMessage(simulatorChromeExtensionId, { type: 'Allergies' });\r\n    }\r\n\r\n    private sendMessage = (editorExtensionId: string, data: any) => new Promise<any>((resolve, reject) => {\r\n        if (typeof (chrome) !== 'undefined') {\r\n            if (typeof (chrome.runtime) !== 'undefined') {\r\n                chrome.runtime.sendMessage(editorExtensionId, data, (response: any) => {\r\n                    if (typeof (response) !== 'undefined') {\r\n                        resolve(response);\r\n                    }\r\n                    else {\r\n                        resolve(null);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                reject('unsupported');\r\n            }\r\n        }\r\n        else {\r\n            reject('unsupported');\r\n        }\r\n    });\r\n}","/// <reference types=\"chrome\"/>\r\nimport { simulatorChromeExtensionId } from \"../consts/strings\";\r\nimport { GetActiveXErrorMessage } from \"../factories/factories\";\r\nimport { IsActiveXSupported } from \"../factories/IsActiveXSupported\";\r\nimport { ExtensionExternalSimulator } from \"./ExtensionExternalSimulator\";\r\n\r\nexport class Simulator {\r\n    private readonly appObjectNameSimulator = 'GE.CPO.EMR.90.Application.SIMULATOR';\r\n    private readonly noData: string = 'Data Access Error';\r\n    private _isExtensionEvaluated: boolean = false; // holds validation for async call to the Chrome Extension\r\n    private _isActiveX: boolean = false;            // true for activeX simulator\r\n    private app: any;\r\n    private _isSimulator: boolean = false;\r\n\r\n    private _ExtensionExternalSimulator: ExtensionExternalSimulator = new ExtensionExternalSimulator();\r\n\r\n    public isSimulatorAsync = async (): Promise<boolean> => {\r\n        if (this._isSimulator) {\r\n            return this._isSimulator;\r\n        }\r\n        else {\r\n            if (!this._isExtensionEvaluated) {\r\n                this._isSimulator = await this.sendMessage(simulatorChromeExtensionId, { type: \"version\" });\r\n                this._isExtensionEvaluated = true;\r\n            }\r\n            return this._isSimulator;\r\n        }\r\n    }\r\n\r\n    constructor(public _window: any) {\r\n        this.initialization();\r\n    }\r\n\r\n    private initialization = (): void => {\r\n        if (IsActiveXSupported(this._window)) {\r\n            try {\r\n                this.app = new this._window.ActiveXObject(this.appObjectNameSimulator);\r\n                this._isActiveX = true;\r\n                this._isSimulator = true;\r\n                console.info('mdObject is using ActiveX Simulator: ' + this.appObjectNameSimulator);\r\n            } catch (e) {\r\n                let errorMessage = GetActiveXErrorMessage(this.appObjectNameSimulator, e);\r\n                console.info(errorMessage);\r\n            }\r\n        }\r\n    }\r\n\r\n    get externalSimulator(): any {\r\n        return ((!this._isActiveX) ? this._ExtensionExternalSimulator : (this.app) ? this.app.external : this.noData);\r\n    }\r\n\r\n    private sendMessage = (editorExtensionId: string, data: any) => new Promise<boolean>((resolve, _reject) => {\r\n        if (typeof (chrome) !== 'undefined') {\r\n            if (typeof (chrome.runtime) !== 'undefined') {\r\n                chrome.runtime.sendMessage(editorExtensionId, data, (response: any) => {\r\n                    if (response) {\r\n                        console.info('mdObject is using Chrome Extension Simulator: ' + simulatorChromeExtensionId);\r\n                        resolve(true);\r\n                    }\r\n                    else {\r\n                        console.info('mdObject: Chrome Extension Simulator is missing or inactive');\r\n                        resolve(false);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                resolve(false);\r\n            }\r\n        }\r\n        else {\r\n            resolve(false);\r\n        }\r\n    });\r\n}","import { Location } from './Location';\r\nimport { EmrMel } from './EmrMel';\r\nimport { LocationType } from '../enums';\r\nimport { DocumentVariable } from '../factories/factories';\r\nimport { IArrayAdditionalMethods, IItem } from '../interfaces';\r\nimport { Emr } from './Emr';\r\n\r\nexport class ClinicalDocument {\r\n\r\n    private _letiables: string;\r\n    private _did: string;\r\n    private _xid: string;\r\n    private _documentId: string;\r\n    private _status: string;\r\n    private _location: string;\r\n    private _locationPropertyArray: IArrayAdditionalMethods<Location> = [];\r\n    private _locationProperty: Location;\r\n    private _dateOfUpdate: string;\r\n    private _provider: string;\r\n    private _userLoginName: string;\r\n\r\n    constructor(\r\n        public _mel: EmrMel,\r\n        public _emr?: Emr\r\n    ) { }\r\n\r\n    private save = (): void => {\r\n        this._mel.melFunc('{DOCUMENT.mdObject_letiables = \"' + JSON.stringify(this.rawValue).replace(/\"/g, '\\\\\"') + '\"}');\r\n    }\r\n\r\n    private rawValue: IItem = DocumentVariable({}, this.save);\r\n\r\n    // The letiables allows to save any JSON object with the clinicalDocument.\r\n    // Usage: $mdObject.clinicalDocument.letiables = {\"alex\":1} - creates object with letiable alex and assigned value 1.\r\n    //        $mdObject.clinicalDocument.letiables[\"alex\"]=4;  -changes value of alex to 4\r\n    //        $mdObject.clinicalDocument.letiables.save(); - saves the object with the document\r\n    get letiables() {\r\n        if (this._letiables == null) {\r\n            this._letiables = (this._letiables != null) ? this._letiables : this._mel.melFunc('{DOCUMENT.mdObject_letiables}');\r\n            this._letiables = (this._letiables !== '') ? this._letiables : JSON.stringify(this.rawValue);\r\n            try {\r\n                this.rawValue = DocumentVariable(JSON.parse(this._letiables), this.save);\r\n            } catch (e) {\r\n                this.rawValue = {}\r\n            }\r\n        }\r\n        return this.rawValue;\r\n    }\r\n\r\n    set letiables(val: IItem) {\r\n        for (let key in val) {\r\n            this.rawValue[key] = val[key];\r\n        }\r\n        this._mel.melFunc('{DOCUMENT.mdObject_letiables = \"' + JSON.stringify(this.rawValue).replace(/\"/g, '\\\\\"') + '\"}');\r\n    }\r\n\r\n    // The val allows to get or set DOCUMENT letiable\r\n    // Usage: $mdObject.clinicalDocument.val(\"MyVariable\") return value from {DOCUMENT.MyVariable}.\r\n    //        $mdObject.clinicalDocument.val(\"MyVariable\", \"High\") - assign value \"High\" to {DOCUMENT.MyVariable} and stores it with document (saves in database)\r\n    val = (key: string, value?: string): string => {\r\n        if (key == null || key.length === 0) {\r\n            return undefined;\r\n        }\r\n\r\n        if (value == null) {\r\n            return this._mel.melFunc('{DOCUMENT.' + key + '}');\r\n        } else {\r\n            return this._mel.melFunc('{DOCUMENT.' + key + '=\"' + value + '\"}');\r\n        }\r\n    }\r\n\r\n    get did() {\r\n        this._did = (this._did != null) ? this._did : this._mel.melFunc('{find(\"DOCUMENT\",\"DID\")}');\r\n        return this._did;\r\n    }\r\n\r\n    async didAsync(): Promise<string> {\r\n        this._did = (this._did != null) ? this._did : await this._emr.melFuncAsync('{find(\"DOCUMENT\",\"DID\")}');\r\n        return this._did;\r\n    }\r\n\r\n    get xid() {\r\n        this._xid = (this._xid != null) ? this._xid : this._mel.melFunc('{DOCUMENT.XID}').split('.')[0];\r\n        return this._xid;\r\n    }\r\n\r\n    // The unique document identifier for a document within a patient chart. You can see the Doc ID on each \r\n    // document and on a chart update. Each document in the patients chart has a Doc ID.\r\n    get documentId() {\r\n        this._documentId = (this._documentId != null) ? this._documentId : this._mel.melFunc('{DOCUMENT.VISDOCID}');\r\n        return this._documentId;\r\n    }\r\n\r\n\r\n    // Status of the current document. TODO: Convert to enum\r\n    // Code for document status:\r\n    //        A = Active\r\n    //        H = Hold\r\n    //        S = Signed\r\n    get status() {\r\n        this._status = (this._status != null) ? this._status : this._mel.melFunc('{DOCUMENT.STATUS}');\r\n        return this._status;\r\n    }\r\n\r\n    // The location of care of the document for the current chart update.\r\n    get location() {\r\n        if (this._locationPropertyArray.length === 0) {\r\n            this._location = (this._location != null) ? this._location : this._mel.melFunc('{DOCUMENT.LOCOFCARENAME}');\r\n            this._locationProperty = (this._locationProperty != null) ? this._locationProperty : new Location(this._location, this._location, LocationType.Current);\r\n            this._locationPropertyArray.push(this._locationProperty);\r\n            this._locationPropertyArray.findByType =\r\n                (function (value) {\r\n                    let i;\r\n                    if (typeof (value) === \"number\") {\r\n                        for (i = 0; i < this.length; i++) {\r\n                            if (this[i].locationType === value) {\r\n                                return this[i];\r\n                            }\r\n                        }\r\n                    }\r\n                    return undefined;\r\n\r\n                });\r\n        }\r\n\r\n        return this._locationPropertyArray;\r\n    }\r\n\r\n    get dateOfUpdate() {\r\n        this._dateOfUpdate = (this._dateOfUpdate != null) ? this._dateOfUpdate : this._mel.melFunc('{DOCUMENT.CLINICALDATE}');\r\n        return this._dateOfUpdate;\r\n    }\r\n\r\n    get provider() {\r\n        this._provider = (this._provider != null) ? this._provider : this._mel.melFunc('{DOCUMENT.PROVIDER}');\r\n        return this._provider;\r\n    }\r\n\r\n    get userLoginName() {\r\n        this._userLoginName = (this._userLoginName != null) ? this._userLoginName : this._mel.melFunc('{DOCUMENT.USERLOGINNAME}');\r\n        return this._userLoginName;\r\n    }\r\n}","//import { ArrayAsync } from \"../interfaces/ArrayAsync\"\r\nimport { EmrContent } from \"./EmrContent\"\r\nimport { EmrMel } from './EmrMel';\r\nimport { StringInternal } from '../factories/factories';\r\n\r\nexport class EmrContents extends Array<EmrContent> {\r\n    private _isLoaded = false;\r\n    melData: string;\r\n    tag: string;\r\n    _name: string;\r\n    \r\n    loadAsync = async(name: string, mel: EmrMel) => {\r\n        if (!this._isLoaded || this._name !== name) {\r\n            this._name = name;\r\n            this.tag = 'MEL_GET_CONTENT';\r\n            this.melData = await mel.melFunc('{MEL_GET_CONTENT(\\\"' + name + '\\\",\\\"MATCH\\\")}');\r\n\r\n            this.loadMelDataToList(this.melData, mel);\r\n\r\n            this._isLoaded = true;\r\n        }\r\n    }\r\n\r\n    load = (name: string, mel: EmrMel) => {\r\n        if (!this._isLoaded || this._name !== name) {\r\n            this._name = name;\r\n            this.tag = 'MEL_GET_CONTENT';\r\n            this.melData = mel.melFunc('{MEL_GET_CONTENT(\\\"' + name + '\\\",\\\"MATCH\\\")}');\r\n\r\n            this.loadMelDataToList(this.melData, mel);\r\n\r\n            this._isLoaded = true;\r\n        }\r\n    }\r\n\r\n    private loadMelDataToList = (data: string, mel: EmrMel) => {\r\n        let dataArray = StringInternal(data).toList();\r\n        for (let index = 0; index < dataArray.length; index++) {\r\n            this.push(new EmrContent({ data: dataArray[index], mel: mel }));\r\n        }\r\n    }\r\n}","import { EmrApp } from './EmrApp';\r\nimport { EmrMel } from './EmrMel';\r\nimport { EmrWindow } from './EmrWindow';\r\nimport { DemographicsExternal, ProblemExternal } from './external/external';\r\nimport { Patient } from './Patient';\r\nimport { Users } from './Users';\r\nimport { Simulator } from '../simulator/simulator';\r\nimport { ClinicalDocument } from './ClinicalDocument';\r\nimport { LocationType, UserCallFunction } from '../enums'\r\nimport { ObsTermsMap } from './ObsTermsMap';\r\nimport { AllergiesExternal } from './external/AllergiesExternal';\r\nimport { EmrContents } from './EmrContents';\r\n\r\nexport class Emr {\r\n\r\n    private _emrMel: EmrMel;\r\n    private _emrApp: EmrApp;\r\n    private _melContent: { [name: string]: EmrContents } = {}\r\n    private _emrWindow: EmrWindow;\r\n    private _version: string;\r\n    private _external: any;\r\n    private _baseServicesUrl: string;\r\n    private _demographics: string;\r\n    private _allergiesJson: string;\r\n    private _problemsJson: string;\r\n    private _problemExternalList: ProblemExternal[] = [];\r\n    private _simulator: Simulator;\r\n    private _clinicalDocument: ClinicalDocument;\r\n    private _obsTermsMap: ObsTermsMap;\r\n\r\n    private _patient: Patient;\r\n    private _users: Users;\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _document: any\r\n    ) {\r\n        this._simulator = new Simulator(this._window); // should be the first here\r\n\r\n        this._window['_melOpener'] = this.emrMel;\r\n        this._window['_appOpener'] = this.emrApp;\r\n        this._obsTermsMap = new ObsTermsMap();\r\n        this._emrWindow = new EmrWindow(this.emrMel, this.emrApp, this._window, this._document);\r\n    }\r\n\r\n    get enterpriseId() {\r\n        return this.emrApp.enterpriseId;\r\n    }\r\n\r\n    get external(): any {\r\n        if (this._external) {\r\n            return this._external;\r\n        }\r\n\r\n        this._external = (this._window.opener && this._window.opener.external)\r\n            ? this._window.opener.external : this._window.external;\r\n        if (this._external.IsDebugMode === undefined) {\r\n            // try simulator\r\n            this._external = this._simulator.externalSimulator;\r\n        }\r\n\r\n        return this._external;\r\n    }\r\n\r\n    externalAsync = async (): Promise<any> => {\r\n\r\n        if (this._external) {\r\n            return this._external;\r\n        }\r\n\r\n        this._external = (await this._simulator.isSimulatorAsync())\r\n            ? this._simulator.externalSimulator   // if the simulator is set, then use simulator\r\n                : (this._window.opener && this._window.opener.external) ? this._window.opener.external\r\n                    : this._window.external;\r\n        return this._external;\r\n    }\r\n\r\n    get databaseVersion():string {\r\n        return this.emrApp.databaseVersion;\r\n    }\r\n\r\n    get version():string {\r\n        this._version = (this._version != null) ? this._version : this.emrMel.melFunc('{VER_EMR()}');\r\n        return this._version;\r\n    }\r\n\r\n    // this is emrWindow as modal's window\r\n    get emrWindow() {\r\n        return this._emrWindow;\r\n    }\r\n\r\n    async emrContentsAsync(name: string):Promise<EmrContents> {\r\n        let content = new EmrContents();\r\n        await content.loadAsync(name, this.emrMel);\r\n        return content;\r\n    }\r\n\r\n    melContent = (name: string, reload: boolean = false) => {\r\n        if (this._melContent[name] == null || reload) {\r\n            this._melContent[name] = new EmrContents();\r\n            this._melContent[name].load(name, this.emrMel);\r\n        }\r\n\r\n        return this._melContent[name];\r\n    }\r\n\r\n    get emrMel(): EmrMel {\r\n        this._emrMel = (this._window.opener != null && this._window.opener['_melOpener'] != undefined) ? this._window.opener['_melOpener']\r\n            : (this._emrMel != null) ? this._emrMel\r\n                : new EmrMel(this._window, this._simulator);\r\n        return this._emrMel;\r\n    }\r\n\r\n    get emrApp(): EmrApp {\r\n        this._emrApp = (this._window.opener != null && this._window.opener['_appOpener'] != undefined) ? this._window.opener['_appOpener']\r\n            : (this._emrApp != null) ? this._emrApp\r\n                : new EmrApp(this._window, this._simulator);\r\n        return this._emrApp;\r\n    }\r\n\r\n\r\n    get baseServicesUrl(): string \r\n    {\r\n        this._baseServicesUrl = (this._baseServicesUrl) ? this._baseServicesUrl\r\n            : ((this.external) ? this.external.BaseServicesUrl : this._baseServicesUrl);\r\n\r\n        return this._baseServicesUrl;\r\n    }\r\n\r\n    get demographics(): DemographicsExternal {\r\n        this._demographics = (this._demographics) ? this._demographics\r\n            : ((this.external) ? this.external.Demographics : this._demographics);\r\n\r\n        return new DemographicsExternal(this._demographics);\r\n    }\r\n\r\n    demographicsAsync = async (): Promise<DemographicsExternal> => {\r\n        this._demographics = (this._demographics) ? this._demographics\r\n            : ((await this.externalAsync()) ? await this.externalAsync().then(e=> e.Demographics) : this._demographics);\r\n\r\n        return new DemographicsExternal(this._demographics);\r\n    }\r\n\r\n    public get allergies(): AllergiesExternal {\r\n        this._allergiesJson = (this._allergiesJson) ? this._allergiesJson\r\n            : ((this.external) ? this.external.Allergies : this._allergiesJson);\r\n\r\n        return new AllergiesExternal(this._allergiesJson);\r\n    }\r\n\r\n    allergiesAsync = async (): Promise<AllergiesExternal> => {\r\n        this._allergiesJson = (this._allergiesJson) ? this._allergiesJson\r\n            : ((await this.externalAsync()) ? await this.externalAsync().then(e => e.Allergies) : this._allergiesJson);\r\n\r\n        return new AllergiesExternal(this._allergiesJson);\r\n    }\r\n\r\n    allergiesJson = (): string => {\r\n        this._allergiesJson = (this._allergiesJson) ? this._allergiesJson\r\n            : ((this.external) ? this.external.Allergies : this._allergiesJson);\r\n        return this._allergiesJson;\r\n    }\r\n\r\n    public get problems(): ProblemExternal[] {\r\n        if (this._problemExternalList.length === 0) {\r\n\r\n            let problemsJson = this.problemsJson();\r\n\r\n            if (problemsJson) {\r\n                let dataArray = JSON.parse(problemsJson) as [];\r\n                for (let index = 0; index < dataArray.length; index++) {\r\n                    this._problemExternalList.push(ProblemExternal.fromExternal(dataArray[index]));\r\n                }\r\n            }\r\n        }\r\n        return this._problemExternalList;\r\n    }\r\n\r\n    problemsJson = (): string => {\r\n        this._problemsJson = (this._problemsJson) ? this._problemsJson\r\n            : ((this.external) ? this.external.Problems : this._problemsJson);\r\n        return this._problemsJson;\r\n    }\r\n\r\n    get patient(): Patient {\r\n        if (this._patient === undefined) {\r\n            this._patient = new Patient(this.emrMel, this.demographics, this.allergies);\r\n        }\r\n        return this._patient;\r\n    }\r\n\r\n    patientAsync = async (): Promise<Patient> => {\r\n        if (this._patient === undefined) {\r\n            this._patient = new Patient(this.emrMel, await this.demographicsAsync(), await this.allergiesAsync());\r\n        }\r\n        return this._patient;\r\n    }\r\n\r\n    get users(): Users {\r\n        if (this._users === undefined) {\r\n            this._users = new Users(this.emrMel);\r\n        }\r\n        return this._users;\r\n    }\r\n\r\n    get clinicalDocument(): ClinicalDocument {\r\n        if (this._clinicalDocument === undefined) {\r\n            this._clinicalDocument = new ClinicalDocument(this.emrMel, this);\r\n        }\r\n        return this._clinicalDocument;\r\n    }\r\n\r\n    clinicalDocumentAsync = async (): Promise<ClinicalDocument> => {\r\n        if (this._clinicalDocument === undefined) {\r\n            this._clinicalDocument = new ClinicalDocument(this.emrMel, await this);\r\n        }\r\n        return this._clinicalDocument;\r\n    }\r\n\r\n    get obsTermsMap(): ObsTermsMap {\r\n        return this._obsTermsMap;\r\n    }\r\n\r\n    get LocationType() {\r\n        return LocationType;\r\n    }\r\n\r\n    get UserCallFunction() {\r\n        return UserCallFunction;\r\n    }\r\n\r\n    // Implements MEL eval \r\n    melFuncAsync = async (data: string, showWait: boolean = false): Promise<string> => {\r\n        return await this.externalAsync().then(e => e.EvaluateMel(data, showWait));\r\n    }\r\n}","// <copyright file=\"MdObject.ts\" company=\"mdObject, Inc\">\r\n// Copyright (c) mdObject, Inc. All rights reserved.\r\n// Licensed under the MS-PL license. See LICENSE file in the project root for full license information.\r\n// </copyright>\r\nimport { version } from '../consts/version'\r\nimport { productType } from '../consts/productType'\r\nimport { Emr } from './Emr';\r\n\r\nexport class MdObject {\r\n\r\n    private _emr: Emr;\r\n\r\n    constructor(\r\n        public _window: any,\r\n        public _document: any\r\n    ) {\r\n        if (typeof this._window === 'undefined' && typeof this._document === 'undefined') {\r\n            throw new Error(\"MdObject requires a _window with a _document\");\r\n        }\r\n        console.info(\"The mdObject Version:\" + this.version);\r\n\r\n        this._emr = new Emr(this._window, this._document);\r\n\r\n    }\r\n\r\n    get version(): string {\r\n        return version;\r\n    }\r\n\r\n    get productType(): string {\r\n        return productType;\r\n    }\r\n\r\n    public get emr():Emr {\r\n        return this._emr;\r\n    }\r\n}","import { version  as packageVersion } from '../package.json';\r\nexport const version: string = packageVersion;\r\n","export const productType: string = 'GE';","import { IAllergyData } from '../interfaces/IAllergyData';\r\nimport { EmrMel } from './EmrMel';\r\nimport { ObjectState, AllergyClassification, AllergyCriticality, AllergyReasonForRemoval, ObjectStatus } from '../enums';\r\nimport { System } from './System';\r\n\r\nexport class Allergy implements IAllergyData {\r\n    state: ObjectState = ObjectState.None;\r\n    status: ObjectStatus = ObjectStatus.Unchanged;\r\n\r\n  name: string = '';\r\n  onSetDate: Date | any;\r\n  criticalIndicator: AllergyCriticality = AllergyCriticality.undefined;\r\n  classification: AllergyClassification = AllergyClassification.none;\r\n  description: string = ''; // Use this field for reaction\r\n  gpiCode: string = '';\r\n  severity: string = '';\r\n  stopDate: Date | undefined;\r\n  allergyId: string = '';\r\n  reactionCode: number = 32; // OTHER=32\r\n  reasonForRemoval: AllergyReasonForRemoval = AllergyReasonForRemoval.none;\r\n\r\n    constructor(\r\n        public _mel: EmrMel\r\n    ) { }\r\n\r\n    save = async () => {\r\n        switch (this.state) {\r\n            case ObjectState.Add: {\r\n                let code: string = await this._mel.melFunc('{MEL_ADD_ALLERGY(\"' + this.toAddString() + '\")}');\r\n\r\n                if (code !== '') {\r\n                    let error = 'Allergy.save error. Code is ' + code;\r\n                    console.error(error);\r\n                    throw new Error('Allergy not saved. ' + error);\r\n                }\r\n\r\n                this.status = ObjectStatus.Added;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n            case ObjectState.Update: {\r\n                let code: string = await this._mel.melFunc('{MEL_CHANGE_ALLERGY(\"' + this.toChangeString() + '\")}');\r\n\r\n            if (code !== '0') {\r\n            let error = 'Allergy.save error. Code is ' + code;\r\n            console.error(error);\r\n            throw new Error('Allergy not saved. ' + error);\r\n            }\r\n\r\n                this.status = ObjectStatus.Updated;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n            case ObjectState.Remove: {\r\n                let code: string = await this._mel.melFunc('{MEL_REMOVE_ALLERGY(\"' + this.toRemoveString() + '\")}');\r\n\r\n                if (code !== '0') {\r\n                    let error = 'Allergy.save error. Code is ' + code;\r\n                    console.error(error);\r\n                    throw new Error('Allergy not saved. ' + error);\r\n                }\r\n\r\n                this.status = ObjectStatus.Removed;\r\n                this.state = ObjectState.None;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private toChangeString = (): string => {\r\n        return this.allergyId + '\",\"' +\r\n            this.description + '\",\"' +\r\n            (this.onSetDate ? System.dateToString(this.onSetDate) : '') + '\",\"' +\r\n            (this.stopDate ? System.dateToString(this.stopDate) : '') + '\",\"' +\r\n            this.criticalIndicator + '\",\"' +\r\n            this.classification;\r\n    }\r\n\r\n    private toRemoveString = (): string => {\r\n        return this.allergyId + '\",\"' +\r\n            (this.stopDate ? System.dateToString(this.stopDate) : '') + '\",\"' +\r\n            (this.reasonForRemoval !== AllergyReasonForRemoval.none ? this.reasonForRemoval : '');\r\n    }\r\n\r\n    private toAddString = (): string => {\r\n        return this.name + '\",\"' +\r\n            this.description + '\",\"' +\r\n            (this.onSetDate ? System.dateToString(this.onSetDate) : '') + '\",\"' +\r\n            this.allergyId + '\",' +\r\n            this.reactionCode + ',\"' +\r\n            this.gpiCode + '\",\"' +\r\n            (this.stopDate ? System.dateToString(this.stopDate) : '') + '\",\"' +\r\n            this.criticalIndicator + '\",\"' +\r\n            this.classification;\r\n    }\r\n}","/*\r\n * Comply with https://www.hl7.org/fhir/datatypes.html#HumanName\r\n * The full fhir support expected in version 3 and above\r\n */\r\n\r\nexport class HumanName {\r\n    //\"use\": \"<code>\", // usual | official | temp | nickname | anonymous | old | maiden\r\n    //\"text\": \"<string>\", // Text representation of the full name\r\n    family: string; // Family name (often called 'Surname')\r\n    given: [string]; // Given names (not always 'first'). Includes middle names\r\n    prefix: [string]; // Parts that come before the name\r\n    suffix: [string]; // Parts that come after the name\r\n    //\"period\": { Period } // Time period when name was/is in use\r\n}","/*\r\n * Comply with https://www.hl7.org/fhir/datatypes.html#address\r\n * The full fhir support expected in version 3 and above\r\n */\r\n\r\nexport class Address {\r\n    //\"use\": \"<code>\", // home | work | temp | old | billing - purpose of this address\r\n    //\"type\": \"<code>\", // postal | physical | both\r\n    //\"text\": \"<string>\", // Text representation of the address\r\n    line: [string]; // Street name, number, direction & P.O. Box etc.\r\n    city: string; // Name of city, town etc.\r\n    district: string; // District name (aka county)\r\n    state: string; // Sub-unit of country (abbreviations ok)\r\n    postalCode: string; // Postal code for area\r\n    country: string; // Country (e.g. can be ISO 3166 2 or 3 letter code)\r\n    //\"period\": { Period } // Time period when address was/is in use\r\n}","/*\r\n * Comply with https://www.hl7.org/fhir/datatypes.html#Attachment\r\n * The full fhir support expected in version 3 and above\r\n */\r\n\r\nexport class Attachment\r\n{\r\n    contentType: string // Mime type of the content, with charset etc.\r\n    //\"language\": \"<code>\", // Human language of the content (BCP-47)\r\n    data: string; // Data inline, base64ed\r\n    url: string; // Uri where the data can be found\r\n    size: number; // Number of bytes of content (if url provided)\r\n    //\"hash\": \"<base64Binary>\", // Hash of the data (sha-1, base64ed)\r\n    title: string; // Label to display in place of the data\r\n    creation: Date; // Date attachment was first created\r\n}","/*\r\n * Comply with https://www.hl7.org/fhir/person.html\r\n * The full fhir support expected in version 3 and above\r\n */\r\n\r\nimport { HumanName } from \"./HumanName\";\r\nimport { Address } from \"./Address\";\r\nimport { Attachment } from \"./Attachment\";\r\n\r\nexport class Person {\r\n    get resourceType(): string { return \"Person\" };\r\n    // from Resource: id, meta, implicitRules, and language\r\n    // from DomainResource: text, contained, extension, and modifierExtension\r\n//    \"identifier\": [{ Identifier }], // A human identifier for this person\r\n    name: HumanName[]; // A name associated with the person\r\n//    \"telecom\": [{ ContactPoint }], // A contact detail for the person\r\n//    \"gender\": \"<code>\", // male | female | other | unknown\r\n    birthDate: Date; // The date on which the person was born\r\n    address: Address[]; // One or more addresses for the person\r\n    photo: Attachment; // Image of the person\r\n//    \"managingOrganization\": { Reference(Organization) }, // The organization that is the custodian of the person record\r\n    active: boolean; // This person's record is in active use\r\n    //\"link\": [{ // Link to a resource that concerns the same actual person\r\n    //    \"target\": { Reference(Patient|Practitioner|RelatedPerson|Person) }, // R!  The resource to which this actual person is associated\r\n    //    \"assurance\": \"<code>\" // level1 | level2 | level3 | level4\r\n    //}]\r\n}","/*\r\n * Comply with https://www.hl7.org/fhir/patient.html\r\n * The full fhir support expected in version 3 and above\r\n */\r\nimport { HumanName } from \"./HumanName\";\r\nimport { Address } from \"./Address\";\r\nimport { Attachment } from \"./Attachment\";\r\nimport { AdministrativeGenderCode } from \"./codes/AdministrativeGenderCode\";\r\nimport { ContactPoint } from \"./ContactPoint\";\r\n\r\nexport class Patient {\r\n    get resourceType():string { return \"Patient\" };\r\n    // from Resource: id, meta, implicitRules, and language\r\n    // from DomainResource: text, contained, extension, and modifierExtension\r\n//    \"identifier\": [{ Identifier }], // An identifier for this patient\r\n    active: boolean; // Whether this patient's record is in active use\r\n    name: HumanName[]; // A name associated with the patient\r\n    telecom: ContactPoint[]; // A contact detail for the individual\r\n    gender: AdministrativeGenderCode; // male | female | other | unknown\r\n    birthDate: Date; // The date of birth for the individual\r\n    // deceased[x]: Indicates if the individual is deceased or not. One of these 2:\r\n    deceasedBoolean: boolean;\r\n    deceasedDateTime: Date;\r\n    address: Address[]; // An address for the individual\r\n//    \"maritalStatus\": { CodeableConcept }, // Marital (civil) status of a patient\r\n    // multipleBirth[x]: Whether patient is part of a multiple birth. One of these 2:\r\n    multipleBirthBoolean: boolean;\r\n    multipleBirthInteger: number;\r\n    photo: Attachment[]; // Image of the patient\r\n    //\"contact\": [{ // A contact party (e.g. guardian, partner, friend) for the patient\r\n    //    \"relationship\": [{ CodeableConcept }], // The kind of relationship\r\n    //    \"name\": { HumanName }, // A name associated with the contact person\r\n    //    \"telecom\": [{ ContactPoint }], // A contact detail for the person\r\n    //    \"address\": { Address }, // Address for the contact person\r\n    //    \"gender\": \"<code>\", // male | female | other | unknown\r\n    //    \"organization\": { Reference(Organization) }, // C? Organization that is associated with the contact\r\n    //    \"period\": { Period } // The period during which this contact person or organization is valid to be contacted relating to this patient\r\n    //}],\r\n  //  \"communication\": [{ // A language which may be used to communicate with the patient about his or her health\r\n  //      \"language\": { CodeableConcept }, // R!  The language which can be used to communicate with the patient about his or her health\r\n  //      \"preferred\": <boolean> // Language preference indicator\r\n  //}],\r\n    //\"generalPractitioner\": [{\r\n    //    Reference(Organization|Practitioner|\r\n    //        PractitionerRole)\r\n    //}], // Patient's nominated primary care provider\r\n//    \"managingOrganization\": { Reference(Organization) }, // Organization that is the custodian of the patient record\r\n//    \"link\": [{ // Link to another patient resource that concerns the same actual person\r\n//        \"other\": { Reference(Patient|RelatedPerson) }, // R!  The other patient or related person resource that the link refers to\r\n//        \"type\": \"<code>\" // R!  replaced-by | replaces | refer | seealso\r\n//    }]\r\n}","export class Coding {\r\n    // from Element: extension\r\n    system: string; //\"<uri>\", // Identity of the terminology system\r\n    version?: string; // Version of the system - if relevant\r\n    code: string; // Symbol in syntax defined by the system\r\n    display: string; // Representation defined by the system\r\n    userSelected?: boolean; // If this coding was chosen directly by the user\r\n}","import { Coding } from \"./Coding\";\r\n\r\nexport class CodeableConcept {\r\n    coding: Array<Coding>; // Code defined by a terminology system\r\n    text: string; // Plain text representation of the concept\r\n}","/*\r\n * Comply with https://www.hl7.org/fhir/DSTU2/condition.html\r\n * The full fhir support expected in version 3 and above\r\n */\r\n\r\nimport { CodeableConcept } from \"./CodeableConcept\";\r\nimport { ClinicalStatus } from \"./codes/ClinicalStatus\";\r\nimport { VerificationStatus } from \"./codes/VerificationStatus\";\r\nimport { Meta } from \"./Meta\";\r\nimport { Reference } from \"./Reference\";\r\nimport { Resource } from \"./Resource\";\r\nimport { dateTime } from \"./types/dateTime\";\r\n\r\nexport class Condition implements Resource {\r\n    // from Resource: id, meta, implicitRules, and language\r\n    id?: string;\r\n    meta?: Meta;\r\n    language?: string;\r\n    resourceType:string = 'Condition';\r\n    // from DomainResource: text, contained, extension, and modifierExtension\r\n//--not implemented        \"identifier\": [{ Identifier }]; // External Ids for this condition\r\n    patient: Reference; // R!  Who has the condition?\r\n//--not implemented        \"encounter\": { Reference(Encounter) }; // Encounter when condition first asserted\r\n//--not implemented        \"asserter\": { Reference(Practitioner|Patient) }; // Person who asserts this condition\r\n//--not implemented        \"dateRecorded\": \"<date>\"; // When first entered\r\n    code: CodeableConcept; // R!  Identification of the condition, problem or diagnosis\r\n    category?: CodeableConcept; // complaint | symptom | finding | diagnosis\r\n    clinicalStatus?: ClinicalStatus; // active | relapse | remission | resolved\r\n    verificationStatus?: VerificationStatus; // R!  provisional | differential | confirmed | refuted | entered-in-error | unknown\r\n    severity?: CodeableConcept; // Subjective severity of condition\r\n    // onset[x]: Estimated or actual date,  date-time, or age. One of these 5:\r\n    onsetDateTime?: dateTime; \r\n//--not implemented        \"onsetQuantity\": { Quantity(Age) };\r\n//--not implemented        \"onsetPeriod\": { Period };\r\n//--not implemented        \"onsetRange\": { Range };\r\n    onsetString?: string;\r\n    //abatement[x]: If/when in resolution/remission. One of these 6:\r\n    abatementDateTime?: dateTime;\r\n//--not implemented        \"abatementQuantity\": { Quantity(Age) };\r\n    abatementBoolean?: boolean;\r\n//--not implemented        \"abatementPeriod\": { Period };\r\n//--not implemented        \"abatementRange\": { Range };\r\n    abatementString?: string;\r\n//--not implemented        \"stage\": { // Stage/grade, usually assessed formally\r\n//--not implemented            \"summary\": { CodeableConcept }; // C? Simple summary (disease specific)\r\n//--not implemented            \"assessment\": [{ Reference(ClinicalImpression|DiagnosticReport|Observation) }] // C? Formal record of assessment\r\n//--not implemented        };\r\n    evidence?: [{ // Supporting evidence\r\n     code: CodeableConcept; // C? Manifestation/symptom\r\n//--not implemented            \"detail\": [{ Reference(Any) }] // C? Supporting information found elsewhere\r\n    }];\r\n    bodySite?: Array<CodeableConcept>; // Anatomical location, if relevant\r\n    notes?: string; // Additional information about the Condition\r\n\r\n}","import { Meta } from \"./Meta\";\r\n\r\nexport class Resource {\r\n    resourceType?: string;\r\n    id?: string; // Logical id of this artifact\r\n    meta?: Meta; // Metadata about the resource\r\n//--not implemented    \"implicitRules\": \"<uri>\", // A set of rules under which this content was created\r\n    language?: string; // Language of the resource content \r\n}","import { BundleTypeCode } from \"./codes/BundleTypeCode\";\r\nimport { EntryBundle } from \"./EntryBundle\";\r\nimport { Meta } from \"./Meta\";\r\nimport { Resource } from \"./Resource\";\r\nimport { Signature } from \"./Signature\";\r\n\r\nexport class Bundle implements Resource {\r\n    // from Resource: id, meta, implicitRules, and language\r\n    id?: string;\r\n    meta?: Meta;\r\n    language?: string;\r\n    resourceType: string = 'Bundle';\r\n    type: BundleTypeCode; // R!  document | message | transaction | transaction-response | batch | batch-response | history | searchset | collection\r\n    total?: number; // C? If search, the total number of matches\r\n    link?: { // Links related to this Bundle\r\n        relation: string, // R!  http://www.iana.org/assignments/link-relations/link-relations.xhtml\r\n        url: string // R!  Reference details for the link\r\n    }[];\r\n    entry?: EntryBundle[];\r\n    signature?: Signature  // Digital Signature\r\n}","import { Condition } from \"./Condition\";\r\nimport { Search } from \"./Search\";\r\n\r\nexport class EntryBundle {\r\n    fullUrl?: string; // Absolute URL for resource (server address, or UUID/OID)\r\n    resource?: Condition | undefined; // A resource in the bundle\r\n    search?: Search; // C? Search related information\r\n    //\"link\": [{ Content as for Bundle.link }], // Links related to this entry\r\n    //\"request\": { // C? Transaction Related Information\r\n    //    \"method\": \"<code>\", // R!  GET | POST | PUT | DELETE\r\n    //    \"url\": \"<uri>\", // R!  URL for HTTP equivalent of this entry\r\n    //    \"ifNoneMatch\": \"<string>\", // For managing cache currency\r\n    //    \"ifModifiedSince\": \"<instant>\", // For managing update contention\r\n    //    \"ifMatch\": \"<string>\", // For managing update contention\r\n    //    \"ifNoneExist\": \"<string>\" // For conditional creates\r\n    //},\r\n    //\"response\": { // C? Transaction Related Information\r\n    //    \"status\": \"<string>\", // R!  Status return code for entry\r\n    //    \"location\": \"<uri>\", // The location, if the operation returns a location\r\n    //    \"etag\": \"<string>\", // The etag for the resource (if relevant)\r\n    //    \"lastModified\": \"<instant>\" // Server's date time modified\r\n}","export class Search {\r\n    mode?: string;\r\n    score?: number;\r\n}","import { Coding } from \"./Coding\";\r\n\r\nexport class Signature {\r\n    // from Element: extension\r\n    type: Coding[]; // R!  Indication of the reason the entity signed the object(s)\r\n    when: string; // R!  When the signature was created\r\n    // who[x]: Who signed the signature. One of these 2:\r\n    whoUri?: string;\r\n    whoReference?: string;\r\n    contentType: string; // R!  The technical format of the signature \r\n    blob: string; // R!  The actual signature content (XML DigSig. JWT, picture, etc.)\r\n}","export class Meta {\r\n    versionId?: string;\r\n    lastUpdated?: string;\r\n}","import { MdObject } from './classes';\r\n\r\n(function (window) {\r\n    var mdObject: MdObject;\r\n    try {\r\n        mdObject = new MdObject(window, window.document);\r\n        window['mdObject'] = mdObject;\r\n    }\r\n    catch (e) {\r\n        console.error(e);\r\n    }\r\n    return mdObject;\r\n})(window);\r\n\r\nexport * from './classes';\r\nexport * from './enums';\r\nexport * from './interfaces';\r\nexport * as Fhir from './fhir'"]}