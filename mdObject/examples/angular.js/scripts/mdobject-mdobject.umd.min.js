!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("@mdobject/mdobject",["exports"],e):e(((t=t||self).mdobject=t.mdobject||{},t.mdobject.mdobject={}))}(this,(function(t){"use strict";var e,i,n,r,s,a,o,l=function(){this.weight="Weight",this.height="Height"};(e=t.LocationType||(t.LocationType={}))[e.None=0]="None",e[e.Home=1]="Home",e[e.Current=2]="Current",(i=t.UserCallFunction||(t.UserCallFunction={}))[i.None=0]="None",i[i.UserList=1]="UserList",i[i.UserInfo=2]="UserInfo",(n=t.AllergyClassification||(t.AllergyClassification={})).none="",n.drug="DRUG",n.food="FOOD",n.environmental="ENVIRONMENTAL",(r=t.AllergyCriticality||(t.AllergyCriticality={}))[void 0]="",r.critical="C",r.severe="S",r.moderate="N",r.mild="I",(s=t.ObjectState||(t.ObjectState={}))[s.None=0]="None",s[s.Add=1]="Add",s[s.Update=2]="Update",s[s.Remove=3]="Remove",(a=t.AllergyReasonForRemoval||(t.AllergyReasonForRemoval={})).none="",a.error="Entered in error",a.patientCorrected="Patient corrected",a.disproved="Allergy disproved",a.other="Other",(o=t.ObjectStatus||(t.ObjectStatus={}))[o.Unchanged=0]="Unchanged",o[o.Added=1]="Added",o[o.Updated=2]="Updated",o[o.Removed=3]="Removed",o[o.Changed=4]="Changed";var h=function(e,i,n){this.id=e,this.name=i,this.locationType=n,this.id=null!=this.id?this.id:"",this.name=null!=this.name?this.name:"",this.locationType=null!=this.locationType?this.locationType:t.LocationType.None},c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function u(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function d(t,e){var i,n,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}function m(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,s=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}var f=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},_=function(e){var i=this;void 0===e&&(e={}),this.state=t.ObjectState.None,this.status=t.ObjectStatus.Unchanged,this.initializeData=function(){i.contentId=i.data.length>0?i.data[0]:"",i.namespace=i.data.length>1?i.data[1]:"",i.nodeName=i.data.length>2?i.data[2]:"",i.displayName=i.data.length>3?i.data[3]:"",i.sourceName=i.data.length>4?i.data[4]:"",i.code=i.data.length>5?i.data[5]:"",i.codeType=i.data.length>6?i.data[6]:"",i.contentGroup=i.data.length>7?i.data[7]:"",i.listOrder=i.data.length>8?i.data[8]:"",i.contentDefault=i.data.length>9?i.data[9]:""},this.toAddString=function(){return i.namespace+"^"+i.nodeName+"^"+i.displayName+"^"+i.sourceName+"^"+i.code+"^"+i.codeType+"^"+i.contentGroup+"^"+i.listOrder+"^"+i.contentDefault},this.toChangeString=function(){return i.namespace+"^"+i.nodeName+"^"+i.displayName+"^"+i.sourceName+"^"+i.code+"^"+i.codeType+"^"+i.contentGroup+"^"+i.listOrder+"^"+i.contentDefault},this.save=function(e){return f(i,void 0,void 0,(function(){var i,n,r;return d(this,(function(s){switch(s.label){case 0:if(!this._mel&&e&&(this._mel=e),!this._mel)throw new Error("Mel undefined");switch(this.state){case t.ObjectState.Add:return[3,1];case t.ObjectState.Update:return[3,3];case t.ObjectState.Remove:return[3,5]}return[3,7];case 1:return[4,this._mel.melFunc('{MEL_ADD_CONTENT("'+this.toAddString()+'")}')];case 2:if(n=s.sent(),(i=+n)<0||NaN===i)throw r="EmrContent.save error. Code is "+n,console.error(r),new Error("EmrContent not saved. "+r);return this.contentId=n,this.nodeName=this.nodeName?this.nodeName:n,this.status=t.ObjectStatus.Added,this.state=t.ObjectState.None,[3,7];case 3:return[4,this._mel.melFunc('{MEL_UPDATE_CONTENT("'+this.contentId+'","'+this.toChangeString()+'")}')];case 4:if(n=s.sent(),(i=+n)<0||NaN===i)throw r="EmrContent.save error. Code is "+n,console.error(r),new Error("EmrContent not saved. "+r);return this.status=t.ObjectStatus.Updated,this.state=t.ObjectState.None,[3,7];case 5:return[4,this._mel.melFunc('{MEL_REMOVE_CONTENT("'+this.contentId+'")}')];case 6:if("true"!=(n=s.sent()))throw r="EmrContent.save error. Code is "+n,console.error(r),new Error("EmrContent not saved. "+r);return this.status=t.ObjectStatus.Removed,this.state=t.ObjectState.None,[3,7];case 7:return[2]}}))}))};var n=e.data,r=void 0===n?null:n,s=e.mel,a=void 0===s?null:s;this._mel=a,this.data=null==r?[]:r.split("^"),this.initializeData()},g=function(t){var e=this;this._value=t,this.data=null==this._value?[]:this._value.split("^"),this.name=this.data.length>0?this.data[0]:"",this.type=this.data.length>1?this.data[1]:"",this.phone=this.data.length>2?this.data[2]:"",this.phoneType=this.data.length>3?this.data[3]:"",this.address1=this.data.length>4?this.data[4]:"",this.address2=this.data.length>5?this.data[5]:"",this.city=this.data.length>6?this.data[6]:"",this.state=this.data.length>7?this.data[7]:"",this.zip=this.data.length>8?this.data[8]:"",this.country=this.data.length>9?this.data[9]:"",this.address=this.address1.concat(" "+this.address2),this.toMelString=function(){return e._value}},b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII===",y="chgnndkhlnpmfkjnchmnhkfneccghaaf",v=function(){function t(){}return t.toDate=function(t){return t?new Date(parseInt(t.substr(6))):null},t.toImage=function(t){return t?"data:image/jpg;base64,"+btoa(String.fromCharCode.apply(null,new Uint8Array(t))):b},t.formatDate=function(t){return t&&8==t.length?t.substr(4,2)+"/"+t.substr(6,2)+"/"+t.substr(0,4):null},t.dateToString=function(t){return(t.getMonth()>8?t.getMonth()+1:"0"+(t.getMonth()+1))+"/"+(t.getDate()>9?t.getDate():"0"+t.getDate())+"/"+t.getFullYear()},t.nonenumerable=function(t,e){var i=Object.getOwnPropertyDescriptor(t,e)||{};!1!==i.enumerable&&(i.enumerable=!1,i.writable=!0,Object.defineProperty(t,e,i))},t}();v.isSimulator=!1;var A=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},D=function(){function e(e){var i=this;this.status=t.ObjectStatus.Unchanged,this.state=t.ObjectState.None,this.assessment="N",this.note="",this.problemId="",this.type="",this.description="",this.codeIcd9="",this.comment="",this.stopReason="",this.codeIcd10="",this.lastModifiedDate="",this.save=function(e){return A(i,void 0,void 0,(function(){var i,n;return d(this,(function(r){switch(r.label){case 0:switch(this.state){case t.ObjectState.Add:return[3,1]}return[3,3];case 1:return[4,e.melFunc('{MEL_ADD_PROBLEM("'+this.toAddString()+'")}')];case 2:if(""!==(i=r.sent()))throw n="Problem.save error. Code is "+i,console.error(n),new Error("Problem not saved. "+n);return this.status=t.ObjectStatus.Added,this.state=t.ObjectState.None,[3,3];case 3:return[2]}}))}))},this.toAddString=function(){return i.type+'","'+i.description+'","'+i.code+'","'+(i.onsetDate?v.dateToString(i.onsetDate):"")+'","'+(i.stopDate?v.dateToString(i.stopDate):"")+'","'+i.comment+'",'+i.assessment+',"'+i.note},e&&Object.keys(this).forEach((function(t){i[t]=e[t]?e[t]:i[t]}))}return Object.defineProperty(e.prototype,"code",{get:function(){var t="";return t=this.codeIcd9?this.codeIcd9:t,t=this.codeIcd10?t?"|"+this.codeIcd10:this.codeIcd10:t},enumerable:!1,configurable:!0}),e.fromFhir=function(t){var e,i,n=new this;return n.description=t.code.text,n.comment=null===(i=null===(e=t.evidence)||void 0===e?void 0:e[0])||void 0===i?void 0:i.code.text,n},e}(),S=function(t,e){var i=this;this._value=t,this._mel=e,this.data=null==this._value?[]:this._value.split("^"),this.isNew=null==this._value,this.immunizationId=this.data.length>0?this.data[0]:"",this.immunizationGroupId=this.data.length>1?this.data[1]:"",this.vaccineGroupName=this.data.length>2?this.data[2]:"",this.vaccineName=this.data.length>3?this.data[3]:"",this.medicalDisplayName=this.data.length>4?this.data[4]:"",this.series=this.data.length>5?this.data[5]:"",this.wasGiven=this.data.length>6?this.data[6]:"",this.reasonNotGiven=this.data.length>7?this.data[7]:"",this.historical=this.data.length>8?this.data[8]:"",this.historicalSource=this.data.length>9?this.data[9]:"",this.vfcElegibility=this.data.length>10?this.data[10]:"",this.ddid=this.data.length>11?this.data[11]:"",this.dnid=this.data.length>12?this.data[12]:"",this.gpi=this.data.length>13?this.data[13]:"",this.kdc=this.data.length>14?this.data[14]:"",this.ndc=this.data.length>15?this.data[15]:"",this.cvxCode=this.data.length>16?this.data[16]:"",this.doseAmount=this.data.length>17?this.data[17]:"",this.dosageUnitOfMeasure=this.data.length>18?this.data[18]:"",this.route=this.data.length>19?this.data[19]:"",this.routeCode=this.data.length>20?this.data[20]:"",this.site=this.data.length>21?this.data[21]:"",this.siteCode=this.data.length>22?this.data[22]:"",this.manufacturer=this.data.length>23?this.data[23]:"",this.manufacturerCode=this.data.length>24?this.data[24]:"",this.lotNumber=this.data.length>25?this.data[25]:"",this.expirationDate=this.data.length>26?this.data[26]:"",this.visPublishedDate=this.data.length>27?this.data[27]:"",this.administeredByName=this.data.length>28?this.data[28]:"",this.administeredDate=this.data.length>29?this.data[29]:"",this.administeredDateType=this.data.length>30?this.data[30]:"",this.administeredComments=this.data.length>31?this.data[31]:"",this.advReactionDateTime=this.data.length>32?this.data[32]:"",this.advReactionDateTimeType=this.data.length>33?this.data[33]:"",this.advReactionComments=this.data.length>34?this.data[34]:"",this.advReactionCmtByName=this.data.length>35?this.data[35]:"",this.signed=this.data.length>36?this.data[36]:"",this.signedByName=this.data.length>37?this.data[37]:"",this.signedDate=this.data.length>38?this.data[38]:"",this.reasonRemoved=this.data.length>39?this.data[39]:"",this.stopDate=this.data.length>40?this.data[40]:"",this.reasonNotGivenMedical=this.data.length>41?this.data[41]:"",this.reasonNotGivenMedicalDetail=this.data.length>42?this.data[42]:"",this.save=function(){if(i.isNew){var t=i.validateAdd(),e=void 0;""===t?(e=i._mel.melFunc('{IMMUN_ADD("'+i.toStringAdd()+'")}'))<0&&alert(e):alert(t)}},this.toMelString=function(){return i._value},this.validateAdd=function(){return""===i.vaccineGroupName?"vaccineGroupName is required.":""===i.wasGiven?"wasGiven is required.":""===i.historical?"historical is required.":""===i.vfcElegibility?"vfcElegibility is required.":""===i.administeredDate?"administeredDate is required.":null==i.doseAmount.match(/[0-9]{1,25}/g)?"doseAmount should be numeric.":""},this.toStringAdd=function(){return i.vaccineGroupName+"^"+i.vaccineName+"^"+i.medicalDisplayName+"^"+i.series+"^"+i.wasGiven+"^"+i.reasonNotGiven+"^"+i.historical+"^"+i.historicalSource+"^"+i.vfcElegibility+"^"+i.ddid+"^"+i.dnid+"^"+i.gpi+"^"+i.kdc+"^"+i.ndc+"^"+i.cvxCode+"^"+i.doseAmount+"^"+i.dosageUnitOfMeasure+"^"+i.route+"^"+i.routeCode+"^"+i.site+"^"+i.siteCode+"^"+i.manufacturer+"^"+i.manufacturerCode+"^"+i.lotNumber+"^"+i.expirationDate+"^"+i.visPublishedDate+"^"+i.administeredByName+"^"+i.administeredDate+"^"+i.administeredDateType+"^"+i.administeredComments+"^"+i.advReactionDateTime+"^"+i.advReactionDateTimeType+"^"+i.advReactionComments+"^"+i.advReactionCmtByName+"^"+i.signed+"^"+i.signedByName+"^"+i.signedDate+"^"+i.reasonRemoved+"^"+i.stopDate+"^"+i.reasonNotGivenMedical+"^"+i.reasonNotGivenMedicalDetail}},N=function(){this.None="Undefined",this.Signed="Signed",this.DocumentUnsigned="Update"},P=function(e,i){var n=this;this._value=e,this.callFunction=i,this.data=null==this._value?[]:this._value.split("^"),this.toMelString=function(){return n._value},i===t.UserCallFunction.UserInfo&&(this.loginName=this.data.length>0?this.data[0]:"",this.searchName=this.data.length>1?this.data[1]:"",this.phoneNumber=this.data.length>2?this.data[2]:"",this.homeLocation=this.data.length>3?this.data[3]:"",this.group=this.data.length>4?this.data[4]:"",this.jobTitle=this.data.length>5?this.data[5]:"",this.specialty=this.data.length>6?this.data[6]:"",this.roles=this.data.length>7?this.data[7].split(";"):[],this.npi=this.data.length>8?this.data[8]:"",this.prescriberId=this.data.length>9?this.data[9]:"",this.deaId=this.data.length>10?this.data[10]:"",this.stateLicenceId=this.data.length>11?this.data[11]:"",this.memberLogin=this.data.length>12?this.data[12]:"",this.data2000=this.data.length>13?this.data[13]:"",this.uniquePhysicianId=this.data.length>14?this.data[14]:"",this.activationDate=this.data.length>15?this.data[15]:"",this.expirationDate=this.data.length>16?this.data[16]:"",this.currentLocation=this.data.length>17?this.data[17]:"",this.firstName=this.data.length>18?this.data[18]:"",this.middleName=this.data.length>19?this.data[19]:"",this.lastName=this.data.length>20?this.data[20]:""),i===t.UserCallFunction.UserList&&(this.loginName=this.data.length>0?this.data[0]:"",this.searchName=this.data.length>1?this.data[1]:"",this.phoneNumber=this.data.length>2?this.data[2]:"",this.homeLocation=this.data.length>3?this.data[3]:"",this.group=this.data.length>4?this.data[4]:"",this.jobTitle=this.data.length>5?this.data[5]:"",this.specialty=this.data.length>6?this.data[6]:"",this.npi=this.data.length>7?this.data[7]:"",this.prescriberId=this.data.length>8?this.data[8]:"",this.deaId=this.data.length>9?this.data[9]:"",this.stateLicenceId=this.data.length>10?this.data[10]:"",this.memberLogin=this.data.length>11?this.data[11]:"",this.data2000=this.data.length>12?this.data[12]:"",this.uniquePhysicianId=this.data.length>13?this.data[13]:"",this.activationDate=this.data.length>14?this.data[14]:"",this.expirationDate=this.data.length>15?this.data[15]:"",this.roles=[])};function I(t,e){t=t||"";var i=new String(t);return i.toList=function(e){null==e&&(e="|");var i=t.split(e);return i=i.filter((function(t){return 0!==t.length}))},i.startsWith=function(e){return t.slice(0,e.length)===e},i.endsWith=function(e){return t.slice(-e.length)===e},i.tag=null!=e?e:"",i.toDate=function(){var e=new Date(t.toString());return e instanceof Date&&!isNaN(e.valueOf())?e:void 0},i}var E=function(t){var e=this;this._value=t,this.data=null==this._value?[]:this._value.split("^"),this.name=function(){return console.log(e._value),e.data.length>0}?this.data[0]:"",this.onSetDate=I(this.data.length>1?this.data[1]:"").toDate(),this.criticalIndicator=this.data.length>2?this.data[2]:"",this.classification=this.data.length>3?this.data[3]:"",this.description=this.data.length>4?this.data[4]:"",this.gpiCode=this.data.length>5?this.data[5]:"",this.severity=this.data.length>6?this.data[6]:"",this.allergyId=this.data.length>7?this.data[7]:"",this.stopDate=null,this.reactionCode=32},O=function(t){function e(e){var i=t.call(this,e)||this;return i._value=e,i.name=i.data.length>0?i.data[0]:"",i.onSetDate=I(i.data.length>1?i.data[1]:"").toDate(),i.stopDate=i.data.length>2?i.data[2]:"",i.criticalIndicator=i.data.length>3?i.data[3]:"",i.classification=i.data.length>4?i.data[4]:"",i.description=i.data.length>5?i.data[5]:"",i.gpiCode=i.data.length>6?i.data[6]:"",i.severity=i.data.length>7?i.data[7]:"",i.allergyId=i.data.length>8?i.data[8]:"",i}return u(e,t),e}(E);function T(t,e){var i=null==t?new Object:t;return i.save=function(){null!=e&&e()},i}function w(t){var e="ActiveXObject"in t;return e||console.log("Your browser does not support ActiveX objects"),e}function L(t,e){var i="Unable to load ActiveX interface "+t;return i+=null!=e&&e.hasOwnProperty("Message")?".\nError message: "+e.Message:""}var C=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},M=function(){function t(t){this._mel=t,this._addedArray=[],this._currentArray=[],this._removedArray=[]}return Object.defineProperty(t.prototype,"added",{get:function(){if(0===this._addedArray.length){this._added=null!=this._added?this._added:this._mel.melFunc('{ALL_NEW("delimited")}');for(var t=I(this._added).toList(),e=0;e<t.length;e++)this._addedArray.push(new E(t[e]))}return this._addedArray},enumerable:!1,configurable:!0}),t.prototype.addedAsync=function(){return C(this,void 0,void 0,(function(){var t,e,i,n;return d(this,(function(r){switch(r.label){case 0:return 0!==this._addedArray.length?[3,4]:(t=this,null==this._added?[3,1]:(e=this._added,[3,3]));case 1:return[4,this._mel.melFunc('{ALL_NEW("delimited")}')];case 2:e=r.sent(),r.label=3;case 3:for(t._added=e,i=I(this._added).toList(),n=0;n<i.length;n++)this._addedArray.push(new E(i[n]));r.label=4;case 4:return[2,this._addedArray]}}))}))},Object.defineProperty(t.prototype,"current",{get:function(){if(0===this._currentArray.length){this._current=null!=this._current?this._current:this._mel.melFunc('{ALL_PRIOR("delimited")}');for(var t=I(this._current).toList(),e=0;e<t.length;e++)this._currentArray.push(new E(t[e]))}return this._currentArray},enumerable:!1,configurable:!0}),t.prototype.currentAsync=function(){return C(this,void 0,void 0,(function(){var t,e,i,n;return d(this,(function(r){switch(r.label){case 0:return 0!==this._currentArray.length?[3,4]:(t=this,null==this._current?[3,1]:(e=this._current,[3,3]));case 1:return[4,this._mel.melFunc('{ALL_PRIOR("delimited")}')];case 2:e=r.sent(),r.label=3;case 3:for(t._current=e,i=I(this._current).toList(),n=0;n<i.length;n++)this._currentArray.push(new E(i[n]));r.label=4;case 4:return[2,this._currentArray]}}))}))},Object.defineProperty(t.prototype,"removed",{get:function(){if(0===this._removedArray.length){this._removed=null!=this._removed?this._removed:this._mel.melFunc('{ALL_REMOVED("delimited")}');for(var t=I(this._removed).toList(),e=0;e<t.length;e++)this._removedArray.push(new O(t[e]))}return this._removedArray},enumerable:!1,configurable:!0}),t.prototype.removedAsync=function(){return C(this,void 0,void 0,(function(){var t,e,i,n;return d(this,(function(r){switch(r.label){case 0:return 0!==this._removedArray.length?[3,4]:(t=this,null==this._removed?[3,1]:(e=this._removed,[3,3]));case 1:return[4,this._mel.melFunc('{ALL_REMOVED("delimited")}')];case 2:e=r.sent(),r.label=3;case 3:for(t._removed=e,i=I(this._removed).toList(),n=0;n<i.length;n++)this._removedArray.push(new O(i[n]));r.label=4;case 4:return[2,this._removedArray]}}))}))},t}(),x=function(){function t(t,e,i,n){var r=this;this._name=t,this._observationType=e,this._value=i,this._mel=n,this.data=null==this._value?[]:this._value.split("^"),this.observationType=new N,this.name=null!=this._name?this._name:"",this.value=this.data.length>0?this.data[0]:"",this.date=this.data.length>1?this.data[1]:"",this.time=this.data.length>2?this.data[2]:"",this.signingUser=this.data.length>3?this.data[3]:"",this.enteringUser=this.data.length>4?this.data[4]:"",this.flags=this.data.length>5?this.data[5]:"",this.comment=this.data.length>6?this.data[6]:"",this.state=this.data.length>7?this.data[7]:"",this.locationOfCare=this.data.length>8?this.data[8]:"",this.documentType=this.data.length>9?this.data[9]:"",this.documentId=this.data.length>10?this.data[10]:"",this.type=this._observationType,this.save=function(){var t=r._mel.saveObservation(r.name,r.value,r.date);return null!=r.tag&&""!=r.tag&&(t=r._mel.melFunc('{OBSTAGNOW("'+r.name+'","'+r.tag+'")}')),null!=r.comment&&""!=r.comment&&(t=r._mel.melFunc('{OBSMODIFIERNOW("'+r.name+'","'+r.comment+'")}')),t},this.remove=function(){}}return Object.defineProperty(t.prototype,"unitOfMeasure",{get:function(){return this._unitOfMeasure=null!=this._unitOfMeasure?this._unitOfMeasure:this._mel.melFunc('{OBSUNIT("'+this.name+'")}'),this._unitOfMeasure},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tag",{get:function(){return this._tag=null!=this._tag?this._tag:this._observationType===this.observationType.DocumentUnsigned?this._mel.melFunc('{OBSTAGNOW("'+this.name+'")}'):"",this._tag},enumerable:!1,configurable:!0}),t}(),j=function(t){this._value=t,this.name=null!=this._value?this._value:""},F=function(){function t(t,e,i,n){this.isCurrent=t,this._weight=e,this._height=i,this._mel=n}return Object.defineProperty(t.prototype,"weight",{get:function(){return this._mel.getObs(this.isCurrent,this._weight)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._mel.getObs(this.isCurrent,this._height)},enumerable:!1,configurable:!0}),t}(),R=function(){function t(t,e,i){this._weight=t,this._height=e,this._mel=i}return Object.defineProperty(t.prototype,"current",{get:function(){return null!=this._current?this._current:new F(!0,this._weight,this._height,this._mel)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previous",{get:function(){return null!=this._previous?this._previous:new F(!1,this._weight,this._height,this._mel)},enumerable:!1,configurable:!0}),t}(),U=function(){function t(t,e){this.insuranceType=t,this._mel=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name=null==this._name?this._mel.melFunc('{INS_NAME("'+this.insuranceType+'")}'):this._name,this._name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"address",{get:function(){return this._address=null==this._address?this._mel.melFunc('{INS_ADDR("'+this.insuranceType+'")}'):this._address,this._address},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"insuranceId",{get:function(){return this._insuranceId=null==this._insuranceId?this._mel.melFunc('{INS_ID("'+this.insuranceType+'")}'):this._insuranceId,this._insuranceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"planName",{get:function(){return this._planName=null==this._planName?this._mel.melFunc('{INS_PLAN("'+this.insuranceType+'")}'):this._planName,this._planName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"groupNumber",{get:function(){return this._groupNumber=null==this._groupNumber?this._mel.melFunc('{INS_GRP("'+this.insuranceType+'")}'):this._groupNumber,this._groupNumber},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"phone",{get:function(){return this._phone=null==this._phone?this._mel.melFunc('{INS_PHONE("'+this.insuranceType+'")}'):this._phone,this._phone},enumerable:!1,configurable:!0}),t}(),B=function(t,e){var i=this;this._value=t,this._mel=e,this.data=null==this._value?[]:this._value.split("^"),this.isNew=null==this._value,this.carePlanId=this.data.length>0?this.data[0]:"",this.goal=this.data.length>1?this.data[1]:"",this.snomedCTCode=this.data.length>2?this.data[2]:"",this.target=this.data.length>3?this.data[3]:"",this.instructions=this.data.length>4?this.data[4]:"",this.goalSetDate=this.data.length>5?this.data[5]:"",this.goalMetDate=this.data.length>6?this.data[6]:"",this.recordCreatedDateTime=this.data.length>7?this.data[7]:"",this.sign=this.data.length>8?this.data[8]:"",this.signedBy=this.data.length>9?this.data[9]:"",this.signedDate=this.data.length>10?this.data[10]:"",this.recordChangedDateTime=this.data.length>11?this.data[11]:"",this.recordChangedBy=this.data.length>12?this.data[12]:"",this.patientConditionDescription=this.data.length>13?this.data[13]:"",this.patientConditionCode=this.data.length>14?this.data[14]:"",this.save=function(){if(i.isNew){var t=i.validateAdd(),e=void 0;""===t?(e=i._mel.melFunc("{MEL_ADD_CARE_PLAN("+i.toStringAdd()+")}"))<0&&alert(i.carePlanAddError(e)):alert(t)}},this.toMelString=function(){return i._value},this.validateAdd=function(){return""===i.goal?"goal is required.":""},this.toStringAdd=function(){return'"'+i.goal+'","'+i.snomedCTCode+'","'+i.target+'","'+i.instructions+'","'+i.goalSetDate+'","'+i.goalMetDate+'","'+i.patientConditionCode+'"'},this.carePlanAddError=function(t){var e="";switch(t){case"-1":e="Error Code -1: Description or blank is too long.";break;case"-2":e="Error Code -2: Code is too long.";break;case"-3":e="Error Code -3: Target is too long.";break;case"-4":e="Error Code -4: Instruction is too long.";break;case"-5":e="Error Code -5: goalSetDate is invalid.";break;case"-6":e="Error Code -6: goalMetDate is invalid or less than goalSetDate.";break;case"-7":e="Error Code -7: Invalid patientConditionCode. Use $mdObject.patient.problems[index].problemId";break;case"-8":e="Error Code -8: Cannot add Care Plan for some other reason.";break;case"-21":e="Error Code -21: Service layer error."}return e}},G=function(){function t(t,e){this._mel=t,this._mailingAddressExternal=e,this._mailingAddressExternal&&(this._address1=this._mailingAddressExternal.line1Addr,this._address2=this._mailingAddressExternal.line2Addr,this._city=this._mailingAddressExternal.cityName,this._country=this._mailingAddressExternal.countryCode,this._postCode=this._mailingAddressExternal.postalCode,this._state=this._mailingAddressExternal.stateCode)}return Object.defineProperty(t.prototype,"address1",{get:function(){return this._address1=void 0!==this._address1?this._address1:this._mel.melFunc("{PATIENT.ADDRESS1}"),this._address1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"address2",{get:function(){return this._address2=void 0!==this._address2?this._address2:this._mel.melFunc("{PATIENT.ADDRESS2}"),this._address2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"city",{get:function(){return this._city=void 0!==this._city?this._city:this._mel.melFunc("{PATIENT.CITY}"),this._city},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"country",{get:function(){return this._country=void 0!==this._country?this._country:this._mel.melFunc("{PATIENT.COUNTRY}"),this._country},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"postCode",{get:function(){return this._postCode=void 0!==this._postCode?this._postCode:this._mel.melFunc("{PATIENT.ZIP}"),this._postCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state=void 0!==this._state?this._state:this._mel.melFunc("{PATIENT.STATE}"),this._state},enumerable:!1,configurable:!0}),t}(),V=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},H=function(){function t(t,e){var i,n,r;this._mel=t,this._electronicAddressExternal=e,this.formatMelPhone=function(t){var e=new RegExp(/(\d{3})(\d{3})(\d{4})(\d+)?/);t=t.trim();var i=e.exec(t);return null!==i&&i.length>4?"("+i[1]+") "+i[2]+"-"+i[3]+(void 0!==i[4]?" ["+i[4]+"]":""):t},this._electronicAddressExternal&&(this._home=void 0!==this._home?this._home:null===(i=this._electronicAddressExternal.find((function(t){return"H"===t.addressSettingCode&&"tel"===t.urlScheme})))||void 0===i?void 0:i.urlAddr,this._home=this._home?this.formatMelPhone(this._home):this._home,this._business=void 0!==this._business?this._business:null===(n=this._electronicAddressExternal.find((function(t){return"WP"===t.addressSettingCode&&"tel"===t.urlScheme})))||void 0===n?void 0:n.urlAddr,this._business=this._business?this.formatMelPhone(this._business):this._business,this._mobile=void 0!==this._mobile?this._mobile:null===(r=this._electronicAddressExternal.find((function(t){return"MC"===t.addressSettingCode&&"tel"===t.urlScheme})))||void 0===r?void 0:r.urlAddr,this._mobile=this._mobile?this.formatMelPhone(this._mobile):this._mobile)}return Object.defineProperty(t.prototype,"home",{get:function(){return this._home=null!=this._home?this._home:this._mel.melFunc("{PATIENT.ALTPHONE}"),this._home},enumerable:!1,configurable:!0}),t.prototype.homeAsync=function(){return V(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,null==this._home?[3,1]:(e=this._home,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.ALTPHONE}")];case 2:e=i.sent(),i.label=3;case 3:return t._home=e,[2,this._home]}}))}))},Object.defineProperty(t.prototype,"business",{get:function(){return this._business=null!=this._business?this._business:this._mel.melFunc("{PATIENT.WORKPHONE}"),this._business},enumerable:!1,configurable:!0}),t.prototype.businessAsync=function(){return V(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,null==this._business?[3,1]:(e=this._business,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.WORKPHONE}")];case 2:e=i.sent(),i.label=3;case 3:return t._business=e,[2,this._business]}}))}))},Object.defineProperty(t.prototype,"mobile",{get:function(){return this._mobile=null!=this._mobile?this._mobile:this._mel.melFunc("{PATIENT.CELLPHONE}"),this._mobile},enumerable:!1,configurable:!0}),t.prototype.mobileAsync=function(){return V(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,null==this._mobile?[3,1]:(e=this._mobile,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.CELLPHONE}")];case 2:e=i.sent(),i.label=3;case 3:return t._mobile=e,[2,this._mobile]}}))}))},Object.defineProperty(t.prototype,"fax",{get:function(){return this._fax=null!=this._fax?this._fax:this._mel.melFunc("{PATIENT.FAXPHONE}"),this._fax},enumerable:!1,configurable:!0}),t.prototype.faxAsync=function(){return V(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,null==this._fax?[3,1]:(e=this._fax,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.FAXPHONE}")];case 2:e=i.sent(),i.label=3;case 3:return t._fax=e,[2,this._fax]}}))}))},t}(),k=function(){function t(t){this._mel=t}return Object.defineProperty(t.prototype,"office",{get:function(){return this._office=null!=this._office?this._office:this._mel.melFunc("{PATIENT.REFMDOFFICEPHONE}"),this._office},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alternative",{get:function(){return this._alternative=null!=this._alternative?this._alternative:this._mel.melFunc("{PATIENT.REFMDALTPHONE}"),this._alternative},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fax",{get:function(){return this._fax=null!=this._fax?this._fax:this._mel.melFunc("{PATIENT.REFMDFAXPHONE}"),this._fax},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pager",{get:function(){return this._pager=null!=this._pager?this._pager:this._mel.melFunc("{PATIENT.REFMDPAGERPHONE}"),this._pager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mobile",{get:function(){return this._mobile=null!=this._mobile?this._mobile:this._mel.melFunc("{PATIENT.REFMDCELLPHONE}"),this._mobile},enumerable:!1,configurable:!0}),t}(),z=function(){function t(t){this._mel=t,this._phone=new k(this._mel)}return Object.defineProperty(t.prototype,"referringProviderId",{get:function(){return this._referringProviderId=null!=this._referringProviderId?this._referringProviderId:this._mel.melFunc("{PATIENT.REFMDID}"),this._referringProviderId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstName",{get:function(){return this._firstName=null!=this._firstName?this._firstName:this._mel.melFunc("{PATIENT.REFMDFIRSTNAME}"),this._firstName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastName",{get:function(){return this._lastName=null!=this._lastName?this._lastName:this._mel.melFunc("{PATIENT.REFMDLASTNAME}"),this._lastName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"email",{get:function(){return this._email=null!=this._email?this._email:this._mel.melFunc("{PATIENT.REFMDEMAILADDRESS}"),this._email},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullAddress",{get:function(){return this._fullAddress=null!=this._fullAddress?this._fullAddress:this._mel.melFunc("{PATIENT.REFMDADDRESS}"),this._fullAddress},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"phone",{get:function(){return this._phone},enumerable:!1,configurable:!0}),t}(),J=function(){function t(t,e){this._window=t,this._simulator=e,this.isActiveXSupported=w(this._window),this.noData="Data Access Error",this.isExternalSupported=!!this.external,this._window._isSimulator=this.isSimulator}return Object.defineProperty(t.prototype,"external",{get:function(){if("UnitTest"!==this._external)return this._external||(this._external=this._external?this._external:this._window.opener&&this._window.opener.external?this._window.opener.external:this._window.external,void 0===this._external.IsDebugMode&&(this._external=this._simulator.externalSimulator)),this._external},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSimulator",{get:function(){return this._isSimulator=null!=this._window.opener&&null!=this._window.opener._isSimulator?this._window.opener._isSimulator:this._isSimulator?this._isSimulator:v.isSimulator,this._isSimulator},enumerable:!1,configurable:!0}),t}(),W=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._window=e,n._simulator=i,n.melObjectName="GE.CPO.EMR.80.MEL",n.melObjectNameSimulator="GE.CPO.EMR.80.MEL.SIMULATOR",n.noData="Data Access Error",n.initialization=function(){if(w(n._window)){try{n.mel=new n._window.ActiveXObject(n.melObjectName)}catch(t){n.errorMessage=L(n.melObjectName,t)}if(null!=n.errorMessage)try{n.mel=new n._window.ActiveXObject(n.melObjectNameSimulator),v.isSimulator=!0}catch(t){console.log(n.errorMessage)}}},n.melFunc=function(t){return n.external?n.external.EvaluateMel(t,!1):n.mel?n.mel.eval(t):n.noData},n.saveObservation=function(t,e,i){return null==n.mel?n.noData:n.mel.OBSNOW(t,e,i)},n.getObs=function(t,e){return null==n.mel?n.noData:1==t?n.mel.OBSNOW(e,"",""):n.mel.OBSPREV(e)},n.showUrlDialog=function(t){n.melFunc('{SHOWHTMLFORM("'+t+'","test")}')},n.initialization(),n}return u(e,t),Object.defineProperty(e.prototype,"externalSimulator",{get:function(){return null==this.mel?this.noData:this.mel.external},enumerable:!1,configurable:!0}),e}(J),X=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._window=e,n._simulator=i,n.appObjectName="GE.CPO.EMR.90.Application",n.appObjectNameSimulator="GE.CPO.EMR.90.Application.SIMULATOR",n.initialization=function(){if(n.isActiveXSupported){try{n.app=new n._window.ActiveXObject(n.appObjectName),n.app.SetPasscode(n._window.external.Passcode)}catch(t){n.errorMessage=L(n.appObjectName,t)}if(null!=n.errorMessage)try{n.app=new n._window.ActiveXObject(n.appObjectNameSimulator),v.isSimulator=!0}catch(t){n.errorMessage=L(n.appObjectName,t),alert(n.errorMessage)}}},n.showUrlDialog=function(t){return null==n.app?n.noData:n.app.ShowURLDialog(t)},n.initialization(),n}return u(e,t),Object.defineProperty(e.prototype,"enterpriseId",{get:function(){return null==this.app?this.noData:this.app.EnterpriseID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"databaseVersion",{get:function(){return null==this.app?this.noData:this.app.DatabaseVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalSimulator",{get:function(){return null==this.app?this.noData:this.app.external},enumerable:!1,configurable:!0}),e}(J),q=function(t,e,i,n){var r=this;this._mel=t,this._app=e,this._window=i,this._document=n,this.openDialog=function(t){I(t.toLowerCase()).startsWith("//localserver")?r._mel.showUrlDialog(t):r._app.showUrlDialog(t)},this.open=function(t,e,i,n,s){var a=r._document.createElement("form");if(a.action=t,a.method=e||"GET",a.target=i||"_self",s)for(var o in s){var l=r._document.createElement("textarea");l.name=o,l.value="object"==typeof s[o]?JSON.stringify(s[o]):s[o],a.appendChild(l)}a.style.display="none",r._document.body.appendChild(a);var h=r._window.open("about:blank",i,n);return a.submit(),h}},Y=function(t){var e=this;if(this.json=t,this.toJson=function(){return e._json},t){this._json=t;var i=JSON.parse(t);this.confidentialityCode=i.confidentialityCode,this.contactList=i.contactList,this.electronicAddressList=i.electronicAddressList,this.excludedUserAccess=i.excludedUserAccess,this.excludedUserAccessSpecified=i.excludedUserAccessSpecified,this.guarantorList=i.guarantorList,this.guardianList=i.guardianList,this.hasPatientAccess=i.hasPatientAccess,this.hasPatientAccessSpecified=i.hasPatientAccessSpecified,this.healthIssueList=i.healthIssueList,this.identifierList=i.identifierList,this.lastOfficeVisitDate=v.toDate(i.lastOfficeVisitDate),this.lastOfficeVisitDateSpecified=i.lastOfficeVisitDateSpecified,this.mailingAddressList=i.mailingAddressList,this.medicareAdvantagePatient=i.medicareAdvantagePatient,this.medicareAdvantagePatientSpecified=i.medicareAdvantagePatientSpecified,this.mqicEPatientId=i.mqicEPatientId,this.mqicEPatientIdSpecified=i.mqicEPatientIdSpecified,this.organization=i.organization,this.patientKey=i.patientKey,this.patientKeySpecified=i.patientKeySpecified,this.patientPicture=v.toImage(i.patientPicture),this.person=i.person,this.personAge=i.personAge,this.preferredLanguage=i.preferredLanguage,this.primaryProviderRelationshipList=i.primaryProviderRelationshipList,this.registrationNote=i.registrationNote,this.statusCode=i.statusCode,this.vipCode=i.vipCode}},K=function(){function t(){}return t.fromExternal=function(e){var i=new t;return e&&(i.activationDate=v.toDate(e.activationDate),i.activationDateSpecified=e.activationDateSpecified,i.authorizations=e.authorizations,i.authorizedLocationOfCares=e.authorizedLocationOfCares,i.currentLocation=e.currentLocation,i.currentLocationDetail=e.currentLocationDetail,i.currentLocationSpecified=e.currentLocationSpecified,i.data2000=e.data2000,i.deaNumber=e.deaNumber,i.errorDetails=e.errorDetails,i.expirationDate=v.toDate(e.expirationDate),i.expirationDateSpecified=e.expirationDateSpecified,i.firstName=e.firstName,i.globalID=e.globalID,i.globalIDSpecified=e.globalIDSpecified,i.groupList=e.groupList,i.homeLocation=e.homeLocation,i.homeLocationDetail=e.homeLocationDetail,i.homeLocationSpecified=e.homeLocationSpecified,i.isrespprov=e.isrespprov,i.isrespprovSpecified=e.isrespprovSpecified,i.jobTitle=e.jobTitle,i.jobTitleDetail=e.jobTitleDetail,i.jobTitleSpecified=e.jobTitleSpecified,i.lastLoginDate=v.toDate(e.lastLoginDate),i.lastLoginDateSpecified=e.lastLoginDateSpecified,i.lastName=e.lastName,i.lastPasswordChange=v.toDate(e.lastPasswordChange),i.lastPasswordChangeSpecified=e.lastPasswordChangeSpecified,i.licenseNumber=e.licenseNumber,i.loginAttempts=e.loginAttempts,i.loginAttemptsSpecified=e.loginAttemptsSpecified,i.loginName=e.loginName,i.memberID=e.memberID,i.middleName=e.middleName,i.mqicUserName=e.mqicUserName,i.npi=e.npi,i.orgName=e.orgName,i.phone=e.phone,i.pidList=e.pidList,i.pmpRoleID=e.pmpRoleID,i.pmpRoleIDSpecified=e.pmpRoleIDSpecified,i.pmpRoleName=e.pmpRoleName,i.prescriberID=e.prescriberID,i.providerID=e.providerID,i.providerIDSpecified=e.providerIDSpecified,i.result=e.result,i.resultSpecified=e.resultSpecified,i.roleList=e.roleList,i.specialty=e.specialty,i.specialtyDetail=e.specialtyDetail,i.specialtySpecified=e.specialtySpecified,i.spi=e.spi,i.stateName=e.stateName,i.status=e.status,i.subscriptionureg=e.subscriptionureg,i.tocElectronicAddress=e.tocElectronicAddress,i.updateType=e.updateType,i.upin=e.upin),i},t}(),$=function(t){this.allclass=t.allclass,this.allergyGroupID=t.allergyGroupID,this.allergyGroupIDSpecified=t.allergyGroupIDSpecified,this.allergyID=t.allergyID,this.annotate=t.annotate,this.aproxonsetdate=t.aproxonsetdate,this.change=t.change,this.changeSpecified=t.changeSpecified,this.dbCreateDate=v.toDate(t.dbCreateDate),this.dbCreateDateSpecified=t.dbCreateDateSpecified,this.dbUpdatedDate=v.toDate(t.dbUpdatedDate),this.dbUpdatedDateSpecified=t.dbUpdatedDateSpecified,this.description=t.description,this.documentDetail=t.documentDetail,this.drugDescID=t.drugDescID,this.drugDescIDSpecified=t.drugDescIDSpecified,this.errorDetails=t.errorDetails,this.expirationID=t.expirationID,this.extAllergyID=t.extAllergyID,this.extAllergyIDSpecified=t.extAllergyIDSpecified,this.externalAllergyInfoDetail=t.externalAllergyInfoDetail,this.genericProductIndex=t.genericProductIndex,this.gi=t.gi,this.heme=t.heme,this.iscritical=t.iscritical,this.kind=t.kind,this.knowledgeBaseDrugCode=t.knowledgeBaseDrugCode,this.knowledgeBaseDrugCodeSpecified=t.knowledgeBaseDrugCodeSpecified,this.medicationInfo=t.medicationInfo,this.name=t.name,this.ndclabprod=t.ndclabprod,this.ndcpackage=t.ndcpackage,this.onsetdate=v.toDate(t.onsetdate),this.onsetdateSpecified=t.onsetdateSpecified,this.other=t.other,this.pendUserIndent=t.pendUserIndent,this.pendUserIndentSpecified=t.pendUserIndentSpecified,this.pendUserSort=t.pendUserSort,this.pendUserSortSpecified=t.pendUserSortSpecified,this.personID=t.personID,this.pubtime=t.pubtime,this.pubtimeSpecified=t.pubtimeSpecified,this.pubUser=t.pubUser,this.pubUserDetail=K.fromExternal(t.pubUserDetail),this.pubUserSpecified=t.pubUserSpecified,this.rash=t.rash,this.resp=t.resp,this.result=t.result,this.resultSpecified=t.resultSpecified,this.searchCriteria=t.searchCriteria,this.secondaryDocumentID=t.secondaryDocumentID,this.secondaryDocumentIDSpecified=t.secondaryDocumentIDSpecified,this.severity=t.severity,this.shock=t.shock,this.snomedID=t.snomedID,this.snomedIDSpecified=t.snomedIDSpecified,this.stopdate=v.toDate(t.stopdate),this.stopdateSpecified=t.stopdateSpecified,this.stopreason=t.stopreason,this.userDetail=K.fromExternal(t.userDetail),this.userID=t.userID,this.userIDSpecified=t.userIDSpecified,this.userIndent=t.userIndent,this.userIndentSpecified=t.userIndentSpecified,this.userSort=t.userSort,this.userSortSpecified=t.userSortSpecified},Q=function(){function t(){}return t.fromExternal=function(e){var i=new t;return i.annotate=e.annotate,i.aproxonsetdate=e.aproxonsetdate,i.aproxstopdate=e.aproxstopdate,i.assessmentList=e.assessmentList,i.change=e.change,i.code=e.code,i.codechange=e.codechange,i.covered=e.covered,i.dbCreateDate=v.toDate(e.dbCreateDate),i.dbCreateDateSpecified=e.dbCreateDateSpecified,i.dbUpdatedDate=v.toDate(e.dbUpdatedDate),i.dbUpdatedDateSpecified=e.dbUpdatedDateSpecified,i.description=e.description,i.documentDetail=e.documentDetail,i.errorDetails=e.errorDetails,i.expirationID=e.expirationID,i.expirationIDSpecified=e.expirationIDSpecified,i.externalProblemDetail=e.externalProblemDetail,i.extSecondaryProblemID=e.extSecondaryProblemID,i.extSecondaryProblemIDSpecified=e.extSecondaryProblemIDSpecified,i.icd9CodeDetail=e.icd9CodeDetail,i.icd9MasterDiagnosisID=e.icd9MasterDiagnosisID,i.icd9MasterDiagnosisIDSpecified=e.icd9MasterDiagnosisIDSpecified,i.icd10CodeDetail=e.icd10CodeDetail,i.icd10MasterDiagnosisID=e.icd10MasterDiagnosisID,i.icd10MasterDiagnosisIDSpecified=e.icd10MasterDiagnosisIDSpecified,i.lastClaimedDate=v.toDate(e.lastClaimedDate),i.lastClaimedDateSpecified=e.lastClaimedDateSpecified,i.medicareAdvantageAlert=e.medicareAdvantageAlert,i.medicareAdvantageAlertSpecified=e.medicareAdvantageAlertSpecified,i.medicareAdvantageRiskAdjustmentFactor=e.medicareAdvantageRiskAdjustmentFactor,i.onsetdate=v.toDate(e.onsetdate),i.onsetdateSpecified=e.onsetdateSpecified,i.pendUserIndent=e.pendUserIndent,i.pendUserIndentSpecified=e.pendUserIndentSpecified,i.pendUserSort=e.pendUserSort,i.pendUserSortSpecified=e.pendUserSortSpecified,i.personID=e.personID,i.priority=e.priority,i.prioritySpecified=e.prioritySpecified,i.problemID=e.problemID,i.problemIDSpecified=e.problemIDSpecified,i.pubtime=e.pubtime,i.pubtimeSpecified=e.pubtimeSpecified,i.pubUser=e.pubUser,i.pubUserDetail=K.fromExternal(e.pubUserDetail),i.pubUserSpecified=e.pubUserSpecified,i.qualifier=e.qualifier,i.result=e.result,i.resultSpecified=e.resultSpecified,i.searchCriteria=e.searchCriteria,i.secondaryDocumentID=e.secondaryDocumentID,i.secondaryDocumentIDSpecified=e.secondaryDocumentIDSpecified,i.secondaryProblemID=e.secondaryProblemID,i.secondaryProblemIDSpecified=e.secondaryProblemIDSpecified,i.snoMedCodeDetail=e.snoMedCodeDetail,i.snoMedMasterDiagnosisID=e.snoMedMasterDiagnosisID,i.snoMedMasterDiagnosisIDSpecified=e.snoMedMasterDiagnosisIDSpecified,i.stopdate=v.toDate(e.stopdate),i.stopdateSpecified=e.stopdateSpecified,i.stopreason=e.stopreason,i.userDetail=K.fromExternal(e.userDetail),i.userDim=e.userDim,i.userDimSpecified=e.userDimSpecified,i.userID=e.userID,i.userIDSpecified=e.userIDSpecified,i.userIndent=e.userIndent,i.userIndentSpecified=e.userIndentSpecified,i.userSort=e.userSort,i.userSortSpecified=e.userSortSpecified,i},t}(),Z=function(t){function e(e){void 0===e&&(e="[]");var i=t.apply(this,p(JSON.parse(e).map((function(t){return new $(t)}))))||this;return i.json=e,i}return u(e,t),e}(Array),tt=function(t){this._value=t,this.data=null==this._value?[]:this._value.split("^"),this.name=this.data.length>0?this.data[0]:"",this.value=this.data.length>1?this.data[1]:"",this.date=this.data.length>2?this.data[2]:""},et=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},it=function(e){function i(){var n=e.apply(this,p(arguments))||this;return n._isLoaded=!1,n.load=function(t){n._isLoaded||(n._current(t),n._new(t),n._removed(t),n._isLoaded=!0)},n.loadAsync=function(t){return et(n,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return this._isLoaded?[3,4]:[4,this._currentAsync(t)];case 1:return e.sent(),[4,this._newAsync(t)];case 2:return e.sent(),[4,this._removedAsync(t)];case 3:e.sent(),this._isLoaded=!0,e.label=4;case 4:return[2]}}))}))},n._current=function(t){n.currentProblemMelData=null!=n.currentProblemMelData?n.currentProblemMelData:t.melFunc('{PROB_PRIOR("delimited","dat","com")}'),n.loadMelDataToList(n.currentProblemMelData,n.currentProblem)},n._currentAsync=function(t){return et(n,void 0,void 0,(function(){var e,i;return d(this,(function(n){switch(n.label){case 0:return e=this,null==this.currentProblemMelData?[3,1]:(i=this.currentProblemMelData,[3,3]);case 1:return[4,t.melFunc('{PROB_PRIOR("delimited","dat","com")}')];case 2:i=n.sent(),n.label=3;case 3:return e.currentProblemMelData=i,this.loadMelDataToList(this.currentProblemMelData,this.currentProblem),[2]}}))}))},n._new=function(t){n.newProblemMelData=null!=n.newProblemMelData?n.newProblemMelData:t.melFunc('{PROB_NEW("delimited","dat","com")}'),n.loadMelDataToList(n.newProblemMelData,n.newProblem)},n._newAsync=function(t){return et(n,void 0,void 0,(function(){var e,i;return d(this,(function(n){switch(n.label){case 0:return e=this,null==this.newProblemMelData?[3,1]:(i=this.newProblemMelData,[3,3]);case 1:return[4,t.melFunc('{PROB_NEW("delimited","dat","com")}')];case 2:i=n.sent(),n.label=3;case 3:return e.newProblemMelData=i,this.loadMelDataToList(this.newProblemMelData,this.newProblem),[2]}}))}))},n._removed=function(t){n.removedProblemMelData=null!=n.removedProblemMelData?n.removedProblemMelData:t.melFunc('{PROB_REMOVED("delimited","dat","com")}'),n.markRemovedMelDataFromList(n.removedProblemMelData,n.removedProblem)},n._removedAsync=function(t){return et(n,void 0,void 0,(function(){var e,i;return d(this,(function(n){switch(n.label){case 0:return e=this,null==this.removedProblemMelData?[3,1]:(i=this.removedProblemMelData,[3,3]);case 1:return[4,t.melFunc('{PROB_REMOVED("delimited","dat","com")}')];case 2:i=n.sent(),n.label=3;case 3:return e.removedProblemMelData=i,this.markRemovedMelDataFromList(this.removedProblemMelData,this.removedProblem),[2]}}))}))},n.loadMelDataToList=function(t,e){for(var i=I(t).toList(),r=0;r<i.length;r++)n.push(e(i[r]))},n.markRemovedMelDataFromList=function(e,i){for(var r=I(e).toList(),s=function(e){var s=i(r[e]);n.forEach((function(e){e.problemId===s.problemId&&(e.status=t.ObjectStatus.Changed)})),n.push(s)},a=0;a<r.length;a++)s(a)},n.currentProblem=function(t){var e=null==t?[]:t.split("^"),i=new D;return i=n._locadMelDataFromString(e,i)},n.newProblem=function(e){var i=null==e?[]:e.split("^"),r=new D;return r.status=t.ObjectStatus.Added,r=n._locadMelDataFromString(i,r)},n.removedProblem=function(e){var i=null==e?[]:e.split("^"),r=new D;return r.status=t.ObjectStatus.Removed,r=n._locadMelDataFromString(i,r)},n._locadMelDataFromString=function(t,e){e.type=t.length>0?t[0]:"",e.description=t.length>1?t[1]:"",e.codeIcd9=t.length>2?t[2]:"",e.comment=t.length>3?t[3]:"",e.onsetDate=I(t.length>4?t[4]:"").toDate(),e.stopDate=I(t.length>5?t[5]:"").toDate(),e.stopReason=t.length>6?t[6]:"",e.codeIcd10=t.length>7?t[7]:"",e.lastModifiedDate=t.length>9?t[9]:"";var i=t.length>8?t[8]:"",n=i.indexOf(".");return i=n>-1?i.substr(0,n):i,e.problemId=i,e},n.filterProblems=function(t,r){var s=new i;return s.push.apply(s,p(e.prototype.filter.call(n,t,r))),s},n}return u(i,e),i}(Array),nt=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},rt=function(){function e(t,e,i){var n=this;if(this._mel=t,this._demographics=e,this._allergiesExternal=i,this.observationType=new N,this._contactsArray=[],this._observations={},this._observatiosArray=[],this._protocolsArray=[],this._insurances=[],this._immunizationsArray=[],this._carePlansArray=[],this._locationsArray=[],this._allergies=new M(this._mel),this._referringProvider=new z(this._mel),this.observations=function(t){if(null==n._observations[t]){for(var e=I(n._mel.melFunc('{LIST_OBS("'+t+'","Update","Delimited","value")}')).toList(),i=[],r=0;r<e.length;r++)i.push(new x(t,n.observationType.DocumentUnsigned,e[r],n._mel));n._observations[t]=i;var s=I(n._mel.melFunc('{LIST_OBS("'+t+'","Signed","Delimited","value")}')).toList();for(r=0;r<s.length;r++)n._observations[t].push(new x(t,n.observationType.Signed,s[r],n._mel));n._observations[t].tag="LIST_OBS."+t}return n._observations[t]},e){if(this._patientPicture=e.patientPicture,this._lastOfficeVisit=e.lastOfficeVisitDate,this._registrationNote=e.registrationNote,this._language=e.preferredLanguage,e.identifierList){var r=e.identifierList.find((function(t){return"1.2.3.4.700"===t.identifierDomain.domainId}));this._patientId=r?r.idValue:this._patientId,this._printId=this._patientId;var s=e.identifierList.find((function(t){return"1.2.3.4.200"===t.identifierDomain.domainId}));this._externalId=s?s.idValue:this._externalId;var a=e.identifierList.find((function(t){return"1.2.3.4.400"===t.identifierDomain.domainId}));this._medicalRecordId=a?a.idValue:this._medicalRecordId}if(e.person){var o=v.formatDate(e.person.birthDate);if(this._dateOfBirth=o||this._dateOfBirth,this._dateOfDeath=e.person.deceaseIndSpecified&&e.person.deceaseInd?v.formatDate(e.person.deceaseTime):this._dateOfDeath,this._sex=e.person.genderCode,e.person.mailingAddressList&&e.person.mailingAddressList[0]&&(this._address=this._address?this._address:new G(this._mel,e.person.mailingAddressList[0])),e.person.electronicAddressList&&(this._phone=this._phone?this._phone:new H(this._mel,e.person.electronicAddressList)),e.person.personNameList&&e.person.personNameList[0]&&(this._firstName=null===e.person.personNameList[0].givenName?"":e.person.personNameList[0].givenName,this._lastName=null===e.person.personNameList[0].familyName?"":e.person.personNameList[0].familyName,this._middleName=null===e.person.personNameList[0].middleName?"":e.person.personNameList[0].middleName,this._labelName=this._firstName+" "+this._middleName+" "+this._lastName,this._namePrefix=e.person.personNameList[0].prefixName,this._nameSuffix=e.person.personNameList[0].suffixName),this._pid=e.patientKeySpecified?e.patientKey.toString():this._pid,e.person.identifierList){var l=e.person.identifierList.find((function(t){return"1.2.3.4.300"===t.identifierDomain.domainId}));this._ssn=l?l.idValue:this._ssn,this._ssn=this._ssn?this._ssn.replace(/(\d{3})(\d{3})(\d+)/,"$1-$2-$3"):this._ssn}}}this._address=this._address?this._address:new G(this._mel),this._phone=this._phone?this._phone:new H(this._mel)}return Object.defineProperty(e.prototype,"lastOfficeVisit",{get:function(){return this._lastOfficeVisit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"patientPicture",{get:function(){return this._patientPicture=void 0!==this._patientPicture?this._patientPicture:b,this._patientPicture},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"patientId",{get:function(){return this._patientId=void 0!==this._patientId?this._patientId:this._mel.melFunc("{PATIENT.PATIENTID}"),this._patientId},enumerable:!1,configurable:!0}),e.prototype.patientIdAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._patientId?[3,1]:(e=this._patientId,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.PATIENTID}")];case 2:e=i.sent(),i.label=3;case 3:return t._patientId=e,[2,this._patientId]}}))}))},Object.defineProperty(e.prototype,"pid",{get:function(){return this._pid=void 0!==this._pid?this._pid:this._mel.melFunc('{find("patient", "PID")}'),this._pid},enumerable:!1,configurable:!0}),e.prototype.pidAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._pid?[3,1]:(e=this._pid,[3,3]);case 1:return[4,this._mel.melFunc('{find("patient", "PID")}')];case 2:e=i.sent(),i.label=3;case 3:return t._pid=e,[2,this._pid]}}))}))},Object.defineProperty(e.prototype,"medicalRecordId",{get:function(){return this._medicalRecordId=void 0!==this._medicalRecordId?this._medicalRecordId:this._mel.melFunc("{PATIENT.MEDRECNO}"),this._medicalRecordId},enumerable:!1,configurable:!0}),e.prototype.medicalRecordIdAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._medicalRecordId?[3,1]:(e=this._medicalRecordId,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.MEDRECNO}")];case 2:e=i.sent(),i.label=3;case 3:return t._medicalRecordId=e,[2,this._medicalRecordId]}}))}))},Object.defineProperty(e.prototype,"externalId",{get:function(){return this._externalId=void 0!==this._externalId?this._externalId:this._mel.melFunc("{PATIENT.EXTERNALID}"),this._externalId},enumerable:!1,configurable:!0}),e.prototype.externalIdAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._externalId?[3,1]:(e=this._externalId,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.EXTERNALID}")];case 2:e=i.sent(),i.label=3;case 3:return t._externalId=e,[2,this._externalId]}}))}))},Object.defineProperty(e.prototype,"printId",{get:function(){return this._printId=void 0!==this._printId?this._printId:this._mel.melFunc("{PATIENT.PRINTID}"),this._printId},enumerable:!1,configurable:!0}),e.prototype.printIdAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._printId?[3,1]:(e=this._printId,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.PRINTID}")];case 2:e=i.sent(),i.label=3;case 3:return t._printId=e,[2,this._printId]}}))}))},Object.defineProperty(e.prototype,"ssn",{get:function(){return this._ssn=void 0!==this._ssn?this._ssn:this._mel.melFunc("{PATIENT.SOCSECNO}"),this._ssn},enumerable:!1,configurable:!0}),e.prototype.ssnAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._ssn?[3,1]:(e=this._ssn,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.SOCSECNO}")];case 2:e=i.sent(),i.label=3;case 3:return t._ssn=e,[2,this._ssn]}}))}))},Object.defineProperty(e.prototype,"firstName",{get:function(){return this._firstName=void 0!==this._firstName?this._firstName:this._mel.melFunc("{PATIENT.FIRSTNAME}"),this._firstName},enumerable:!1,configurable:!0}),e.prototype.firstNameAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._firstName?[3,1]:(e=this._firstName,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.FIRSTNAME}")];case 2:e=i.sent(),i.label=3;case 3:return t._firstName=e,[2,this._firstName]}}))}))},Object.defineProperty(e.prototype,"lastName",{get:function(){return this._lastName=void 0!==this._lastName?this._lastName:this._mel.melFunc("{PATIENT.LASTNAME}"),this._lastName},enumerable:!1,configurable:!0}),e.prototype.lastNameAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._lastName?[3,1]:(e=this._lastName,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.LASTNAME}")];case 2:e=i.sent(),i.label=3;case 3:return t._lastName=e,[2,this._lastName]}}))}))},Object.defineProperty(e.prototype,"middleName",{get:function(){return this._middleName=void 0!==this._middleName?this._middleName:this._mel.melFunc("{PATIENT.MIDDLENAME}"),this._middleName},enumerable:!1,configurable:!0}),e.prototype.middleNameAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._middleName?[3,1]:(e=this._middleName,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.MIDDLENAME}")];case 2:e=i.sent(),i.label=3;case 3:return t._middleName=e,[2,this._middleName]}}))}))},Object.defineProperty(e.prototype,"labelName",{get:function(){return this._labelName=void 0!==this._labelName?this._labelName:this._mel.melFunc("{PATIENT.LABELNAME}"),this._labelName},enumerable:!1,configurable:!0}),e.prototype.labelNameAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._labelName?[3,1]:(e=this._labelName,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.LABELNAME}")];case 2:e=i.sent(),i.label=3;case 3:return t._labelName=e,[2,this._labelName]}}))}))},Object.defineProperty(e.prototype,"namePrefix",{get:function(){return this._namePrefix=void 0!==this._namePrefix?this._namePrefix:this._mel.melFunc("{PATIENT.TITLE}"),this._namePrefix},enumerable:!1,configurable:!0}),e.prototype.namePrefixAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._namePrefix?[3,1]:(e=this._namePrefix,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.TITLE}")];case 2:e=i.sent(),i.label=3;case 3:return t._namePrefix=e,[2,this._namePrefix]}}))}))},Object.defineProperty(e.prototype,"nameSuffix",{get:function(){return this._nameSuffix=void 0!==this._nameSuffix?this._nameSuffix:this._mel.melFunc("{PATIENT.ENTITLEMENTS}"),this._nameSuffix},enumerable:!1,configurable:!0}),e.prototype.nameSuffixAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._nameSuffix?[3,1]:(e=this._nameSuffix,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.ENTITLEMENTS}")];case 2:e=i.sent(),i.label=3;case 3:return t._nameSuffix=e,[2,this._nameSuffix]}}))}))},Object.defineProperty(e.prototype,"sex",{get:function(){return this._sex=void 0!==this._sex?this._sex:this._mel.melFunc("{PATIENT.SEX}"),this._sex},enumerable:!1,configurable:!0}),e.prototype.sexAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._sex?[3,1]:(e=this._sex,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.SEX}")];case 2:e=i.sent(),i.label=3;case 3:return t._sex=e,[2,this._sex]}}))}))},Object.defineProperty(e.prototype,"race",{get:function(){return this._race=void 0!==this._race?this._race:this._mel.melFunc("{PATIENT.RACE}"),this._race},enumerable:!1,configurable:!0}),e.prototype.raceAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._race?[3,1]:(e=this._race,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.RACE}")];case 2:e=i.sent(),i.label=3;case 3:return t._race=e,[2,this._race]}}))}))},Object.defineProperty(e.prototype,"ethnicity",{get:function(){return this._ethnicity=void 0!==this._ethnicity?this._ethnicity:this._mel.melFunc("{PATIENT.ETHNICITY}"),this._ethnicity},enumerable:!1,configurable:!0}),e.prototype.ethnicityAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._ethnicity?[3,1]:(e=this._ethnicity,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.ETHNICITY}")];case 2:e=i.sent(),i.label=3;case 3:return t._ethnicity=e,[2,this._ethnicity]}}))}))},Object.defineProperty(e.prototype,"dateOfBirth",{get:function(){return this._dateOfBirth=void 0!==this._dateOfBirth?this._dateOfBirth:this._mel.melFunc("{PATIENT.DATEOFBIRTH}"),this._dateOfBirth},enumerable:!1,configurable:!0}),e.prototype.dateOfBirthAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._dateOfBirth?[3,1]:(e=this._dateOfBirth,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.DATEOFBIRTH}")];case 2:e=i.sent(),i.label=3;case 3:return t._dateOfBirth=e,[2,this._dateOfBirth]}}))}))},Object.defineProperty(e.prototype,"dateOfDeath",{get:function(){return this._dateOfDeath=void 0!==this._dateOfDeath?this._dateOfDeath:this._mel.melFunc("{PATIENT.DATEOFDEATH}"),this._dateOfDeath},enumerable:!1,configurable:!0}),e.prototype.dateOfDeathAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._dateOfDeath?[3,1]:(e=this._dateOfDeath,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.DATEOFDEATH}")];case 2:e=i.sent(),i.label=3;case 3:return t._dateOfDeath=e,[2,this._dateOfDeath]}}))}))},Object.defineProperty(e.prototype,"maritalStatus",{get:function(){return this._maritalStatus=void 0!==this._maritalStatus?this._maritalStatus:this._mel.melFunc("{PATIENT.MARITALSTATUS}"),this._maritalStatus},enumerable:!1,configurable:!0}),e.prototype.maritalStatusAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._maritalStatus?[3,1]:(e=this._maritalStatus,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.MARITALSTATUS}")];case 2:e=i.sent(),i.label=3;case 3:return t._maritalStatus=e,[2,this._maritalStatus]}}))}))},Object.defineProperty(e.prototype,"language",{get:function(){return this._language=void 0!==this._language?this._language:this._mel.melFunc("{PATIENT.PREFLANG}"),this._language},enumerable:!1,configurable:!0}),e.prototype.languageAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._language?[3,1]:(e=this._language,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.PREFLANG}")];case 2:e=i.sent(),i.label=3;case 3:return t._language=e,[2,this._language]}}))}))},Object.defineProperty(e.prototype,"email",{get:function(){return this._email=void 0!==this._email?this._email:this._mel.melFunc("{PATIENT.EMAIL}"),this._email},enumerable:!1,configurable:!0}),e.prototype.emailAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._email?[3,1]:(e=this._email,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.EMAIL}")];case 2:e=i.sent(),i.label=3;case 3:return t._email=e,[2,this._email]}}))}))},Object.defineProperty(e.prototype,"contactBy",{get:function(){return this._contactBy=void 0!==this._contactBy?this._contactBy:this._mel.melFunc("{PATIENT.CONTACTBY}"),this._contactBy},enumerable:!1,configurable:!0}),e.prototype.contactByAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._contactBy?[3,1]:(e=this._contactBy,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.CONTACTBY}")];case 2:e=i.sent(),i.label=3;case 3:return t._contactBy=e,[2,this._contactBy]}}))}))},Object.defineProperty(e.prototype,"registrationNote",{get:function(){return this._registrationNote=void 0!==this._registrationNote?this._registrationNote:this._mel.melFunc("{PATIENT.REGNOTE}"),this._registrationNote},enumerable:!1,configurable:!0}),e.prototype.registrationNoteAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._registrationNote?[3,1]:(e=this._registrationNote,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.REGNOTE}")];case 2:e=i.sent(),i.label=3;case 3:return t._registrationNote=e,[2,this._registrationNote]}}))}))},Object.defineProperty(e.prototype,"contacts",{get:function(){var t=this;if(0===this._contactsArray.length){this._contacts=void 0!==this._contacts?this._contacts:this._mel.melFunc("{PATIENT.CONTACTS}");var e=I(this._contacts).toList();this._contactsArray=[];for(var i=0;i<e.length;i++)this._contactsArray.push(new g(e[i]));this._contactsArray.tag="PATIENT.CONTACTS",this._contactsArray.toMelString=function(){return t._contacts}}return this._contactsArray},enumerable:!1,configurable:!0}),e.prototype.contactsAsync=function(){return nt(this,void 0,void 0,(function(){var t,e,i,n,r=this;return d(this,(function(s){switch(s.label){case 0:return 0!==this._contactsArray.length?[3,4]:(t=this,void 0===this._contacts?[3,1]:(e=this._contacts,[3,3]));case 1:return[4,this._mel.melFunc("{PATIENT.CONTACTS}")];case 2:e=s.sent(),s.label=3;case 3:for(t._contacts=e,i=I(this._contacts).toList(),this._contactsArray=[],n=0;n<i.length;n++)this._contactsArray.push(new g(i[n]));this._contactsArray.tag="PATIENT.CONTACTS",this._contactsArray.toMelString=function(){return r._contacts},s.label=4;case 4:return[2,this._contactsArray]}}))}))},Object.defineProperty(e.prototype,"employmentStatus",{get:function(){return this._employmentStatus=void 0!==this._employmentStatus?this._employmentStatus:this._mel.melFunc("{PATIENT.EMPLSTATUS}"),this._employmentStatus},enumerable:!1,configurable:!0}),e.prototype.employmentStatusAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._employmentStatus?[3,1]:(e=this._employmentStatus,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.EMPLSTATUS}")];case 2:e=i.sent(),i.label=3;case 3:return t._employmentStatus=e,[2,this._employmentStatus]}}))}))},Object.defineProperty(e.prototype,"clinicStatus",{get:function(){return this._clinicStatus=void 0!==this._clinicStatus?this._clinicStatus:this._mel.melFunc("{PATIENT.PSTATUS}"),this._clinicStatus},enumerable:!1,configurable:!0}),e.prototype.clinicStatusAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._clinicStatus?[3,1]:(e=this._clinicStatus,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.PSTATUS}")];case 2:e=i.sent(),i.label=3;case 3:return t._clinicStatus=e,[2,this._clinicStatus]}}))}))},Object.defineProperty(e.prototype,"primaryCarePhysicianName",{get:function(){return this._primaryCarePhysicianName=void 0!==this._primaryCarePhysicianName?this._primaryCarePhysicianName:this._mel.melFunc("{PATIENT.PCP}"),this._primaryCarePhysicianName},enumerable:!1,configurable:!0}),e.prototype.primaryCarePhysicianNameAsync=function(){return nt(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,void 0===this._primaryCarePhysicianName?[3,1]:(e=this._primaryCarePhysicianName,[3,3]);case 1:return[4,this._mel.melFunc("{PATIENT.PCP}")];case 2:e=i.sent(),i.label=3;case 3:return t._primaryCarePhysicianName=e,[2,this._primaryCarePhysicianName]}}))}))},Object.defineProperty(e.prototype,"problems",{get:function(){return this._problems||(this._problems=new it,this._problems.load(this._mel)),this._problems.tag="PROB_AFTER",this._problems},enumerable:!1,configurable:!0}),e.prototype.problemsAsync=function(){return nt(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return this._problems?[3,2]:(this._problems=new it,[4,this._problems.loadAsync(this._mel)]);case 1:t.sent(),t.label=2;case 2:return[2,this._problems]}}))}))},e.prototype.flowsheetObservations=function(t){var e=this,i="";if(i=t||this._mel.melFunc("{_EncodeViewNameBS}"),0===this._observatiosArray.length||this._observatiosArray.tag!="GET_FLOWSHEET_VALUES:"+i){this._observationList=this._mel.melFunc('{GET_FLOWSHEET_VALUES("'+i+'","DELIM")}');var n=I(this._observationList).toList();this._observatiosArray=[];for(var r=0;r<n.length;r++)this._observatiosArray.push(new tt(n[r]));this._observatiosArray.tag="GET_FLOWSHEET_VALUES:"+i,this._observatiosArray.toMelString=function(){return e._observationList}}return this._observatiosArray},Object.defineProperty(e.prototype,"protocols",{get:function(){var t=this;if(0===this._protocolsArray.length){this._protocols=void 0!==this._protocols?this._protocols:this._mel.melFunc('{LISTPROTOCOLSHORT("list")}');var e=I(this._protocols).toList("\r\n");this._protocolsArray=[];for(var i=0;i<e.length;i++)this._protocolsArray.push(new j(e[i]));this._protocolsArray.tag='LISTPROTOCOLSHORT("list")',this._protocolsArray.toMelString=function(){return t._protocols}}return this._protocolsArray},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"insurances",{get:function(){return 0===this._insurances.length&&(this._insurances.push(new U("P",this._mel)),this._insurances.push(new U("S",this._mel)),this._insurances.push(new U("T",this._mel))),this._insurances},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"immunizations",{get:function(){var t=this;if(0===this._immunizationsArray.length){this._immunizations=void 0!==this._immunizations?this._immunizations:this._mel.melFunc("{IMMUN_GETLIST()}");var e=I(this._immunizations).toList();this._immunizationsArray=[];for(var i=0;i<e.length;i++)this._immunizationsArray.push(new S(e[i],this._mel));this._immunizationsArray.tag="IMMUN_GETLIST",this._immunizationsArray.toMelString=function(){return t._immunizations}}return this._immunizationsArray},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"carePlans",{get:function(){var t=this;if(0===this._carePlansArray.length){this._carePlans=void 0!==this._carePlans?this._carePlans:this._mel.melFunc('{MEL_LIST_CARE_PLAN("delim","all","all")}');var e=I(this._carePlans).toList();this._carePlansArray=[];for(var i=0;i<e.length;i++)this._carePlansArray.push(new B(e[i],this._mel));this._carePlansArray.tag="MEL_LIST_CARE_PLAN",this._carePlansArray.toMelString=function(){return t._carePlans}}return this._carePlansArray},enumerable:!1,configurable:!0}),e.prototype.carePlansAsync=function(){return nt(this,void 0,void 0,(function(){var t,e,i,n,r=this;return d(this,(function(s){switch(s.label){case 0:return 0!==this._carePlansArray.length?[3,4]:(t=this,void 0===this._carePlans?[3,1]:(e=this._carePlans,[3,3]));case 1:return[4,this._mel.melFunc('{MEL_LIST_CARE_PLAN("delim","all","all")}')];case 2:e=s.sent(),s.label=3;case 3:for(t._carePlans=e,i=I(this._carePlans).toList(),this._carePlansArray=[],n=0;n<i.length;n++)this._carePlansArray.push(new B(i[n],this._mel));this._carePlansArray.tag="MEL_LIST_CARE_PLAN",this._carePlansArray.toMelString=function(){return r._carePlans},s.label=4;case 4:return[2,this._carePlansArray]}}))}))},Object.defineProperty(e.prototype,"locations",{get:function(){if(0===this._locationsArray.length){this._locations=void 0!==this._locations?this._locations:this._mel.melFunc("{PATIENT.HOMELOCATIONNAME}"),this._locationsId=void 0!==this._locationsId?this._locationsId:this._mel.melFunc("{PATIENT.HOMELOCATIONABBREVNAME}");var e=new h(this._locationsId,this._locations,t.LocationType.Home);this._locationsArray.push(e),this._locationsArray.findByType=function(t){var e;if("number"==typeof t)for(e=0;e<this.length;e++)if(this[e].locationType===t)return this[e]}}return this._locationsArray},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allergies",{get:function(){return this._allergies},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"referringProvider",{get:function(){return this._referringProvider},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"phone",{get:function(){return this._phone},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),e}(),st=function(e){var i=this;this._mel=e,this._usersArray=[],this.getUser=function(e){return null!=e?(i._user=null!=i._user?i._user:new P(i._mel.melFunc('{GETUSERINFO("'+e+'")}'),t.UserCallFunction.UserInfo),i._user):(i._currentUser=null!=i._currentUser?i._currentUser:new P(function(t){return t.melFunc('{GETUSERINFO("'+t.melFunc("{USER.LOGINNAME}")+'")}')+"^"+t.melFunc("{USER.CURLOCATIONNAME}")+"^"+t.melFunc("{USER.FIRSTNAME}")+"^"+t.melFunc("{USER.MIDDLENAME}")+"^"+t.melFunc("{USER.LASTNAME}")}(i._mel),t.UserCallFunction.UserInfo),i._currentUser)},this.getUsers=function(){if(0===i._usersArray.length){i._users=i._mel.melFunc('{GET_USER_LIST(USER.CURLOCATIONABBREVNAME, "", "delimited", true)}');for(var e=I(i._users).toList(),n=0;n<e.length;n++)i._usersArray.push(new P(e[n],t.UserCallFunction.UserList));i._usersArray.tag="GET_USER_LIST",i._usersArray.toMelString=function(){return i._users}}return i._usersArray}},at=function(){function t(){var t=this;this.EvaluateMel=function(e,i){return void 0===i&&(i=!1),t.sendMessage(y,{type:"EvaluateMel",data:e})},this.sendMessage=function(t,e){return new Promise((function(i,n){"undefined"!=typeof chrome&&void 0!==chrome.runtime?chrome.runtime.sendMessage(t,e,(function(t){i(void 0!==t?t:null)})):n("unsupported")}))}}return Object.defineProperty(t.prototype,"Demographics",{get:function(){return this.sendMessage(y,{type:"Demographics"})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Allergies",{get:function(){return this.sendMessage(y,{type:"Allergies"})},enumerable:!1,configurable:!0}),t}(),ot=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},lt=function(){function t(t){var e=this;this._window=t,this.appObjectNameSimulator="GE.CPO.EMR.90.Application.SIMULATOR",this.noData="Data Access Error",this._isExtensionEvaluated=!1,this._isActiveX=!1,this._isSimulator=!1,this._ExtensionExternalSimulator=new at,this.isSimulatorAsync=function(){return ot(e,void 0,void 0,(function(){var t;return d(this,(function(e){switch(e.label){case 0:return this._isSimulator?[2,this._isSimulator]:[3,1];case 1:return this._isExtensionEvaluated?[3,3]:(t=this,[4,this.sendMessage(y,{type:"version"})]);case 2:t._isSimulator=e.sent(),this._isExtensionEvaluated=!0,e.label=3;case 3:return[2,this._isSimulator]}}))}))},this.initialization=function(){if(w(e._window))try{e.app=new e._window.ActiveXObject(e.appObjectNameSimulator),e._isActiveX=!0,e._isSimulator=!0,console.info("mdObject is using ActiveX Simulator: "+e.appObjectNameSimulator)}catch(i){var t=L(e.appObjectNameSimulator,i);console.info(t)}},this.sendMessage=function(t,e){return new Promise((function(i,n){"undefined"!=typeof chrome&&void 0!==chrome.runtime?chrome.runtime.sendMessage(t,e,(function(t){t?(console.info("mdObject is using Chrome Extension Simulator: "+y),i(!0)):(console.info("mdObject: Chrome Extension Simulator is missing or inactive"),i(!1))})):i(!1)}))},this.initialization()}return Object.defineProperty(t.prototype,"externalSimulator",{get:function(){return this._isActiveX?this.app?this.app.external:this.noData:this._ExtensionExternalSimulator},enumerable:!1,configurable:!0}),t}(),ht=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},ct=function(){function e(t,e){var i=this;this._mel=t,this._emr=e,this._locationPropertyArray=[],this.save=function(){i._mel.melFunc('{DOCUMENT.mdObject_letiables = "'+JSON.stringify(i.rawValue).replace(/"/g,'\\"')+'"}')},this.rawValue=T({},this.save),this.val=function(t,e){if(null!=t&&0!==t.length)return null==e?i._mel.melFunc("{DOCUMENT."+t+"}"):i._mel.melFunc("{DOCUMENT."+t+'="'+e+'"}')}}return Object.defineProperty(e.prototype,"letiables",{get:function(){if(null==this._letiables){this._letiables=null!=this._letiables?this._letiables:this._mel.melFunc("{DOCUMENT.mdObject_letiables}"),this._letiables=""!==this._letiables?this._letiables:JSON.stringify(this.rawValue);try{this.rawValue=T(JSON.parse(this._letiables),this.save)}catch(t){this.rawValue={}}}return this.rawValue},set:function(t){for(var e in t)this.rawValue[e]=t[e];this._mel.melFunc('{DOCUMENT.mdObject_letiables = "'+JSON.stringify(this.rawValue).replace(/"/g,'\\"')+'"}')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"did",{get:function(){return this._did=null!=this._did?this._did:this._mel.melFunc('{find("DOCUMENT","DID")}'),this._did},enumerable:!1,configurable:!0}),e.prototype.didAsync=function(){return ht(this,void 0,void 0,(function(){var t,e;return d(this,(function(i){switch(i.label){case 0:return t=this,null==this._did?[3,1]:(e=this._did,[3,3]);case 1:return[4,this._emr.melFuncAsync('{find("DOCUMENT","DID")}')];case 2:e=i.sent(),i.label=3;case 3:return t._did=e,[2,this._did]}}))}))},Object.defineProperty(e.prototype,"xid",{get:function(){return this._xid=null!=this._xid?this._xid:this._mel.melFunc("{DOCUMENT.XID}").split(".")[0],this._xid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"documentId",{get:function(){return this._documentId=null!=this._documentId?this._documentId:this._mel.melFunc("{DOCUMENT.VISDOCID}"),this._documentId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status=null!=this._status?this._status:this._mel.melFunc("{DOCUMENT.STATUS}"),this._status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return 0===this._locationPropertyArray.length&&(this._location=null!=this._location?this._location:this._mel.melFunc("{DOCUMENT.LOCOFCARENAME}"),this._locationProperty=null!=this._locationProperty?this._locationProperty:new h(this._location,this._location,t.LocationType.Current),this._locationPropertyArray.push(this._locationProperty),this._locationPropertyArray.findByType=function(t){var e;if("number"==typeof t)for(e=0;e<this.length;e++)if(this[e].locationType===t)return this[e]}),this._locationPropertyArray},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateOfUpdate",{get:function(){return this._dateOfUpdate=null!=this._dateOfUpdate?this._dateOfUpdate:this._mel.melFunc("{DOCUMENT.CLINICALDATE}"),this._dateOfUpdate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"provider",{get:function(){return this._provider=null!=this._provider?this._provider:this._mel.melFunc("{DOCUMENT.PROVIDER}"),this._provider},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLoginName",{get:function(){return this._userLoginName=null!=this._userLoginName?this._userLoginName:this._mel.melFunc("{DOCUMENT.USERLOGINNAME}"),this._userLoginName},enumerable:!1,configurable:!0}),e}(),ut=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},dt=function(t){function e(){var e=t.apply(this,p(arguments))||this;return e._isLoaded=!1,e.loadAsync=function(t,i){return ut(e,void 0,void 0,(function(){var e;return d(this,(function(n){switch(n.label){case 0:return this._isLoaded&&this._name===t?[3,2]:(this._name=t,this.tag="MEL_GET_CONTENT",e=this,[4,i.melFunc('{MEL_GET_CONTENT("'+t+'","MATCH")}')]);case 1:e.melData=n.sent(),this.loadMelDataToList(this.melData,i),this._isLoaded=!0,n.label=2;case 2:return[2]}}))}))},e.load=function(t,i){e._isLoaded&&e._name===t||(e._name=t,e.tag="MEL_GET_CONTENT",e.melData=i.melFunc('{MEL_GET_CONTENT("'+t+'","MATCH")}'),e.loadMelDataToList(e.melData,i),e._isLoaded=!0)},e.loadMelDataToList=function(t,i){for(var n=I(t).toList(),r=0;r<n.length;r++)e.push(new _({data:n[r],mel:i}))},e}return u(e,t),e}(Array),mt=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},pt=function(){function e(t,e){var i=this;this._window=t,this._document=e,this._melContent={},this._problemExternalList=[],this.externalAsync=function(){return mt(i,void 0,void 0,(function(){var t;return d(this,(function(e){switch(e.label){case 0:return this._external?[2,this._external]:(t=this,[4,this._simulator.isSimulatorAsync()]);case 1:return t._external=e.sent()?this._simulator.externalSimulator:this._window.opener&&this._window.opener.external?this._window.opener.external:this._window.external,[2,this._external]}}))}))},this.melContent=function(t,e){return void 0===e&&(e=!1),(null==i._melContent[t]||e)&&(i._melContent[t]=new dt,i._melContent[t].load(t,i.emrMel)),i._melContent[t]},this.demographicsAsync=function(){return mt(i,void 0,void 0,(function(){var t,e,i;return d(this,(function(n){switch(n.label){case 0:return t=this,this._demographics?(e=this._demographics,[3,6]):[3,1];case 1:return[4,this.externalAsync()];case 2:return n.sent()?[4,this.externalAsync().then((function(t){return t.Demographics}))]:[3,4];case 3:return i=n.sent(),[3,5];case 4:i=this._demographics,n.label=5;case 5:e=i,n.label=6;case 6:return t._demographics=e,[2,new Y(this._demographics)]}}))}))},this.allergiesAsync=function(){return mt(i,void 0,void 0,(function(){var t,e,i;return d(this,(function(n){switch(n.label){case 0:return t=this,this._allergiesJson?(e=this._allergiesJson,[3,6]):[3,1];case 1:return[4,this.externalAsync()];case 2:return n.sent()?[4,this.externalAsync().then((function(t){return t.Allergies}))]:[3,4];case 3:return i=n.sent(),[3,5];case 4:i=this._allergiesJson,n.label=5;case 5:e=i,n.label=6;case 6:return t._allergiesJson=e,[2,new Z(this._allergiesJson)]}}))}))},this.allergiesJson=function(){return i._allergiesJson=i._allergiesJson?i._allergiesJson:i.external?i.external.Allergies:i._allergiesJson,i._allergiesJson},this.problemsJson=function(){return i._problemsJson=i._problemsJson?i._problemsJson:i.external?i.external.Problems:i._problemsJson,i._problemsJson},this.patientAsync=function(){return mt(i,void 0,void 0,(function(){var t,e,i;return d(this,(function(n){switch(n.label){case 0:return void 0!==this._patient?[3,3]:(t=this,e=rt.bind,i=[void 0,this.emrMel],[4,this.demographicsAsync()]);case 1:return i=i.concat([n.sent()]),[4,this.allergiesAsync()];case 2:t._patient=new(e.apply(rt,i.concat([n.sent()]))),n.label=3;case 3:return[2,this._patient]}}))}))},this.clinicalDocumentAsync=function(){return mt(i,void 0,void 0,(function(){var t,e,i;return d(this,(function(n){switch(n.label){case 0:return void 0!==this._clinicalDocument?[3,2]:(t=this,e=ct.bind,i=[void 0,this.emrMel],[4,this]);case 1:t._clinicalDocument=new(e.apply(ct,i.concat([n.sent()]))),n.label=2;case 2:return[2,this._clinicalDocument]}}))}))},this.melFuncAsync=function(t,e){return void 0===e&&(e=!1),mt(i,void 0,void 0,(function(){return d(this,(function(i){switch(i.label){case 0:return[4,this.externalAsync().then((function(i){return i.EvaluateMel(t,e)}))];case 1:return[2,i.sent()]}}))}))},this._simulator=new lt(this._window),this._window._melOpener=this.emrMel,this._window._appOpener=this.emrApp,this._obsTermsMap=new l,this._emrWindow=new q(this.emrMel,this.emrApp,this._window,this._document)}return Object.defineProperty(e.prototype,"enterpriseId",{get:function(){return this.emrApp.enterpriseId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"external",{get:function(){return this._external||(this._external=this._window.opener&&this._window.opener.external?this._window.opener.external:this._window.external,void 0===this._external.IsDebugMode&&(this._external=this._simulator.externalSimulator)),this._external},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"databaseVersion",{get:function(){return this.emrApp.databaseVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version=null!=this._version?this._version:this.emrMel.melFunc("{VER_EMR()}"),this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emrWindow",{get:function(){return this._emrWindow},enumerable:!1,configurable:!0}),e.prototype.emrContentsAsync=function(t){return mt(this,void 0,void 0,(function(){var e;return d(this,(function(i){switch(i.label){case 0:return[4,(e=new dt).loadAsync(t,this.emrMel)];case 1:return i.sent(),[2,e]}}))}))},Object.defineProperty(e.prototype,"emrMel",{get:function(){return this._emrMel=null!=this._window.opener&&null!=this._window.opener._melOpener?this._window.opener._melOpener:null!=this._emrMel?this._emrMel:new W(this._window,this._simulator),this._emrMel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emrApp",{get:function(){return this._emrApp=null!=this._window.opener&&null!=this._window.opener._appOpener?this._window.opener._appOpener:null!=this._emrApp?this._emrApp:new X(this._window,this._simulator),this._emrApp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseServicesUrl",{get:function(){return this._baseServicesUrl=this._baseServicesUrl?this._baseServicesUrl:this.external?this.external.BaseServicesUrl:this._baseServicesUrl,this._baseServicesUrl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"demographics",{get:function(){return this._demographics=this._demographics?this._demographics:this.external?this.external.Demographics:this._demographics,new Y(this._demographics)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allergies",{get:function(){return this._allergiesJson=this._allergiesJson?this._allergiesJson:this.external?this.external.Allergies:this._allergiesJson,new Z(this._allergiesJson)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"problems",{get:function(){if(0===this._problemExternalList.length){var t=this.problemsJson();if(t)for(var e=JSON.parse(t),i=0;i<e.length;i++)this._problemExternalList.push(Q.fromExternal(e[i]))}return this._problemExternalList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"patient",{get:function(){return void 0===this._patient&&(this._patient=new rt(this.emrMel,this.demographics,this.allergies)),this._patient},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"users",{get:function(){return void 0===this._users&&(this._users=new st(this.emrMel)),this._users},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clinicalDocument",{get:function(){return void 0===this._clinicalDocument&&(this._clinicalDocument=new ct(this.emrMel,this)),this._clinicalDocument},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"obsTermsMap",{get:function(){return this._obsTermsMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LocationType",{get:function(){return t.LocationType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"UserCallFunction",{get:function(){return t.UserCallFunction},enumerable:!1,configurable:!0}),e}(),ft=function(){function t(t,e){if(this._window=t,this._document=e,void 0===this._window&&void 0===this._document)throw new Error("MdObject requires a _window with a _document");console.info("The mdObject Version:"+this.version),this._emr=new pt(this._window,this._document)}return Object.defineProperty(t.prototype,"version",{get:function(){return"2.0.0-alpha.2.4"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"productType",{get:function(){return"GE"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emr",{get:function(){return this._emr},enumerable:!1,configurable:!0}),t}(),_t=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function a(t){try{l(n.next(t))}catch(t){s(t)}}function o(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},gt=function(e){var i=this;this._mel=e,this.state=t.ObjectState.None,this.status=t.ObjectStatus.Unchanged,this.name="",this.criticalIndicator=t.AllergyCriticality.undefined,this.classification=t.AllergyClassification.none,this.description="",this.gpiCode="",this.severity="",this.allergyId="",this.reactionCode=32,this.reasonForRemoval=t.AllergyReasonForRemoval.none,this.save=function(){return _t(i,void 0,void 0,(function(){var e,i;return d(this,(function(n){switch(n.label){case 0:switch(this.state){case t.ObjectState.Add:return[3,1];case t.ObjectState.Update:return[3,3];case t.ObjectState.Remove:return[3,5]}return[3,7];case 1:return[4,this._mel.melFunc('{MEL_ADD_ALLERGY("'+this.toAddString()+'")}')];case 2:if(""!==(e=n.sent()))throw i="Allergy.save error. Code is "+e,console.error(i),new Error("Allergy not saved. "+i);return this.status=t.ObjectStatus.Added,this.state=t.ObjectState.None,[3,7];case 3:return[4,this._mel.melFunc('{MEL_CHANGE_ALLERGY("'+this.toChangeString()+'")}')];case 4:if("0"!==(e=n.sent()))throw i="Allergy.save error. Code is "+e,console.error(i),new Error("Allergy not saved. "+i);return this.status=t.ObjectStatus.Updated,this.state=t.ObjectState.None,[3,7];case 5:return[4,this._mel.melFunc('{MEL_REMOVE_ALLERGY("'+this.toRemoveString()+'")}')];case 6:if("0"!==(e=n.sent()))throw i="Allergy.save error. Code is "+e,console.error(i),new Error("Allergy not saved. "+i);return this.status=t.ObjectStatus.Removed,this.state=t.ObjectState.None,[3,7];case 7:return[2]}}))}))},this.toChangeString=function(){return i.allergyId+'","'+i.description+'","'+(i.onSetDate?v.dateToString(i.onSetDate):"")+'","'+(i.stopDate?v.dateToString(i.stopDate):"")+'","'+i.criticalIndicator+'","'+i.classification},this.toRemoveString=function(){return i.allergyId+'","'+(i.stopDate?v.dateToString(i.stopDate):"")+'","'+(i.reasonForRemoval!==t.AllergyReasonForRemoval.none?i.reasonForRemoval:"")},this.toAddString=function(){return i.name+'","'+i.description+'","'+(i.onSetDate?v.dateToString(i.onSetDate):"")+'","'+i.allergyId+'",'+i.reactionCode+',"'+i.gpiCode+'","'+(i.stopDate?v.dateToString(i.stopDate):"")+'","'+i.criticalIndicator+'","'+i.classification}};!function(t){var e;try{e=new ft(t,t.document),t.mdObject=e}catch(t){console.error(t)}}(window),t.Address=G,t.Allergies=M,t.Allergy=gt,t.AllergyList=E,t.AllergyListRemoved=O,t.CarePlan=B,t.ClinicalDocument=ct,t.Emr=pt,t.EmrApp=X,t.EmrContent=_,t.EmrContents=dt,t.EmrMel=W,t.EmrWindow=q,t.FlowsheetObservation=tt,t.Immunization=S,t.Insurance=U,t.Location=h,t.MdObject=ft,t.Measurement=F,t.Measurements=R,t.ObsTermsMap=l,t.Observation=x,t.ObservationType=N,t.Patient=rt,t.PatientContact=g,t.Phone=H,t.Problem=D,t.Problems=it,t.Protocol=j,t.ReferringProvider=z,t.ReferringProviderPhone=k,t.System=v,t.User=P,t.Users=st,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=mdobject-mdobject.umd.min.js.map